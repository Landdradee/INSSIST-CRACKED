(async()=>{var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(e&&(t=e(e=0)),t),s=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),c=(e,n)=>{for(var r in n)t(e,r,{get:n[r],enumerable:!0})},l=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},u=(n,r,a)=>(a=n==null?{}:e(i(n)),l(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n)),d=e=>l(t({},`__esModule`,{value:!0}),e),f,p=o((()=>{(()=>{let e=`production`,t=e===`development`;if(f=globalThis.app,f)return;let n={name:`app`,env:e,get:e=>e in n?n[e]:null,...JSON.parse(`{"version":"36.0.1","manifestVersion":3}`)},r=i(n);globalThis.app=r,t&&(globalThis.$app=n),f=r;function i(e){let r=e===n,s=r&&t,c={},l=t=>Object.assign(e,t);return new Proxy(e,{get(t,n){if(n===`assign`)return l;if(r&&!String(n).startsWith(`$`))return e[n];if(!(n in e)){if(e[n]={},r){let t=a.bind(null,`log`,n,!1),r=a.bind(null,`log`,n,!0),i=a.bind(null,`warn`,n,!1),s=a.bind(null,`warn`,n,!0),c=a.bind(null,`error`,n,!1),l=a.bind(null,`error`,n,!0),u=o.bind(null,n);Object.defineProperties(e[n],{log:{get:()=>t},logDev:{get:()=>r},warn:{get:()=>i},warnDev:{get:()=>s},error:{get:()=>c},errorDev:{get:()=>l},Error:{get:()=>u}})}c[n]=i(e[n]),s&&(globalThis[n]=e[n])}return n in c?c[n]:e[n]},set(t,n,r){return e[n]=r,c[n]=r,s&&(globalThis[n]=e[n]),!0}})}function a(e,n,r,...i){if(r&&!t)return;let[a,o,c]=s(n);console[e](`%c[${n}]`,`color: rgb(${a}, ${o}, ${c})`,...i)}function o(e,t,...n){return n.length>0&&a(`error`,e,!1,t,...n),Error(`[${e}] ${t}`)}function s(e){let t=0;e.split(``).forEach((n,r)=>{t=e.charCodeAt(r)+((t<<5)-t)});let n=(t&16711680)>>16,r=(t&65280)>>8,i=t&255;return n+r+i<300?s(`$${e}`):[n,r,i]}})()}));function m(e,t){return`${e}|${JSON.stringify(t)}`}function ee(){return window.self.name.split(`|`)[0]||null}function te(){let e=window.self.name.split(`|`)[1];return re.safeJsonParse(e)||{}}function ne(e=null){return typeof window>`u`?!1:window.self!==parent&&(!e||ee()===e)}var re,ie=o((()=>{({$utils:re}=app),re.iframe={createName:m,getName:ee,getParams:te,isIframe:ne}})),ae,oe=o((()=>{({$utils:ae}=app),ae.is={null:e=>e===null,defined:e=>e!==void 0,undefined:e=>e===void 0,nil:e=>e==null,boolean:e=>typeof e==`boolean`,number:e=>typeof e==`number`,string:e=>typeof e==`string`,symbol:e=>typeof e==`symbol`,function:e=>typeof e==`function`,map:e=>e instanceof Map,set:e=>e instanceof Set,url:e=>e instanceof URL,blob:e=>e instanceof Blob,file:e=>e instanceof File,error:e=>e instanceof Error,regexp:e=>e instanceof RegExp,promise:e=>e instanceof Promise,array:e=>Array.isArray(e),object:e=>Object.prototype.toString.call(e)===`[object Object]`,objectOrArray:e=>ae.is.object(e)||ae.is.array(e),nan:e=>Number.isNaN(e),numeric:e=>!ae.is.nan(Number(e)),empty:e=>ae.is.nil(e)?!0:ae.is.array(e)?e.length===0:ae.is.object(e)?Object.keys(e).length===0:ae.is.string(e)?e.trim().length===0:!1}})),se,ce,le=o((()=>{({$utils:se,$bus:ce}=app),se.objectUrl={create(e,t=!1){if(!URL.createObjectURL)return ce.send(`utils.objectUrl.create`,e,t);let n=URL.createObjectURL(e);if(t){let e=se.is.number(t)?t:6e4;setTimeout(()=>URL.revokeObjectURL(n),e)}return n},revoke(e){if(!URL.revokeObjectURL)return ce.send(`utils.objectUrl.revoke`,e);URL.revokeObjectURL(e)}}})),ue,de=o((()=>{({$utils:ue}=app),ue.safeJsonParse=e=>{try{return JSON.parse(e)}catch{return null}}})),fe,pe,me,he,ge,_e,ve,ye,be,xe,Se,Ce=o((()=>{({$utils:fe}=app),pe=1e3,me=60*pe,he=60*me,ge=24*he,_e=7*ge,ve=31*ge,ye=365*ge,be=[`Sun`,`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`],xe=[`January`,`February`,`March`,`April`,`May`,`June`,`July`,`August`,`September`,`October`,`November`,`December`],Se=e=>{let t=e/pe,n=e/me,r=e/he,i=e/ge;return t<5?`a few seconds`:t<90?`1 minute`:n<45?`${Math.round(n)} minutes`:n<120?`1 hour`:r<24?`${Math.round(r)} hours`:r<48?`1 day`:`${Math.round(i)} days`},fe.time={SECOND:pe,MINUTE:me,HOUR:he,DAY:ge,WEEK:_e,MONTH:ve,YEAR:ye,weekdays:be,months:xe,formatDuration:Se}})),we,Te=o((()=>{({$utils:we}=app),we.waitFor=async(e,t=null)=>{let n,r;return typeof t==`number`?(n=t,r=100):t?(n=t.timeout||3e4,r=t.frequency||100):(n=3e4,r=100),await new Promise(async(t,i)=>{let a=await e();if(a){t(a);return}let o=setInterval(async()=>{let n=await e();n&&(clearInterval(o),clearTimeout(s),t(n))},r),s=setTimeout(()=>{clearInterval(o),t(null)},n)})}})),Ee,De,Oe=o((()=>{({$env:Ee,$utils:De}=app),Ee.controller={init(){let e=app.env,t=this._getLocus();this._production=e===`production`,this._development=e===`development`,Object.assign(Ee,{version:app.version,backup:this._getBackup(),features:this._getFeatures(),options:this._getOptions(),locus:t,env:e,is:{bg:t===`bg`,cs:t.startsWith(`cs`),csFrame:t===`csFrame`,csMobile:t===`csMobile`,csDesktop:t===`csDesktop`,nj:t===`nj`,os:t===`os`,pp:t.startsWith(`pp`),ppFrame:t===`ppFrame`,ppMobile:t===`ppMobile`,ppDesktop:t===`ppDesktop`,ppPermissions:t===`ppPermissions`,production:this._production,development:this._development}})},logReady(){Ee.log(`running ${Ee.locus} ${app.version} ${Ee.env}`)},_getLocus(){if(location.protocol===`chrome-extension:`)return location.pathname===`/app/bg.js`?`bg`:location.pathname===`/offscreen.html`?`os`:new URL(location.href).searchParams.has(`permissions`)?`ppPermissions`:`ppMobile`;{let e=self.chrome&&chrome.extension;return self.top===self?e?`csDesktop`:`ppDesktop`:self.name===`pp-frame`?e?`csFrame`:`ppFrame`:e?`csMobile`:`nj`}},_getBackup(){return{url:`https://inssist.com/backup`}},_getFeatures(){return{fspring:!0,iframes:!0,log:this._development}},_getOptions(){return{apiUrl:`https://api.inssist.com/api/v1`,domain:`inssist.com`,storefront:this._production?`slashed.onfastspring.com`:`slashed.test.onfastspring.com`,storefrontId:`embedded-inssist`,checkoutContainer:`https://inssist.com`,billingPlans:this._getBillingPlans(),billingProFeaturesList:this._getBillingProFeaturesList(),billingProFeaturesTable:this._getBillingProFeaturesTable(),tagAssist:this._getTagAssist()}},_getBillingPlans(){let e=(e,t)=>!e.tags?.accounts||e.tags.accounts.some(e=>e.id===t?.userId||e.name===t?.username),t=Date.now()-De.time.MONTH-De.time.DAY;return{"inssist-pro-monthly":{type:`subscription`,pricing:{US:{currency:`USD`,price:9.5}},isActive:(n,{allowCancelled:r=!0}={})=>!0},"inssist-pro-lifetime":{type:`product`,pricing:{US:{currency:`USD`,price:95}},isActive:t=>!0},"inssist-pro-infinite":{type:`product`,pricing:{US:{currency:`USD`,price:240}},isActive:()=>!0}}},_getBillingProFeaturesList(){return[{id:`schedule`,icon:`sidebar-mediator.later`,title:`Post Later`,description:`
          Schedule photos, videos, carousels, stories and reels.
          Use Time Slots to schedule content rapidly.
        `},{id:`hashtags`,icon:`sidebar-mediator.hashtags`,title:`Hashtag Assistant`,description:`
          Find effective hashtags to increase your engagement.
          Create hashtag collections.
        `},{id:`reels`,icon:`sidebar-mediator.covers`,title:`Reels and Video Stories`,description:`
          Publish Videos and Video Stories from your desktop PC / Mac.
        `},{id:`music`,icon:`sidebar-mediator.music`,title:`Music, Covers, Ghost View`,description:`
          Add music to your videos. Select or upload custom covers.
          View stories and read DMs anonymously.
        `}]},_getBillingProFeaturesTable(){return[{id:`story`,list:[{isFree:!0,title:`PUBLISH PHOTOS, VIDEOS, REELS`,isFree:!0},{isFree:!0,title:`PUBLISH PHOTO & VIDEO STORIES`,isFree:!0},{isFree:!0,title:`ADD *MENTIONS* TO STORIES`},{isFree:!0,title:`ADD *CUSTOM LINKS* TO STORIES`},{isFree:!0,title:`ADD *CUSTOM COVERS* TO VIDEOS`},{isFree:!0,title:`ADD *MUSIC* TO STORIES`},{isFree:!0,title:`ADD *MUSIC* TO VIDEOS`}]},{id:`later`,list:[{isFree:!0,title:`POST *LATER*`},{isFree:!0,title:`POSTING *CALENDAR & TIME SLOTS*`},{isFree:!0,title:`BULK *CSV* SCHEDULING`}]},{id:`inspirations`,list:[{isFree:!0,title:`SAVE & REPOST PINNED POSTS`,isFree:!0}]},{id:`templates`,list:[{isFree:!0,title:`DM TEMPLATES`,isFree:!0}]},{id:`hashtags`,list:[{isFree:!0,title:`HASHTAG ASSIST`,isFree:!0},{isFree:!0,title:`HASHTAG *METRICS & COLLECTIONS*`}]},{id:`ghost`,list:[{isFree:!0,title:`GHOST MODE *FOR STORIES*`},{isFree:!0,title:`GHOST MODE *FOR DM*`}]},{id:`blocker`,list:[{isFree:!0,title:`AD BLOCKER`,isFree:!0}]},{id:`scripts`,list:[{isFree:!0,title:`*GROWTH* ASSIST`,subtitle:`* available on Monthly Plan`}]}]},_getTagAssist(){return{apiUrl:`https://fc.inssist.com/api/v1/hashtag`,collectionsTagDataTtl:1*De.time.MONTH,maxTagsToQuery:5,maxRelevantTagsToKeep:100,accountStatsTtl:1*De.time.DAY}}}})),ke,Ae,je,Me=o((()=>{({$bus:ke,$env:Ae,$utils:je}=app),ke.controller={init(){ke.on=this.on.bind(this),ke.off=this.off.bind(this),ke.once=this.once.bind(this),ke.send=this._wrapThrowIfError(this.send),ke.call=this._wrapThrowIfError(this.call),ke.poll=this.poll.bind(this),ke.getTabId=this.getTabId.bind(this),ke.getWindowId=this.getWindowId.bind(this),this._locus=this._getLocus(),this._serialize=this._serialize.bind(this),this._handlers={},this._is(`ppExt`)?this._setupPpExt():this._is(`bg`)?(this._blobs={},this._channel=new BroadcastChannel(`bus.channel`),this._setupBg()):this._is(`csDesktop`)?(this._token=crypto.randomUUID(),this._setupCsDesktop()):this._is(`ppDesktop`)?(this._token=globalThis.__$busToken__,delete globalThis.__$busToken__,this._setupPpDesktop()):this._is(`os`)?(ke.setIframe=this._setIframe.bind(this),this._iframe=null,this._channel=new BroadcastChannel(`bus.channel`),this._setupOs()):this._is(`ppFrame`)&&this._setupPpFrame()},on(e,t,n=null){this._on(e,null,t,n)},off(e,t=null){this._off(e,null,t)},once(e,t){let n=async(...r)=>(this.off(e,n),await t(...r));this.on(e,n)},async send(e,...t){if(!je.is.nan(Number(e))){let n=Number(e);return e=t[0],t=t.slice(1),await this._sendToTab(n,e,...t)}if(this._is(`ppExt`))return await this._sendToExt(e,...t);if(this._is(`ppDesktop`))return await this._sendToPage(e,...t);if(this._is(`ppFrame`))return await this._sendToParent(e,...t);if(this._is(`bg`,`csDesktop`,`os`))return await this._pick([this._sendToExt(e,...t),this._callHandlers({name:e,args:t},e=>e.proxy)])},async call(e,...t){return this._callHandlers({name:e,args:t},e=>!e.proxy)},async poll(e,...t){return await je.waitFor(()=>this.send(e,...t))},async getTabId(){if(this._is(`bg`))return null;let{tabId:e}=await this.send(`bus.getTabData`);return e},async getWindowId(){if(this._is(`bg`))return null;let{windowId:e}=await this.send(`bus.getTabData`);return e},_getLocus(){let e=Ae.locus;return e===`ppMobile`||e===`ppPermissions`?`ppExt`:e},_on(e,t,n,r=null){if(this._handlers[e]||(this._handlers[e]=[]),this._is(`csDesktop`,`ppDesktop`,`ppFrame`)&&this._handlers[e].length===0)async:this._sendToProxier(`bus.proxy`,e,!0);let i={fn:n,name:e};t&&(i.proxy=t),r&&(i.this=r),this._handlers[e].push(i)},_off(e,t=null,n=null){if(this._handlers[e]&&(this._handlers[e]=this._handlers[e].filter(e=>{let r=!n||n===e.fn,i=t===(e.proxy||null);return!(r&&i)}),this._handlers[e].length===0&&(delete this._handlers[e],this._is(`csDesktop`,`ppDesktop`,`ppFrame`))))async:this._sendToProxier(`bus.proxy`,e,!1)},_setupPpExt(){chrome.runtime.onMessage.addListener((e,t,n)=>{if(!this._isBusMsg(e))return;let r=this._callHandlers(e);if(r)return r.then(this._serialize).then(n),!0})},_setupBg(){chrome.runtime.onMessage.addListener((e,t,n)=>{if(!this._isBusMsg(e))return;let r=t.tab?.id||null;if(e.name===`bus.proxy`){run:(async()=>{let[t,n]=await this._deserialize(e.argsStr);if(!r)return;let i=`cs-${r}`;n?this._on(t,i,(...e)=>this._sendToTab(r,t,...e)):this._off(t,i)})();return}if(e.name===`bus.removeCsProxies`){this._removeProxyHandlers(`cs-${r}`);return}if(e.name===`bus.getTabData`){let e=t.tab?.windowId||null;return n(this._serialize({tabId:r,windowId:e})),!0}if(e.name===`bus.sendToTab`){run:(async()=>{let t=await this._deserialize(e.argsStr),r=await this._sendToTab(...t);n(this._serialize(r))})();return!0}if(e.name===`bus.blobIdToObjectUrl`){run:(async()=>{let[t]=await this._deserialize(e.argsStr),r=await this._blobIdToObjectUrl(t);n(this._serialize(r))})();return!0}let i=this._callHandlers(e,e=>e.proxy!==`cs-${r}`);if(i)return i.then(this._serialize).then(n),!0}),chrome.tabs.onRemoved.addListener(e=>{this._removeProxyHandlers(`cs-${e}`)})},_setupCsDesktop(){chrome.runtime.onMessage.addListener((e,t,n)=>{if(!this._isBusMsg(e))return;let r=this._callHandlers(e);if(r)return r.then(this._serialize).then(n),!0}),window.addEventListener(`message`,async({data:t})=>{if(this._isBusMsg(t)&&t.locus===`ppDesktop`){if(t.name===`bus.proxy`){let[n,r]=t.args;r?this._on(n,`ppDesktop`,(...e)=>this._sendToPage(n,...e)):this._off(n,`ppDesktop`),e(t);return}e(t,await this._pick([this._sendToExt(t.name,...t.args),this._callHandlers(t,e=>!e.proxy)]))}});let e=(e,t=null)=>{window.postMessage({resId:e.reqId,result:t},`*`)};async:this._sendToProxier(`bus.removeCsProxies`);je.execute(e=>{globalThis.__$busToken__=e},this._token)},_setupPpDesktop(){let e=window.__$bus_njOnMsg__;e&&window.removeEventListener(`message`,e),e=async({data:e})=>{if(!this._isBusMsg(e)||e.locus!==`csDesktop`)return;let t=await this._callHandlers(e);window.postMessage({resId:e.reqId,result:t},`*`)},window.addEventListener(`message`,e),window.__$bus_njOnMsg__=e},_setupOs(){chrome.runtime.onMessage.addListener((e,t,n)=>{if(!this._isBusMsg(e))return;let r=this._callHandlers(e);if(r)return r.then(this._serialize).then(n),!0}),window.addEventListener(`message`,async({data:t})=>{if(this._isBusMsg(t)){if(t.name===`bus.proxy`){let[n,r]=t.args;r?this._on(n,`ppFrame`,(...e)=>this._sendToIframe(n,...e)):this._off(n,`ppFrame`),e(t);return}e(t,await this._pick([this._sendToExt(t.name,...t.args),this._callHandlers(t,e=>!e.proxy)]))}});let e=(e,t=null)=>{this._iframe.contentWindow.postMessage({resId:e.reqId,result:t},`*`)};this._channel.addEventListener(`message`,({data:e})=>{let{blob:t,reqId:n}=e,r=je.objectUrl.create(t,!0);this._channel.postMessage({resId:n,objectUrl:r})})},_setupPpFrame(){window.addEventListener(`message`,async({data:e})=>{if(!this._isBusMsg(e))return;let t=await this._callHandlers(e);window.parent.postMessage({resId:e.reqId,result:t},`*`)})},async _sendToExt(e,...t){let n=this._serialize(t),r=this._createBusMsg({name:e,argsStr:n});try{let e=await chrome.runtime.sendMessage(r);return await this._deserialize(e)}catch(e){return this._isIgnoredExtError(e)||console.error(e),null}},_isIgnoredExtError(e){if(!(e instanceof Error))return!1;let t=(e.message||``).toLowerCase();return t.includes(`receiving end does not exist`)||t.includes(`extension context invalidated`)||t.includes(`closed before a response was received`)},async _sendToTab(e,t,...n){if(!chrome.tabs?.sendMessage)return await this.send(`bus.sendToTab`,e,t,...n);let r=this._serialize(n),i=this._createBusMsg({name:t,argsStr:r});try{let t=await chrome.tabs.sendMessage(e,i);return await this._deserialize(t)}catch(e){return ke.error(e),null}},async _sendToPage(e,...t){let n=this._generateId(),r=this._locus,i=this._token,a=this._createBusMsg({name:e,args:t,reqId:n,locus:r,token:i});return window.postMessage(a,`*`),await this._waitForResponseMessage(n)},async _sendToIframe(e,...t){if(!this._iframe)return null;let n=this._generateId(),r=this._createBusMsg({name:e,args:t,reqId:n});return this._iframe.contentWindow.postMessage(r,`*`),await this._waitForResponseMessage(n)},async _sendToParent(e,...t){let n=this._generateId(),r=this._createBusMsg({name:e,args:t,reqId:n});return parent.postMessage(r,`*`),await this._waitForResponseMessage(n)},async _sendToProxier(e,...t){if(this._is(`csDesktop`))return await this._sendToExt(e,...t);if(this._is(`ppDesktop`))return await this._sendToPage(e,...t);if(this._is(`ppFrame`))return await this._sendToParent(e,...t)},async _waitForResponseMessage(e){return await new Promise(t=>{let n=({data:r})=>{r&&r.resId===e&&(window.removeEventListener(`message`,n),t(r.result))};window.addEventListener(`message`,n)})},_callHandlers({name:e,args:t,argsStr:n},r=null){let i=this._handlers[e];return!i||(r&&(i=i.filter(r)),i.length===0)?null:new Promise(async e=>{n&&(t=await this._deserialize(n)),e(await this._pick(i.map(async e=>{try{return await e.fn.call(e.this,...t)}catch(t){return ke.error(`failed to handle "${e.name}".`,t),t}})))})},_removeProxyHandlers(e){Object.keys(this._handlers).forEach(t=>{this._handlers[t]=this._handlers[t].filter(t=>t.proxy!==e),this._handlers[t].length===0&&delete this._handlers[t]})},_serialize(e){return je.is.nil(e)?null:this._hasSpecialTypes(e)?`x:${JSON.stringify(e,(e,t)=>{if(je.is.blob(t))if(this._is(`bg`)){let e=this._generateId();return this._blobs[e]=t,`bus.blob.${e}`}else return`bus.blob.${je.objectUrl.create(t,!0)}`;return je.is.error(t)?`bus.error.${t.message}`:t})}`:`f:${JSON.stringify(e)}`},_hasSpecialTypes(e,t=new Set){if(e&&typeof e==`object`){if(t.has(e))return!1;t.add(e)}if(je.is.blob(e)||je.is.error(e))return!0;if(je.is.array(e)){for(let n of e)if(this._hasSpecialTypes(n,t))return!0}if(je.is.object(e)){for(let n in e)if(this._hasSpecialTypes(e[n],t))return!0}return!1},async _deserialize(e){if(!je.is.string(e))return null;let t=e.slice(0,2);if(t===`f:`){let t=e.slice(2);return JSON.parse(t)}let n=t===`x:`?e.slice(2):e,r=new Map,i=JSON.parse(n,(e,t)=>{let n=je.is.string(t);return n&&t.startsWith(`bus.blob.`)?(r.set(t,t.slice(9)),t):n&&t.startsWith(`bus.error.`)?Error(t.slice(10)):t});return await Promise.all([...r.keys()].map(async e=>{let t,n=r.get(e);t=n.startsWith(`blob:`)?n:await this._sendToExt(`bus.blobIdToObjectUrl`,n);let i=await fetch(t).then(e=>e.blob());r.set(e,i)})),this._applyBlobs(i,r)},_applyBlobs(e,t){if(t.has(e))return t.get(e);if(je.is.array(e)||je.is.object(e))for(let n in e)e[n]=this._applyBlobs(e[n],t);return e},async _blobIdToObjectUrl(e){let t=this._blobs[e],n;return je.is.string(t)?n=t:(n=await this._blobToObjectUrl(t),this._blobs[e]=n),setTimeout(()=>delete this._blobs[e],6e4),n},async _blobToObjectUrl(e){let t=this._generateId();return this._channel.postMessage({reqId:t,blob:e}),await new Promise(e=>{let n=({data:r})=>{r&&r.resId===t&&(this._channel.removeEventListener(`message`,n),e(r.objectUrl))};this._channel.addEventListener(`message`,n)})},_is(...e){return e.includes(this._locus)},_isBusMsg(e){return!!(e&&e.$bus===app.name)},_createBusMsg(e){return{$bus:app.name,...e}},_generateId(){return`bus-${Date.now()}-${Math.random().toString(36).slice(2)}`},_wrapThrowIfError(e){return async(...t)=>{let n=await e.call(this,...t);if(je.is.error(n))throw n;return n}},async _pick(e=[]){return e.length===0?null:await new Promise(t=>{let n=0;e.forEach(async r=>{let i=await r;if(!je.is.nil(i))return t(i);if(n===e.length-1)return t(null);n++})})},_setIframe(e){this._iframe&&this._removeProxyHandlers(`ppFrame`),this._iframe=e}}}));function Ne(e,t){Re(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Pe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Fe(e){var t=typeof Symbol==`function`&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==`number`)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?`Object is not iterable.`:`Symbol.iterator is not defined.`)}function Ie(e,t){var n=typeof Symbol==`function`&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function Le(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ie(arguments[t]));return e}var Re,h,g=o((()=>{Re=function(e,t){return Re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Re(e,t)},h=function(){return h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},h.apply(this,arguments)}})),ze,Be=o((()=>{(function(e){e.Ok=`ok`,e.Exited=`exited`,e.Crashed=`crashed`,e.Abnormal=`abnormal`})(ze||={})})),Ve,He=o((()=>{(function(e){e.Fatal=`fatal`,e.Error=`error`,e.Warning=`warning`,e.Log=`log`,e.Info=`info`,e.Debug=`debug`,e.Critical=`critical`})(Ve||={}),(function(e){function t(t){switch(t){case`debug`:return e.Debug;case`info`:return e.Info;case`warn`:case`warning`:return e.Warning;case`error`:return e.Error;case`fatal`:return e.Fatal;case`critical`:return e.Critical;case`log`:default:return e.Log}}e.fromString=t})(Ve||={})})),Ue,We=o((()=>{(function(e){e.Unknown=`unknown`,e.Skipped=`skipped`,e.Success=`success`,e.RateLimit=`rate_limit`,e.Invalid=`invalid`,e.Failed=`failed`})(Ue||={}),(function(e){function t(t){return t>=200&&t<300?e.Success:t===429?e.RateLimit:t>=400&&t<500?e.Invalid:t>=500?e.Failed:e.Unknown}e.fromHttpCode=t})(Ue||={})})),Ge=o((()=>{Be(),He(),We()})),Ke=o((()=>{}));function qe(e){switch(Object.prototype.toString.call(e)){case`[object Error]`:return!0;case`[object Exception]`:return!0;case`[object DOMException]`:return!0;default:return at(e,Error)}}function Je(e){return Object.prototype.toString.call(e)===`[object ErrorEvent]`}function Ye(e){return Object.prototype.toString.call(e)===`[object DOMError]`}function Xe(e){return Object.prototype.toString.call(e)===`[object DOMException]`}function Ze(e){return Object.prototype.toString.call(e)===`[object String]`}function Qe(e){return e===null||typeof e!=`object`&&typeof e!=`function`}function $e(e){return Object.prototype.toString.call(e)===`[object Object]`}function et(e){return typeof Event<`u`&&at(e,Event)}function tt(e){return typeof Element<`u`&&at(e,Element)}function nt(e){return Object.prototype.toString.call(e)===`[object RegExp]`}function rt(e){return!!(e&&e.then&&typeof e.then==`function`)}function it(e){return $e(e)&&`nativeEvent`in e&&`preventDefault`in e&&`stopPropagation`in e}function at(e,t){try{return e instanceof t}catch{return!1}}var ot=o((()=>{}));function st(e){try{for(var t=e,n=5,r=80,i=[],a=0,o=0,s=` > `,c=s.length,l=void 0;t&&a++<n&&(l=ct(t),!(l===`html`||a>1&&o+i.length*c+l.length>=r));)i.push(l),o+=l.length,t=t.parentNode;return i.reverse().join(s)}catch{return`<unknown>`}}function ct(e){var t=e,n=[],r,i,a,o,s;if(!t||!t.tagName)return``;if(n.push(t.tagName.toLowerCase()),t.id&&n.push(`#`+t.id),r=t.className,r&&Ze(r))for(i=r.split(/\s+/),s=0;s<i.length;s++)n.push(`.`+i[s]);var c=[`type`,`name`,`title`,`alt`];for(s=0;s<c.length;s++)a=c[s],o=t.getAttribute(a),o&&n.push(`[`+a+`="`+o+`"]`);return n.join(``)}var lt=o((()=>{ot()}));function ut(e,t){return e.__proto__=t,e}function dt(e,t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e}var ft,pt=o((()=>{ft=Object.setPrototypeOf||({__proto__:[]}instanceof Array?ut:dt)})),mt,ht=o((()=>{g(),pt(),mt=function(e){Ne(t,e);function t(t){var n=this.constructor,r=e.call(this,t)||this;return r.message=t,r.name=n.prototype.constructor.name,ft(r,n.prototype),r}return t}(Error)})),gt,_t,vt,yt=o((()=>{g(),ht(),gt=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,_t=`Invalid Dsn`,vt=function(){function e(e){typeof e==`string`?this._fromString(e):this._fromComponents(e),this._validate()}return e.prototype.toString=function(e){e===void 0&&(e=!1);var t=this,n=t.host,r=t.path,i=t.pass,a=t.port,o=t.projectId,s=t.protocol,c=t.user;return s+`://`+c+(e&&i?`:`+i:``)+(`@`+n+(a?`:`+a:``)+`/`+(r&&r+`/`)+o)},e.prototype._fromString=function(e){var t=gt.exec(e);if(!t)throw new mt(_t);var n=Ie(t.slice(1),6),r=n[0],i=n[1],a=n[2],o=a===void 0?``:a,s=n[3],c=n[4],l=c===void 0?``:c,u=n[5],d=``,f=u,p=f.split(`/`);if(p.length>1&&(d=p.slice(0,-1).join(`/`),f=p.pop()),f){var m=f.match(/^\d+/);m&&(f=m[0])}this._fromComponents({host:s,pass:o,path:d,projectId:f,port:l,protocol:r,user:i})},e.prototype._fromComponents=function(e){this.protocol=e.protocol,this.user=e.user,this.pass=e.pass||``,this.host=e.host,this.port=e.port||``,this.path=e.path||``,this.projectId=e.projectId},e.prototype._validate=function(){var e=this;if([`protocol`,`user`,`host`,`projectId`].forEach(function(t){if(!e[t])throw new mt(_t+`: `+t+` missing`)}),!this.projectId.match(/^\d+$/))throw new mt(_t+`: Invalid projectId `+this.projectId);if(this.protocol!==`http`&&this.protocol!==`https`)throw new mt(_t+`: Invalid protocol `+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new mt(_t+`: Invalid port `+this.port)},e}()})),bt,xt=o((()=>{bt=function(){function e(){this._hasWeakSet=typeof WeakSet==`function`,this._inner=this._hasWeakSet?new WeakSet:[]}return e.prototype.memoize=function(e){if(this._hasWeakSet)return this._inner.has(e)?!0:(this._inner.add(e),!1);for(var t=0;t<this._inner.length;t++)if(this._inner[t]===e)return!0;return this._inner.push(e),!1},e.prototype.unmemoize=function(e){if(this._hasWeakSet)this._inner.delete(e);else for(var t=0;t<this._inner.length;t++)if(this._inner[t]===e){this._inner.splice(t,1);break}},e}()}));function St(e){try{return!e||typeof e!=`function`?Ct:e.name||Ct}catch{return Ct}}var Ct,wt=o((()=>{Ct=`<anonymous>`}));function Tt(e,t){return t===void 0&&(t=0),typeof e!=`string`||t===0||e.length<=t?e:e.substr(0,t)+`...`}function Et(e,t){if(!Array.isArray(e))return``;for(var n=[],r=0;r<e.length;r++){var i=e[r];try{n.push(String(i))}catch{n.push(`[value cannot be serialized]`)}}return n.join(t)}function Dt(e,t){return Ze(e)?nt(t)?t.test(e):typeof t==`string`?e.indexOf(t)!==-1:!1:!1}var Ot=o((()=>{ot()}));function kt(e,t,n){if(t in e){var r=e[t],i=n(r);if(typeof i==`function`)try{i.prototype=i.prototype||{},Object.defineProperties(i,{__sentry_original__:{enumerable:!1,value:r}})}catch{}e[t]=i}}function At(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+`=`+encodeURIComponent(e[t])}).join(`&`)}function jt(e){if(qe(e)){var t=e,n={message:t.message,name:t.name,stack:t.stack};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}if(et(e)){var i=e,a={};a.type=i.type;try{a.target=tt(i.target)?st(i.target):Object.prototype.toString.call(i.target)}catch{a.target=`<unknown>`}try{a.currentTarget=tt(i.currentTarget)?st(i.currentTarget):Object.prototype.toString.call(i.currentTarget)}catch{a.currentTarget=`<unknown>`}for(var r in typeof CustomEvent<`u`&&at(e,CustomEvent)&&(a.detail=i.detail),i)Object.prototype.hasOwnProperty.call(i,r)&&(a[r]=i);return a}return e}function Mt(e){return~-encodeURI(e).split(/%..|./).length}function Nt(e){return Mt(JSON.stringify(e))}function Pt(e,t,n){t===void 0&&(t=3),n===void 0&&(n=100*1024);var r=Rt(e,t);return Nt(r)>n?Pt(e,t-1,n):r}function Ft(e){var t=Object.prototype.toString.call(e);if(typeof e==`string`)return e;if(t===`[object Object]`)return`[Object]`;if(t===`[object Array]`)return`[Array]`;var n=It(e);return Qe(n)?n:t}function It(e,t){return t===`domain`&&e&&typeof e==`object`&&e._events?`[Domain]`:t===`domainEmitter`?`[DomainEmitter]`:typeof global<`u`&&e===global?`[Global]`:typeof window<`u`&&e===window?`[Window]`:typeof document<`u`&&e===document?`[Document]`:it(e)?`[SyntheticEvent]`:typeof e==`number`&&e!==e?`[NaN]`:e===void 0?`[undefined]`:typeof e==`function`?`[Function: `+St(e)+`]`:typeof e==`symbol`?`[`+String(e)+`]`:typeof e==`bigint`?`[BigInt: `+String(e)+`]`:e}function Lt(e,t,n,r){if(n===void 0&&(n=1/0),r===void 0&&(r=new bt),n===0)return Ft(t);if(t!=null&&typeof t.toJSON==`function`)return t.toJSON();var i=It(t,e);if(Qe(i))return i;var a=jt(t),o=Array.isArray(t)?[]:{};if(r.memoize(t))return`[Circular ~]`;for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=Lt(s,a[s],n-1,r));return r.unmemoize(t),o}function Rt(e,t){try{return JSON.parse(JSON.stringify(e,function(e,n){return Lt(e,n,t)}))}catch{return`**non-serializable**`}}function zt(e,t){t===void 0&&(t=40);var n=Object.keys(jt(e));if(n.sort(),!n.length)return`[object has no keys]`;if(n[0].length>=t)return Tt(n[0],t);for(var r=n.length;r>0;r--){var i=n.slice(0,r).join(`, `);if(!(i.length>t))return r===n.length?i:Tt(i,t)}return``}function Bt(e){var t,n;if($e(e)){var r=e,i={};try{for(var a=Fe(Object.keys(r)),o=a.next();!o.done;o=a.next()){var s=o.value;r[s]!==void 0&&(i[s]=Bt(r[s]))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i}return Array.isArray(e)?e.map(Bt):e}var Vt=o((()=>{g(),lt(),ot(),xt(),wt(),Ot()}));function Ht(){return Object.prototype.toString.call(typeof process<`u`?process:0)===`[object process]`}function Ut(e,t){return e.require(t)}var Wt=o((()=>{}));function Gt(){return Ht()?global:typeof window<`u`?window:typeof self<`u`?self:en}function Kt(){var e=Gt(),t=e.crypto||e.msCrypto;if(t!==void 0&&t.getRandomValues){var n=new Uint16Array(8);t.getRandomValues(n),n[3]=n[3]&4095|16384,n[4]=n[4]&16383|32768;var r=function(e){for(var t=e.toString(16);t.length<4;)t=`0`+t;return t};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return`xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx`.replace(/[xy]/g,function(e){var t=Math.random()*16|0;return(e===`x`?t:t&3|8).toString(16)})}function qt(e){if(!e)return{};var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var n=t[6]||``,r=t[8]||``;return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+n+r}}function Jt(e){if(e.message)return e.message;if(e.exception&&e.exception.values&&e.exception.values[0]){var t=e.exception.values[0];return t.type&&t.value?t.type+`: `+t.value:t.type||t.value||e.event_id||`<unknown>`}return e.event_id||`<unknown>`}function Yt(e){var t=Gt(),n=[`debug`,`info`,`warn`,`error`,`log`,`assert`];if(!(`console`in t))return e();var r=t.console,i={};n.forEach(function(e){e in t.console&&r[e].__sentry_original__&&(i[e]=r[e],r[e]=r[e].__sentry_original__)});var a=e();return Object.keys(i).forEach(function(e){r[e]=i[e]}),a}function Xt(e,t,n){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].value=e.exception.values[0].value||t||``,e.exception.values[0].type=e.exception.values[0].type||n||`Error`}function Zt(e,t){t===void 0&&(t={});try{e.exception.values[0].mechanism=e.exception.values[0].mechanism||{},Object.keys(t).forEach(function(n){e.exception.values[0].mechanism[n]=t[n]})}catch{}}function Qt(){try{return document.location.href}catch{return``}}function $t(e,t){if(!t)return tn;var n=parseInt(``+t,10);if(!isNaN(n))return n*1e3;var r=Date.parse(``+t);return isNaN(r)?tn:r-e}var en,tn,nn=o((()=>{Wt(),en={},tn=60*1e3})),rn,an,on,_,sn=o((()=>{nn(),rn=Gt(),an=`Sentry Logger `,on=function(){function e(){this._enabled=!1}return e.prototype.disable=function(){this._enabled=!1},e.prototype.enable=function(){this._enabled=!0},e.prototype.log=function(){var e=[...arguments];this._enabled&&Yt(function(){rn.console.log(an+`[Log]: `+e.join(` `))})},e.prototype.warn=function(){var e=[...arguments];this._enabled&&Yt(function(){rn.console.warn(an+`[Warn]: `+e.join(` `))})},e.prototype.error=function(){var e=[...arguments];this._enabled&&Yt(function(){rn.console.error(an+`[Error]: `+e.join(` `))})},e}(),rn.__SENTRY__=rn.__SENTRY__||{},_=rn.__SENTRY__.logger||(rn.__SENTRY__.logger=new on)}));function cn(){if(!(`fetch`in Gt()))return!1;try{return new Headers,new Request(``),new Response,!0}catch{return!1}}function ln(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function un(){if(!cn())return!1;var e=Gt();if(ln(e.fetch))return!0;var t=!1,n=e.document;if(n&&typeof n.createElement==`function`)try{var r=n.createElement(`iframe`);r.hidden=!0,n.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(t=ln(r.contentWindow.fetch)),n.head.removeChild(r)}catch(e){_.warn(`Could not create sandbox iframe for pure fetch check, bailing to window.fetch: `,e)}return t}function dn(){if(!cn())return!1;try{return new Request(`_`,{referrerPolicy:`origin`}),!0}catch{return!1}}function fn(){var e=Gt(),t=e.chrome,n=t&&t.app&&t.app.runtime,r=`history`in e&&!!e.history.pushState&&!!e.history.replaceState;return!n&&r}var pn=o((()=>{sn(),nn()}));function mn(e){if(!An[e])switch(An[e]=!0,e){case`console`:_n();break;case`dom`:Cn();break;case`xhr`:xn();break;case`fetch`:vn();break;case`history`:Sn();break;case`error`:En();break;case`unhandledrejection`:Dn();break;default:_.warn(`unknown instrumentation type:`,e)}}function hn(e){!e||typeof e.type!=`string`||typeof e.callback!=`function`||(kn[e.type]=kn[e.type]||[],kn[e.type].push(e.callback),mn(e.type))}function gn(e,t){var n,r;if(!(!e||!kn[e]))try{for(var i=Fe(kn[e]||[]),a=i.next();!a.done;a=i.next()){var o=a.value;try{o(t)}catch(t){_.error(`Error while triggering instrumentation handler.
Type: `+e+`
Name: `+St(o)+`
Error: `+t)}}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function _n(){`console`in On&&[`debug`,`info`,`warn`,`error`,`log`,`assert`].forEach(function(e){e in On.console&&kt(On.console,e,function(t){return function(){var n=[...arguments];gn(`console`,{args:n,level:e}),t&&Function.prototype.apply.call(t,On.console,n)}})})}function vn(){un()&&kt(On,`fetch`,function(e){return function(){var t=[...arguments],n={args:t,fetchData:{method:yn(t),url:bn(t)},startTimestamp:Date.now()};return gn(`fetch`,h({},n)),e.apply(On,t).then(function(e){return gn(`fetch`,h(h({},n),{endTimestamp:Date.now(),response:e})),e},function(e){throw gn(`fetch`,h(h({},n),{endTimestamp:Date.now(),error:e})),e})}})}function yn(e){return e===void 0&&(e=[]),`Request`in On&&at(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():`GET`}function bn(e){return e===void 0&&(e=[]),typeof e[0]==`string`?e[0]:`Request`in On&&at(e[0],Request)?e[0].url:String(e[0])}function xn(){if(`XMLHttpRequest`in On){var e=[],t=[],n=XMLHttpRequest.prototype;kt(n,`open`,function(n){return function(){var r=[...arguments],i=this,a=r[1];i.__sentry_xhr__={method:Ze(r[0])?r[0].toUpperCase():r[0],url:r[1]},Ze(a)&&i.__sentry_xhr__.method===`POST`&&a.match(/sentry_key/)&&(i.__sentry_own_request__=!0);var o=function(){if(i.readyState===4){try{i.__sentry_xhr__&&(i.__sentry_xhr__.status_code=i.status)}catch{}try{var n=e.indexOf(i);if(n!==-1){e.splice(n);var a=t.splice(n)[0];i.__sentry_xhr__&&a[0]!==void 0&&(i.__sentry_xhr__.body=a[0])}}catch{}gn(`xhr`,{args:r,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:i})}};return`onreadystatechange`in i&&typeof i.onreadystatechange==`function`?kt(i,`onreadystatechange`,function(e){return function(){var t=[...arguments];return o(),e.apply(i,t)}}):i.addEventListener(`readystatechange`,o),n.apply(i,r)}}),kt(n,`send`,function(n){return function(){var r=[...arguments];return e.push(this),t.push(r),gn(`xhr`,{args:r,startTimestamp:Date.now(),xhr:this}),n.apply(this,r)}})}}function Sn(){if(!fn())return;var e=On.onpopstate;On.onpopstate=function(){var t=[...arguments],n=On.location.href,r=jn;if(jn=n,gn(`history`,{from:r,to:n}),e)return e.apply(this,t)};function t(e){return function(){var t=[...arguments],n=t.length>2?t[2]:void 0;if(n){var r=jn,i=String(n);jn=i,gn(`history`,{from:r,to:i})}return e.apply(this,t)}}kt(On.history,`pushState`,t),kt(On.history,`replaceState`,t)}function Cn(){`document`in On&&(On.document.addEventListener(`click`,wn(`click`,gn.bind(null,`dom`)),!1),On.document.addEventListener(`keypress`,Tn(gn.bind(null,`dom`)),!1),[`EventTarget`,`Node`].forEach(function(e){var t=On[e]&&On[e].prototype;!t||!t.hasOwnProperty||!t.hasOwnProperty(`addEventListener`)||(kt(t,`addEventListener`,function(e){return function(t,n,r){return n&&n.handleEvent?(t===`click`&&kt(n,`handleEvent`,function(e){return function(t){return wn(`click`,gn.bind(null,`dom`))(t),e.call(this,t)}}),t===`keypress`&&kt(n,`handleEvent`,function(e){return function(t){return Tn(gn.bind(null,`dom`))(t),e.call(this,t)}})):(t===`click`&&wn(`click`,gn.bind(null,`dom`),!0)(this),t===`keypress`&&Tn(gn.bind(null,`dom`))(this)),e.call(this,t,n,r)}}),kt(t,`removeEventListener`,function(e){return function(t,n,r){try{e.call(this,t,n.__sentry_wrapped__,r)}catch{}return e.call(this,t,n,r)}}))}))}function wn(e,t,n){return n===void 0&&(n=!1),function(r){Pn=void 0,!(!r||Fn===r)&&(Fn=r,Nn&&clearTimeout(Nn),n?Nn=setTimeout(function(){t({event:r,name:e})}):t({event:r,name:e}))}}function Tn(e){return function(t){var n;try{n=t.target}catch{return}var r=n&&n.tagName;!r||r!==`INPUT`&&r!==`TEXTAREA`&&!n.isContentEditable||(Pn||wn(`input`,e)(t),clearTimeout(Pn),Pn=setTimeout(function(){Pn=void 0},Mn))}}function En(){In=On.onerror,On.onerror=function(e,t,n,r,i){return gn(`error`,{column:r,error:i,line:n,msg:e,url:t}),In?In.apply(this,arguments):!1}}function Dn(){Ln=On.onunhandledrejection,On.onunhandledrejection=function(e){return gn(`unhandledrejection`,e),Ln?Ln.apply(this,arguments):!0}}var On,kn,An,jn,Mn,Nn,Pn,Fn,In,Ln,Rn=o((()=>{g(),ot(),sn(),nn(),Vt(),wt(),pn(),On=Gt(),kn={},An={},Mn=1e3,Nn=0,In=null,Ln=null})),zn=o((()=>{})),Bn,Vn,Hn=o((()=>{ot(),(function(e){e.PENDING=`PENDING`,e.RESOLVED=`RESOLVED`,e.REJECTED=`REJECTED`})(Bn||={}),Vn=function(){function e(e){var t=this;this._state=Bn.PENDING,this._handlers=[],this._resolve=function(e){t._setResult(Bn.RESOLVED,e)},this._reject=function(e){t._setResult(Bn.REJECTED,e)},this._setResult=function(e,n){if(t._state===Bn.PENDING){if(rt(n)){n.then(t._resolve,t._reject);return}t._state=e,t._value=n,t._executeHandlers()}},this._attachHandler=function(e){t._handlers=t._handlers.concat(e),t._executeHandlers()},this._executeHandlers=function(){if(t._state!==Bn.PENDING){var e=t._handlers.slice();t._handlers=[],e.forEach(function(e){e.done||=(t._state===Bn.RESOLVED&&e.onfulfilled&&e.onfulfilled(t._value),t._state===Bn.REJECTED&&e.onrejected&&e.onrejected(t._value),!0)})}};try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}return e.resolve=function(t){return new e(function(e){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.all=function(t){return new e(function(n,r){if(!Array.isArray(t)){r(TypeError(`Promise.all requires an array as input.`));return}if(t.length===0){n([]);return}var i=t.length,a=[];t.forEach(function(t,o){e.resolve(t).then(function(e){a[o]=e,--i,i===0&&n(a)}).then(null,r)})})},e.prototype.then=function(t,n){var r=this;return new e(function(e,i){r._attachHandler({done:!1,onfulfilled:function(n){if(!t){e(n);return}try{e(t(n));return}catch(e){i(e);return}},onrejected:function(t){if(!n){i(t);return}try{e(n(t));return}catch(e){i(e);return}}})})},e.prototype.catch=function(e){return this.then(function(e){return e},e)},e.prototype.finally=function(t){var n=this;return new e(function(e,r){var i,a;return n.then(function(e){a=!1,i=e,t&&t()},function(e){a=!0,i=e,t&&t()}).then(function(){if(a){r(i);return}e(i)})})},e.prototype.toString=function(){return`[object SyncPromise]`},e}()})),Un,Wn=o((()=>{ht(),Hn(),Un=function(){function e(e){this._limit=e,this._buffer=[]}return e.prototype.isReady=function(){return this._limit===void 0||this.length()<this._limit},e.prototype.add=function(e){var t=this;return this.isReady()?(this._buffer.indexOf(e)===-1&&this._buffer.push(e),e.then(function(){return t.remove(e)}).then(null,function(){return t.remove(e).then(null,function(){})}),e):Vn.reject(new mt(`Not adding Promise due to buffer limit reached.`))},e.prototype.remove=function(e){return this._buffer.splice(this._buffer.indexOf(e),1)[0]},e.prototype.length=function(){return this._buffer.length},e.prototype.drain=function(e){var t=this;return new Vn(function(n){var r=setTimeout(function(){e&&e>0&&n(!1)},e);Vn.all(t._buffer).then(function(){clearTimeout(r),n(!0)}).then(null,function(){n(!0)})})},e}()}));function Gn(){var e=Gt().performance;if(!(!e||!e.now))return{now:function(){return e.now()},timeOrigin:Date.now()-e.now()}}function Kn(){try{return Ut(module,`perf_hooks`).performance}catch{return}}var qn,Jn,Yn,Xn,Zn=o((()=>{nn(),Wt(),qn={nowSeconds:function(){return Date.now()/1e3}},Jn=Ht()?Kn():Gn(),Yn=Jn===void 0?qn:{nowSeconds:function(){return(Jn.timeOrigin+Jn.now())/1e3}},Xn=qn.nowSeconds.bind(qn),Yn.nowSeconds.bind(Yn),(function(){var e=Gt().performance;if(e)return e.timeOrigin?e.timeOrigin:e.timing&&e.timing.navigationStart||Date.now()})()})),v=o((()=>{Ke(),lt(),yt(),ht(),Rn(),ot(),sn(),xt(),nn(),Wt(),Vt(),zn(),Wn(),wt(),Ot(),pn(),Hn(),Zn()}));function Qn(){var e=Gt();return e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.globalEventProcessors=e.__SENTRY__.globalEventProcessors||[],e.__SENTRY__.globalEventProcessors}function $n(e){Qn().push(e)}var er,tr=o((()=>{g(),v(),er=function(){function e(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return e.clone=function(t){var n=new e;return t&&(n._breadcrumbs=Le(t._breadcrumbs),n._tags=h({},t._tags),n._extra=h({},t._extra),n._contexts=h({},t._contexts),n._user=t._user,n._level=t._level,n._span=t._span,n._session=t._session,n._transactionName=t._transactionName,n._fingerprint=t._fingerprint,n._eventProcessors=Le(t._eventProcessors)),n},e.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},e.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},e.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},e.prototype.getUser=function(){return this._user},e.prototype.setTags=function(e){return this._tags=h(h({},this._tags),e),this._notifyScopeListeners(),this},e.prototype.setTag=function(e,t){var n;return this._tags=h(h({},this._tags),(n={},n[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setExtras=function(e){return this._extra=h(h({},this._extra),e),this._notifyScopeListeners(),this},e.prototype.setExtra=function(e,t){var n;return this._extra=h(h({},this._extra),(n={},n[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},e.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},e.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},e.prototype.setTransaction=function(e){return this.setTransactionName(e)},e.prototype.setContext=function(e,t){var n;return t===null?delete this._contexts[e]:this._contexts=h(h({},this._contexts),(n={},n[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},e.prototype.getSpan=function(){return this._span},e.prototype.getTransaction=function(){var e=this.getSpan();if(e?.transaction)return e?.transaction;if((e?.spanRecorder)?.spans[0])return e.spanRecorder.spans[0]},e.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},e.prototype.getSession=function(){return this._session},e.prototype.update=function(t){if(!t)return this;if(typeof t==`function`){var n=t(this);return n instanceof e?n:this}return t instanceof e?(this._tags=h(h({},this._tags),t._tags),this._extra=h(h({},this._extra),t._extra),this._contexts=h(h({},this._contexts),t._contexts),t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint)):$e(t)&&(t=t,this._tags=h(h({},this._tags),t.tags),this._extra=h(h({},this._extra),t.extra),this._contexts=h(h({},this._contexts),t.contexts),t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint)),this},e.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},e.prototype.addBreadcrumb=function(e,t){var n=h({timestamp:Xn()},e);return this._breadcrumbs=t!==void 0&&t>=0?Le(this._breadcrumbs,[n]).slice(-t):Le(this._breadcrumbs,[n]),this._notifyScopeListeners(),this},e.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},e.prototype.applyToEvent=function(e,t){if(this._extra&&Object.keys(this._extra).length&&(e.extra=h(h({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=h(h({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=h(h({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=h(h({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=h({trace:this._span.getTraceContext()},e.contexts);var n=this._span.transaction?.name;n&&(e.tags=h({transaction:n},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=Le(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,this._notifyEventProcessors(Le(Qn(),this._eventProcessors),e,t)},e.prototype._notifyEventProcessors=function(e,t,n,r){var i=this;return r===void 0&&(r=0),new Vn(function(a,o){var s=e[r];if(t===null||typeof s!=`function`)a(t);else{var c=s(h({},t),n);rt(c)?c.then(function(t){return i._notifyEventProcessors(e,t,n,r+1).then(a)}).then(null,o):i._notifyEventProcessors(e,c,n,r+1).then(a).then(null,o)}})},e.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||=(this._notifyingListeners=!0,this._scopeListeners.forEach(function(t){t(e)}),!1)},e.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},e}()})),nr,rr=o((()=>{Ge(),v(),nr=function(){function e(e){this.errors=0,this.sid=Kt(),this.timestamp=Date.now(),this.started=Date.now(),this.duration=0,this.status=ze.Ok,e&&this.update(e)}return e.prototype.update=function(e){e===void 0&&(e={}),e.user&&(e.user.ip_address&&(this.ipAddress=e.user.ip_address),e.did||(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||Date.now(),e.sid&&(this.sid=e.sid.length===32?e.sid:Kt()),e.did&&(this.did=``+e.did),typeof e.started==`number`&&(this.started=e.started),typeof e.duration==`number`?this.duration=e.duration:this.duration=this.timestamp-this.started,e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),e.ipAddress&&(this.ipAddress=e.ipAddress),e.userAgent&&(this.userAgent=e.userAgent),typeof e.errors==`number`&&(this.errors=e.errors),e.status&&(this.status=e.status)},e.prototype.close=function(e){e?this.update({status:e}):this.status===ze.Ok?this.update({status:ze.Exited}):this.update()},e.prototype.toJSON=function(){return Bt({sid:``+this.sid,init:!0,started:new Date(this.started).toISOString(),timestamp:new Date(this.timestamp).toISOString(),status:this.status,errors:this.errors,did:typeof this.did==`number`||typeof this.did==`string`?``+this.did:void 0,duration:this.duration,attrs:Bt({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},e}()}));function ir(){var e=Gt();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:void 0},e}function ar(e){var t=ir(),n=ur(t);return dr(t,e),n}function or(){var e=ir();return(!lr(e)||ur(e).isOlderThan(fr))&&dr(e,new hr),Ht()?cr(e):ur(e)}function sr(){var e=ir().__SENTRY__;return e&&e.extensions&&e.extensions.domain&&e.extensions.domain.active}function cr(e){try{var t=sr();if(!t)return ur(e);if(!lr(t)||ur(t).isOlderThan(fr)){var n=ur(e).getStackTop();dr(t,new hr(n.client,er.clone(n.scope)))}return ur(t)}catch{return ur(e)}}function lr(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function ur(e){return e&&e.__SENTRY__&&e.__SENTRY__.hub?e.__SENTRY__.hub:(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=new hr,e.__SENTRY__.hub)}function dr(e,t){return e?(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=t,!0):!1}var fr,pr,mr,hr,gr=o((()=>{g(),v(),tr(),rr(),fr=3,pr=100,mr=100,hr=function(){function e(e,t,n){t===void 0&&(t=new er),n===void 0&&(n=fr),this._version=n,this._stack=[{}],this.getStackTop().scope=t,this.bindClient(e)}return e.prototype.isOlderThan=function(e){return this._version<e},e.prototype.bindClient=function(e){var t=this.getStackTop();t.client=e,e&&e.setupIntegrations&&e.setupIntegrations()},e.prototype.pushScope=function(){var e=er.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},e.prototype.popScope=function(){return this.getStack().length<=1?!1:!!this.getStack().pop()},e.prototype.withScope=function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}},e.prototype.getClient=function(){return this.getStackTop().client},e.prototype.getScope=function(){return this.getStackTop().scope},e.prototype.getStack=function(){return this._stack},e.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},e.prototype.captureException=function(e,t){var n=this._lastEventId=Kt(),r=t;if(!t){var i=void 0;try{throw Error(`Sentry syntheticException`)}catch(e){i=e}r={originalException:e,syntheticException:i}}return this._invokeClient(`captureException`,e,h(h({},r),{event_id:n})),n},e.prototype.captureMessage=function(e,t,n){var r=this._lastEventId=Kt(),i=n;if(!n){var a=void 0;try{throw Error(e)}catch(e){a=e}i={originalException:e,syntheticException:a}}return this._invokeClient(`captureMessage`,e,t,h(h({},i),{event_id:r})),r},e.prototype.captureEvent=function(e,t){var n=this._lastEventId=Kt();return this._invokeClient(`captureEvent`,e,h(h({},t),{event_id:n})),n},e.prototype.lastEventId=function(){return this._lastEventId},e.prototype.addBreadcrumb=function(e,t){var n=this.getStackTop(),r=n.scope,i=n.client;if(!(!r||!i)){var a=i.getOptions&&i.getOptions()||{},o=a.beforeBreadcrumb,s=o===void 0?null:o,c=a.maxBreadcrumbs,l=c===void 0?pr:c;if(!(l<=0)){var u=Xn(),d=h({timestamp:u},e),f=s?Yt(function(){return s(d,t)}):d;f!==null&&r.addBreadcrumb(f,Math.min(l,mr))}}},e.prototype.setUser=function(e){var t=this.getScope();t&&t.setUser(e)},e.prototype.setTags=function(e){var t=this.getScope();t&&t.setTags(e)},e.prototype.setExtras=function(e){var t=this.getScope();t&&t.setExtras(e)},e.prototype.setTag=function(e,t){var n=this.getScope();n&&n.setTag(e,t)},e.prototype.setExtra=function(e,t){var n=this.getScope();n&&n.setExtra(e,t)},e.prototype.setContext=function(e,t){var n=this.getScope();n&&n.setContext(e,t)},e.prototype.configureScope=function(e){var t=this.getStackTop(),n=t.scope,r=t.client;n&&r&&e(n)},e.prototype.run=function(e){var t=ar(this);try{e(this)}finally{ar(t)}},e.prototype.getIntegration=function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch{return _.warn(`Cannot retrieve integration `+e.id+` from the current Hub`),null}},e.prototype.startSpan=function(e){return this._callExtensionMethod(`startSpan`,e)},e.prototype.startTransaction=function(e,t){return this._callExtensionMethod(`startTransaction`,e,t)},e.prototype.traceHeaders=function(){return this._callExtensionMethod(`traceHeaders`)},e.prototype.startSession=function(e){this.endSession();var t=this.getStackTop(),n=t.scope,r=t.client,i=r&&r.getOptions()||{},a=i.release,o=i.environment,s=new nr(h(h({release:a,environment:o},n&&{user:n.getUser()}),e));return n&&n.setSession(s),s},e.prototype.endSession=function(){var e=this.getStackTop(),t=e.scope,n=e.client;if(t){var r=t.getSession&&t.getSession();r&&(r.close(),n&&n.captureSession&&n.captureSession(r),t.setSession())}},e.prototype._invokeClient=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.getStackTop(),a=i.scope,o=i.client;o&&o[e]&&(t=o)[e].apply(t,Le(n,[a]))},e.prototype._callExtensionMethod=function(e){var t=[...arguments].slice(1),n=ir().__SENTRY__;if(n&&n.extensions&&typeof n.extensions[e]==`function`)return n.extensions[e].apply(this,t);_.warn(`Extension method `+e+` couldn't be found, doing nothing.`)},e}()})),_r=o((()=>{tr(),gr()}));function vr(e){var t=[...arguments].slice(1),n=or();if(n&&n[e])return n[e].apply(n,Le(t));throw Error(`No hub defined or `+e+` was not found on the hub, please open a bug report.`)}function yr(e,t){var n;try{throw Error(`Sentry syntheticException`)}catch(e){n=e}return vr(`captureException`,e,{captureContext:t,originalException:e,syntheticException:n})}function br(e,t){var n;try{throw Error(e)}catch(e){n=e}return vr(`captureMessage`,e,typeof t==`string`?t:void 0,h({originalException:e,syntheticException:n},typeof t==`string`?void 0:{captureContext:t}))}function xr(e){return vr(`captureEvent`,e)}function Sr(e){vr(`configureScope`,e)}function Cr(e){vr(`addBreadcrumb`,e)}function wr(e,t){vr(`setContext`,e,t)}function Tr(e){vr(`setExtras`,e)}function Er(e){vr(`setTags`,e)}function Dr(e,t){vr(`setExtra`,e,t)}function Or(e,t){vr(`setTag`,e,t)}function kr(e){vr(`setUser`,e)}function Ar(e){vr(`withScope`,e)}function jr(e,t){return vr(`startTransaction`,h({},e),t)}var Mr=o((()=>{g(),_r()})),Nr,Pr,Fr=o((()=>{v(),Nr=`7`,Pr=function(){function e(e){this.dsn=e,this._dsnObject=new vt(e)}return e.prototype.getDsn=function(){return this._dsnObject},e.prototype.getBaseApiEndpoint=function(){var e=this._dsnObject,t=e.protocol?e.protocol+`:`:``,n=e.port?`:`+e.port:``;return t+`//`+e.host+n+(e.path?`/`+e.path:``)+`/api/`},e.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint(`store`)},e.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+`?`+this._encodedAuth()},e.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this._getEnvelopeEndpoint()+`?`+this._encodedAuth()},e.prototype.getStoreEndpointPath=function(){var e=this._dsnObject;return(e.path?`/`+e.path:``)+`/api/`+e.projectId+`/store/`},e.prototype.getRequestHeaders=function(e,t){var n=this._dsnObject,r=[`Sentry sentry_version=`+Nr];return r.push(`sentry_client=`+e+`/`+t),r.push(`sentry_key=`+n.user),n.pass&&r.push(`sentry_secret=`+n.pass),{"Content-Type":`application/json`,"X-Sentry-Auth":r.join(`, `)}},e.prototype.getReportDialogEndpoint=function(e){e===void 0&&(e={});var t=this._dsnObject,n=this.getBaseApiEndpoint()+`embed/error-page/`,r=[];for(var i in r.push(`dsn=`+t.toString()),e)if(i!==`dsn`)if(i===`user`){if(!e.user)continue;e.user.name&&r.push(`name=`+encodeURIComponent(e.user.name)),e.user.email&&r.push(`email=`+encodeURIComponent(e.user.email))}else r.push(encodeURIComponent(i)+`=`+encodeURIComponent(e[i]));return r.length?n+`?`+r.join(`&`):n},e.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint(`envelope`)},e.prototype._getIngestEndpoint=function(e){var t=this.getBaseApiEndpoint(),n=this._dsnObject;return``+t+n.projectId+`/`+e+`/`},e.prototype._encodedAuth=function(){return At({sentry_key:this._dsnObject.user,sentry_version:Nr})},e}()}));function Ir(e){var t=e.defaultIntegrations&&Le(e.defaultIntegrations)||[],n=e.integrations,r=[];if(Array.isArray(n)){var i=n.map(function(e){return e.name}),a=[];t.forEach(function(e){i.indexOf(e.name)===-1&&a.indexOf(e.name)===-1&&(r.push(e),a.push(e.name))}),n.forEach(function(e){a.indexOf(e.name)===-1&&(r.push(e),a.push(e.name))})}else typeof n==`function`?(r=n(t),r=Array.isArray(r)?r:[r]):r=Le(t);var o=r.map(function(e){return e.name}),s=`Debug`;return o.indexOf(s)!==-1&&r.push.apply(r,Le(r.splice(o.indexOf(s),1))),r}function Lr(e){zr.indexOf(e.name)===-1&&(e.setupOnce($n,or),zr.push(e.name),_.log(`Integration installed: `+e.name))}function Rr(e){var t={};return Ir(e).forEach(function(e){t[e.name]=e,Lr(e)}),t}var zr,Br=o((()=>{g(),_r(),v(),zr=[]})),Vr,Hr=o((()=>{g(),_r(),Ge(),v(),Br(),Vr=function(){function e(e,t){this._integrations={},this._processing=0,this._backend=new e(t),this._options=t,t.dsn&&(this._dsn=new vt(t.dsn))}return e.prototype.captureException=function(e,t,n){var r=this,i=t&&t.event_id;return this._process(this._getBackend().eventFromException(e,t).then(function(e){return r._captureEvent(e,t,n)}).then(function(e){i=e})),i},e.prototype.captureMessage=function(e,t,n,r){var i=this,a=n&&n.event_id,o=Qe(e)?this._getBackend().eventFromMessage(String(e),t,n):this._getBackend().eventFromException(e,n);return this._process(o.then(function(e){return i._captureEvent(e,n,r)}).then(function(e){a=e})),a},e.prototype.captureEvent=function(e,t,n){var r=t&&t.event_id;return this._process(this._captureEvent(e,t,n).then(function(e){r=e})),r},e.prototype.captureSession=function(e){e.release?this._sendSession(e):_.warn(`Discarded session because of missing release`)},e.prototype.getDsn=function(){return this._dsn},e.prototype.getOptions=function(){return this._options},e.prototype.flush=function(e){var t=this;return this._isClientProcessing(e).then(function(n){return t._getBackend().getTransport().close(e).then(function(e){return n&&e})})},e.prototype.close=function(e){var t=this;return this.flush(e).then(function(e){return t.getOptions().enabled=!1,e})},e.prototype.setupIntegrations=function(){this._isEnabled()&&(this._integrations=Rr(this._options))},e.prototype.getIntegration=function(e){try{return this._integrations[e.id]||null}catch{return _.warn(`Cannot retrieve integration `+e.id+` from the current Client`),null}},e.prototype._updateSessionFromEvent=function(e,t){var n,r,i=!1,a=!1,o,s=t.exception&&t.exception.values;if(s){a=!0;try{for(var c=Fe(s),l=c.next();!l.done;l=c.next()){var u=l.value.mechanism;if(u&&u.handled===!1){i=!0;break}}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}var d=t.user;if(!e.userAgent){var f=t.request?t.request.headers:{};for(var p in f)if(p.toLowerCase()===`user-agent`){o=f[p];break}}e.update(h(h({},i&&{status:ze.Crashed}),{user:d,userAgent:o,errors:e.errors+Number(a||i)}))},e.prototype._sendSession=function(e){this._getBackend().sendSession(e)},e.prototype._isClientProcessing=function(e){var t=this;return new Vn(function(n){var r=0,i=1,a=setInterval(function(){t._processing==0?(clearInterval(a),n(!0)):(r+=i,e&&r>=e&&(clearInterval(a),n(!1)))},i)})},e.prototype._getBackend=function(){return this._backend},e.prototype._isEnabled=function(){return this.getOptions().enabled!==!1&&this._dsn!==void 0},e.prototype._prepareEvent=function(e,t,n){var r=this,i=this.getOptions().normalizeDepth,a=i===void 0?3:i,o=h(h({},e),{event_id:e.event_id||(n&&n.event_id?n.event_id:Kt()),timestamp:e.timestamp||Xn()});this._applyClientOptions(o),this._applyIntegrationsMetadata(o);var s=t;n&&n.captureContext&&(s=er.clone(s).update(n.captureContext));var c=Vn.resolve(o);return s&&(c=s.applyToEvent(o,n)),c.then(function(e){return typeof a==`number`&&a>0?r._normalizeEvent(e,a):e})},e.prototype._normalizeEvent=function(e,t){if(!e)return null;var n=h(h(h(h(h({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(function(e){return h(h({},e),e.data&&{data:Rt(e.data,t)})})}),e.user&&{user:Rt(e.user,t)}),e.contexts&&{contexts:Rt(e.contexts,t)}),e.extra&&{extra:Rt(e.extra,t)});return e.contexts&&e.contexts.trace&&(n.contexts.trace=e.contexts.trace),n},e.prototype._applyClientOptions=function(e){var t=this.getOptions(),n=t.environment,r=t.release,i=t.dist,a=t.maxValueLength,o=a===void 0?250:a;`environment`in e||(e.environment=`environment`in t?n:`production`),e.release===void 0&&r!==void 0&&(e.release=r),e.dist===void 0&&i!==void 0&&(e.dist=i),e.message&&=Tt(e.message,o);var s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=Tt(s.value,o));var c=e.request;c&&c.url&&(c.url=Tt(c.url,o))},e.prototype._applyIntegrationsMetadata=function(e){var t=e.sdk,n=Object.keys(this._integrations);t&&n.length>0&&(t.integrations=n)},e.prototype._sendEvent=function(e){this._getBackend().sendEvent(e)},e.prototype._captureEvent=function(e,t,n){return this._processEvent(e,t,n).then(function(e){return e.event_id},function(e){_.error(e)})},e.prototype._processEvent=function(e,t,n){var r=this,i=this.getOptions(),a=i.beforeSend,o=i.sampleRate;if(!this._isEnabled())return Vn.reject(new mt(`SDK not enabled, will not send event.`));var s=e.type===`transaction`;return!s&&typeof o==`number`&&Math.random()>o?Vn.reject(new mt(`Discarding event because it's not included in the random sample (sampling rate = `+o+`)`)):this._prepareEvent(e,n,t).then(function(e){if(e===null)throw new mt(`An event processor returned null, will not send event.`);if(t&&t.data&&t.data.__sentry__===!0||s||!a)return e;var n=a(e,t);if(n===void 0)throw new mt("`beforeSend` method has to return `null` or a valid event.");return rt(n)?n.then(function(e){return e},function(e){throw new mt(`beforeSend rejected with `+e)}):n}).then(function(e){if(e===null)throw new mt("`beforeSend` returned `null`, will not send event.");var t=n&&n.getSession&&n.getSession();return!s&&t&&r._updateSessionFromEvent(t,e),r._sendEvent(e),e}).then(null,function(e){throw e instanceof mt?e:(r.captureException(e,{data:{__sentry__:!0},originalException:e}),new mt(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: `+e))})},e.prototype._process=function(e){var t=this;this._processing+=1,e.then(function(e){return--t._processing,e},function(e){return--t._processing,e})},e}()})),Ur,Wr=o((()=>{Ge(),v(),Ur=function(){function e(){}return e.prototype.sendEvent=function(e){return Vn.resolve({reason:`NoopTransport: Event has been skipped because no Dsn is configured.`,status:Ue.Skipped})},e.prototype.close=function(e){return Vn.resolve(!0)},e}()})),Gr,Kr=o((()=>{v(),Wr(),Gr=function(){function e(e){this._options=e,this._options.dsn||_.warn(`No DSN provided, backend will not do anything.`),this._transport=this._setupTransport()}return e.prototype.eventFromException=function(e,t){throw new mt("Backend has to implement `eventFromException` method")},e.prototype.eventFromMessage=function(e,t,n){throw new mt("Backend has to implement `eventFromMessage` method")},e.prototype.sendEvent=function(e){this._transport.sendEvent(e).then(null,function(e){_.error(`Error while sending event: `+e)})},e.prototype.sendSession=function(e){if(!this._transport.sendSession){_.warn(`Dropping session because custom transport doesn't implement sendSession`);return}this._transport.sendSession(e).then(null,function(e){_.error(`Error while sending session: `+e)})},e.prototype.getTransport=function(){return this._transport},e.prototype._setupTransport=function(){return new Ur},e}()}));function qr(e,t){var n=JSON.stringify({sent_at:new Date().toISOString()}),r=JSON.stringify({type:`session`});return{body:n+`
`+r+`
`+JSON.stringify(e),type:`session`,url:t.getEnvelopeEndpointWithUrlEncodedAuth()}}function Jr(e,t){var n=e.tags||{},r=n.__sentry_samplingMethod,i=n.__sentry_sampleRate;e.tags=Pe(n,[`__sentry_samplingMethod`,`__sentry_sampleRate`]);var a=e.type===`transaction`,o={body:JSON.stringify(e),type:e.type||`event`,url:a?t.getEnvelopeEndpointWithUrlEncodedAuth():t.getStoreEndpointWithUrlEncodedAuth()};if(a){var s=JSON.stringify({event_id:e.event_id,sent_at:new Date().toISOString()}),c=JSON.stringify({type:e.type,sample_rates:[{id:r,rate:i}]});o.body=s+`
`+c+`
`+o.body}return o}var Yr=o((()=>{g()}));function Xr(e,t){t.debug===!0&&_.enable();var n=or(),r=new e(t);n.bindClient(r)}var Zr=o((()=>{_r(),v()})),Qr,$r,ei=o((()=>{$r=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){Qr=Function.prototype.toString,Function.prototype.toString=function(){var e=[...arguments],t=this.__sentry_original__||this;return Qr.apply(t,e)}},e.id=`FunctionToString`,e}()})),ti,ni,ri=o((()=>{g(),_r(),v(),ti=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],ni=function(){function e(t){t===void 0&&(t={}),this._options=t,this.name=e.id}return e.prototype.setupOnce=function(){$n(function(t){var n=or();if(!n)return t;var r=n.getIntegration(e);if(r){var i=n.getClient(),a=i?i.getOptions():{},o=r._mergeOptions(a);if(r._shouldDropEvent(t,o))return null}return t})},e.prototype._shouldDropEvent=function(e,t){return this._isSentryError(e,t)?(_.warn(`Event dropped due to being internal Sentry Error.
Event: `+Jt(e)),!0):this._isIgnoredError(e,t)?(_.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+Jt(e)),!0):this._isDeniedUrl(e,t)?(_.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+Jt(e)+`.
Url: `+this._getEventFilterUrl(e)),!0):this._isAllowedUrl(e,t)?!1:(_.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+Jt(e)+`.
Url: `+this._getEventFilterUrl(e)),!0)},e.prototype._isSentryError=function(e,t){if(!t.ignoreInternal)return!1;try{return e&&e.exception&&e.exception.values&&e.exception.values[0]&&e.exception.values[0].type===`SentryError`||!1}catch{return!1}},e.prototype._isIgnoredError=function(e,t){return!t.ignoreErrors||!t.ignoreErrors.length?!1:this._getPossibleEventMessages(e).some(function(e){return t.ignoreErrors.some(function(t){return Dt(e,t)})})},e.prototype._isDeniedUrl=function(e,t){if(!t.denyUrls||!t.denyUrls.length)return!1;var n=this._getEventFilterUrl(e);return n?t.denyUrls.some(function(e){return Dt(n,e)}):!1},e.prototype._isAllowedUrl=function(e,t){if(!t.allowUrls||!t.allowUrls.length)return!0;var n=this._getEventFilterUrl(e);return n?t.allowUrls.some(function(e){return Dt(n,e)}):!0},e.prototype._mergeOptions=function(e){return e===void 0&&(e={}),{allowUrls:Le(this._options.whitelistUrls||[],this._options.allowUrls||[],e.whitelistUrls||[],e.allowUrls||[]),denyUrls:Le(this._options.blacklistUrls||[],this._options.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:Le(this._options.ignoreErrors||[],e.ignoreErrors||[],ti),ignoreInternal:this._options.ignoreInternal===void 0?!0:this._options.ignoreInternal}},e.prototype._getPossibleEventMessages=function(e){if(e.message)return[e.message];if(e.exception)try{var t=e.exception.values&&e.exception.values[0]||{},n=t.type,r=n===void 0?``:n,i=t.value,a=i===void 0?``:i;return[``+a,r+`: `+a]}catch{return _.error(`Cannot extract message for event `+Jt(e)),[]}return[]},e.prototype._getEventFilterUrl=function(e){try{if(e.stacktrace){var t=e.stacktrace.frames;return t&&t[t.length-1].filename||null}if(e.exception){var n=e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames;return n&&n[n.length-1].filename||null}return null}catch{return _.error(`Cannot extract url for event `+Jt(e)),null}},e.id=`InboundFilters`,e}()})),ii={};c(ii,{FunctionToString:()=>$r,InboundFilters:()=>ni});var ai=o((()=>{ei(),ri()})),oi=o((()=>{Mr(),_r(),Fr(),Hr(),Kr(),Yr(),Zr(),ai()}));function si(e){var t=null,n=0;e&&(typeof e.framesToPop==`number`?n=e.framesToPop:vi.test(e.message)&&(n=1));try{if(t=li(e),t)return ui(t,n)}catch{}try{if(t=ci(e),t)return ui(t,n)}catch{}return{message:di(e),name:e&&e.name,stack:[],failed:!0}}function ci(e){if(!e||!e.stack)return null;for(var t=[],n=e.stack.split(`
`),r,i,a,o,s=0;s<n.length;++s){if(a=pi.exec(n[s])){var c=a[2]&&a[2].indexOf(`native`)===0;r=a[2]&&a[2].indexOf(`eval`)===0,r&&(i=_i.exec(a[2]))&&(a[2]=i[1],a[3]=i[2],a[4]=i[3]),o={url:a[2]&&a[2].indexOf(`address at `)===0?a[2].substr(11):a[2],func:a[1]||fi,args:c?[a[2]]:[],line:a[3]?+a[3]:null,column:a[4]?+a[4]:null}}else if(a=hi.exec(n[s]))o={url:a[2],func:a[1]||fi,args:[],line:+a[3],column:a[4]?+a[4]:null};else if(a=mi.exec(n[s]))r=a[3]&&a[3].indexOf(` > eval`)>-1,r&&(i=gi.exec(a[3]))?(a[1]=a[1]||`eval`,a[3]=i[1],a[4]=i[2],a[5]=``):s===0&&!a[5]&&e.columnNumber!==void 0&&(t[0].column=e.columnNumber+1),o={url:a[3],func:a[1]||fi,args:a[2]?a[2].split(`,`):[],line:a[4]?+a[4]:null,column:a[5]?+a[5]:null};else continue;!o.func&&o.line&&(o.func=fi),t.push(o)}return t.length?{message:di(e),name:e.name,stack:t}:null}function li(e){if(!e||!e.stacktrace)return null;for(var t=e.stacktrace,n=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,r=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,i=t.split(`
`),a=[],o,s=0;s<i.length;s+=2){var c=null;(o=n.exec(i[s]))?c={url:o[2],func:o[3],args:[],line:+o[1],column:null}:(o=r.exec(i[s]))&&(c={url:o[6],func:o[3]||o[4],args:o[5]?o[5].split(`,`):[],line:+o[1],column:+o[2]}),c&&(!c.func&&c.line&&(c.func=fi),a.push(c))}return a.length?{message:di(e),name:e.name,stack:a}:null}function ui(e,t){try{return h(h({},e),{stack:e.stack.slice(t)})}catch{return e}}function di(e){var t=e&&e.message;return t?t.error&&typeof t.error.message==`string`?t.error.message:t:`No error message`}var fi,pi,mi,hi,gi,_i,vi,yi=o((()=>{g(),fi=`?`,pi=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,mi=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,hi=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,gi=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,_i=/\((\S*)(?::(\d+))(?::(\d+))\)/,vi=/Minified React error #\d+;/i}));function bi(e){var t=Ci(e.stack),n={type:e.name,value:e.message};return t&&t.length&&(n.stacktrace={frames:t}),n.type===void 0&&n.value===``&&(n.value=`Unrecoverable error caught`),n}function xi(e,t,n){var r={exception:{values:[{type:et(e)?e.constructor.name:n?`UnhandledRejection`:`Error`,value:`Non-Error `+(n?`promise rejection`:`exception`)+` captured with keys: `+zt(e)}]},extra:{__serialized__:Pt(e)}};return t&&(r.stacktrace={frames:Ci(si(t).stack)}),r}function Si(e){return{exception:{values:[bi(e)]}}}function Ci(e){if(!e||!e.length)return[];var t=e,n=t[0].func||``,r=t[t.length-1].func||``;return(n.indexOf(`captureMessage`)!==-1||n.indexOf(`captureException`)!==-1)&&(t=t.slice(1)),r.indexOf(`sentryWrapped`)!==-1&&(t=t.slice(0,-1)),t.slice(0,wi).map(function(e){return{colno:e.column===null?void 0:e.column,filename:e.url||t[0].url,function:e.func||`?`,in_app:!0,lineno:e.line===null?void 0:e.line}}).reverse()}var wi,Ti=o((()=>{v(),yi(),wi=50}));function Ei(e,t,n){var r=Oi(t,n&&n.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return Zt(r,{handled:!0,type:`generic`}),r.level=Ve.Error,n&&n.event_id&&(r.event_id=n.event_id),Vn.resolve(r)}function Di(e,t,n,r){n===void 0&&(n=Ve.Info);var i=ki(t,r&&r.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return i.level=n,r&&r.event_id&&(i.event_id=r.event_id),Vn.resolve(i)}function Oi(e,t,n){n===void 0&&(n={});var r;if(Je(e)&&e.error)return e=e.error,r=Si(si(e)),r;if(Ye(e)||Xe(e)){var i=e,a=i.name||(Ye(i)?`DOMError`:`DOMException`),o=i.message?a+`: `+i.message:a;return r=ki(o,t,n),Xt(r,o),`code`in i&&(r.tags=h(h({},r.tags),{"DOMException.code":``+i.code})),r}return qe(e)?(r=Si(si(e)),r):$e(e)||et(e)?(r=xi(e,t,n.rejection),Zt(r,{synthetic:!0}),r):(r=ki(e,t,n),Xt(r,``+e,void 0),Zt(r,{synthetic:!0}),r)}function ki(e,t,n){n===void 0&&(n={});var r={message:e};return n.attachStacktrace&&t&&(r.stacktrace={frames:Ci(si(t).stack)}),r}var Ai=o((()=>{g(),Ge(),v(),Ti(),yi()})),ji,Mi=o((()=>{g(),oi(),Ge(),v(),ji=function(){function e(e){this.options=e,this._buffer=new Un(30),this._rateLimits={},this._api=new Pr(this.options.dsn),this.url=this._api.getStoreEndpointWithUrlEncodedAuth()}return e.prototype.sendEvent=function(e){throw new mt("Transport Class has to implement `sendEvent` method")},e.prototype.close=function(e){return this._buffer.drain(e)},e.prototype._handleResponse=function(e){var t=e.requestType,n=e.response,r=e.headers,i=e.resolve,a=e.reject,o=Ue.fromHttpCode(n.status);if(this._handleRateLimit(r)&&_.warn(`Too many requests, backing off until: `+this._disabledUntil(t)),o===Ue.Success){i({status:o});return}a(n)},e.prototype._disabledUntil=function(e){return this._rateLimits[e]||this._rateLimits.all},e.prototype._isRateLimited=function(e){return this._disabledUntil(e)>new Date(Date.now())},e.prototype._handleRateLimit=function(e){var t,n,r,i,a=Date.now(),o=e[`x-sentry-rate-limits`],s=e[`retry-after`];if(o){try{for(var c=Fe(o.trim().split(`,`)),l=c.next();!l.done;l=c.next()){var u=l.value.split(`:`,2),d=parseInt(u[0],10),f=(isNaN(d)?60:d)*1e3;try{for(var p=(r=void 0,Fe(u[1].split(`;`))),m=p.next();!m.done;m=p.next()){var ee=m.value;this._rateLimits[ee||`all`]=new Date(a+f)}}catch(e){r={error:e}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return!0}else if(s)return this._rateLimits.all=new Date(a+$t(a,s)),!0;return!1},e}()})),Ni,Pi,Fi=o((()=>{g(),oi(),v(),Mi(),Ni=Gt(),Pi=function(e){Ne(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.sendEvent=function(e){return this._sendRequest(Jr(e,this._api),e)},t.prototype.sendSession=function(e){return this._sendRequest(qr(e,this._api),e)},t.prototype._sendRequest=function(e,t){var n=this;if(this._isRateLimited(e.type))return Promise.reject({event:t,type:e.type,reason:`Transport locked till `+this._disabledUntil(e.type)+` due to too many requests.`,status:429});var r={body:e.body,method:`POST`,referrerPolicy:dn()?`origin`:``};return this.options.fetchParameters!==void 0&&Object.assign(r,this.options.fetchParameters),this.options.headers!==void 0&&(r.headers=this.options.headers),this._buffer.add(new Vn(function(t,i){Ni.fetch(e.url,r).then(function(r){var a={"x-sentry-rate-limits":r.headers.get(`X-Sentry-Rate-Limits`),"retry-after":r.headers.get(`Retry-After`)};n._handleResponse({requestType:e.type,response:r,headers:a,resolve:t,reject:i})}).catch(i)}))},t}(ji)})),Ii,Li=o((()=>{g(),oi(),v(),Mi(),Ii=function(e){Ne(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.sendEvent=function(e){return this._sendRequest(Jr(e,this._api),e)},t.prototype.sendSession=function(e){return this._sendRequest(qr(e,this._api),e)},t.prototype._sendRequest=function(e,t){var n=this;return this._isRateLimited(e.type)?Promise.reject({event:t,type:e.type,reason:`Transport locked till `+this._disabledUntil(e.type)+` due to too many requests.`,status:429}):this._buffer.add(new Vn(function(t,r){var i=new XMLHttpRequest;for(var a in i.onreadystatechange=function(){if(i.readyState===4){var a={"x-sentry-rate-limits":i.getResponseHeader(`X-Sentry-Rate-Limits`),"retry-after":i.getResponseHeader(`Retry-After`)};n._handleResponse({requestType:e.type,response:i,headers:a,resolve:t,reject:r})}},i.open(`POST`,e.url),n.options.headers)n.options.headers.hasOwnProperty(a)&&i.setRequestHeader(a,n.options.headers[a]);i.send(e.body)}))},t}(ji)})),Ri={};c(Ri,{BaseTransport:()=>ji,FetchTransport:()=>Pi,XHRTransport:()=>Ii});var zi=o((()=>{Mi(),Fi(),Li()})),Bi,Vi=o((()=>{g(),oi(),Ge(),v(),Ai(),zi(),Bi=function(e){Ne(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.eventFromException=function(e,t){return Ei(this._options,e,t)},t.prototype.eventFromMessage=function(e,t,n){return t===void 0&&(t=Ve.Info),Di(this._options,e,t,n)},t.prototype._setupTransport=function(){if(!this._options.dsn)return e.prototype._setupTransport.call(this);var t=h(h({},this._options.transportOptions),{dsn:this._options.dsn});return this._options.transport?new this._options.transport(t):cn()?new Pi(t):new Ii(t)},t}(Gr)}));function Hi(){return Ki>0}function Ui(){Ki+=1,setTimeout(function(){--Ki})}function Wi(e,t,n){if(t===void 0&&(t={}),typeof e!=`function`)return e;try{if(e.__sentry__)return e;if(e.__sentry_wrapped__)return e.__sentry_wrapped__}catch{return e}var r=function(){var r=Array.prototype.slice.call(arguments);try{n&&typeof n==`function`&&n.apply(this,arguments);var i=r.map(function(e){return Wi(e,t)});return e.handleEvent?e.handleEvent.apply(this,i):e.apply(this,i)}catch(e){throw Ui(),Ar(function(n){n.addEventProcessor(function(e){var n=h({},e);return t.mechanism&&(Xt(n,void 0,void 0),Zt(n,t.mechanism)),n.extra=h(h({},n.extra),{arguments:r}),n}),yr(e)}),e}};try{for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}catch{}e.prototype=e.prototype||{},r.prototype=e.prototype,Object.defineProperty(e,`__sentry_wrapped__`,{enumerable:!1,value:r}),Object.defineProperties(r,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:e}});try{Object.getOwnPropertyDescriptor(r,`name`).configurable&&Object.defineProperty(r,`name`,{get:function(){return e.name}})}catch{}return r}function Gi(e){if(e===void 0&&(e={}),!e.eventId){_.error(`Missing eventId option in showReportDialog call`);return}if(!e.dsn){_.error(`Missing dsn option in showReportDialog call`);return}var t=document.createElement(`script`);t.async=!0,t.src=new Pr(e.dsn).getReportDialogEndpoint(e),e.onLoad&&(t.onload=e.onLoad),(document.head||document.body).appendChild(t)}var Ki,qi=o((()=>{g(),oi(),v(),Ki=0})),Ji,Yi=o((()=>{g(),oi(),Ge(),v(),Ai(),qi(),Ji=function(){function e(t){this.name=e.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=h({onerror:!0,onunhandledrejection:!0},t)}return e.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(_.log(`Global Handler attached: onerror`),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(_.log(`Global Handler attached: onunhandledrejection`),this._installGlobalOnUnhandledRejectionHandler())},e.prototype._installGlobalOnErrorHandler=function(){var t=this;this._onErrorHandlerInstalled||=(hn({callback:function(n){var r=n.error,i=or(),a=i.getIntegration(e),o=r&&r.__sentry_own_request__===!0;if(!(!a||Hi()||o)){var s=i.getClient(),c=Qe(r)?t._eventFromIncompleteOnError(n.msg,n.url,n.line,n.column):t._enhanceEventWithInitialFrame(Oi(r,void 0,{attachStacktrace:s&&s.getOptions().attachStacktrace,rejection:!1}),n.url,n.line,n.column);Zt(c,{handled:!1,type:`onerror`}),i.captureEvent(c,{originalException:r})}},type:`error`}),!0)},e.prototype._installGlobalOnUnhandledRejectionHandler=function(){var t=this;this._onUnhandledRejectionHandlerInstalled||=(hn({callback:function(n){var r=n;try{`reason`in n?r=n.reason:`detail`in n&&`reason`in n.detail&&(r=n.detail.reason)}catch{}var i=or(),a=i.getIntegration(e),o=r&&r.__sentry_own_request__===!0;if(!a||Hi()||o)return!0;var s=i.getClient(),c=Qe(r)?t._eventFromRejectionWithPrimitive(r):Oi(r,void 0,{attachStacktrace:s&&s.getOptions().attachStacktrace,rejection:!0});c.level=Ve.Error,Zt(c,{handled:!1,type:`onunhandledrejection`}),i.captureEvent(c,{originalException:r})},type:`unhandledrejection`}),!0)},e.prototype._eventFromIncompleteOnError=function(e,t,n,r){var i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,a=Je(e)?e.message:e,o;if(Ze(a)){var s=a.match(i);s&&(o=s[1],a=s[2])}var c={exception:{values:[{type:o||`Error`,value:a}]}};return this._enhanceEventWithInitialFrame(c,t,n,r)},e.prototype._eventFromRejectionWithPrimitive=function(e){return{exception:{values:[{type:`UnhandledRejection`,value:`Non-Error promise rejection captured with value: `+String(e)}]}}},e.prototype._enhanceEventWithInitialFrame=function(e,t,n,r){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].stacktrace=e.exception.values[0].stacktrace||{},e.exception.values[0].stacktrace.frames=e.exception.values[0].stacktrace.frames||[];var i=isNaN(parseInt(r,10))?void 0:r,a=isNaN(parseInt(n,10))?void 0:n,o=Ze(t)&&t.length>0?t:Qt();return e.exception.values[0].stacktrace.frames.length===0&&e.exception.values[0].stacktrace.frames.push({colno:i,filename:o,function:`?`,in_app:!0,lineno:a}),e},e.id=`GlobalHandlers`,e}()})),Xi,Zi,Qi=o((()=>{g(),v(),qi(),Xi=`EventTarget.Window.Node.ApplicationCache.AudioTrackList.ChannelMergerNode.CryptoOperation.EventSource.FileReader.HTMLUnknownElement.IDBDatabase.IDBRequest.IDBTransaction.KeyOperation.MediaController.MessagePort.ModalWindow.Notification.SVGElementInstance.Screen.TextTrack.TextTrackCue.TextTrackList.WebSocket.WebSocketWorker.Worker.XMLHttpRequest.XMLHttpRequestEventTarget.XMLHttpRequestUpload`.split(`.`),Zi=function(){function e(t){this.name=e.id,this._options=h({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},t)}return e.prototype.setupOnce=function(){var e=Gt();this._options.setTimeout&&kt(e,`setTimeout`,this._wrapTimeFunction.bind(this)),this._options.setInterval&&kt(e,`setInterval`,this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&kt(e,`requestAnimationFrame`,this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&`XMLHttpRequest`in e&&kt(XMLHttpRequest.prototype,`send`,this._wrapXHR.bind(this)),this._options.eventTarget&&(Array.isArray(this._options.eventTarget)?this._options.eventTarget:Xi).forEach(this._wrapEventTarget.bind(this))},e.prototype._wrapTimeFunction=function(e){return function(){var t=[...arguments],n=t[0];return t[0]=Wi(n,{mechanism:{data:{function:St(e)},handled:!0,type:`instrument`}}),e.apply(this,t)}},e.prototype._wrapRAF=function(e){return function(t){return e.call(this,Wi(t,{mechanism:{data:{function:`requestAnimationFrame`,handler:St(e)},handled:!0,type:`instrument`}}))}},e.prototype._wrapEventTarget=function(e){var t=Gt(),n=t[e]&&t[e].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty(`addEventListener`)||(kt(n,`addEventListener`,function(t){return function(n,r,i){try{typeof r.handleEvent==`function`&&(r.handleEvent=Wi(r.handleEvent.bind(r),{mechanism:{data:{function:`handleEvent`,handler:St(r),target:e},handled:!0,type:`instrument`}}))}catch{}return t.call(this,n,Wi(r,{mechanism:{data:{function:`addEventListener`,handler:St(r),target:e},handled:!0,type:`instrument`}}),i)}}),kt(n,`removeEventListener`,function(e){return function(t,n,r){var i=n;try{var a=i?.__sentry_wrapped__;a&&e.call(this,t,a,r)}catch{}return e.call(this,t,i,r)}}))},e.prototype._wrapXHR=function(e){return function(){var t=[...arguments],n=this;return[`onload`,`onerror`,`onprogress`,`onreadystatechange`].forEach(function(e){e in n&&typeof n[e]==`function`&&kt(n,e,function(t){var n={mechanism:{data:{function:e,handler:St(t)},handled:!0,type:`instrument`}};return t.__sentry_original__&&(n.mechanism.data.handler=St(t.__sentry_original__)),Wi(t,n)})}),e.apply(this,t)}},e.id=`TryCatch`,e}()})),$i,ea=o((()=>{g(),oi(),Ge(),v(),$i=function(){function e(t){this.name=e.id,this._options=h({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},t)}return e.prototype.addSentryBreadcrumb=function(e){this._options.sentry&&or().addBreadcrumb({category:`sentry.`+(e.type===`transaction`?`transaction`:`event`),event_id:e.event_id,level:e.level,message:Jt(e)},{event:e})},e.prototype.setupOnce=function(){var e=this;this._options.console&&hn({callback:function(){var t=[...arguments];e._consoleBreadcrumb.apply(e,Le(t))},type:`console`}),this._options.dom&&hn({callback:function(){var t=[...arguments];e._domBreadcrumb.apply(e,Le(t))},type:`dom`}),this._options.xhr&&hn({callback:function(){var t=[...arguments];e._xhrBreadcrumb.apply(e,Le(t))},type:`xhr`}),this._options.fetch&&hn({callback:function(){var t=[...arguments];e._fetchBreadcrumb.apply(e,Le(t))},type:`fetch`}),this._options.history&&hn({callback:function(){var t=[...arguments];e._historyBreadcrumb.apply(e,Le(t))},type:`history`})},e.prototype._consoleBreadcrumb=function(e){var t={category:`console`,data:{arguments:e.args,logger:`console`},level:Ve.fromString(e.level),message:Et(e.args,` `)};if(e.level===`assert`)if(e.args[0]===!1)t.message=`Assertion failed: `+(Et(e.args.slice(1),` `)||`console.assert`),t.data.arguments=e.args.slice(1);else return;or().addBreadcrumb(t,{input:e.args,level:e.level})},e.prototype._domBreadcrumb=function(e){var t;try{t=e.event.target?st(e.event.target):st(e.event)}catch{t=`<unknown>`}t.length!==0&&or().addBreadcrumb({category:`ui.`+e.name,message:t},{event:e.event,name:e.name})},e.prototype._xhrBreadcrumb=function(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;var t=e.xhr.__sentry_xhr__||{},n=t.method,r=t.url,i=t.status_code,a=t.body;or().addBreadcrumb({category:`xhr`,data:{method:n,url:r,status_code:i},type:`http`},{xhr:e.xhr,input:a});return}},e.prototype._fetchBreadcrumb=function(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&e.fetchData.method===`POST`||(e.error?or().addBreadcrumb({category:`fetch`,data:e.fetchData,level:Ve.Error,type:`http`},{data:e.error,input:e.args}):or().addBreadcrumb({category:`fetch`,data:h(h({},e.fetchData),{status_code:e.response.status}),type:`http`},{input:e.args,response:e.response})))},e.prototype._historyBreadcrumb=function(e){var t=Gt(),n=e.from,r=e.to,i=qt(t.location.href),a=qt(n),o=qt(r);a.path||(a=i),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),i.protocol===a.protocol&&i.host===a.host&&(n=a.relative),or().addBreadcrumb({category:`navigation`,data:{from:n,to:r}})},e.id=`Breadcrumbs`,e}()})),ta,na,ra,ia=o((()=>{g(),oi(),v(),Ti(),yi(),ta=`cause`,na=5,ra=function(){function e(t){t===void 0&&(t={}),this.name=e.id,this._key=t.key||ta,this._limit=t.limit||na}return e.prototype.setupOnce=function(){$n(function(t,n){var r=or().getIntegration(e);return r?r._handler(t,n):t})},e.prototype._handler=function(e,t){if(!e.exception||!e.exception.values||!t||!at(t.originalException,Error))return e;var n=this._walkErrorTree(t.originalException,this._key);return e.exception.values=Le(n,e.exception.values),e},e.prototype._walkErrorTree=function(e,t,n){if(n===void 0&&(n=[]),!at(e[t],Error)||n.length+1>=this._limit)return n;var r=bi(si(e[t]));return this._walkErrorTree(e[t],t,Le([r],n))},e.id=`LinkedErrors`,e}()})),aa,oa,sa=o((()=>{g(),oi(),v(),aa=Gt(),oa=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){$n(function(t){if(or().getIntegration(e)){if(!aa.navigator&&!aa.location&&!aa.document)return t;var n=t.request?.url||aa.location?.href,r=(aa.document||{}).referrer,i=(aa.navigator||{}).userAgent,a=h(h(h({},t.request?.headers),r&&{Referer:r}),i&&{"User-Agent":i}),o=h(h({},n&&{url:n}),{headers:a});return h(h({},t),{request:o})}return t})},e.id=`UserAgent`,e}()})),ca={};c(ca,{Breadcrumbs:()=>$i,GlobalHandlers:()=>Ji,LinkedErrors:()=>ra,TryCatch:()=>Zi,UserAgent:()=>oa});var la=o((()=>{Yi(),Qi(),ea(),ia(),sa()})),ua,da,fa=o((()=>{ua=`sentry.javascript.browser`,da=`5.30.0`})),pa,ma=o((()=>{g(),oi(),v(),Vi(),qi(),la(),fa(),pa=function(e){Ne(t,e);function t(t){return t===void 0&&(t={}),e.call(this,Bi,t)||this}return t.prototype.showReportDialog=function(e){if(e===void 0&&(e={}),Gt().document){if(!this._isEnabled()){_.error(`Trying to call showReportDialog with Sentry Client disabled`);return}Gi(h(h({},e),{dsn:e.dsn||this.getDsn()}))}},t.prototype._prepareEvent=function(t,n,r){return t.platform=t.platform||`javascript`,t.sdk=h(h({},t.sdk),{name:ua,packages:Le(t.sdk&&t.sdk.packages||[],[{name:`npm:@sentry/browser`,version:da}]),version:da}),e.prototype._prepareEvent.call(this,t,n,r)},t.prototype._sendEvent=function(t){var n=this.getIntegration($i);n&&n.addSentryBreadcrumb(t),e.prototype._sendEvent.call(this,t)},t}(Vr)}));function ha(e){if(e===void 0&&(e={}),e.defaultIntegrations===void 0&&(e.defaultIntegrations=wa),e.release===void 0){var t=Gt();t.SENTRY_RELEASE&&t.SENTRY_RELEASE.id&&(e.release=t.SENTRY_RELEASE.id)}e.autoSessionTracking===void 0&&(e.autoSessionTracking=!1),Xr(pa,e),e.autoSessionTracking&&Ca()}function ga(e){e===void 0&&(e={}),e.eventId||=or().lastEventId();var t=or().getClient();t&&t.showReportDialog(e)}function _a(){return or().lastEventId()}function va(){}function ya(e){e()}function ba(e){var t=or().getClient();return t?t.flush(e):Vn.reject(!1)}function xa(e){var t=or().getClient();return t?t.close(e):Vn.reject(!1)}function Sa(e){return Wi(e)()}function Ca(){var e=Gt(),t=or(),n=document.readyState===`complete`,r=!1,i=function(){r&&n&&t.endSession()},a=function(){n=!0,i(),e.removeEventListener(`load`,a)};t.startSession(),n||e.addEventListener(`load`,a);try{var o=new PerformanceObserver(function(e,t){e.getEntries().forEach(function(e){e.name===`first-contentful-paint`&&e.startTime<s&&(t.disconnect(),r=!0,i())})}),s=document.visibilityState===`hidden`?0:1/0;document.addEventListener(`visibilitychange`,function(e){s=Math.min(s,e.timeStamp)},{once:!0}),o.observe({type:`paint`,buffered:!0})}catch{r=!0,i()}}var wa,Ta=o((()=>{oi(),v(),ma(),qi(),la(),wa=[new ni,new $r,new Zi,new $i,new Ji,new ra,new oa]})),Ea=o((()=>{Ge(),oi(),ma(),qi(),Ai(),Ta(),fa()})),Da={};c(Da,{BrowserClient:()=>pa,Hub:()=>hr,Integrations:()=>Aa,SDK_NAME:()=>ua,SDK_VERSION:()=>da,Scope:()=>er,Severity:()=>Ve,Status:()=>Ue,Transports:()=>Ri,addBreadcrumb:()=>Cr,addGlobalEventProcessor:()=>$n,captureEvent:()=>xr,captureException:()=>yr,captureMessage:()=>br,close:()=>xa,configureScope:()=>Sr,defaultIntegrations:()=>wa,eventFromException:()=>Ei,eventFromMessage:()=>Di,flush:()=>ba,forceLoad:()=>va,getCurrentHub:()=>or,getHubFromCarrier:()=>ur,init:()=>ha,injectReportDialog:()=>Gi,lastEventId:()=>_a,makeMain:()=>ar,onLoad:()=>ya,setContext:()=>wr,setExtra:()=>Dr,setExtras:()=>Tr,setTag:()=>Or,setTags:()=>Er,setUser:()=>kr,showReportDialog:()=>ga,startTransaction:()=>jr,withScope:()=>Ar,wrap:()=>Sa});var Oa,ka,Aa,ja=o((()=>{g(),Ea(),oi(),v(),la(),zi(),Oa={},ka=Gt(),ka.Sentry&&ka.Sentry.Integrations&&(Oa=ka.Sentry.Integrations),Aa=h(h(h({},Oa),ii),ca)})),Ma={};c(Ma,{$mobx:()=>x,FlowCancellationError:()=>ac,ObservableMap:()=>rd,ObservableSet:()=>od,Reaction:()=>bu,_allowStateChanges:()=>ss,_allowStateChangesInsideComputed:()=>Us,_allowStateReadsEnd:()=>bs,_allowStateReadsStart:()=>ys,_autoAction:()=>Pu,_endAction:()=>os,_getAdministration:()=>ml,_getGlobalState:()=>Cs,_interceptReads:()=>uc,_isComputingDerivation:()=>fs,_resetGlobalState:()=>ws,_startAction:()=>as,action:()=>Nu,autorun:()=>Gs,comparer:()=>Rl,computed:()=>au,configure:()=>Qs,createAtom:()=>po,defineProperty:()=>Dc,entries:()=>Sc,extendObservable:()=>$s,flow:()=>Wu,flowResult:()=>cc,get:()=>Ec,getAtom:()=>pl,getDebugName:()=>hl,getDependencyTree:()=>ec,getObserverTree:()=>nc,has:()=>Tc,intercept:()=>dc,isAction:()=>Ws,isBoxedObservable:()=>du,isComputed:()=>hc,isComputedProp:()=>gc,isFlow:()=>lc,isFlowCancellationError:()=>oc,isObservable:()=>vc,isObservableArray:()=>el,isObservableMap:()=>id,isObservableObject:()=>ol,isObservableProp:()=>yc,isObservableSet:()=>sd,keys:()=>bc,makeAutoObservable:()=>Yc,makeObservable:()=>Jc,observable:()=>eu,observe:()=>kc,onBecomeObserved:()=>Ys,onBecomeUnobserved:()=>Xs,onReactionError:()=>Is,override:()=>Bl,ownKeys:()=>Oc,reaction:()=>qs,remove:()=>wc,runInAction:()=>Us,set:()=>Cc,spy:()=>Vs,toJS:()=>Pc,trace:()=>Fc,transaction:()=>Ic,untracked:()=>gs,values:()=>xc,when:()=>Lc});function y(e){var t=[...arguments].slice(1);throw Error(typeof e==`number`?`[MobX] minified error nr: `+e+(t.length?` `+t.map(String).join(`,`):``)+`. Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts`:`[MobX] `+e)}function Na(){return typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:Sl}function Pa(){kl||y(`Proxy not available`)}function Fa(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}function Ia(e){return typeof e==`function`}function La(e){switch(typeof e){case`string`:case`symbol`:case`number`:return!0}return!1}function Ra(e){return typeof e==`object`&&!!e}function za(e){if(!Ra(e))return!1;var t=Object.getPrototypeOf(e);if(t==null)return!0;var n=Object.hasOwnProperty.call(t,`constructor`)&&t.constructor;return typeof n==`function`&&n.toString()===Al}function Ba(e){var t=e?.constructor;return t?t.name===`GeneratorFunction`||t.displayName===`GeneratorFunction`:!1}function Va(e,t,n){Tl(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function Ha(e,t,n){Tl(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function Ua(e,t){var n=`isMobX`+e;return t.prototype[n]=!0,function(e){return Ra(e)&&e[n]===!0}}function Wa(e){return e!=null&&Object.prototype.toString.call(e)===`[object Map]`}function Ga(e){var t=Object.getPrototypeOf(e),n=Object.getPrototypeOf(t);return Object.getPrototypeOf(n)===null}function Ka(e){return e!=null&&Object.prototype.toString.call(e)===`[object Set]`}function qa(e){var t=Object.keys(e);if(!Ml)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter(function(t){return El.propertyIsEnumerable.call(e,t)})):t}function Ja(e){return e===null?null:typeof e==`object`?``+e:e}function Ya(e,t){return El.hasOwnProperty.call(e,t)}function Xa(e,t){return!!(e&t)}function Za(e,t,n){return n?e|=t:e&=~t,e}function Qa(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function $a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,`value`in r&&(r.writable=!0),Object.defineProperty(e,oo(r.key),r)}}function eo(e,t,n){return t&&$a(e.prototype,t),n&&$a(e,n),Object.defineProperty(e,`prototype`,{writable:!1}),e}function to(e,t){var n=typeof Symbol<`u`&&e[Symbol.iterator]||e[`@@iterator`];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=so(e))||t&&e&&typeof e.length==`number`){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function no(){return no=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},no.apply(null,arguments)}function ro(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,io(e,t)}function io(e,t){return io=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},io(e,t)}function ao(e,t){if(typeof e!=`object`||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||`default`);if(typeof r!=`object`)return r;throw TypeError(`@@toPrimitive must return a primitive value.`)}return(t===`string`?String:Number)(e)}function oo(e){var t=ao(e,`string`);return typeof t==`symbol`?t:t+``}function so(e,t){if(e){if(typeof e==`string`)return Qa(e,t);var n={}.toString.call(e).slice(8,-1);return n===`Object`&&e.constructor&&(n=e.constructor.name),n===`Map`||n===`Set`?Array.from(e):n===`Arguments`||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qa(e,t):void 0}}function co(e){function t(t,n){if(fo(n))return e.decorate_20223_(t,n);lo(t,n,e)}return Object.assign(t,e)}function lo(e,t,n){Ya(e,Fl)||Va(e,Fl,no({},e[Fl])),So(n)||(e[Fl][t]=n)}function uo(e){return Ya(e,Fl)||Va(e,Fl,no({},e[Fl])),e[Fl]}function fo(e){return typeof e==`object`&&typeof e.kind==`string`}function po(e,t,n){t===void 0&&(t=jl),n===void 0&&(n=jl);var r=new Il(e);return t!==jl&&Ys(r,t),n!==jl&&Xs(r,n),r}function mo(e,t){return e===t}function ho(e,t){return _l(e,t)}function go(e,t){return _l(e,t,1)}function _o(e,t){return Object.is?Object.is(e,t):e===t?e!==0||1/e==1/t:e!==e&&t!==t}function vo(e,t,n){return vc(e)?e:Array.isArray(e)?eu.array(e,{name:n}):za(e)?eu.object(e,void 0,{name:n}):Wa(e)?eu.map(e,{name:n}):Ka(e)?eu.set(e,{name:n}):typeof e==`function`&&!Ws(e)&&!lc(e)?Ba(e)?Wu(e):Pu(n,e):e}function yo(e,t,n){if(e==null||ol(e)||el(e)||id(e)||sd(e))return e;if(Array.isArray(e))return eu.array(e,{name:n,deep:!1});if(za(e))return eu.object(e,void 0,{name:n,deep:!1});if(Wa(e))return eu.map(e,{name:n,deep:!1});if(Ka(e))return eu.set(e,{name:n,deep:!1})}function bo(e){return e}function xo(e,t){return _l(e,t)?t:e}function So(e){return e.annotationType_===zl}function Co(e,t){return 0}function wo(e,t,n,r){y(`'`+this.annotationType_+`' can only be used with 'makeObservable'`)}function To(e,t){console.warn(`'`+this.annotationType_+`' cannot be used with decorators - this is a no-op`)}function Eo(e,t){return{annotationType_:e,options_:t,make_:Do,extend_:Oo,decorate_20223_:ko}}function Do(e,t,n,r){var i;if((i=this.options_)!=null&&i.bound)return this.extend_(e,t,n,!1)===null?0:1;if(r===e.target_)return this.extend_(e,t,n,!1)===null?0:2;if(Ws(n.value))return 1;var a=jo(e,this,t,n,!1);return Tl(r,t,a),2}function Oo(e,t,n,r){var i=jo(e,this,t,n);return e.defineProperty_(t,i,r)}function ko(e,t){var n=t.kind,r=t.name,i=t.addInitializer,a=this,o=function(e){return rs(a.options_?.name??r.toString(),e,a.options_?.autoAction??!1)};if(n==`field`)return function(e){var t,n=e;return Ws(n)||(n=o(n)),(t=a.options_)!=null&&t.bound&&(n=n.bind(this),n.isMobxAction=!0),n};if(n==`method`){var s;return Ws(e)||(e=o(e)),(s=this.options_)!=null&&s.bound&&i(function(){var e=this,t=e[r].bind(e);t.isMobxAction=!0,e[r]=t}),e}y(`Cannot apply '`+a.annotationType_+`' to '`+String(r)+`' (kind: `+n+`):`+(`
'`+a.annotationType_+`' can only be used on properties with a function value.`))}function Ao(e,t,n,r){t.annotationType_,r.value}function jo(e,t,n,r,i){var a,o;i===void 0&&(i=C.safeDescriptors),Ao(e,t,n,r);var s=r.value;return(a=t.options_)!=null&&a.bound&&(s=s.bind(e.proxy_??e.target_)),{value:rs(t.options_?.name??n.toString(),s,t.options_?.autoAction??!1,(o=t.options_)!=null&&o.bound?e.proxy_??e.target_:void 0),configurable:i?e.isPlainObject_:!0,enumerable:!1,writable:!i}}function Mo(e,t){return{annotationType_:e,options_:t,make_:No,extend_:Po,decorate_20223_:Fo}}function No(e,t,n,r){var i;if(r===e.target_)return this.extend_(e,t,n,!1)===null?0:2;if((i=this.options_)!=null&&i.bound&&(!Ya(e.target_,t)||!lc(e.target_[t]))&&this.extend_(e,t,n,!1)===null)return 0;if(lc(n.value))return 1;var a=Lo(e,this,t,n,!1,!1);return Tl(r,t,a),2}function Po(e,t,n,r){var i=Lo(e,this,t,n,this.options_?.bound);return e.defineProperty_(t,i,r)}function Fo(e,t){var n,r=t.name,i=t.addInitializer;return lc(e)||(e=Wu(e)),(n=this.options_)!=null&&n.bound&&i(function(){var e=this,t=e[r].bind(e);t.isMobXFlow=!0,e[r]=t}),e}function Io(e,t,n,r){t.annotationType_,r.value}function Lo(e,t,n,r,i,a){a===void 0&&(a=C.safeDescriptors),Io(e,t,n,r);var o=r.value;return lc(o)||(o=Wu(o)),i&&(o=o.bind(e.proxy_??e.target_),o.isMobXFlow=!0),{value:o,configurable:a?e.isPlainObject_:!0,enumerable:!1,writable:!a}}function Ro(e,t){return{annotationType_:e,options_:t,make_:zo,extend_:Bo,decorate_20223_:Vo}}function zo(e,t,n){return this.extend_(e,t,n,!1)===null?0:1}function Bo(e,t,n,r){return Ho(e,this,t,n),e.defineComputedProperty_(t,no({},this.options_,{get:n.get,set:n.set}),r)}function Vo(e,t){var n=this,r=t.name,i=t.addInitializer;return i(function(){var t=il(this)[x],i=no({},n.options_,{get:e,context:this});i.name||=`ObservableObject.`+r.toString(),t.values_.set(r,new fu(i))}),function(){return this[x].getObservablePropValue_(r)}}function Ho(e,t,n,r){t.annotationType_,r.get}function Uo(e,t){return{annotationType_:e,options_:t,make_:Wo,extend_:Go,decorate_20223_:Ko}}function Wo(e,t,n){return this.extend_(e,t,n,!1)===null?0:1}function Go(e,t,n,r){return qo(e,this,t,n),e.defineObservableProperty_(t,n.value,this.options_?.enhancer??vo,r)}function Ko(e,t){var n=this,r=t.kind,i=t.name,a=new WeakSet;function o(e,t){var r=il(e)[x],o=new uu(t,n.options_?.enhancer??vo,`ObservableObject.`+i.toString(),!1);r.values_.set(i,o),a.add(e)}if(r==`accessor`)return{get:function(){return a.has(this)||o(this,e.get.call(this)),this[x].getObservablePropValue_(i)},set:function(e){return a.has(this)||o(this,e),this[x].setObservablePropValue_(i,e)},init:function(e){return a.has(this)||o(this,e),e}}}function qo(e,t,n,r){t.annotationType_}function Jo(e){return{annotationType_:Vl,options_:e,make_:Yo,extend_:Xo,decorate_20223_:Zo}}function Yo(e,t,n,r){var i;if(n.get)return au.make_(e,t,n,r);if(n.set){var a=Ws(n.set)?n.set:rs(t.toString(),n.set);return r===e.target_?e.defineProperty_(t,{configurable:C.safeDescriptors?e.isPlainObject_:!0,set:a})===null?0:2:(Tl(r,t,{configurable:!0,set:a}),2)}if(r!==e.target_&&typeof n.value==`function`){var o;if(Ba(n.value)){var s;return((s=this.options_)!=null&&s.autoBind?Wu.bound:Wu).make_(e,t,n,r)}return((o=this.options_)!=null&&o.autoBind?Pu.bound:Pu).make_(e,t,n,r)}var c=this.options_?.deep===!1?eu.ref:eu;return typeof n.value==`function`&&(i=this.options_)!=null&&i.autoBind&&(n.value=n.value.bind(e.proxy_??e.target_)),c.make_(e,t,n,r)}function Xo(e,t,n,r){var i;return n.get?au.extend_(e,t,n,r):n.set?e.defineProperty_(t,{configurable:C.safeDescriptors?e.isPlainObject_:!0,set:rs(t.toString(),n.set)},r):(typeof n.value==`function`&&(i=this.options_)!=null&&i.autoBind&&(n.value=n.value.bind(e.proxy_??e.target_)),(this.options_?.deep===!1?eu.ref:eu).extend_(e,t,n,r))}function Zo(e,t){y(`'`+this.annotationType_+`' cannot be used as a decorator`)}function Qo(e){return e||ql}function $o(e){return e.deep===!0?vo:e.deep===!1?bo:ts(e.defaultDecorator)}function es(e){return e?e.defaultDecorator??Jo(e):void 0}function ts(e){return e?e.options_?.enhancer??vo:vo}function ns(e,t,n){if(fo(t))return Jl.decorate_20223_(e,t);if(La(t)){lo(e,t,Jl);return}return vc(e)?e:za(e)?eu.object(e,t,n):Array.isArray(e)?eu.array(e,t):Wa(e)?eu.map(e,t):Ka(e)?eu.set(e,t):typeof e==`object`&&e?e:eu.box(e,t)}function rs(e,t,n,r){n===void 0&&(n=!1);function i(){return is(e,n,t,r||this,arguments)}return i.isMobxAction=!0,i.toString=function(){return t.toString()},cu&&(lu.value=e,Tl(i,`name`,lu)),i}function is(e,t,n,r,i){var a=as(e,t,r,i);try{return n.apply(r,i)}catch(e){throw a.error_=e,e}finally{os(a)}}function as(e,t,n,r){var i=!1,a=0,o=C.trackingDerivation,s=!t||!o;As();var c=C.allowStateChanges;s&&(_s(),c=cs(!0));var l=ys(!0),u={runAsAction_:s,prevDerivation_:o,prevAllowStateChanges_:c,prevAllowStateReads_:l,notifySpy_:i,startTime_:a,actionId_:su++,parentActionId_:ou};return ou=u.actionId_,u}function os(e){ou!==e.actionId_&&y(30),ou=e.parentActionId_,e.error_!==void 0&&(C.suppressReactionErrors=!0),ls(e.prevAllowStateChanges_),bs(e.prevAllowStateReads_),js(),e.runAsAction_&&vs(e.prevDerivation_),C.suppressReactionErrors=!1}function ss(e,t){var n=cs(e);try{return t()}finally{ls(n)}}function cs(e){var t=C.allowStateChanges;return C.allowStateChanges=e,t}function ls(e){C.allowStateChanges=e}function us(e){return e instanceof hu}function ds(e){switch(e.dependenciesState_){case S.UP_TO_DATE_:return!1;case S.NOT_TRACKING_:case S.STALE_:return!0;case S.POSSIBLY_STALE_:for(var t=ys(!0),n=_s(),r=e.observing_,i=r.length,a=0;a<i;a++){var o=r[a];if(pu(o)){if(C.disableErrorBoundaries)o.get();else try{o.get()}catch{return vs(n),bs(t),!0}if(e.dependenciesState_===S.STALE_)return vs(n),bs(t),!0}}return xs(e),vs(n),bs(t),!1}}function fs(){return C.trackingDerivation!==null}function ps(e,t,n){var r=ys(!0);xs(e),e.newObserving_=Array(e.runId_===0?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++C.runId;var i=C.trackingDerivation;C.trackingDerivation=e,C.inBatch++;var a;if(C.disableErrorBoundaries===!0)a=t.call(n);else try{a=t.call(n)}catch(e){a=new hu(e)}return C.inBatch--,C.trackingDerivation=i,ms(e),bs(r),a}function ms(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=S.UP_TO_DATE_,i=0,a=e.unboundDepsCount_,o=0;o<a;o++){var s=n[o];s.diffValue===0&&(s.diffValue=1,i!==o&&(n[i]=s),i++),s.dependenciesState_>r&&(r=s.dependenciesState_)}for(n.length=i,e.newObserving_=null,a=t.length;a--;){var c=t[a];c.diffValue===0&&Os(c,e),c.diffValue=0}for(;i--;){var l=n[i];l.diffValue===1&&(l.diffValue=0,Ds(l,e))}r!==S.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}function hs(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)Os(t[n],e);e.dependenciesState_=S.NOT_TRACKING_}function gs(e){var t=_s();try{return e()}finally{vs(t)}}function _s(){var e=C.trackingDerivation;return C.trackingDerivation=null,e}function vs(e){C.trackingDerivation=e}function ys(e){var t=C.allowStateReads;return C.allowStateReads=e,t}function bs(e){C.allowStateReads=e}function xs(e){if(e.dependenciesState_!==S.UP_TO_DATE_){e.dependenciesState_=S.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=S.UP_TO_DATE_}}function Ss(){if((C.pendingReactions.length||C.inBatch||C.isRunningReactions)&&y(36),yu=!0,vu){var e=Na();--e.__mobxInstanceCount===0&&(e.__mobxGlobals=void 0),C=new _u}}function Cs(){return C}function ws(){var e=new _u;for(var t in e)gu.indexOf(t)===-1&&(C[t]=e[t]);C.allowStateChanges=!C.enforceActions}function Ts(e){return e.observers_&&e.observers_.size>0}function Es(e){return e.observers_}function Ds(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function Os(e,t){e.observers_.delete(t),e.observers_.size===0&&ks(e)}function ks(e){e.isPendingUnobservation===!1&&(e.isPendingUnobservation=!0,C.pendingUnobservations.push(e))}function As(){C.inBatch++}function js(){if(--C.inBatch===0){Ls();for(var e=C.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation=!1,n.observers_.size===0&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBUO()),n instanceof fu&&n.suspend_())}C.pendingUnobservations=[]}}function Ms(e){var t=C.trackingDerivation;return t===null?(e.observers_.size===0&&C.inBatch>0&&ks(e),!1):(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved&&C.trackingContext&&(e.isBeingObserved=!0,e.onBO())),e.isBeingObserved)}function Ns(e){e.lowestObserverState_!==S.STALE_&&(e.lowestObserverState_=S.STALE_,e.observers_.forEach(function(e){e.dependenciesState_===S.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=S.STALE_}))}function Ps(e){e.lowestObserverState_!==S.STALE_&&(e.lowestObserverState_=S.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===S.POSSIBLY_STALE_?t.dependenciesState_=S.STALE_:t.dependenciesState_===S.UP_TO_DATE_&&(e.lowestObserverState_=S.UP_TO_DATE_)}))}function Fs(e){e.lowestObserverState_===S.UP_TO_DATE_&&(e.lowestObserverState_=S.POSSIBLY_STALE_,e.observers_.forEach(function(e){e.dependenciesState_===S.UP_TO_DATE_&&(e.dependenciesState_=S.POSSIBLY_STALE_,e.onBecomeStale_())}))}function Is(e){return C.globalReactionErrorHandlers.push(e),function(){var t=C.globalReactionErrorHandlers.indexOf(e);t>=0&&C.globalReactionErrorHandlers.splice(t,1)}}function Ls(){C.inBatch>0||C.isRunningReactions||Su(Rs)}function Rs(){C.isRunningReactions=!0;for(var e=C.pendingReactions,t=0;e.length>0;){++t===xu&&(console.error(`[mobx] cycle in reaction: `+e[0]),e.splice(0));for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction_()}C.isRunningReactions=!1}function zs(e){var t=Su;Su=function(n){return e(function(){return t(n)})}}function Bs(){return!1}function Vs(e){return console.warn(`[mobx.spy] Is a no-op in production builds`),function(){}}function Hs(e){return function(t,n){if(Ia(t))return rs(t.name||Ou,t,e);if(Ia(n))return rs(t,n,e);if(fo(n))return(e?ju:ku).decorate_20223_(t,n);if(La(n))return lo(t,n,e?ju:ku);if(La(t))return co(Eo(e?Eu:wu,{name:t,autoAction:e}))}}function Us(e){return is(e.name||Ou,!1,e,this,void 0)}function Ws(e){return Ia(e)&&e.isMobxAction===!0}function Gs(e,t){var n;t===void 0&&(t=Ol);var r=t?.name??`Autorun`,i=!t.scheduler&&!t.delay,a;if(i)a=new bu(r,function(){this.track(c)},t.onError,t.requiresObservable);else{var o=Ks(t),s=!1;a=new bu(r,function(){s||(s=!0,o(function(){s=!1,a.isDisposed||a.track(c)}))},t.onError,t.requiresObservable)}function c(){e(a)}return(n=t)!=null&&(n=n.signal)!=null&&n.aborted||a.schedule_(),a.getDisposer_(t?.signal)}function Ks(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Fu}function qs(e,t,n){var r;n===void 0&&(n=Ol);var i=n.name??`Reaction`,a=Nu(i,n.onError?Js(n.onError,t):t),o=!n.scheduler&&!n.delay,s=Ks(n),c=!0,l=!1,u,d=n.compareStructural?Rl.structural:n.equals||Rl.default,f=new bu(i,function(){c||o?p():l||(l=!0,s(p))},n.onError,n.requiresObservable);function p(){if(l=!1,!f.isDisposed){var t=!1,r=u;f.track(function(){var n=ss(!1,function(){return e(f)});t=c||!d(u,n),u=n}),(c&&n.fireImmediately||!c&&t)&&a(u,r,f),c=!1}}return(r=n)!=null&&(r=r.signal)!=null&&r.aborted||f.schedule_(),f.getDisposer_(n?.signal)}function Js(e,t){return function(){try{return t.apply(this,arguments)}catch(t){e.call(this,t)}}}function Ys(e,t,n){return Zs(Iu,e,t,n)}function Xs(e,t,n){return Zs(Lu,e,t,n)}function Zs(e,t,n,r){var i=typeof r==`function`?pl(t,n):pl(t),a=Ia(r)?r:n,o=e+`L`;return i[o]?i[o].add(a):i[o]=new Set([a]),function(){var e=i[o];e&&(e.delete(a),e.size===0&&delete i[o])}}function Qs(e){e.isolateGlobalState===!0&&Ss();var t=e.useProxies,n=e.enforceActions;if(t!==void 0&&(C.useProxies=t===zu?!0:t===Ru?!1:typeof Proxy<`u`),t===`ifavailable`&&(C.verifyProxies=!0),n!==void 0){var r=n===zu?zu:n===Bu;C.enforceActions=r,C.allowStateChanges=!(r===!0||r===zu)}[`computedRequiresReaction`,`reactionRequiresObservable`,`observableRequiresReaction`,`disableErrorBoundaries`,`safeDescriptors`].forEach(function(t){t in e&&(C[t]=!!e[t])}),C.allowStateReads=!C.observableRequiresReaction,e.reactionScheduler&&zs(e.reactionScheduler)}function $s(e,t,n,r){var i=Pl(t);return gl(function(){var t=il(e,r)[x];Nl(i).forEach(function(e){t.extend_(e,i[e],n&&e in n?n[e]:!0)})}),e}function ec(e,t){return tc(pl(e,t))}function tc(e){var t={name:e.name_};return e.observing_&&e.observing_.length>0&&(t.dependencies=ic(e.observing_).map(tc)),t}function nc(e,t){return rc(pl(e,t))}function rc(e){var t={name:e.name_};return Ts(e)&&(t.observers=Array.from(Es(e)).map(rc)),t}function ic(e){return Array.from(new Set(e))}function ac(){this.message=`FLOW_CANCELLED`}function oc(e){return e instanceof ac}function sc(e){Ia(e.cancel)&&e.cancel()}function cc(e){return e}function lc(e){return e?.isMobXFlow===!0}function uc(e,t,n){var r;return id(e)||el(e)||du(e)?r=ml(e):ol(e)&&(r=ml(e,t)),r.dehancer=typeof t==`function`?t:n,function(){r.dehancer=void 0}}function dc(e,t,n){return Ia(n)?pc(e,t,n):fc(e,t)}function fc(e,t){return ml(e).intercept_(t)}function pc(e,t,n){return ml(e,t).intercept_(n)}function mc(e,t){if(t===void 0)return pu(e);if(ol(e)===!1||!e[x].values_.has(t))return!1;var n=pl(e,t);return pu(n)}function hc(e){return mc(e)}function gc(e,t){return mc(e,t)}function _c(e,t){return e?t===void 0?ol(e)||!!e[x]||Ll(e)||Cu(e)||pu(e):ol(e)?e[x].values_.has(t):!1:!1}function vc(e){return _c(e)}function yc(e,t){return _c(e,t)}function bc(e){if(ol(e))return e[x].keys_();if(id(e)||sd(e))return Array.from(e.keys());if(el(e))return e.map(function(e,t){return t});y(5)}function xc(e){if(ol(e))return bc(e).map(function(t){return e[t]});if(id(e))return bc(e).map(function(t){return e.get(t)});if(sd(e))return Array.from(e.values());if(el(e))return e.slice();y(6)}function Sc(e){if(ol(e))return bc(e).map(function(t){return[t,e[t]]});if(id(e))return bc(e).map(function(t){return[t,e.get(t)]});if(sd(e))return Array.from(e.entries());if(el(e))return e.map(function(e,t){return[t,e]});y(7)}function Cc(e,t,n){if(arguments.length===2&&!sd(e)){As();var r=t;try{for(var i in r)Cc(e,i,r[i])}finally{js()}return}ol(e)?e[x].set_(t,n):id(e)?e.set(t,n):sd(e)?e.add(t):el(e)?(typeof t!=`number`&&(t=parseInt(t,10)),t<0&&y(`Invalid index: '`+t+`'`),As(),t>=e.length&&(e.length=t+1),e[t]=n,js()):y(8)}function wc(e,t){ol(e)?e[x].delete_(t):id(e)||sd(e)?e.delete(t):el(e)?(typeof t!=`number`&&(t=parseInt(t,10)),e.splice(t,1)):y(9)}function Tc(e,t){if(ol(e))return e[x].has_(t);if(id(e)||sd(e))return e.has(t);if(el(e))return t>=0&&t<e.length;y(10)}function Ec(e,t){if(Tc(e,t)){if(ol(e))return e[x].get_(t);if(id(e))return e.get(t);if(el(e))return e[t];y(11)}}function Dc(e,t,n){if(ol(e))return e[x].defineProperty_(t,n);y(39)}function Oc(e){if(ol(e))return e[x].ownKeys_();y(38)}function kc(e,t,n,r){return Ia(n)?jc(e,t,n,r):Ac(e,t,n)}function Ac(e,t,n){return ml(e).observe_(t,n)}function jc(e,t,n,r){return ml(e,t).observe_(n,r)}function Mc(e,t,n){return e.set(t,n),n}function Nc(e,t){if(typeof e!=`object`||!e||e instanceof Date||!vc(e))return e;if(du(e)||pu(e))return Nc(e.get(),t);if(t.has(e))return t.get(e);if(el(e)){var n=Mc(t,e,Array(e.length));return e.forEach(function(e,r){n[r]=Nc(e,t)}),n}if(sd(e)){var r=Mc(t,e,new Set);return e.forEach(function(e){r.add(Nc(e,t))}),r}if(id(e)){var i=Mc(t,e,new Map);return e.forEach(function(e,n){i.set(n,Nc(e,t))}),i}else{var a=Mc(t,e,{});return Oc(e).forEach(function(n){El.propertyIsEnumerable.call(e,n)&&(a[n]=Nc(e[n],t))}),a}}function Pc(e,t){return Nc(e,new Map)}function Fc(){}function Ic(e,t){t===void 0&&(t=void 0),As();try{return e.apply(t)}finally{js()}}function Lc(e,t,n){return arguments.length===1||t&&typeof t==`object`?zc(e,t):Rc(e,t,n||{})}function Rc(e,t,n){var r;if(typeof n.timeout==`number`){var i=Error(`WHEN_TIMEOUT`);r=setTimeout(function(){if(!o[x].isDisposed)if(o(),n.onError)n.onError(i);else throw i},n.timeout)}n.name=`When`;var a=rs(`When-effect`,t),o=Gs(function(t){ss(!1,e)&&(t.dispose(),r&&clearTimeout(r),a())},n);return o}function zc(e,t){var n;if(t!=null&&(n=t.signal)!=null&&n.aborted)return Object.assign(Promise.reject(Error(`WHEN_ABORTED`)),{cancel:function(){return null}});var r,i,a=new Promise(function(n,a){var o,s=Rc(e,n,no({},t,{onError:a}));r=function(){s(),a(Error(`WHEN_CANCELLED`))},i=function(){s(),a(Error(`WHEN_ABORTED`))},t==null||(o=t.signal)==null||o.addEventListener==null||o.addEventListener(`abort`,i)}).finally(function(){var e;return t==null||(e=t.signal)==null||e.removeEventListener==null?void 0:e.removeEventListener(`abort`,i)});return a.cancel=r,a}function Bc(e){return e[x]}function Vc(e,t){var n;return Pa(),e=il(e,t),(n=e[x]).proxy_??(n.proxy_=new Proxy(e,Gu))}function Hc(e){return e.interceptors_!==void 0&&e.interceptors_.length>0}function Uc(e,t){var n=e.interceptors_||=[];return n.push(t),Fa(function(){var e=n.indexOf(t);e!==-1&&n.splice(e,1)})}function Wc(e,t){var n=_s();try{for(var r=[].concat(e.interceptors_||[]),i=0,a=r.length;i<a&&(t=r[i](t),t&&!t.type&&y(14),t);i++);return t}finally{vs(n)}}function Gc(e){return e.changeListeners_!==void 0&&e.changeListeners_.length>0}function Kc(e,t){var n=e.changeListeners_||=[];return n.push(t),Fa(function(){var e=n.indexOf(t);e!==-1&&n.splice(e,1)})}function qc(e,t){var n=_s(),r=e.changeListeners_;if(r){r=r.slice();for(var i=0,a=r.length;i<a;i++)r[i](t);vs(n)}}function Jc(e,t,n){return gl(function(){var r=il(e,n)[x];t??=uo(e),Nl(t).forEach(function(e){return r.make_(e,t[e])})}),e}function Yc(e,t,n){return za(e)?$s(e,e,t,n):(gl(function(){var r=il(e,n)[x];if(!e[Ku]){var i=Object.getPrototypeOf(e),a=new Set([].concat(Nl(e),Nl(i)));a.delete(`constructor`),a.delete(x),Va(i,Ku,a)}e[Ku].forEach(function(e){return r.make_(e,t&&e in t?t[e]:!0)})}),e)}function Xc(e,t,n,r){return n===void 0&&(n=`ObservableArray`),r===void 0&&(r=!1),Pa(),gl(function(){var i=new Zu(n,t,r,!1);Ha(i.values_,x,i);var a=new Proxy(i.values_,Xu);return i.proxy_=a,e&&e.length&&i.spliceWithArray_(0,0,e),a})}function b(e,t){typeof Array.prototype[e]==`function`&&(Qu[e]=t(e))}function Zc(e){return function(){var t=this[x];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function Qc(e){return function(t,n){var r=this,i=this[x];return i.atom_.reportObserved(),i.dehanceValues_(i.values_)[e](function(e,i){return t.call(n,e,i,r)})}}function $c(e){return function(){var t=this,n=this[x];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),i=arguments[0];return arguments[0]=function(e,n,r){return i(e,n,r,t)},r[e].apply(r,arguments)}}function el(e){return Ra(e)&&$u(e[x])}function tl(e){return e[Symbol.toStringTag]=`MapIterator`,bl(e)}function nl(e){if(Wa(e)||id(e))return e;if(Array.isArray(e))return new Map(e);if(za(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}else return y(21,e)}function rl(e){return e[Symbol.toStringTag]=`SetIterator`,bl(e)}function il(e,t){if(Ya(e,x))return e;var n=t?.name??`ObservableObject`,r=new ud(e,new Map,String(n),es(t));return Va(e,x,r),e}function al(e){return cd[e]||(cd[e]={get:function(){return this[x].getObservablePropValue_(e)},set:function(t){return this[x].setObservablePropValue_(e,t)}})}function ol(e){return Ra(e)?dd(e[x]):!1}function sl(e,t,n){var r;(r=e.target_[Fl])==null||delete r[n]}function cl(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):e.prototype.__proto__===void 0?e.prototype=t:e.prototype.__proto__=t}function ll(e){return{enumerable:!1,configurable:!0,get:function(){return this[x].get_(e)},set:function(t){this[x].set_(e,t)}}}function ul(e){Tl(gd.prototype,``+e,ll(e))}function dl(e){if(e>md){for(var t=md;t<e+100;t++)ul(t);md=e}}function fl(e,t,n){return new gd(e,t,n)}function pl(e,t){if(typeof e==`object`&&e){if(el(e))return t!==void 0&&y(23),e[x].atom_;if(sd(e))return e.atom_;if(id(e)){if(t===void 0)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||y(25,t,hl(e)),n}if(ol(e)){if(!t)return y(26);var r=e[x].values_.get(t);return r||y(27,t,hl(e)),r}if(Ll(e)||pu(e)||Cu(e))return e}else if(Ia(e)&&Cu(e[x]))return e[x];y(28)}function ml(e,t){if(e||y(29),t!==void 0)return ml(pl(e,t));if(Ll(e)||pu(e)||Cu(e)||id(e)||sd(e))return e;if(e[x])return e[x];y(24,e)}function hl(e,t){var n;if(t!==void 0)n=pl(e,t);else if(Ws(e))return e.name;else n=ol(e)||id(e)||sd(e)?ml(e):pl(e);return n.name_}function gl(e){var t=_s(),n=cs(!0);As();try{return e()}finally{js(),ls(n),vs(t)}}function _l(e,t,n){return n===void 0&&(n=-1),vl(e,t,n)}function vl(e,t,n,r,i){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var a=typeof e;if(a!==`function`&&a!==`object`&&typeof t!=`object`)return!1;var o=_d.call(e);if(o!==_d.call(t))return!1;switch(o){case`[object RegExp]`:case`[object String]`:return``+e==``+t;case`[object Number]`:return+e==+e?+e==0?1/e==1/t:+e==+t:+t!=+t;case`[object Date]`:case`[object Boolean]`:return+e==+t;case`[object Symbol]`:return typeof Symbol<`u`&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case`[object Map]`:case`[object Set]`:n>=0&&n++;break}e=yl(e),t=yl(t);var s=o===`[object Array]`;if(!s){if(typeof e!=`object`||typeof t!=`object`)return!1;var c=e.constructor,l=t.constructor;if(c!==l&&!(Ia(c)&&c instanceof c&&Ia(l)&&l instanceof l)&&`constructor`in e&&`constructor`in t)return!1}if(n===0)return!1;n<0&&(n=-1),r||=[],i||=[];for(var u=r.length;u--;)if(r[u]===e)return i[u]===t;if(r.push(e),i.push(t),s){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!vl(e[u],t[u],n-1,r,i))return!1}else{var d=Object.keys(e),f=d.length;if(Object.keys(t).length!==f)return!1;for(var p=0;p<f;p++){var m=d[p];if(!(Ya(t,m)&&vl(e[m],t[m],n-1,r,i)))return!1}}return r.pop(),i.pop(),!0}function yl(e){return el(e)?e.slice():Wa(e)||id(e)||Ka(e)||sd(e)?Array.from(e.entries()):e}function bl(e){return e[Symbol.iterator]=xl,Object.assign(Object.create(vd),e)}function xl(){return this}var Sl,Cl,wl,Tl,El,Dl,Ol,kl,Al,jl,Ml,Nl,Pl,Fl,x,Il,Ll,Rl,zl,Bl,Vl,Hl,Ul,Wl,Gl,Kl,ql,Jl,Yl,Xl,Zl,Ql,$l,eu,tu,nu,ru,iu,au,ou,su,cu,lu,uu,du,fu,pu,S,mu,hu,gu,_u,vu,yu,C,bu,xu,Su,Cu,wu,Tu,Eu,Du,Ou,ku,Au,ju,Mu,Nu,Pu,Fu,Iu,Lu,Ru,zu,Bu,Vu,Hu,Uu,Wu,Gu,Ku,qu,Ju,Yu,Xu,Zu,Qu,$u,ed,td,nd,rd,id,ad,od,sd,cd,ld,ud,dd,fd,pd,md,hd,gd,_d,vd,yd=o((()=>{Sl={},Cl=Object.assign,wl=Object.getOwnPropertyDescriptor,Tl=Object.defineProperty,El=Object.prototype,Dl=[],Object.freeze(Dl),Ol={},Object.freeze(Ol),kl=typeof Proxy<`u`,Al=Object.toString(),jl=function(){},Ml=Object.getOwnPropertySymbols!==void 0,Nl=typeof Reflect<`u`&&Reflect.ownKeys?Reflect.ownKeys:Ml?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Pl=Object.getOwnPropertyDescriptors||function(e){var t={};return Nl(e).forEach(function(n){t[n]=wl(e,n)}),t},Fl=Symbol(`mobx-stored-annotations`),x=Symbol(`mobx administration`),Il=function(){function e(e){e===void 0&&(e=`Atom`),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=S.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(e){return e()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(e){return e()})},t.reportObserved=function(){return Ms(this)},t.reportChanged=function(){As(),Ns(this),js()},t.toString=function(){return this.name_},eo(e,[{key:`isBeingObserved`,get:function(){return Xa(this.flags_,e.isBeingObservedMask_)},set:function(t){this.flags_=Za(this.flags_,e.isBeingObservedMask_,t)}},{key:`isPendingUnobservation`,get:function(){return Xa(this.flags_,e.isPendingUnobservationMask_)},set:function(t){this.flags_=Za(this.flags_,e.isPendingUnobservationMask_,t)}},{key:`diffValue`,get:function(){return Xa(this.flags_,e.diffValueMask_)?1:0},set:function(t){this.flags_=Za(this.flags_,e.diffValueMask_,t===1)}}])}(),Il.isBeingObservedMask_=1,Il.isPendingUnobservationMask_=2,Il.diffValueMask_=4,Ll=Ua(`Atom`,Il),Rl={identity:mo,structural:ho,default:_o,shallow:go},zl=`override`,Bl=co({annotationType_:zl,make_:Co,extend_:wo,decorate_20223_:To}),Vl=`true`,Hl=Jo(),Ul=`observable`,Wl=`observable.ref`,Gl=`observable.shallow`,Kl=`observable.struct`,ql={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0},Object.freeze(ql),Jl=Uo(Ul),Yl=Uo(Wl,{enhancer:bo}),Xl=Uo(Gl,{enhancer:yo}),Zl=Uo(Kl,{enhancer:xo}),Ql=co(Jl),Cl(ns,Ql),$l={box:function(e,t){var n=Qo(t);return new uu(e,$o(n),n.name,!0,n.equals)},array:function(e,t){var n=Qo(t);return(C.useProxies===!1||n.proxy===!1?fl:Xc)(e,$o(n),n.name)},map:function(e,t){var n=Qo(t);return new rd(e,$o(n),n.name)},set:function(e,t){var n=Qo(t);return new od(e,$o(n),n.name)},object:function(e,t,n){return gl(function(){return $s(C.useProxies===!1||n?.proxy===!1?il({},n):Vc({},n),e,t)})},ref:co(Yl),shallow:co(Xl),deep:Ql,struct:co(Zl)},eu=Cl(ns,$l),tu=`computed`,nu=`computed.struct`,ru=Ro(tu),iu=Ro(nu,{equals:Rl.structural}),au=function(e,t){if(fo(t))return ru.decorate_20223_(e,t);if(La(t))return lo(e,t,ru);if(za(e))return co(Ro(tu,e));var n=za(t)?t:{};return n.get=e,n.name||=e.name||``,new fu(n)},Object.assign(au,ru),au.struct=co(iu),ou=0,su=1,cu=wl(function(){},`name`)?.configurable??!1,lu={value:`action`,configurable:!0,writable:!1,enumerable:!1},uu=function(e){function t(t,n,r,i,a){var o;return r===void 0&&(r=`ObservableValue`),i===void 0&&(i=!0),a===void 0&&(a=Rl.default),o=e.call(this,r)||this,o.enhancer=void 0,o.name_=void 0,o.equals=void 0,o.hasUnreportedChange_=!1,o.interceptors_=void 0,o.changeListeners_=void 0,o.value_=void 0,o.dehancer=void 0,o.enhancer=n,o.name_=r,o.equals=a,o.value_=n(t,void 0,r),o}ro(t,e);var n=t.prototype;return n.dehanceValue=function(e){return this.dehancer===void 0?e:this.dehancer(e)},n.set=function(e){this.value_,e=this.prepareNewValue_(e),e!==C.UNCHANGED&&this.setNewValue_(e)},n.prepareNewValue_=function(e){if(Hc(this)){var t=Wc(this,{object:this,type:Ju,newValue:e});if(!t)return C.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?C.UNCHANGED:e},n.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),Gc(this)&&qc(this,{type:Ju,object:this,newValue:e,oldValue:t})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(e){return Uc(this,e)},n.observe_=function(e,t){return t&&e({observableKind:`value`,debugObjectName:this.name_,object:this,type:Ju,newValue:this.value_,oldValue:void 0}),Kc(this,e)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+`[`+this.value_+`]`},n.valueOf=function(){return Ja(this.get())},n[Symbol.toPrimitive]=function(){return this.valueOf()},t}(Il),du=Ua(`ObservableValue`,uu),fu=function(){function e(e){this.dependenciesState_=S.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=S.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new hu(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=mu.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||y(31),this.derivation=e.get,this.name_=e.name||`ComputedValue`,e.set&&(this.setter_=rs(`ComputedValue-setter`,e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?Rl.structural:Rl.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){Fs(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(e){return e()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(e){return e()})},t.get=function(){if(this.isComputing&&y(32,this.name_,this.derivation),C.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)ds(this)&&(this.warnAboutUntrackedRead_(),As(),this.value_=this.computeValue_(!1),js());else if(Ms(this),ds(this)){var e=C.trackingContext;this.keepAlive_&&!e&&(C.trackingContext=this),this.trackAndCompute()&&Ps(this),C.trackingContext=e}var t=this.value_;if(us(t))throw t.cause;return t},t.set=function(e){if(this.setter_){this.isRunningSetter&&y(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter=!1}}else y(34,this.name_)},t.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===S.NOT_TRACKING_,n=this.computeValue_(!0),r=t||us(e)||us(n)||!this.equals_(e,n);return r&&(this.value_=n),r},t.computeValue_=function(e){this.isComputing=!0;var t=cs(!1),n;if(e)n=ps(this,this.derivation,this.scope_);else if(C.disableErrorBoundaries===!0)n=this.derivation.call(this.scope_);else try{n=this.derivation.call(this.scope_)}catch(e){n=new hu(e)}return ls(t),this.isComputing=!1,n},t.suspend_=function(){this.keepAlive_||(hs(this),this.value_=void 0)},t.observe_=function(e,t){var n=this,r=!0,i=void 0;return Gs(function(){var a=n.get();if(!r||t){var o=_s();e({observableKind:`computed`,debugObjectName:n.name_,type:Ju,object:n,newValue:a,oldValue:i}),vs(o)}r=!1,i=a})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+`[`+this.derivation.toString()+`]`},t.valueOf=function(){return Ja(this.get())},t[Symbol.toPrimitive]=function(){return this.valueOf()},eo(e,[{key:`isComputing`,get:function(){return Xa(this.flags_,e.isComputingMask_)},set:function(t){this.flags_=Za(this.flags_,e.isComputingMask_,t)}},{key:`isRunningSetter`,get:function(){return Xa(this.flags_,e.isRunningSetterMask_)},set:function(t){this.flags_=Za(this.flags_,e.isRunningSetterMask_,t)}},{key:`isBeingObserved`,get:function(){return Xa(this.flags_,e.isBeingObservedMask_)},set:function(t){this.flags_=Za(this.flags_,e.isBeingObservedMask_,t)}},{key:`isPendingUnobservation`,get:function(){return Xa(this.flags_,e.isPendingUnobservationMask_)},set:function(t){this.flags_=Za(this.flags_,e.isPendingUnobservationMask_,t)}},{key:`diffValue`,get:function(){return Xa(this.flags_,e.diffValueMask_)?1:0},set:function(t){this.flags_=Za(this.flags_,e.diffValueMask_,t===1)}}])}(),fu.isComputingMask_=1,fu.isRunningSetterMask_=2,fu.isBeingObservedMask_=4,fu.isPendingUnobservationMask_=8,fu.diffValueMask_=16,pu=Ua(`ComputedValue`,fu),(function(e){e[e.NOT_TRACKING_=-1]=`NOT_TRACKING_`,e[e.UP_TO_DATE_=0]=`UP_TO_DATE_`,e[e.POSSIBLY_STALE_=1]=`POSSIBLY_STALE_`,e[e.STALE_=2]=`STALE_`})(S||={}),(function(e){e[e.NONE=0]=`NONE`,e[e.LOG=1]=`LOG`,e[e.BREAK=2]=`BREAK`})(mu||={}),hu=function(e){this.cause=void 0,this.cause=e},gu=[`mobxGuid`,`spyListeners`,`enforceActions`,`computedRequiresReaction`,`reactionRequiresObservable`,`observableRequiresReaction`,`allowStateReads`,`disableErrorBoundaries`,`runId`,`UNCHANGED`,`useProxies`],_u=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},vu=!0,yu=!1,C=function(){var e=Na();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(vu=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new _u().version&&(vu=!1),vu?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new _u):(setTimeout(function(){yu||y(35)},1),new _u)}(),bu=function(){function e(e,t,n,r){e===void 0&&(e=`Reaction`),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=S.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=mu.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=r}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled||(this.isScheduled=!0,C.pendingReactions.push(this),Ls())},t.runReaction_=function(){if(!this.isDisposed){As(),this.isScheduled=!1;var e=C.trackingContext;if(C.trackingContext=this,ds(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}C.trackingContext=e,js()}},t.track=function(e){if(!this.isDisposed){As(),this.isRunning=!0;var t=C.trackingContext;C.trackingContext=this;var n=ps(this,e,void 0);C.trackingContext=t,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&hs(this),us(n)&&this.reportExceptionInDerivation_(n.cause),js()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_){this.errorHandler_(e,this);return}if(C.disableErrorBoundaries)throw e;var n=`[mobx] uncaught error in '`+this+`'`;C.suppressReactionErrors||console.error(n,e),C.globalReactionErrorHandlers.forEach(function(n){return n(e,t)})},t.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(As(),hs(this),js()))},t.getDisposer_=function(e){var t=this,n=function n(){t.dispose(),e==null||e.removeEventListener==null||e.removeEventListener(`abort`,n)};return e==null||e.addEventListener==null||e.addEventListener(`abort`,n),n[x]=this,`dispose`in Symbol&&typeof Symbol.dispose==`symbol`&&(n[Symbol.dispose]=n),n},t.toString=function(){return`Reaction[`+this.name_+`]`},t.trace=function(e){e===void 0&&(e=!1)},eo(e,[{key:`isDisposed`,get:function(){return Xa(this.flags_,e.isDisposedMask_)},set:function(t){this.flags_=Za(this.flags_,e.isDisposedMask_,t)}},{key:`isScheduled`,get:function(){return Xa(this.flags_,e.isScheduledMask_)},set:function(t){this.flags_=Za(this.flags_,e.isScheduledMask_,t)}},{key:`isTrackPending`,get:function(){return Xa(this.flags_,e.isTrackPendingMask_)},set:function(t){this.flags_=Za(this.flags_,e.isTrackPendingMask_,t)}},{key:`isRunning`,get:function(){return Xa(this.flags_,e.isRunningMask_)},set:function(t){this.flags_=Za(this.flags_,e.isRunningMask_,t)}},{key:`diffValue`,get:function(){return Xa(this.flags_,e.diffValueMask_)?1:0},set:function(t){this.flags_=Za(this.flags_,e.diffValueMask_,t===1)}}])}(),bu.isDisposedMask_=1,bu.isScheduledMask_=2,bu.isTrackPendingMask_=4,bu.isRunningMask_=8,bu.diffValueMask_=16,xu=100,Su=function(e){return e()},Cu=Ua(`Reaction`,bu),wu=`action`,Tu=`action.bound`,Eu=`autoAction`,Du=`autoAction.bound`,Ou=`<unnamed action>`,ku=Eo(wu),Au=Eo(Tu,{bound:!0}),ju=Eo(Eu,{autoAction:!0}),Mu=Eo(Du,{autoAction:!0,bound:!0}),Nu=Hs(!1),Object.assign(Nu,ku),Pu=Hs(!0),Object.assign(Pu,ju),Nu.bound=co(Au),Pu.bound=co(Mu),Fu=function(e){return e()},Iu=`onBO`,Lu=`onBUO`,Ru=`never`,zu=`always`,Bu=`observed`,Vu=0,ac.prototype=Object.create(Error.prototype),Hu=Mo(`flow`),Uu=Mo(`flow.bound`,{bound:!0}),Wu=Object.assign(function(e,t){if(fo(t))return Hu.decorate_20223_(e,t);if(La(t))return lo(e,t,Hu);var n=e,r=n.name||`<unnamed flow>`,i=function(){var e=this,t=arguments,i=++Vu,a=Nu(r+` - runid: `+i+` - init`,n).apply(e,t),o,s=void 0,c=new Promise(function(e,t){var n=0;o=t;function c(e){s=void 0;var o;try{o=Nu(r+` - runid: `+i+` - yield `+ n++,a.next).call(a,e)}catch(e){return t(e)}u(o)}function l(e){s=void 0;var o;try{o=Nu(r+` - runid: `+i+` - yield `+ n++,a.throw).call(a,e)}catch(e){return t(e)}u(o)}function u(n){if(Ia(n?.then)){n.then(u,t);return}return n.done?e(n.value):(s=Promise.resolve(n.value),s.then(c,l))}c(void 0)});return c.cancel=Nu(r+` - runid: `+i+` - cancel`,function(){try{s&&sc(s);var e=a.return(void 0),t=Promise.resolve(e.value);t.then(jl,jl),sc(t),o(new ac)}catch(e){o(e)}}),c};return i.isMobXFlow=!0,i},Hu),Wu.bound=co(Uu),Gu={has:function(e,t){return Bc(e).has_(t)},get:function(e,t){return Bc(e).get_(t)},set:function(e,t,n){return La(t)?Bc(e).set_(t,n,!0)??!0:!1},deleteProperty:function(e,t){return La(t)?Bc(e).delete_(t,!0)??!0:!1},defineProperty:function(e,t,n){return Bc(e).defineProperty_(t,n)??!0},ownKeys:function(e){return Bc(e).ownKeys_()},preventExtensions:function(e){y(13)}},Ku=Symbol(`mobx-keys`),qu=`splice`,Ju=`update`,Yu=1e4,Xu={get:function(e,t){var n=e[x];return t===x?n:t===`length`?n.getArrayLength_():typeof t==`string`&&!isNaN(t)?n.get_(parseInt(t)):Ya(Qu,t)?Qu[t]:e[t]},set:function(e,t,n){var r=e[x];return t===`length`&&r.setArrayLength_(n),typeof t==`symbol`||isNaN(t)?e[t]=n:r.set_(parseInt(t),n),!0},preventExtensions:function(){y(15)}},Zu=function(){function e(e,t,n,r){e===void 0&&(e=`ObservableArray`),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=r,this.atom_=new Il(e),this.enhancer_=function(e,n){return t(e,n,`ObservableArray[..]`)}}var t=e.prototype;return t.dehanceValue_=function(e){return this.dehancer===void 0?e:this.dehancer(e)},t.dehanceValues_=function(e){return this.dehancer!==void 0&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return Uc(this,e)},t.observe_=function(e,t){return t===void 0&&(t=!1),t&&e({observableKind:`array`,object:this.proxy_,debugObjectName:this.atom_.name_,type:`splice`,index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Kc(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){(typeof e!=`number`||isNaN(e)||e<0)&&y(`Out of range: `+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&y(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&dl(e+t+1)},t.spliceWithArray_=function(e,t,n){var r=this;this.atom_;var i=this.values_.length;if(e===void 0?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),t=arguments.length===1?i-e:t==null?0:Math.max(0,Math.min(t,i-e)),n===void 0&&(n=Dl),Hc(this)){var a=Wc(this,{object:this.proxy_,type:qu,index:e,removedCount:t,added:n});if(!a)return Dl;t=a.removedCount,n=a.added}if(n=n.length===0?n:n.map(function(e){return r.enhancer_(e,void 0)}),this.legacyMode_){var o=n.length-t;this.updateArrayLength_(i,o)}var s=this.spliceItemsIntoValues_(e,t,n);return(t!==0||n.length!==0)&&this.notifyArraySplice_(e,n,s),this.dehanceValues_(s)},t.spliceItemsIntoValues_=function(e,t,n){if(n.length<Yu){var r;return(r=this.values_).splice.apply(r,[e,t].concat(n))}else{var i=this.values_.slice(e,e+t),a=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var o=0;o<n.length;o++)this.values_[e+o]=n[o];for(var s=0;s<a.length;s++)this.values_[e+n.length+s]=a[s];return i}},t.notifyArrayChildUpdate_=function(e,t,n){var r=!this.owned_&&Bs(),i=Gc(this),a=i||r?{observableKind:`array`,object:this.proxy_,type:Ju,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),i&&qc(this,a)},t.notifyArraySplice_=function(e,t,n){var r=!this.owned_&&Bs(),i=Gc(this),a=i||r?{observableKind:`array`,object:this.proxy_,debugObjectName:this.atom_.name_,type:qu,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),i&&qc(this,a)},t.get_=function(e){if(this.legacyMode_&&e>=this.values_.length){console.warn(`[mobx] Out of bounds read: `+e);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e])},t.set_=function(e,t){var n=this.values_;if(this.legacyMode_&&e>n.length&&y(17,e,n.length),e<n.length){this.atom_;var r=n[e];if(Hc(this)){var i=Wc(this,{type:Ju,object:this.proxy_,index:e,newValue:t});if(!i)return;t=i.newValue}t=this.enhancer_(t,r),t!==r&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,r))}else{for(var a=Array(e+1-n.length),o=0;o<a.length-1;o++)a[o]=void 0;a[a.length-1]=t,this.spliceWithArray_(n.length,0,a)}},e}(),Qu={clear:function(){return this.splice(0)},replace:function(e){var t=this[x];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){var n=[...arguments].slice(2),r=this[x];switch(arguments.length){case 0:return[];case 1:return r.spliceWithArray_(e);case 2:return r.spliceWithArray_(e,t)}return r.spliceWithArray_(e,t,n)},spliceWithArray:function(e,t,n){return this[x].spliceWithArray_(e,t,n)},push:function(){var e=this[x],t=[...arguments];return e.spliceWithArray_(e.values_.length,0,t),e.values_.length},pop:function(){return this.splice(Math.max(this[x].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){var e=this[x],t=[...arguments];return e.spliceWithArray_(0,0,t),e.values_.length},reverse:function(){return C.trackingDerivation&&y(37,`reverse`),this.replace(this.slice().reverse()),this},sort:function(){C.trackingDerivation&&y(37,`sort`);var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[x],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1?(this.splice(n,1),!0):!1}},b(`at`,Zc),b(`concat`,Zc),b(`flat`,Zc),b(`includes`,Zc),b(`indexOf`,Zc),b(`join`,Zc),b(`lastIndexOf`,Zc),b(`slice`,Zc),b(`toString`,Zc),b(`toLocaleString`,Zc),b(`toSorted`,Zc),b(`toSpliced`,Zc),b(`with`,Zc),b(`every`,Qc),b(`filter`,Qc),b(`find`,Qc),b(`findIndex`,Qc),b(`findLast`,Qc),b(`findLastIndex`,Qc),b(`flatMap`,Qc),b(`forEach`,Qc),b(`map`,Qc),b(`some`,Qc),b(`toReversed`,Qc),b(`reduce`,$c),b(`reduceRight`,$c),$u=Ua(`ObservableArrayAdministration`,Zu),ed={},td=`add`,nd=`delete`,rd=function(){function e(e,t,n){var r=this;t===void 0&&(t=vo),n===void 0&&(n=`ObservableMap`),this.enhancer_=void 0,this.name_=void 0,this[x]=ed,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,Ia(Map)||y(18),gl(function(){r.keysAtom_=po(`ObservableMap.keys()`),r.data_=new Map,r.hasMap_=new Map,e&&r.merge(e)})}var t=e.prototype;return t.has_=function(e){return this.data_.has(e)},t.has=function(e){var t=this;if(!C.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var r=n=new uu(this.has_(e),bo,`ObservableMap.key?`,!1);this.hasMap_.set(e,r),Xs(r,function(){return t.hasMap_.delete(e)})}return n.get()},t.set=function(e,t){var n=this.has_(e);if(Hc(this)){var r=Wc(this,{type:n?Ju:td,object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},t.delete=function(e){var t=this;if(this.keysAtom_,Hc(this)&&!Wc(this,{type:nd,object:this,name:e}))return!1;if(this.has_(e)){var n=Bs(),r=Gc(this),i=r||n?{observableKind:`map`,debugObjectName:this.name_,type:nd,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return Ic(function(){var n;t.keysAtom_.reportChanged(),(n=t.hasMap_.get(e))==null||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)}),r&&qc(this,i),!0}return!1},t.updateValue_=function(e,t){var n=this.data_.get(e);if(t=n.prepareNewValue_(t),t!==C.UNCHANGED){var r=Bs(),i=Gc(this),a=i||r?{observableKind:`map`,debugObjectName:this.name_,type:Ju,object:this,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),i&&qc(this,a)}},t.addValue_=function(e,t){var n=this;this.keysAtom_,Ic(function(){var r,i=new uu(t,n.enhancer_,`ObservableMap.key`,!1);n.data_.set(e,i),t=i.value_,(r=n.hasMap_.get(e))==null||r.setNewValue_(!0),n.keysAtom_.reportChanged()});var r=Bs(),i=Gc(this),a=i||r?{observableKind:`map`,debugObjectName:this.name_,type:td,object:this,name:e,newValue:t}:null;i&&qc(this,a)},t.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(e){return this.dehancer===void 0?e:this.dehancer(e)},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var e=this,t=this.keys();return tl({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:e.get(i)}}})},t.entries=function(){var e=this,t=this.keys();return tl({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:[i,e.get(i)]}}})},t[Symbol.iterator]=function(){return this.entries()},t.forEach=function(e,t){for(var n=to(this),r;!(r=n()).done;){var i=r.value,a=i[0],o=i[1];e.call(t,o,a,this)}},t.merge=function(e){var t=this;return id(e)&&(e=new Map(e)),Ic(function(){za(e)?qa(e).forEach(function(n){return t.set(n,e[n])}):Array.isArray(e)?e.forEach(function(e){var n=e[0],r=e[1];return t.set(n,r)}):Wa(e)?(Ga(e)||y(19,e),e.forEach(function(e,n){return t.set(n,e)})):e!=null&&y(20,e)}),this},t.clear=function(){var e=this;Ic(function(){gs(function(){for(var t=to(e.keys()),n;!(n=t()).done;){var r=n.value;e.delete(r)}})})},t.replace=function(e){var t=this;return Ic(function(){for(var n=nl(e),r=new Map,i=!1,a=to(t.data_.keys()),o;!(o=a()).done;){var s=o.value;if(!n.has(s))if(t.delete(s))i=!0;else{var c=t.data_.get(s);r.set(s,c)}}for(var l=to(n.entries()),u;!(u=l()).done;){var d=u.value,f=d[0],p=d[1],m=t.data_.has(f);if(t.set(f,p),t.data_.has(f)){var ee=t.data_.get(f);r.set(f,ee),m||(i=!0)}}if(!i)if(t.data_.size!==r.size)t.keysAtom_.reportChanged();else for(var te=t.data_.keys(),ne=r.keys(),re=te.next(),ie=ne.next();!re.done;){if(re.value!==ie.value){t.keysAtom_.reportChanged();break}re=te.next(),ie=ne.next()}t.data_=r}),this},t.toString=function(){return`[object ObservableMap]`},t.toJSON=function(){return Array.from(this)},t.observe_=function(e,t){return Kc(this,e)},t.intercept_=function(e){return Uc(this,e)},eo(e,[{key:`size`,get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return`Map`}}])}(),id=Ua(`ObservableMap`,rd),ad={},od=function(){function e(e,t,n){var r=this;t===void 0&&(t=vo),n===void 0&&(n=`ObservableSet`),this.name_=void 0,this[x]=ad,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,Ia(Set)||y(22),this.enhancer_=function(e,r){return t(e,r,n)},gl(function(){r.atom_=po(r.name_),e&&r.replace(e)})}var t=e.prototype;return t.dehanceValue_=function(e){return this.dehancer===void 0?e:this.dehancer(e)},t.clear=function(){var e=this;Ic(function(){gs(function(){for(var t=to(e.data_.values()),n;!(n=t()).done;){var r=n.value;e.delete(r)}})})},t.forEach=function(e,t){for(var n=to(this),r;!(r=n()).done;){var i=r.value;e.call(t,i,i,this)}},t.add=function(e){var t=this;if(this.atom_,Hc(this)){var n=Wc(this,{type:td,object:this,newValue:e});if(!n)return this;e=n.newValue}if(!this.has(e)){Ic(function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()});var r=!1,i=Gc(this),a=i||r?{observableKind:`set`,debugObjectName:this.name_,type:td,object:this,newValue:e}:null;i&&qc(this,a)}return this},t.delete=function(e){var t=this;if(Hc(this)&&!Wc(this,{type:nd,object:this,oldValue:e}))return!1;if(this.has(e)){var n=!1,r=Gc(this),i=r||n?{observableKind:`set`,debugObjectName:this.name_,type:nd,object:this,oldValue:e}:null;return Ic(function(){t.atom_.reportChanged(),t.data_.delete(e)}),r&&qc(this,i),!0}return!1},t.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},t.entries=function(){var e=this.values();return rl({next:function(){var t=e.next(),n=t.value,r=t.done;return r?{value:void 0,done:r}:{value:[n,n],done:r}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var e=this,t=this.data_.values();return rl({next:function(){var n=t.next(),r=n.value,i=n.done;return i?{value:void 0,done:i}:{value:e.dehanceValue_(r),done:i}}})},t.intersection=function(e){return Ka(e)&&!sd(e)?e.intersection(this):new Set(this).intersection(e)},t.union=function(e){return Ka(e)&&!sd(e)?e.union(this):new Set(this).union(e)},t.difference=function(e){return new Set(this).difference(e)},t.symmetricDifference=function(e){return Ka(e)&&!sd(e)?e.symmetricDifference(this):new Set(this).symmetricDifference(e)},t.isSubsetOf=function(e){return new Set(this).isSubsetOf(e)},t.isSupersetOf=function(e){return new Set(this).isSupersetOf(e)},t.isDisjointFrom=function(e){return Ka(e)&&!sd(e)?e.isDisjointFrom(this):new Set(this).isDisjointFrom(e)},t.replace=function(e){var t=this;return sd(e)&&(e=new Set(e)),Ic(function(){Array.isArray(e)||Ka(e)?(t.clear(),e.forEach(function(e){return t.add(e)})):e!=null&&y(`Cannot initialize set from `+e)}),this},t.observe_=function(e,t){return Kc(this,e)},t.intercept_=function(e){return Uc(this,e)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return`[object ObservableSet]`},t[Symbol.iterator]=function(){return this.values()},eo(e,[{key:`size`,get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return`Set`}}])}(),sd=Ua(`ObservableSet`,od),cd=Object.create(null),ld=`remove`,ud=function(){function e(e,t,n,r){t===void 0&&(t=new Map),r===void 0&&(r=Hl),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=r,this.keysAtom_=new Il(`ObservableObject.keys`),this.isPlainObject_=za(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof fu)return n.set(t),!0;if(Hc(this)){var r=Wc(this,{type:Ju,object:this.proxy_||this.target_,name:e,newValue:t});if(!r)return null;t=r.newValue}if(t=n.prepareNewValue_(t),t!==C.UNCHANGED){var i=Gc(this),a=i?{type:Ju,observableKind:`object`,debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),i&&qc(this,a)}return!0},t.get_=function(e){return C.trackingDerivation&&!Ya(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return n===void 0&&(n=!1),Ya(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!C.trackingDerivation)return e in this.target_;this.pendingKeys_||=new Map;var t=this.pendingKeys_.get(e);return t||(t=new uu(e in this.target_,bo,`ObservableObject.key?`,!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(t===!0&&(t=this.defaultAnnotation_),t!==!1){if(!(e in this.target_)){var n;if((n=this.target_[Fl])!=null&&n[e])return;y(1,t.annotationType_,this.name_+`.`+e.toString())}for(var r=this.target_;r&&r!==El;){var i=wl(r,e);if(i){var a=t.make_(this,e,i,r);if(a===0)return;if(a===1)break}r=Object.getPrototypeOf(r)}sl(this,t,e)}},t.extend_=function(e,t,n,r){if(r===void 0&&(r=!1),n===!0&&(n=this.defaultAnnotation_),n===!1)return this.defineProperty_(e,t,r);var i=n.extend_(this,e,t,r);return i&&sl(this,n,e),i},t.defineProperty_=function(e,t,n){n===void 0&&(n=!1),this.keysAtom_;try{As();var r=this.delete_(e);if(!r)return r;if(Hc(this)){var i=Wc(this,{object:this.proxy_||this.target_,name:e,type:td,newValue:t.value});if(!i)return null;var a=i.newValue;t.value!==a&&(t=no({},t,{value:a}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else Tl(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{js()}return!0},t.defineObservableProperty_=function(e,t,n,r){r===void 0&&(r=!1),this.keysAtom_;try{As();var i=this.delete_(e);if(!i)return i;if(Hc(this)){var a=Wc(this,{object:this.proxy_||this.target_,name:e,type:td,newValue:t});if(!a)return null;t=a.newValue}var o=al(e),s={configurable:C.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:o.get,set:o.set};if(r){if(!Reflect.defineProperty(this.target_,e,s))return!1}else Tl(this.target_,e,s);var c=new uu(t,n,`ObservableObject.key`,!1);this.values_.set(e,c),this.notifyPropertyAddition_(e,c.value_)}finally{js()}return!0},t.defineComputedProperty_=function(e,t,n){n===void 0&&(n=!1),this.keysAtom_;try{As();var r=this.delete_(e);if(!r)return r;if(Hc(this)&&!Wc(this,{object:this.proxy_||this.target_,name:e,type:td,newValue:void 0}))return null;t.name||=`ObservableObject.key`,t.context=this.proxy_||this.target_;var i=al(e),a={configurable:C.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:i.get,set:i.set};if(n){if(!Reflect.defineProperty(this.target_,e,a))return!1}else Tl(this.target_,e,a);this.values_.set(e,new fu(t)),this.notifyPropertyAddition_(e,void 0)}finally{js()}return!0},t.delete_=function(e,t){if(t===void 0&&(t=!1),this.keysAtom_,!Ya(this.target_,e))return!0;if(Hc(this)&&!Wc(this,{object:this.proxy_||this.target_,name:e,type:ld}))return null;try{var n;As();var r=Gc(this),i=!1,a=this.values_.get(e),o=void 0;if(!a&&(r||i)&&(o=wl(this.target_,e)?.value),t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(a&&(this.values_.delete(e),a instanceof uu&&(o=a.value_),Ns(a)),this.keysAtom_.reportChanged(),(n=this.pendingKeys_)==null||(n=n.get(e))==null||n.set(e in this.target_),r||i){var s={type:ld,observableKind:`object`,object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:o,name:e};r&&qc(this,s)}}finally{js()}return!0},t.observe_=function(e,t){return Kc(this,e)},t.intercept_=function(e){return Uc(this,e)},t.notifyPropertyAddition_=function(e,t){var n,r=Gc(this),i=!1;if(r||i){var a=r||i?{type:td,observableKind:`object`,debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;r&&qc(this,a)}(n=this.pendingKeys_)==null||(n=n.get(e))==null||n.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),Nl(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}(),dd=Ua(`ObservableObjectAdministration`,ud),fd=ll(0),pd=function(){var e=!1,t={};return Object.defineProperty(t,`0`,{set:function(){e=!0}}),Object.create(t)[0]=1,e===!1}(),md=0,hd=function(){},cl(hd,Array.prototype),gd=function(e){function t(t,n,r,i){var a;return r===void 0&&(r=`ObservableArray`),i===void 0&&(i=!1),a=e.call(this)||this,gl(function(){var e=new Zu(r,n,i,!0);e.proxy_=a,Ha(a,x,e),t&&t.length&&a.spliceWithArray(0,0,t),pd&&Object.defineProperty(a,`0`,fd)}),a}ro(t,e);var n=t.prototype;return n.concat=function(){this[x].atom_.reportObserved();var e=[...arguments];return Array.prototype.concat.apply(this.slice(),e.map(function(e){return el(e)?e.slice():e}))},n[Symbol.iterator]=function(){var e=this,t=0;return bl({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},eo(t,[{key:`length`,get:function(){return this[x].getArrayLength_()},set:function(e){this[x].setArrayLength_(e)}},{key:Symbol.toStringTag,get:function(){return`Array`}}])}(hd),Object.entries(Qu).forEach(function(e){var t=e[0],n=e[1];t!==`concat`&&Va(gd.prototype,t,n)}),dl(1e3),_d=El.toString,vd=Na().Iterator?.prototype||{},[`Symbol`,`Map`,`Set`].forEach(function(e){Na()[e]===void 0&&y(`MobX requires global '`+e+`' to be available or polyfilled`)}),typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__==`object`&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Vs,extras:{getDebugName:hl},$mobx:x})}));function bd(e){throw RangeError(Id[e])}function xd(e,t){let n=[],r=e.length;for(;r--;)n[r]=t(e[r]);return n}function Sd(e,t){let n=e.split(`@`),r=``;n.length>1&&(r=n[0]+`@`,e=n[1]),e=e.replace(Fd,`.`);let i=xd(e.split(`.`),t).join(`.`);return r+i}function Cd(e){let t=[],n=0,r=e.length;for(;n<r;){let i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){let r=e.charCodeAt(n++);(r&64512)==56320?t.push(((i&1023)<<10)+(r&1023)+65536):(t.push(i),n--)}else t.push(i)}return t}var wd,Td,Ed,Dd,Od,kd,Ad,jd,Md,Nd,Pd,Fd,Id,Ld,Rd,zd,Bd,Vd,Hd,Ud,Wd,Gd,Kd,qd,Jd,Yd,Xd=o((()=>{wd=2147483647,Td=36,Ed=1,Dd=26,Od=38,kd=700,Ad=72,jd=128,Md=`-`,Nd=/^xn--/,Pd=/[^\0-\x7F]/,Fd=/[\x2E\u3002\uFF0E\uFF61]/g,Id={overflow:`Overflow: input needs wider integers to process`,"not-basic":`Illegal input >= 0x80 (not a basic code point)`,"invalid-input":`Invalid input`},Ld=Td-Ed,Rd=Math.floor,zd=String.fromCharCode,Bd=e=>String.fromCodePoint(...e),Vd=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Td},Hd=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},Ud=function(e,t,n){let r=0;for(e=n?Rd(e/kd):e>>1,e+=Rd(e/t);e>Ld*Dd>>1;r+=Td)e=Rd(e/Ld);return Rd(r+(Ld+1)*e/(e+Od))},Wd=function(e){let t=[],n=e.length,r=0,i=jd,a=Ad,o=e.lastIndexOf(Md);o<0&&(o=0);for(let n=0;n<o;++n)e.charCodeAt(n)>=128&&bd(`not-basic`),t.push(e.charCodeAt(n));for(let s=o>0?o+1:0;s<n;){let o=r;for(let t=1,i=Td;;i+=Td){s>=n&&bd(`invalid-input`);let o=Vd(e.charCodeAt(s++));o>=Td&&bd(`invalid-input`),o>Rd((wd-r)/t)&&bd(`overflow`),r+=o*t;let c=i<=a?Ed:i>=a+Dd?Dd:i-a;if(o<c)break;let l=Td-c;t>Rd(wd/l)&&bd(`overflow`),t*=l}let c=t.length+1;a=Ud(r-o,c,o==0),Rd(r/c)>wd-i&&bd(`overflow`),i+=Rd(r/c),r%=c,t.splice(r++,0,i)}return String.fromCodePoint(...t)},Gd=function(e){let t=[];e=Cd(e);let n=e.length,r=jd,i=0,a=Ad;for(let n of e)n<128&&t.push(zd(n));let o=t.length,s=o;for(o&&t.push(Md);s<n;){let n=wd;for(let t of e)t>=r&&t<n&&(n=t);let c=s+1;n-r>Rd((wd-i)/c)&&bd(`overflow`),i+=(n-r)*c,r=n;for(let n of e)if(n<r&&++i>wd&&bd(`overflow`),n===r){let e=i;for(let n=Td;;n+=Td){let r=n<=a?Ed:n>=a+Dd?Dd:n-a;if(e<r)break;let i=e-r,o=Td-r;t.push(zd(Hd(r+i%o,0))),e=Rd(i/o)}t.push(zd(Hd(e,0))),a=Ud(i,c,s===o),i=0,++s}++i,++r}return t.join(``)},Kd=function(e){return Sd(e,function(e){return Nd.test(e)?Wd(e.slice(4).toLowerCase()):e})},qd=function(e){return Sd(e,function(e){return Pd.test(e)?`xn--`+Gd(e):e})},Jd={version:`2.3.1`,ucs2:{decode:Cd,encode:Bd},decode:Wd,encode:Gd,toASCII:qd,toUnicode:Kd},Yd=Jd}));function Zd(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var Qd=o((()=>{}));function $d(e){"@babel/helpers - typeof";return $d=typeof Symbol==`function`&&typeof Symbol.iterator==`symbol`?function(e){return typeof e}:function(e){return e&&typeof Symbol==`function`&&e.constructor===Symbol&&e!==Symbol.prototype?`symbol`:typeof e},$d(e)}var ef=o((()=>{}));function w(e,t){if(t.length<e)throw TypeError(e+` argument`+(e>1?`s`:``)+` required, but only `+t.length+` present`)}var T=o((()=>{}));function E(e){w(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||$d(e)===`object`&&t===`[object Date]`?new Date(e.getTime()):typeof e==`number`||t===`[object Number]`?new Date(e):((typeof e==`string`||t===`[object String]`)&&typeof console<`u`&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}var D=o((()=>{ef(),T()}));function tf(e,t){w(2,arguments);var n=E(e),r=Zd(t);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}var nf=o((()=>{Qd(),D(),T()}));function rf(e,t){w(2,arguments);var n=E(e),r=Zd(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var i=n.getDate(),a=new Date(n.getTime());return a.setMonth(n.getMonth()+r+1,0),i>=a.getDate()?a:(n.setFullYear(a.getFullYear(),a.getMonth(),i),n)}var af=o((()=>{Qd(),D(),T()}));function of(e,t){return w(2,arguments),tf(e,Zd(t)*7)}var sf=o((()=>{Qd(),nf(),T()}));function cf(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var lf=o((()=>{}));function uf(e){w(1,arguments);var t=E(e);return t.setHours(0,0,0,0),t}var df=o((()=>{D(),T()}));function ff(e,t){w(2,arguments);var n=uf(e),r=uf(t),i=n.getTime()-cf(n),a=r.getTime()-cf(r);return Math.round((i-a)/pf)}var pf,mf=o((()=>{lf(),df(),T(),pf=864e5}));function hf(e,t){return w(2,arguments),tf(e,-Zd(t))}var gf=o((()=>{nf(),T(),Qd()}));function _f(e){w(1,arguments);var t=E(e);return t.setHours(23,59,59,999),t}var vf=o((()=>{D(),T()}));function yf(e){w(1,arguments);var t=E(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}var bf=o((()=>{D(),T()}));function xf(){return Sf}var Sf,Cf=o((()=>{Sf={}}));function wf(e,t){var n;w(1,arguments);var r=xf(),i=Zd(t?.weekStartsOn??(t==null||(n=t.locale)==null?void 0:n.options?.weekStartsOn)??r.weekStartsOn??r.locale?.options?.weekStartsOn??0);if(!(i>=0&&i<=6))throw RangeError(`weekStartsOn must be between 0 and 6 inclusively`);var a=E(e),o=a.getDay(),s=(o<i?-7:0)+6-(o-i);return a.setDate(a.getDate()+s),a.setHours(23,59,59,999),a}var Tf=o((()=>{Cf(),D(),Qd(),T()}));function Ef(e){return w(1,arguments),e instanceof Date||$d(e)===`object`&&Object.prototype.toString.call(e)===`[object Date]`}var Df=o((()=>{ef(),T()}));function Of(e){if(w(1,arguments),!Ef(e)&&typeof e!=`number`)return!1;var t=E(e);return!isNaN(Number(t))}var kf=o((()=>{Df(),D(),T()}));function Af(e,t){w(2,arguments);var n=E(e).getTime(),r=Zd(t);return new Date(n+r)}var jf=o((()=>{Qd(),D(),T()}));function Mf(e,t){return w(2,arguments),Af(e,-Zd(t))}var Nf=o((()=>{jf(),T(),Qd()}));function Pf(e){w(1,arguments);var t=E(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=n-t.getTime();return Math.floor(r/Ff)+1}var Ff,If=o((()=>{D(),T(),Ff=864e5}));function Lf(e){w(1,arguments);var t=1,n=E(e),r=n.getUTCDay(),i=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}var Rf=o((()=>{D(),T()}));function zf(e){w(1,arguments);var t=E(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=Lf(r),a=new Date(0);a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0);var o=Lf(a);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}var Bf=o((()=>{D(),T(),Rf()}));function Vf(e){w(1,arguments);var t=zf(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),Lf(n)}var Hf=o((()=>{Bf(),Rf(),T()}));function Uf(e){w(1,arguments);var t=E(e),n=Lf(t).getTime()-Vf(t).getTime();return Math.round(n/Wf)+1}var Wf,Gf=o((()=>{D(),Rf(),Hf(),T(),Wf=6048e5}));function Kf(e,t){var n;w(1,arguments);var r=xf(),i=Zd(t?.weekStartsOn??(t==null||(n=t.locale)==null?void 0:n.options?.weekStartsOn)??r.weekStartsOn??r.locale?.options?.weekStartsOn??0);if(!(i>=0&&i<=6))throw RangeError(`weekStartsOn must be between 0 and 6 inclusively`);var a=E(e),o=a.getUTCDay(),s=(o<i?7:0)+o-i;return a.setUTCDate(a.getUTCDate()-s),a.setUTCHours(0,0,0,0),a}var qf=o((()=>{D(),T(),Qd(),Cf()}));function Jf(e,t){var n;w(1,arguments);var r=E(e),i=r.getUTCFullYear(),a=xf(),o=Zd(t?.firstWeekContainsDate??(t==null||(n=t.locale)==null?void 0:n.options?.firstWeekContainsDate)??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1);if(!(o>=1&&o<=7))throw RangeError(`firstWeekContainsDate must be between 1 and 7 inclusively`);var s=new Date(0);s.setUTCFullYear(i+1,0,o),s.setUTCHours(0,0,0,0);var c=Kf(s,t),l=new Date(0);l.setUTCFullYear(i,0,o),l.setUTCHours(0,0,0,0);var u=Kf(l,t);return r.getTime()>=c.getTime()?i+1:r.getTime()>=u.getTime()?i:i-1}var Yf=o((()=>{D(),T(),qf(),Qd(),Cf()}));function Xf(e,t){var n;w(1,arguments);var r=xf(),i=Zd(t?.firstWeekContainsDate??(t==null||(n=t.locale)==null?void 0:n.options?.firstWeekContainsDate)??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1),a=Jf(e,t),o=new Date(0);return o.setUTCFullYear(a,0,i),o.setUTCHours(0,0,0,0),Kf(o,t)}var Zf=o((()=>{Yf(),T(),qf(),Qd(),Cf()}));function Qf(e,t){w(1,arguments);var n=E(e),r=Kf(n,t).getTime()-Xf(n,t).getTime();return Math.round(r/$f)+1}var $f,ep=o((()=>{D(),qf(),Zf(),T(),$f=6048e5}));function O(e,t){for(var n=e<0?`-`:``,r=Math.abs(e).toString();r.length<t;)r=`0`+r;return n+r}var tp=o((()=>{})),np,rp,ip=o((()=>{tp(),np={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return O(t===`yy`?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return t===`M`?String(n+1):O(n+1,2)},d:function(e,t){return O(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?`pm`:`am`;switch(t){case`a`:case`aa`:return n.toUpperCase();case`aaa`:return n;case`aaaaa`:return n[0];case`aaaa`:default:return n===`am`?`a.m.`:`p.m.`}},h:function(e,t){return O(e.getUTCHours()%12||12,t.length)},H:function(e,t){return O(e.getUTCHours(),t.length)},m:function(e,t){return O(e.getUTCMinutes(),t.length)},s:function(e,t){return O(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return O(Math.floor(r*10**(n-3)),t.length)}},rp=np}));function ap(e,t){var n=e>0?`-`:`+`,r=Math.abs(e),i=Math.floor(r/60),a=r%60;if(a===0)return n+String(i);var o=t||``;return n+String(i)+o+O(a,2)}function op(e,t){return e%60==0?(e>0?`-`:`+`)+O(Math.abs(e)/60,2):sp(e,t)}function sp(e,t){var n=t||``,r=e>0?`-`:`+`,i=Math.abs(e),a=O(Math.floor(i/60),2),o=O(i%60,2);return r+a+n+o}var cp,lp,up,dp=o((()=>{If(),Gf(),Bf(),ep(),Yf(),tp(),ip(),cp={am:`am`,pm:`pm`,midnight:`midnight`,noon:`noon`,morning:`morning`,afternoon:`afternoon`,evening:`evening`,night:`night`},lp={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case`G`:case`GG`:case`GGG`:return n.era(r,{width:`abbreviated`});case`GGGGG`:return n.era(r,{width:`narrow`});case`GGGG`:default:return n.era(r,{width:`wide`})}},y:function(e,t,n){if(t===`yo`){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:`year`})}return rp.y(e,t)},Y:function(e,t,n,r){var i=Jf(e,r),a=i>0?i:1-i;return t===`YY`?O(a%100,2):t===`Yo`?n.ordinalNumber(a,{unit:`year`}):O(a,t.length)},R:function(e,t){return O(zf(e),t.length)},u:function(e,t){return O(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case`Q`:return String(r);case`QQ`:return O(r,2);case`Qo`:return n.ordinalNumber(r,{unit:`quarter`});case`QQQ`:return n.quarter(r,{width:`abbreviated`,context:`formatting`});case`QQQQQ`:return n.quarter(r,{width:`narrow`,context:`formatting`});case`QQQQ`:default:return n.quarter(r,{width:`wide`,context:`formatting`})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case`q`:return String(r);case`qq`:return O(r,2);case`qo`:return n.ordinalNumber(r,{unit:`quarter`});case`qqq`:return n.quarter(r,{width:`abbreviated`,context:`standalone`});case`qqqqq`:return n.quarter(r,{width:`narrow`,context:`standalone`});case`qqqq`:default:return n.quarter(r,{width:`wide`,context:`standalone`})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case`M`:case`MM`:return rp.M(e,t);case`Mo`:return n.ordinalNumber(r+1,{unit:`month`});case`MMM`:return n.month(r,{width:`abbreviated`,context:`formatting`});case`MMMMM`:return n.month(r,{width:`narrow`,context:`formatting`});case`MMMM`:default:return n.month(r,{width:`wide`,context:`formatting`})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case`L`:return String(r+1);case`LL`:return O(r+1,2);case`Lo`:return n.ordinalNumber(r+1,{unit:`month`});case`LLL`:return n.month(r,{width:`abbreviated`,context:`standalone`});case`LLLLL`:return n.month(r,{width:`narrow`,context:`standalone`});case`LLLL`:default:return n.month(r,{width:`wide`,context:`standalone`})}},w:function(e,t,n,r){var i=Qf(e,r);return t===`wo`?n.ordinalNumber(i,{unit:`week`}):O(i,t.length)},I:function(e,t,n){var r=Uf(e);return t===`Io`?n.ordinalNumber(r,{unit:`week`}):O(r,t.length)},d:function(e,t,n){return t===`do`?n.ordinalNumber(e.getUTCDate(),{unit:`date`}):rp.d(e,t)},D:function(e,t,n){var r=Pf(e);return t===`Do`?n.ordinalNumber(r,{unit:`dayOfYear`}):O(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case`E`:case`EE`:case`EEE`:return n.day(r,{width:`abbreviated`,context:`formatting`});case`EEEEE`:return n.day(r,{width:`narrow`,context:`formatting`});case`EEEEEE`:return n.day(r,{width:`short`,context:`formatting`});case`EEEE`:default:return n.day(r,{width:`wide`,context:`formatting`})}},e:function(e,t,n,r){var i=e.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case`e`:return String(a);case`ee`:return O(a,2);case`eo`:return n.ordinalNumber(a,{unit:`day`});case`eee`:return n.day(i,{width:`abbreviated`,context:`formatting`});case`eeeee`:return n.day(i,{width:`narrow`,context:`formatting`});case`eeeeee`:return n.day(i,{width:`short`,context:`formatting`});case`eeee`:default:return n.day(i,{width:`wide`,context:`formatting`})}},c:function(e,t,n,r){var i=e.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case`c`:return String(a);case`cc`:return O(a,t.length);case`co`:return n.ordinalNumber(a,{unit:`day`});case`ccc`:return n.day(i,{width:`abbreviated`,context:`standalone`});case`ccccc`:return n.day(i,{width:`narrow`,context:`standalone`});case`cccccc`:return n.day(i,{width:`short`,context:`standalone`});case`cccc`:default:return n.day(i,{width:`wide`,context:`standalone`})}},i:function(e,t,n){var r=e.getUTCDay(),i=r===0?7:r;switch(t){case`i`:return String(i);case`ii`:return O(i,t.length);case`io`:return n.ordinalNumber(i,{unit:`day`});case`iii`:return n.day(r,{width:`abbreviated`,context:`formatting`});case`iiiii`:return n.day(r,{width:`narrow`,context:`formatting`});case`iiiiii`:return n.day(r,{width:`short`,context:`formatting`});case`iiii`:default:return n.day(r,{width:`wide`,context:`formatting`})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?`pm`:`am`;switch(t){case`a`:case`aa`:return n.dayPeriod(r,{width:`abbreviated`,context:`formatting`});case`aaa`:return n.dayPeriod(r,{width:`abbreviated`,context:`formatting`}).toLowerCase();case`aaaaa`:return n.dayPeriod(r,{width:`narrow`,context:`formatting`});case`aaaa`:default:return n.dayPeriod(r,{width:`wide`,context:`formatting`})}},b:function(e,t,n){var r=e.getUTCHours(),i=r===12?cp.noon:r===0?cp.midnight:r/12>=1?`pm`:`am`;switch(t){case`b`:case`bb`:return n.dayPeriod(i,{width:`abbreviated`,context:`formatting`});case`bbb`:return n.dayPeriod(i,{width:`abbreviated`,context:`formatting`}).toLowerCase();case`bbbbb`:return n.dayPeriod(i,{width:`narrow`,context:`formatting`});case`bbbb`:default:return n.dayPeriod(i,{width:`wide`,context:`formatting`})}},B:function(e,t,n){var r=e.getUTCHours(),i=r>=17?cp.evening:r>=12?cp.afternoon:r>=4?cp.morning:cp.night;switch(t){case`B`:case`BB`:case`BBB`:return n.dayPeriod(i,{width:`abbreviated`,context:`formatting`});case`BBBBB`:return n.dayPeriod(i,{width:`narrow`,context:`formatting`});case`BBBB`:default:return n.dayPeriod(i,{width:`wide`,context:`formatting`})}},h:function(e,t,n){if(t===`ho`){var r=e.getUTCHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:`hour`})}return rp.h(e,t)},H:function(e,t,n){return t===`Ho`?n.ordinalNumber(e.getUTCHours(),{unit:`hour`}):rp.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return t===`Ko`?n.ordinalNumber(r,{unit:`hour`}):O(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return r===0&&(r=24),t===`ko`?n.ordinalNumber(r,{unit:`hour`}):O(r,t.length)},m:function(e,t,n){return t===`mo`?n.ordinalNumber(e.getUTCMinutes(),{unit:`minute`}):rp.m(e,t)},s:function(e,t,n){return t===`so`?n.ordinalNumber(e.getUTCSeconds(),{unit:`second`}):rp.s(e,t)},S:function(e,t){return rp.S(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(i===0)return`Z`;switch(t){case`X`:return op(i);case`XXXX`:case`XX`:return sp(i);case`XXXXX`:case`XXX`:default:return sp(i,`:`)}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case`x`:return op(i);case`xxxx`:case`xx`:return sp(i);case`xxxxx`:case`xxx`:default:return sp(i,`:`)}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case`O`:case`OO`:case`OOO`:return`GMT`+ap(i,`:`);case`OOOO`:default:return`GMT`+sp(i,`:`)}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case`z`:case`zz`:case`zzz`:return`GMT`+ap(i,`:`);case`zzzz`:default:return`GMT`+sp(i,`:`)}},t:function(e,t,n,r){var i=r._originalDate||e;return O(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,n,r){return O((r._originalDate||e).getTime(),t.length)}},up=lp})),fp,pp,mp,hp,gp,_p=o((()=>{fp=function(e,t){switch(e){case`P`:return t.date({width:`short`});case`PP`:return t.date({width:`medium`});case`PPP`:return t.date({width:`long`});case`PPPP`:default:return t.date({width:`full`})}},pp=function(e,t){switch(e){case`p`:return t.time({width:`short`});case`pp`:return t.time({width:`medium`});case`ppp`:return t.time({width:`long`});case`pppp`:default:return t.time({width:`full`})}},mp=function(e,t){var n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return fp(e,t);var a;switch(r){case`P`:a=t.dateTime({width:`short`});break;case`PP`:a=t.dateTime({width:`medium`});break;case`PPP`:a=t.dateTime({width:`long`});break;case`PPPP`:default:a=t.dateTime({width:`full`});break}return a.replace(`{{date}}`,fp(r,t)).replace(`{{time}}`,pp(i,t))},hp={p:pp,P:mp},gp=hp}));function vp(e){return xp.indexOf(e)!==-1}function yp(e){return Sp.indexOf(e)!==-1}function bp(e,t,n){if(e===`YYYY`)throw RangeError(`Use \`yyyy\` instead of \`YYYY\` (in \`${t}\`) for formatting years to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`);if(e===`YY`)throw RangeError(`Use \`yy\` instead of \`YY\` (in \`${t}\`) for formatting years to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`);if(e===`D`)throw RangeError(`Use \`d\` instead of \`D\` (in \`${t}\`) for formatting days of the month to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`);if(e===`DD`)throw RangeError(`Use \`dd\` instead of \`DD\` (in \`${t}\`) for formatting days of the month to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`)}var xp,Sp,Cp=o((()=>{xp=[`D`,`DD`],Sp=[`YY`,`YYYY`]})),wp,Tp,Ep,Dp=o((()=>{wp={lessThanXSeconds:{one:`less than a second`,other:`less than {{count}} seconds`},xSeconds:{one:`1 second`,other:`{{count}} seconds`},halfAMinute:`half a minute`,lessThanXMinutes:{one:`less than a minute`,other:`less than {{count}} minutes`},xMinutes:{one:`1 minute`,other:`{{count}} minutes`},aboutXHours:{one:`about 1 hour`,other:`about {{count}} hours`},xHours:{one:`1 hour`,other:`{{count}} hours`},xDays:{one:`1 day`,other:`{{count}} days`},aboutXWeeks:{one:`about 1 week`,other:`about {{count}} weeks`},xWeeks:{one:`1 week`,other:`{{count}} weeks`},aboutXMonths:{one:`about 1 month`,other:`about {{count}} months`},xMonths:{one:`1 month`,other:`{{count}} months`},aboutXYears:{one:`about 1 year`,other:`about {{count}} years`},xYears:{one:`1 year`,other:`{{count}} years`},overXYears:{one:`over 1 year`,other:`over {{count}} years`},almostXYears:{one:`almost 1 year`,other:`almost {{count}} years`}},Tp=function(e,t,n){var r,i=wp[e];return r=typeof i==`string`?i:t===1?i.one:i.other.replace(`{{count}}`,t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?`in `+r:r+` ago`:r},Ep=Tp}));function Op(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var kp=o((()=>{})),Ap,jp,Mp,Np,Pp,Fp=o((()=>{kp(),Ap={full:`EEEE, MMMM do, y`,long:`MMMM do, y`,medium:`MMM d, y`,short:`MM/dd/yyyy`},jp={full:`h:mm:ss a zzzz`,long:`h:mm:ss a z`,medium:`h:mm:ss a`,short:`h:mm a`},Mp={full:`{{date}} 'at' {{time}}`,long:`{{date}} 'at' {{time}}`,medium:`{{date}}, {{time}}`,short:`{{date}}, {{time}}`},Np={date:Op({formats:Ap,defaultWidth:`full`}),time:Op({formats:jp,defaultWidth:`full`}),dateTime:Op({formats:Mp,defaultWidth:`full`})},Pp=Np})),Ip,Lp,Rp,zp=o((()=>{Ip={lastWeek:`'last' eeee 'at' p`,yesterday:`'yesterday at' p`,today:`'today at' p`,tomorrow:`'tomorrow at' p`,nextWeek:`eeee 'at' p`,other:`P`},Lp=function(e,t,n,r){return Ip[e]},Rp=Lp}));function Bp(e){return function(t,n){var r=n!=null&&n.context?String(n.context):`standalone`,i;if(r===`formatting`&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):a;i=e.formattingValues[o]||e.formattingValues[a]}else{var s=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[c]||e.values[s]}var l=e.argumentCallback?e.argumentCallback(t):t;return i[l]}}var Vp=o((()=>{})),Hp,Up,Wp,Gp,Kp,qp,Jp,Yp,Xp,Zp=o((()=>{Vp(),Hp={narrow:[`B`,`A`],abbreviated:[`BC`,`AD`],wide:[`Before Christ`,`Anno Domini`]},Up={narrow:[`1`,`2`,`3`,`4`],abbreviated:[`Q1`,`Q2`,`Q3`,`Q4`],wide:[`1st quarter`,`2nd quarter`,`3rd quarter`,`4th quarter`]},Wp={narrow:[`J`,`F`,`M`,`A`,`M`,`J`,`J`,`A`,`S`,`O`,`N`,`D`],abbreviated:[`Jan`,`Feb`,`Mar`,`Apr`,`May`,`Jun`,`Jul`,`Aug`,`Sep`,`Oct`,`Nov`,`Dec`],wide:[`January`,`February`,`March`,`April`,`May`,`June`,`July`,`August`,`September`,`October`,`November`,`December`]},Gp={narrow:[`S`,`M`,`T`,`W`,`T`,`F`,`S`],short:[`Su`,`Mo`,`Tu`,`We`,`Th`,`Fr`,`Sa`],abbreviated:[`Sun`,`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`],wide:[`Sunday`,`Monday`,`Tuesday`,`Wednesday`,`Thursday`,`Friday`,`Saturday`]},Kp={narrow:{am:`a`,pm:`p`,midnight:`mi`,noon:`n`,morning:`morning`,afternoon:`afternoon`,evening:`evening`,night:`night`},abbreviated:{am:`AM`,pm:`PM`,midnight:`midnight`,noon:`noon`,morning:`morning`,afternoon:`afternoon`,evening:`evening`,night:`night`},wide:{am:`a.m.`,pm:`p.m.`,midnight:`midnight`,noon:`noon`,morning:`morning`,afternoon:`afternoon`,evening:`evening`,night:`night`}},qp={narrow:{am:`a`,pm:`p`,midnight:`mi`,noon:`n`,morning:`in the morning`,afternoon:`in the afternoon`,evening:`in the evening`,night:`at night`},abbreviated:{am:`AM`,pm:`PM`,midnight:`midnight`,noon:`noon`,morning:`in the morning`,afternoon:`in the afternoon`,evening:`in the evening`,night:`at night`},wide:{am:`a.m.`,pm:`p.m.`,midnight:`midnight`,noon:`noon`,morning:`in the morning`,afternoon:`in the afternoon`,evening:`in the evening`,night:`at night`}},Jp=function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+`st`;case 2:return n+`nd`;case 3:return n+`rd`}return n+`th`},Yp={ordinalNumber:Jp,era:Bp({values:Hp,defaultWidth:`wide`}),quarter:Bp({values:Up,defaultWidth:`wide`,argumentCallback:function(e){return e-1}}),month:Bp({values:Wp,defaultWidth:`wide`}),day:Bp({values:Gp,defaultWidth:`wide`}),dayPeriod:Bp({values:Kp,defaultWidth:`wide`,formattingValues:qp,defaultFormattingWidth:`wide`})},Xp=Yp}));function Qp(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;var o=a[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(s)?em(s,function(e){return e.test(o)}):$p(s,function(e){return e.test(o)}),l=e.valueCallback?e.valueCallback(c):c;l=n.valueCallback?n.valueCallback(l):l;var u=t.slice(o.length);return{value:l,rest:u}}}function $p(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function em(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}var tm=o((()=>{}));function nm(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var i=r[0],a=t.match(e.parsePattern);if(!a)return null;var o=e.valueCallback?e.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;var s=t.slice(i.length);return{value:o,rest:s}}}var rm=o((()=>{})),im,am,om,sm,cm,lm,um,dm,fm,pm,mm,hm,gm,_m,vm=o((()=>{tm(),rm(),im=/^(\d+)(th|st|nd|rd)?/i,am=/\d+/i,om={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},sm={any:[/^b/i,/^(a|c)/i]},cm={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},lm={any:[/1/i,/2/i,/3/i,/4/i]},um={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},dm={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},fm={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},pm={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},mm={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},hm={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},gm={ordinalNumber:nm({matchPattern:im,parsePattern:am,valueCallback:function(e){return parseInt(e,10)}}),era:Qp({matchPatterns:om,defaultMatchWidth:`wide`,parsePatterns:sm,defaultParseWidth:`any`}),quarter:Qp({matchPatterns:cm,defaultMatchWidth:`wide`,parsePatterns:lm,defaultParseWidth:`any`,valueCallback:function(e){return e+1}}),month:Qp({matchPatterns:um,defaultMatchWidth:`wide`,parsePatterns:dm,defaultParseWidth:`any`}),day:Qp({matchPatterns:fm,defaultMatchWidth:`wide`,parsePatterns:pm,defaultParseWidth:`any`}),dayPeriod:Qp({matchPatterns:mm,defaultMatchWidth:`any`,parsePatterns:hm,defaultParseWidth:`any`})},_m=gm})),ym,bm,xm=o((()=>{Dp(),Fp(),zp(),Zp(),vm(),ym={code:`en-US`,formatDistance:Ep,formatLong:Pp,formatRelative:Rp,localize:Xp,match:_m,options:{weekStartsOn:0,firstWeekContainsDate:1}},bm=ym})),Sm,Cm=o((()=>{xm(),Sm=bm}));function wm(e,t,n){var r,i;w(2,arguments);var a=String(t),o=xf(),s=n?.locale??o.locale??Sm,c=Zd(n?.firstWeekContainsDate??(n==null||(r=n.locale)==null?void 0:r.options?.firstWeekContainsDate)??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1);if(!(c>=1&&c<=7))throw RangeError(`firstWeekContainsDate must be between 1 and 7 inclusively`);var l=Zd(n?.weekStartsOn??(n==null||(i=n.locale)==null?void 0:i.options?.weekStartsOn)??o.weekStartsOn??o.locale?.options?.weekStartsOn??0);if(!(l>=0&&l<=6))throw RangeError(`weekStartsOn must be between 0 and 6 inclusively`);if(!s.localize)throw RangeError(`locale must contain localize property`);if(!s.formatLong)throw RangeError(`locale must contain formatLong property`);var u=E(e);if(!Of(u))throw RangeError(`Invalid time value`);var d=Mf(u,cf(u)),f={firstWeekContainsDate:c,weekStartsOn:l,locale:s,_originalDate:u};return a.match(Dm).map(function(e){var t=e[0];if(t===`p`||t===`P`){var n=gp[t];return n(e,s.formatLong)}return e}).join(``).match(Em).map(function(r){if(r===`''`)return`'`;var i=r[0];if(i===`'`)return Tm(r);var a=up[i];if(a)return!(n!=null&&n.useAdditionalWeekYearTokens)&&yp(r)&&bp(r,t,String(e)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&vp(r)&&bp(r,t,String(e)),a(d,r,s.localize,f);if(i.match(Am))throw RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return r}).join(``)}function Tm(e){var t=e.match(Om);return t?t[1].replace(km,`'`):e}var Em,Dm,Om,km,Am,jm=o((()=>{kf(),Nf(),D(),dp(),_p(),lf(),Cp(),Qd(),T(),Cf(),Cm(),Em=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Dm=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Om=/^'([^]*?)'?$/,km=/''/g,Am=/[a-zA-Z]/}));function Mm(e){return w(1,arguments),E(e).getDate()}var Nm=o((()=>{D(),T()}));function Pm(e){return w(1,arguments),E(e).getMonth()}var Fm=o((()=>{D(),T()}));function Im(e,t){var n;w(1,arguments);var r=xf(),i=Zd(t?.weekStartsOn??(t==null||(n=t.locale)==null?void 0:n.options?.weekStartsOn)??r.weekStartsOn??r.locale?.options?.weekStartsOn??0);if(!(i>=0&&i<=6))throw RangeError(`weekStartsOn must be between 0 and 6 inclusively`);var a=E(e),o=a.getDay(),s=(o<i?7:0)+o-i;return a.setDate(a.getDate()-s),a.setHours(0,0,0,0),a}var Lm=o((()=>{D(),Qd(),T(),Cf()}));function Rm(e,t){var n;w(1,arguments);var r=E(e),i=r.getFullYear(),a=xf(),o=Zd(t?.firstWeekContainsDate??(t==null||(n=t.locale)==null?void 0:n.options?.firstWeekContainsDate)??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1);if(!(o>=1&&o<=7))throw RangeError(`firstWeekContainsDate must be between 1 and 7 inclusively`);var s=new Date(0);s.setFullYear(i+1,0,o),s.setHours(0,0,0,0);var c=Im(s,t),l=new Date(0);l.setFullYear(i,0,o),l.setHours(0,0,0,0);var u=Im(l,t);return r.getTime()>=c.getTime()?i+1:r.getTime()>=u.getTime()?i:i-1}var zm=o((()=>{Lm(),D(),Qd(),T(),Cf()}));function Bm(e,t){var n;w(1,arguments);var r=xf(),i=Zd(t?.firstWeekContainsDate??(t==null||(n=t.locale)==null?void 0:n.options?.firstWeekContainsDate)??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1),a=Rm(e,t),o=new Date(0);return o.setFullYear(a,0,i),o.setHours(0,0,0,0),Im(o,t)}var Vm=o((()=>{zm(),Lm(),Qd(),T(),Cf()}));function Hm(e,t){w(1,arguments);var n=E(e),r=Im(n,t).getTime()-Bm(n,t).getTime();return Math.round(r/Um)+1}var Um,Wm=o((()=>{Lm(),Vm(),D(),T(),Um=6048e5}));function Gm(e){return w(1,arguments),E(e).getFullYear()}var Km=o((()=>{D(),T()}));function qm(e,t){w(2,arguments);var n=uf(e),r=uf(t);return n.getTime()===r.getTime()}var Jm=o((()=>{df(),T()}));function Ym(e,t){w(2,arguments);var n=E(e),r=E(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}var Xm=o((()=>{D(),T()}));function Zm(e,t){w(2,arguments);var n=E(e),r=E(t);return n.getFullYear()===r.getFullYear()}var Qm=o((()=>{D(),T()}));function $m(e){return w(1,arguments),Zm(e,Date.now())}var eh=o((()=>{Qm(),T()}));function th(e){return w(1,arguments),qm(e,Date.now())}var nh=o((()=>{Jm(),T()}));function rh(e){return w(1,arguments),qm(e,tf(Date.now(),1))}var ih=o((()=>{nf(),Jm(),T()}));function ah(e){return w(1,arguments),qm(e,hf(Date.now(),1))}var oh=o((()=>{Jm(),gf(),T()}));function sh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ch=o((()=>{}));function lh(e,t){if(e){if(typeof e==`string`)return sh(e,t);var n={}.toString.call(e).slice(8,-1);return n===`Object`&&e.constructor&&(n=e.constructor.name),n===`Map`||n===`Set`?Array.from(e):n===`Arguments`||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sh(e,t):void 0}}var uh=o((()=>{ch()}));function dh(e,t){var n=typeof Symbol<`u`&&e[Symbol.iterator]||e[`@@iterator`];if(!n){if(Array.isArray(e)||(n=lh(e))||t&&e&&typeof e.length==`number`){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||n.return==null||n.return()}finally{if(s)throw a}}}}var fh=o((()=>{uh()}));function ph(e,t){if(e==null)throw TypeError(`assign requires that input parameter not be null or undefined`);for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}var mh=o((()=>{}));function k(e){if(e===void 0)throw ReferenceError(`this hasn't been initialised - super() hasn't been called`);return e}var A=o((()=>{}));function hh(e,t){return hh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hh(e,t)}var gh=o((()=>{}));function j(e,t){if(typeof t!=`function`&&t!==null)throw TypeError(`Super expression must either be null or a function`);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,`prototype`,{writable:!1}),t&&hh(e,t)}var M=o((()=>{gh()}));function _h(e){return _h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_h(e)}var vh=o((()=>{}));function yh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yh=function(){return!!e})()}var bh=o((()=>{}));function xh(e,t){if(t&&($d(t)==`object`||typeof t==`function`))return t;if(t!==void 0)throw TypeError(`Derived constructors may only return object or undefined`);return k(e)}var Sh=o((()=>{ef(),A()}));function N(e){var t=yh();return function(){var n,r=_h(e);if(t){var i=_h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xh(this,n)}}var P=o((()=>{vh(),bh(),Sh()}));function F(e,t){if(!(e instanceof t))throw TypeError(`Cannot call a class as a function`)}var I=o((()=>{}));function Ch(e,t){if($d(e)!=`object`||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||`default`);if($d(r)!=`object`)return r;throw TypeError(`@@toPrimitive must return a primitive value.`)}return(t===`string`?String:Number)(e)}var wh=o((()=>{ef()}));function Th(e){var t=Ch(e,`string`);return $d(t)==`symbol`?t:t+``}var Eh=o((()=>{ef(),wh()}));function Dh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,`value`in r&&(r.writable=!0),Object.defineProperty(e,Th(r.key),r)}}function L(e,t,n){return t&&Dh(e.prototype,t),n&&Dh(e,n),Object.defineProperty(e,`prototype`,{writable:!1}),e}var R=o((()=>{Eh()}));function z(e,t,n){return(t=Th(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=o((()=>{Eh()})),Oh,kh,Ah,jh,Mh=o((()=>{A(),M(),P(),I(),R(),B(),Oh=10,kh=function(){function e(){F(this,e),z(this,`priority`,void 0),z(this,`subPriority`,0)}return L(e,[{key:`validate`,value:function(e,t){return!0}}]),e}(),Ah=function(e){j(n,e);var t=N(n);function n(e,r,i,a,o){var s;return F(this,n),s=t.call(this),s.value=e,s.validateValue=r,s.setValue=i,s.priority=a,o&&(s.subPriority=o),s}return L(n,[{key:`validate`,value:function(e,t){return this.validateValue(e,this.value,t)}},{key:`set`,value:function(e,t,n){return this.setValue(e,t,this.value,n)}}]),n}(kh),jh=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,Oh),z(k(e),`subPriority`,-1),e}return L(n,[{key:`set`,value:function(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}}]),n}(kh)})),V,H=o((()=>{I(),R(),B(),Mh(),V=function(){function e(){F(this,e),z(this,`incompatibleTokens`,void 0),z(this,`priority`,void 0),z(this,`subPriority`,void 0)}return L(e,[{key:`run`,value:function(e,t,n,r){var i=this.parse(e,t,n,r);return i?{setter:new Ah(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}},{key:`validate`,value:function(e,t,n){return!0}}]),e}()})),Nh,Ph=o((()=>{I(),R(),A(),M(),P(),B(),H(),Nh=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,140),z(k(e),`incompatibleTokens`,[`R`,`u`,`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t,n){switch(t){case`G`:case`GG`:case`GGG`:return n.era(e,{width:`abbreviated`})||n.era(e,{width:`narrow`});case`GGGGG`:return n.era(e,{width:`narrow`});case`GGGG`:default:return n.era(e,{width:`wide`})||n.era(e,{width:`abbreviated`})||n.era(e,{width:`narrow`})}}},{key:`set`,value:function(e,t,n){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(V)})),Fh,Ih,Lh,Rh,zh,Bh,Vh,Hh,Uh=o((()=>{Fh=365.2425,Ih=6e4,Lh=36e5,Rh=1e3,zh=3600,Bh=zh*24,Bh*7,Vh=Bh*Fh,Hh=Vh/12,Hh*3})),Wh,Gh,Kh=o((()=>{Wh={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Gh={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/}}));function qh(e,t){return e&&{value:t(e.value),rest:e.rest}}function Jh(e,t){var n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function Yh(e,t){var n=t.match(e);if(!n)return null;if(n[0]===`Z`)return{value:0,rest:t.slice(1)};var r=n[1]===`+`?1:-1,i=n[2]?parseInt(n[2],10):0,a=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(i*Lh+a*Ih+o*Rh),rest:t.slice(n[0].length)}}function Xh(e){return Jh(Wh.anyDigitsSigned,e)}function Zh(e,t){switch(e){case 1:return Jh(Wh.singleDigit,t);case 2:return Jh(Wh.twoDigits,t);case 3:return Jh(Wh.threeDigits,t);case 4:return Jh(Wh.fourDigits,t);default:return Jh(RegExp(`^\\d{1,`+e+`}`),t)}}function Qh(e,t){switch(e){case 1:return Jh(Wh.singleDigitSigned,t);case 2:return Jh(Wh.twoDigitsSigned,t);case 3:return Jh(Wh.threeDigitsSigned,t);case 4:return Jh(Wh.fourDigitsSigned,t);default:return Jh(RegExp(`^-?\\d{1,`+e+`}`),t)}}function $h(e){switch(e){case`morning`:return 4;case`evening`:return 17;case`pm`:case`noon`:case`afternoon`:return 12;case`am`:case`midnight`:case`night`:default:return 0}}function eg(e,t){var n=t>0,r=n?t:1-t,i;if(r<=50)i=e||100;else{var a=r+50,o=Math.floor(a/100)*100,s=e>=a%100;i=e+o-(s?100:0)}return n?i:1-i}function tg(e){return e%400==0||e%4==0&&e%100!=0}var U=o((()=>{Uh(),Kh()})),ng,rg=o((()=>{I(),R(),A(),M(),P(),B(),H(),U(),ng=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,130),z(k(e),`incompatibleTokens`,[`Y`,`R`,`u`,`w`,`I`,`i`,`e`,`c`,`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:t===`yy`}};switch(t){case`y`:return qh(Zh(4,e),r);case`yo`:return qh(n.ordinalNumber(e,{unit:`year`}),r);default:return qh(Zh(t.length,e),r)}}},{key:`validate`,value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:`set`,value:function(e,t,n){var r=e.getUTCFullYear();if(n.isTwoDigitYear){var i=eg(n.year,r);return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e}var a=!(`era`in t)||t.era===1?n.year:1-n.year;return e.setUTCFullYear(a,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(V)})),ig,ag=o((()=>{I(),R(),A(),M(),P(),B(),H(),U(),Yf(),qf(),ig=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,130),z(k(e),`incompatibleTokens`,[`y`,`R`,`u`,`Q`,`q`,`M`,`L`,`I`,`d`,`D`,`i`,`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:t===`YY`}};switch(t){case`Y`:return qh(Zh(4,e),r);case`Yo`:return qh(n.ordinalNumber(e,{unit:`year`}),r);default:return qh(Zh(t.length,e),r)}}},{key:`validate`,value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:`set`,value:function(e,t,n,r){var i=Jf(e,r);if(n.isTwoDigitYear){var a=eg(n.year,i);return e.setUTCFullYear(a,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Kf(e,r)}var o=!(`era`in t)||t.era===1?n.year:1-n.year;return e.setUTCFullYear(o,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Kf(e,r)}}]),n}(V)})),og,sg=o((()=>{I(),R(),A(),M(),P(),B(),H(),U(),Rf(),og=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,130),z(k(e),`incompatibleTokens`,[`G`,`y`,`Y`,`u`,`Q`,`q`,`M`,`L`,`w`,`d`,`D`,`e`,`c`,`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t){return Qh(t===`R`?4:t.length,e)}},{key:`set`,value:function(e,t,n){var r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),Lf(r)}}]),n}(V)})),cg,lg=o((()=>{I(),R(),A(),M(),P(),B(),H(),U(),cg=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,130),z(k(e),`incompatibleTokens`,[`G`,`y`,`Y`,`R`,`w`,`I`,`i`,`e`,`c`,`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t){return Qh(t===`u`?4:t.length,e)}},{key:`set`,value:function(e,t,n){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(V)})),ug,dg=o((()=>{I(),R(),A(),M(),P(),B(),H(),U(),ug=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,120),z(k(e),`incompatibleTokens`,[`Y`,`R`,`q`,`M`,`L`,`w`,`I`,`d`,`D`,`i`,`e`,`c`,`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t,n){switch(t){case`Q`:case`QQ`:return Zh(t.length,e);case`Qo`:return n.ordinalNumber(e,{unit:`quarter`});case`QQQ`:return n.quarter(e,{width:`abbreviated`,context:`formatting`})||n.quarter(e,{width:`narrow`,context:`formatting`});case`QQQQQ`:return n.quarter(e,{width:`narrow`,context:`formatting`});case`QQQQ`:default:return n.quarter(e,{width:`wide`,context:`formatting`})||n.quarter(e,{width:`abbreviated`,context:`formatting`})||n.quarter(e,{width:`narrow`,context:`formatting`})}}},{key:`validate`,value:function(e,t){return t>=1&&t<=4}},{key:`set`,value:function(e,t,n){return e.setUTCMonth((n-1)*3,1),e.setUTCHours(0,0,0,0),e}}]),n}(V)})),fg,pg=o((()=>{I(),R(),A(),M(),P(),B(),H(),U(),fg=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,120),z(k(e),`incompatibleTokens`,[`Y`,`R`,`Q`,`M`,`L`,`w`,`I`,`d`,`D`,`i`,`e`,`c`,`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t,n){switch(t){case`q`:case`qq`:return Zh(t.length,e);case`qo`:return n.ordinalNumber(e,{unit:`quarter`});case`qqq`:return n.quarter(e,{width:`abbreviated`,context:`standalone`})||n.quarter(e,{width:`narrow`,context:`standalone`});case`qqqqq`:return n.quarter(e,{width:`narrow`,context:`standalone`});case`qqqq`:default:return n.quarter(e,{width:`wide`,context:`standalone`})||n.quarter(e,{width:`abbreviated`,context:`standalone`})||n.quarter(e,{width:`narrow`,context:`standalone`})}}},{key:`validate`,value:function(e,t){return t>=1&&t<=4}},{key:`set`,value:function(e,t,n){return e.setUTCMonth((n-1)*3,1),e.setUTCHours(0,0,0,0),e}}]),n}(V)})),mg,hg=o((()=>{I(),R(),A(),M(),P(),B(),U(),H(),Kh(),mg=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`incompatibleTokens`,[`Y`,`R`,`q`,`Q`,`L`,`w`,`I`,`D`,`i`,`e`,`c`,`t`,`T`]),z(k(e),`priority`,110),e}return L(n,[{key:`parse`,value:function(e,t,n){var r=function(e){return e-1};switch(t){case`M`:return qh(Jh(Wh.month,e),r);case`MM`:return qh(Zh(2,e),r);case`Mo`:return qh(n.ordinalNumber(e,{unit:`month`}),r);case`MMM`:return n.month(e,{width:`abbreviated`,context:`formatting`})||n.month(e,{width:`narrow`,context:`formatting`});case`MMMMM`:return n.month(e,{width:`narrow`,context:`formatting`});case`MMMM`:default:return n.month(e,{width:`wide`,context:`formatting`})||n.month(e,{width:`abbreviated`,context:`formatting`})||n.month(e,{width:`narrow`,context:`formatting`})}}},{key:`validate`,value:function(e,t){return t>=0&&t<=11}},{key:`set`,value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(V)})),gg,_g=o((()=>{I(),R(),A(),M(),P(),B(),H(),Kh(),U(),gg=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,110),z(k(e),`incompatibleTokens`,[`Y`,`R`,`q`,`Q`,`M`,`w`,`I`,`D`,`i`,`e`,`c`,`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t,n){var r=function(e){return e-1};switch(t){case`L`:return qh(Jh(Wh.month,e),r);case`LL`:return qh(Zh(2,e),r);case`Lo`:return qh(n.ordinalNumber(e,{unit:`month`}),r);case`LLL`:return n.month(e,{width:`abbreviated`,context:`standalone`})||n.month(e,{width:`narrow`,context:`standalone`});case`LLLLL`:return n.month(e,{width:`narrow`,context:`standalone`});case`LLLL`:default:return n.month(e,{width:`wide`,context:`standalone`})||n.month(e,{width:`abbreviated`,context:`standalone`})||n.month(e,{width:`narrow`,context:`standalone`})}}},{key:`validate`,value:function(e,t){return t>=0&&t<=11}},{key:`set`,value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(V)}));function vg(e,t,n){w(2,arguments);var r=E(e),i=Zd(t),a=Qf(r,n)-i;return r.setUTCDate(r.getUTCDate()-a*7),r}var yg=o((()=>{Qd(),D(),ep(),T()})),bg,xg=o((()=>{I(),R(),A(),M(),P(),B(),H(),Kh(),U(),yg(),qf(),bg=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,100),z(k(e),`incompatibleTokens`,[`y`,`R`,`u`,`q`,`Q`,`M`,`L`,`I`,`d`,`D`,`i`,`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t,n){switch(t){case`w`:return Jh(Wh.week,e);case`wo`:return n.ordinalNumber(e,{unit:`week`});default:return Zh(t.length,e)}}},{key:`validate`,value:function(e,t){return t>=1&&t<=53}},{key:`set`,value:function(e,t,n,r){return Kf(vg(e,n,r),r)}}]),n}(V)}));function Sg(e,t){w(2,arguments);var n=E(e),r=Zd(t),i=Uf(n)-r;return n.setUTCDate(n.getUTCDate()-i*7),n}var Cg=o((()=>{Qd(),D(),Gf(),T()})),wg,Tg=o((()=>{I(),R(),A(),M(),P(),B(),H(),Kh(),U(),Cg(),Rf(),wg=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,100),z(k(e),`incompatibleTokens`,[`y`,`Y`,`u`,`q`,`Q`,`M`,`L`,`w`,`d`,`D`,`e`,`c`,`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t,n){switch(t){case`I`:return Jh(Wh.week,e);case`Io`:return n.ordinalNumber(e,{unit:`week`});default:return Zh(t.length,e)}}},{key:`validate`,value:function(e,t){return t>=1&&t<=53}},{key:`set`,value:function(e,t,n){return Lf(Sg(e,n))}}]),n}(V)})),Eg,Dg,Og,kg=o((()=>{I(),R(),A(),M(),P(),B(),U(),H(),Kh(),Eg=[31,28,31,30,31,30,31,31,30,31,30,31],Dg=[31,29,31,30,31,30,31,31,30,31,30,31],Og=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,90),z(k(e),`subPriority`,1),z(k(e),`incompatibleTokens`,[`Y`,`R`,`q`,`Q`,`w`,`I`,`D`,`i`,`e`,`c`,`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t,n){switch(t){case`d`:return Jh(Wh.date,e);case`do`:return n.ordinalNumber(e,{unit:`date`});default:return Zh(t.length,e)}}},{key:`validate`,value:function(e,t){var n=tg(e.getUTCFullYear()),r=e.getUTCMonth();return n?t>=1&&t<=Dg[r]:t>=1&&t<=Eg[r]}},{key:`set`,value:function(e,t,n){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e}}]),n}(V)})),Ag,jg=o((()=>{I(),R(),A(),M(),P(),B(),H(),Kh(),U(),Ag=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,90),z(k(e),`subpriority`,1),z(k(e),`incompatibleTokens`,[`Y`,`R`,`q`,`Q`,`M`,`L`,`w`,`I`,`d`,`E`,`i`,`e`,`c`,`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t,n){switch(t){case`D`:case`DD`:return Jh(Wh.dayOfYear,e);case`Do`:return n.ordinalNumber(e,{unit:`date`});default:return Zh(t.length,e)}}},{key:`validate`,value:function(e,t){return tg(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:`set`,value:function(e,t,n){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e}}]),n}(V)}));function Mg(e,t,n){var r;w(2,arguments);var i=xf(),a=Zd(n?.weekStartsOn??(n==null||(r=n.locale)==null?void 0:r.options?.weekStartsOn)??i.weekStartsOn??i.locale?.options?.weekStartsOn??0);if(!(a>=0&&a<=6))throw RangeError(`weekStartsOn must be between 0 and 6 inclusively`);var o=E(e),s=Zd(t),c=o.getUTCDay(),l=((s%7+7)%7<a?7:0)+s-c;return o.setUTCDate(o.getUTCDate()+l),o}var Ng=o((()=>{D(),T(),Qd(),Cf()})),Pg,Fg=o((()=>{I(),R(),A(),M(),P(),B(),H(),Ng(),Pg=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,90),z(k(e),`incompatibleTokens`,[`D`,`i`,`e`,`c`,`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t,n){switch(t){case`E`:case`EE`:case`EEE`:return n.day(e,{width:`abbreviated`,context:`formatting`})||n.day(e,{width:`short`,context:`formatting`})||n.day(e,{width:`narrow`,context:`formatting`});case`EEEEE`:return n.day(e,{width:`narrow`,context:`formatting`});case`EEEEEE`:return n.day(e,{width:`short`,context:`formatting`})||n.day(e,{width:`narrow`,context:`formatting`});case`EEEE`:default:return n.day(e,{width:`wide`,context:`formatting`})||n.day(e,{width:`abbreviated`,context:`formatting`})||n.day(e,{width:`short`,context:`formatting`})||n.day(e,{width:`narrow`,context:`formatting`})}}},{key:`validate`,value:function(e,t){return t>=0&&t<=6}},{key:`set`,value:function(e,t,n,r){return e=Mg(e,n,r),e.setUTCHours(0,0,0,0),e}}]),n}(V)})),Ig,Lg=o((()=>{I(),R(),A(),M(),P(),B(),H(),U(),Ng(),Ig=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,90),z(k(e),`incompatibleTokens`,[`y`,`R`,`u`,`q`,`Q`,`M`,`L`,`I`,`d`,`D`,`E`,`i`,`c`,`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t,n,r){var i=function(e){var t=Math.floor((e-1)/7)*7;return(e+r.weekStartsOn+6)%7+t};switch(t){case`e`:case`ee`:return qh(Zh(t.length,e),i);case`eo`:return qh(n.ordinalNumber(e,{unit:`day`}),i);case`eee`:return n.day(e,{width:`abbreviated`,context:`formatting`})||n.day(e,{width:`short`,context:`formatting`})||n.day(e,{width:`narrow`,context:`formatting`});case`eeeee`:return n.day(e,{width:`narrow`,context:`formatting`});case`eeeeee`:return n.day(e,{width:`short`,context:`formatting`})||n.day(e,{width:`narrow`,context:`formatting`});case`eeee`:default:return n.day(e,{width:`wide`,context:`formatting`})||n.day(e,{width:`abbreviated`,context:`formatting`})||n.day(e,{width:`short`,context:`formatting`})||n.day(e,{width:`narrow`,context:`formatting`})}}},{key:`validate`,value:function(e,t){return t>=0&&t<=6}},{key:`set`,value:function(e,t,n,r){return e=Mg(e,n,r),e.setUTCHours(0,0,0,0),e}}]),n}(V)})),Rg,zg=o((()=>{I(),R(),A(),M(),P(),B(),H(),U(),Ng(),Rg=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,90),z(k(e),`incompatibleTokens`,[`y`,`R`,`u`,`q`,`Q`,`M`,`L`,`I`,`d`,`D`,`E`,`i`,`e`,`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t,n,r){var i=function(e){var t=Math.floor((e-1)/7)*7;return(e+r.weekStartsOn+6)%7+t};switch(t){case`c`:case`cc`:return qh(Zh(t.length,e),i);case`co`:return qh(n.ordinalNumber(e,{unit:`day`}),i);case`ccc`:return n.day(e,{width:`abbreviated`,context:`standalone`})||n.day(e,{width:`short`,context:`standalone`})||n.day(e,{width:`narrow`,context:`standalone`});case`ccccc`:return n.day(e,{width:`narrow`,context:`standalone`});case`cccccc`:return n.day(e,{width:`short`,context:`standalone`})||n.day(e,{width:`narrow`,context:`standalone`});case`cccc`:default:return n.day(e,{width:`wide`,context:`standalone`})||n.day(e,{width:`abbreviated`,context:`standalone`})||n.day(e,{width:`short`,context:`standalone`})||n.day(e,{width:`narrow`,context:`standalone`})}}},{key:`validate`,value:function(e,t){return t>=0&&t<=6}},{key:`set`,value:function(e,t,n,r){return e=Mg(e,n,r),e.setUTCHours(0,0,0,0),e}}]),n}(V)}));function Bg(e,t){w(2,arguments);var n=Zd(t);n%7==0&&(n-=7);var r=1,i=E(e),a=i.getUTCDay(),o=((n%7+7)%7<r?7:0)+n-a;return i.setUTCDate(i.getUTCDate()+o),i}var Vg=o((()=>{D(),T(),Qd()})),Hg,Ug=o((()=>{I(),R(),A(),M(),P(),B(),H(),U(),Vg(),Hg=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,90),z(k(e),`incompatibleTokens`,[`y`,`Y`,`u`,`q`,`Q`,`M`,`L`,`w`,`d`,`D`,`E`,`e`,`c`,`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t,n){var r=function(e){return e===0?7:e};switch(t){case`i`:case`ii`:return Zh(t.length,e);case`io`:return n.ordinalNumber(e,{unit:`day`});case`iii`:return qh(n.day(e,{width:`abbreviated`,context:`formatting`})||n.day(e,{width:`short`,context:`formatting`})||n.day(e,{width:`narrow`,context:`formatting`}),r);case`iiiii`:return qh(n.day(e,{width:`narrow`,context:`formatting`}),r);case`iiiiii`:return qh(n.day(e,{width:`short`,context:`formatting`})||n.day(e,{width:`narrow`,context:`formatting`}),r);case`iiii`:default:return qh(n.day(e,{width:`wide`,context:`formatting`})||n.day(e,{width:`abbreviated`,context:`formatting`})||n.day(e,{width:`short`,context:`formatting`})||n.day(e,{width:`narrow`,context:`formatting`}),r)}}},{key:`validate`,value:function(e,t){return t>=1&&t<=7}},{key:`set`,value:function(e,t,n){return e=Bg(e,n),e.setUTCHours(0,0,0,0),e}}]),n}(V)})),Wg,Gg=o((()=>{I(),R(),A(),M(),P(),B(),H(),U(),Wg=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,80),z(k(e),`incompatibleTokens`,[`b`,`B`,`H`,`k`,`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t,n){switch(t){case`a`:case`aa`:case`aaa`:return n.dayPeriod(e,{width:`abbreviated`,context:`formatting`})||n.dayPeriod(e,{width:`narrow`,context:`formatting`});case`aaaaa`:return n.dayPeriod(e,{width:`narrow`,context:`formatting`});case`aaaa`:default:return n.dayPeriod(e,{width:`wide`,context:`formatting`})||n.dayPeriod(e,{width:`abbreviated`,context:`formatting`})||n.dayPeriod(e,{width:`narrow`,context:`formatting`})}}},{key:`set`,value:function(e,t,n){return e.setUTCHours($h(n),0,0,0),e}}]),n}(V)})),Kg,qg=o((()=>{I(),R(),A(),M(),P(),B(),H(),U(),Kg=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,80),z(k(e),`incompatibleTokens`,[`a`,`B`,`H`,`k`,`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t,n){switch(t){case`b`:case`bb`:case`bbb`:return n.dayPeriod(e,{width:`abbreviated`,context:`formatting`})||n.dayPeriod(e,{width:`narrow`,context:`formatting`});case`bbbbb`:return n.dayPeriod(e,{width:`narrow`,context:`formatting`});case`bbbb`:default:return n.dayPeriod(e,{width:`wide`,context:`formatting`})||n.dayPeriod(e,{width:`abbreviated`,context:`formatting`})||n.dayPeriod(e,{width:`narrow`,context:`formatting`})}}},{key:`set`,value:function(e,t,n){return e.setUTCHours($h(n),0,0,0),e}}]),n}(V)})),Jg,Yg=o((()=>{I(),R(),A(),M(),P(),B(),H(),U(),Jg=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,80),z(k(e),`incompatibleTokens`,[`a`,`b`,`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t,n){switch(t){case`B`:case`BB`:case`BBB`:return n.dayPeriod(e,{width:`abbreviated`,context:`formatting`})||n.dayPeriod(e,{width:`narrow`,context:`formatting`});case`BBBBB`:return n.dayPeriod(e,{width:`narrow`,context:`formatting`});case`BBBB`:default:return n.dayPeriod(e,{width:`wide`,context:`formatting`})||n.dayPeriod(e,{width:`abbreviated`,context:`formatting`})||n.dayPeriod(e,{width:`narrow`,context:`formatting`})}}},{key:`set`,value:function(e,t,n){return e.setUTCHours($h(n),0,0,0),e}}]),n}(V)})),Xg,Zg=o((()=>{I(),R(),A(),M(),P(),B(),H(),Kh(),U(),Xg=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,70),z(k(e),`incompatibleTokens`,[`H`,`K`,`k`,`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t,n){switch(t){case`h`:return Jh(Wh.hour12h,e);case`ho`:return n.ordinalNumber(e,{unit:`hour`});default:return Zh(t.length,e)}}},{key:`validate`,value:function(e,t){return t>=1&&t<=12}},{key:`set`,value:function(e,t,n){var r=e.getUTCHours()>=12;return r&&n<12?e.setUTCHours(n+12,0,0,0):!r&&n===12?e.setUTCHours(0,0,0,0):e.setUTCHours(n,0,0,0),e}}]),n}(V)})),Qg,$g=o((()=>{I(),R(),A(),M(),P(),B(),H(),Kh(),U(),Qg=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,70),z(k(e),`incompatibleTokens`,[`a`,`b`,`h`,`K`,`k`,`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t,n){switch(t){case`H`:return Jh(Wh.hour23h,e);case`Ho`:return n.ordinalNumber(e,{unit:`hour`});default:return Zh(t.length,e)}}},{key:`validate`,value:function(e,t){return t>=0&&t<=23}},{key:`set`,value:function(e,t,n){return e.setUTCHours(n,0,0,0),e}}]),n}(V)})),e_,t_=o((()=>{I(),R(),A(),M(),P(),B(),H(),Kh(),U(),e_=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,70),z(k(e),`incompatibleTokens`,[`h`,`H`,`k`,`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t,n){switch(t){case`K`:return Jh(Wh.hour11h,e);case`Ko`:return n.ordinalNumber(e,{unit:`hour`});default:return Zh(t.length,e)}}},{key:`validate`,value:function(e,t){return t>=0&&t<=11}},{key:`set`,value:function(e,t,n){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e}}]),n}(V)})),n_,r_=o((()=>{I(),R(),A(),M(),P(),B(),H(),Kh(),U(),n_=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,70),z(k(e),`incompatibleTokens`,[`a`,`b`,`h`,`H`,`K`,`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t,n){switch(t){case`k`:return Jh(Wh.hour24h,e);case`ko`:return n.ordinalNumber(e,{unit:`hour`});default:return Zh(t.length,e)}}},{key:`validate`,value:function(e,t){return t>=1&&t<=24}},{key:`set`,value:function(e,t,n){var r=n<=24?n%24:n;return e.setUTCHours(r,0,0,0),e}}]),n}(V)})),i_,a_=o((()=>{I(),R(),A(),M(),P(),B(),H(),Kh(),U(),i_=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,60),z(k(e),`incompatibleTokens`,[`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t,n){switch(t){case`m`:return Jh(Wh.minute,e);case`mo`:return n.ordinalNumber(e,{unit:`minute`});default:return Zh(t.length,e)}}},{key:`validate`,value:function(e,t){return t>=0&&t<=59}},{key:`set`,value:function(e,t,n){return e.setUTCMinutes(n,0,0),e}}]),n}(V)})),o_,s_=o((()=>{I(),R(),A(),M(),P(),B(),H(),Kh(),U(),o_=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,50),z(k(e),`incompatibleTokens`,[`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t,n){switch(t){case`s`:return Jh(Wh.second,e);case`so`:return n.ordinalNumber(e,{unit:`second`});default:return Zh(t.length,e)}}},{key:`validate`,value:function(e,t){return t>=0&&t<=59}},{key:`set`,value:function(e,t,n){return e.setUTCSeconds(n,0),e}}]),n}(V)})),c_,l_=o((()=>{I(),R(),A(),M(),P(),B(),H(),U(),c_=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,30),z(k(e),`incompatibleTokens`,[`t`,`T`]),e}return L(n,[{key:`parse`,value:function(e,t){return qh(Zh(t.length,e),function(e){return Math.floor(e*10**(-t.length+3))})}},{key:`set`,value:function(e,t,n){return e.setUTCMilliseconds(n),e}}]),n}(V)})),u_,d_=o((()=>{I(),R(),A(),M(),P(),B(),H(),Kh(),U(),u_=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,10),z(k(e),`incompatibleTokens`,[`t`,`T`,`x`]),e}return L(n,[{key:`parse`,value:function(e,t){switch(t){case`X`:return Yh(Gh.basicOptionalMinutes,e);case`XX`:return Yh(Gh.basic,e);case`XXXX`:return Yh(Gh.basicOptionalSeconds,e);case`XXXXX`:return Yh(Gh.extendedOptionalSeconds,e);case`XXX`:default:return Yh(Gh.extended,e)}}},{key:`set`,value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(V)})),f_,p_=o((()=>{I(),R(),A(),M(),P(),B(),H(),Kh(),U(),f_=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,10),z(k(e),`incompatibleTokens`,[`t`,`T`,`X`]),e}return L(n,[{key:`parse`,value:function(e,t){switch(t){case`x`:return Yh(Gh.basicOptionalMinutes,e);case`xx`:return Yh(Gh.basic,e);case`xxxx`:return Yh(Gh.basicOptionalSeconds,e);case`xxxxx`:return Yh(Gh.extendedOptionalSeconds,e);case`xxx`:default:return Yh(Gh.extended,e)}}},{key:`set`,value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(V)})),m_,h_=o((()=>{I(),R(),A(),M(),P(),B(),H(),U(),m_=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,40),z(k(e),`incompatibleTokens`,`*`),e}return L(n,[{key:`parse`,value:function(e){return Xh(e)}},{key:`set`,value:function(e,t,n){return[new Date(n*1e3),{timestampIsSet:!0}]}}]),n}(V)})),g_,__=o((()=>{I(),R(),A(),M(),P(),B(),H(),U(),g_=function(e){j(n,e);var t=N(n);function n(){var e;F(this,n);var r=[...arguments];return e=t.call.apply(t,[this].concat(r)),z(k(e),`priority`,20),z(k(e),`incompatibleTokens`,`*`),e}return L(n,[{key:`parse`,value:function(e){return Xh(e)}},{key:`set`,value:function(e,t,n){return[new Date(n),{timestampIsSet:!0}]}}]),n}(V)})),v_,y_=o((()=>{Ph(),rg(),ag(),sg(),lg(),dg(),pg(),hg(),_g(),xg(),Tg(),kg(),jg(),Fg(),Lg(),zg(),Ug(),Gg(),qg(),Yg(),Zg(),$g(),t_(),r_(),a_(),s_(),l_(),d_(),p_(),h_(),__(),v_={G:new Nh,y:new ng,Y:new ig,R:new og,u:new cg,Q:new ug,q:new fg,M:new mg,L:new gg,w:new bg,I:new wg,d:new Og,D:new Ag,E:new Pg,e:new Ig,c:new Rg,i:new Hg,a:new Wg,b:new Kg,B:new Jg,h:new Xg,H:new Qg,K:new e_,k:new n_,m:new i_,s:new o_,S:new c_,X:new u_,x:new f_,t:new m_,T:new g_}}));function b_(e,t,n,r){var i,a;w(3,arguments);var o=String(e),s=String(t),c=xf(),l=r?.locale??c.locale??Sm;if(!l.match)throw RangeError(`locale must contain match property`);var u=Zd(r?.firstWeekContainsDate??(r==null||(i=r.locale)==null?void 0:i.options?.firstWeekContainsDate)??c.firstWeekContainsDate??c.locale?.options?.firstWeekContainsDate??1);if(!(u>=1&&u<=7))throw RangeError(`firstWeekContainsDate must be between 1 and 7 inclusively`);var d=Zd(r?.weekStartsOn??(r==null||(a=r.locale)==null?void 0:a.options?.weekStartsOn)??c.weekStartsOn??c.locale?.options?.weekStartsOn??0);if(!(d>=0&&d<=6))throw RangeError(`weekStartsOn must be between 0 and 6 inclusively`);if(s===``)return o===``?E(n):new Date(NaN);var f={firstWeekContainsDate:u,weekStartsOn:d,locale:l},p=[new jh],m=s.match(C_).map(function(e){var t=e[0];if(t in gp){var n=gp[t];return n(e,l.formatLong)}return e}).join(``).match(S_),ee=[],te=dh(m),ne;try{var re=function(){var t=ne.value;!(r!=null&&r.useAdditionalWeekYearTokens)&&yp(t)&&bp(t,s,e),!(r!=null&&r.useAdditionalDayOfYearTokens)&&vp(t)&&bp(t,s,e);var n=t[0],i=v_[n];if(i){var a=i.incompatibleTokens;if(Array.isArray(a)){var c=ee.find(function(e){return a.includes(e.token)||e.token===n});if(c)throw RangeError(`The format string mustn't contain \`${c.fullToken}\` and \`${t}\` at the same time`)}else if(i.incompatibleTokens===`*`&&ee.length>0)throw RangeError(`The format string mustn't contain \`${t}\` and any other token at the same time`);ee.push({token:n,fullToken:t});var u=i.run(o,t,l.match,f);if(!u)return{v:new Date(NaN)};p.push(u.setter),o=u.rest}else{if(n.match(D_))throw RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if(t===`''`?t=`'`:n===`'`&&(t=x_(t)),o.indexOf(t)===0)o=o.slice(t.length);else return{v:new Date(NaN)}}};for(te.s();!(ne=te.n()).done;){var ie=re();if($d(ie)===`object`)return ie.v}}catch(e){te.e(e)}finally{te.f()}if(o.length>0&&E_.test(o))return new Date(NaN);var ae=p.map(function(e){return e.priority}).sort(function(e,t){return t-e}).filter(function(e,t,n){return n.indexOf(e)===t}).map(function(e){return p.filter(function(t){return t.priority===e}).sort(function(e,t){return t.subPriority-e.subPriority})}).map(function(e){return e[0]}),oe=E(n);if(isNaN(oe.getTime()))return new Date(NaN);var se=Mf(oe,cf(oe)),ce={},le=dh(ae),ue;try{for(le.s();!(ue=le.n()).done;){var de=ue.value;if(!de.validate(se,f))return new Date(NaN);var fe=de.set(se,ce,f);Array.isArray(fe)?(se=fe[0],ph(ce,fe[1])):se=fe}}catch(e){le.e(e)}finally{le.f()}return se}function x_(e){return e.match(w_)[1].replace(T_,`'`)}var S_,C_,w_,T_,E_,D_,O_=o((()=>{ef(),fh(),Cm(),Nf(),D(),mh(),_p(),lf(),Cp(),Qd(),T(),Mh(),y_(),Cf(),S_=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,C_=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,w_=/^'([^]*?)'?$/,T_=/''/g,E_=/\S/,D_=/[a-zA-Z]/}));function k_(e){w(1,arguments);var t=E(e);return t.setDate(1),t.setHours(0,0,0,0),t}var A_=o((()=>{D(),T()})),j_=o((()=>{nf(),af(),sf(),mf(),gf(),vf(),bf(),Tf(),jm(),Nm(),Fm(),Wm(),Km(),Jm(),Xm(),eh(),nh(),ih(),oh(),O_(),df(),A_(),Lm(),app.$dateFns={addDays:tf,addMonths:rf,addWeeks:of,differenceInCalendarDays:ff,subDays:hf,endOfDay:_f,endOfMonth:yf,endOfWeek:wf,format:wm,getDate:Mm,getMonth:Pm,getWeek:Hm,getYear:Gm,isSameDay:qm,isSameMonth:Ym,isThisYear:$m,isToday:th,isTomorrow:rh,isYesterday:ah,parse:b_,startOfDay:uf,startOfMonth:k_,startOfWeek:Im}})),M_,N_=o((()=>{({$utils:M_}=app),M_.backoff=async(e,{delays:t=[1e3,5e3,3e4,6e4],onBackoff:n=()=>{}}={})=>{let r;try{return await e()}catch(e){r=e}for(let i of t)try{if(n({delay:i,lastError:r}))throw Error(`backoff-aborted`);return await M_.sleep(i),await e()}catch(e){if(e.message===`backoff-aborted`)throw r;r=e}throw r}})),P_,F_=o((()=>{({$utils:P_}=app),P_.calcEngagement=(e,t)=>(e||0)+(t||0)*10}));function I_(e,t,n,r){if(r&&(e=r(e)),!e||typeof e!=`object`)return e;let i=Array.isArray(e)?[]:{},a;for(let o in e)e.hasOwnProperty&&!e.hasOwnProperty(o)||(a=e[o],t.has(a)?n.push({clone:i,key:o,value:a}):(t.set(a,!0),i[o]=I_(a,t,n,r),t.set(a,i[o])));return i}var L_,R_=o((()=>{({$utils:L_}=app),L_.cloneDeep=(e,t=null,n=!1)=>{if(!t&&globalThis.structuredClone&&!n&&!Array.isArray(e))return structuredClone(e);let r=new Map,i=[],a=I_(e,r,i,t);return i.forEach(({clone:e,key:t,value:n})=>{e[t]=r.get(n)}),a}})),z_,B_,V_=o((()=>{({$utils:z_}=app),B_=new Map,z_.createAlarm=async(e,{delay:t,period:n,when:r,immediately:i=!1,recreate:a=!1},o)=>{let s={};t&&typeof t==`number`&&(s.delayInMinutes=Math.max(.5,t/z_.time.MINUTE)),n&&typeof n==`number`&&(s.periodInMinutes=Math.max(.5,n/z_.time.MINUTE)),r&&typeof r==`number`&&(s.when=r);let c=B_.get(e);e&&(B_.delete(e),chrome.alarms.onAlarm.removeListener(c));let l=t=>{t.name===e&&(s.periodInMinutes||(B_.delete(e),chrome.alarms.onAlarm.removeListener(l)),o())};if(B_.set(e,l),chrome.alarms.onAlarm.addListener(l),!a){let t=await chrome.alarms.get(e);if(t&&t.periodInMinutes===s.periodInMinutes)return}if(chrome.alarms.create(e,s),i)return o()}})),H_,U_=o((()=>{({$utils:H_}=app),H_.createEmitter=()=>{let e=[];return Object.assign(t,{handle:n,clear:r,off:i,isEmpty:a});function t(...t){typeof t[0]==`function`?e.push(t[0]):e.forEach(e=>e(...t))}function n(e){if(typeof e!=`function`){console.error(`function is expected`);return}t(e)}function r(){e.length=0}function i(t){let n=e.indexOf(t);n!==-1&&e.splice(n,1)}function a(){return e.length===0}}})),W_,G_=o((()=>{({$utils:W_}=app),W_.createPromise=()=>{let e=null,t=null,n=new Promise((n,r)=>{e=n,t=r});return n.__defineGetter__(`resolve`,()=>e),n.__defineGetter__(`reject`,()=>t),n}}));function K_(e,t){return q_(t)||(t=JSON.stringify(t)),`${encodeURIComponent(e)}=${encodeURIComponent(t)}`}function q_(e){return typeof e==`string`||typeof e==`number`||typeof e==`boolean`}var J_,Y_=o((()=>{({$utils:J_}=app),J_.createQueryString=e=>Object.keys(e).map(t=>{let n=e[t];return q_(n)?K_(t,n):Array.isArray(n)?n.map(e=>K_(t,e)).join(`&`):null}).filter(Boolean).join(`&`).replace(/%5B/g,`[`).replace(/%5D/g,`]`)})),X_,Z_=o((()=>{({$utils:X_}=app),X_.createUrl=(e,t={})=>{let n=X_.createQueryString(t);return n?`${e}?${n}`:e}}));function Q_(e){return!e||e!==Object(e)}var $_,ev=o((()=>{({$utils:$_}=app),$_.deepEqual=function(e,t){if(e===t)return!0;if(Q_(e))return Q_(t)?e===t:!1;if(Q_(t)||Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(!(n in t)||!$_.deepEqual(e[n],t[n]))return!1;return!0}})),tv,nv=o((()=>{({$utils:tv}=app),tv.fetchWithTemplate=async(e,t)=>{if(!tv.is.object(e))throw Error(`Invalid config, expected to be an object`);if(!tv.is.string(e.url))throw Error(`Invalid config.url, expected to be a string`);t={app,...t};let n=tv.interpolate(e.url,t);if(e.query){let r=tv.interpolate(e.query,t);Object.keys(r).forEach(e=>{tv.is.object(r[e])&&(r[e]=JSON.stringify(r[e]))}),n=tv.createUrl(n,r)}let r=tv.interpolate(e.init,t);if(r?.body){let t=e.bodyType;if(t!==`string`)if(t===`form`){let e=r.body;Object.entries(e).filter(([e,t])=>tv.is.objectOrArray(t)).forEach(([t,n])=>{e[t]=JSON.stringify(n)}),r.body=new URLSearchParams(e).toString()}else r.body=JSON.stringify(r.body)}let i=e.throttle;if(i){let e=Date.now()-(i.lastRequestAt??0),t=tv.clamp(i.min??100,i.delay??100,i.max??6e4);t-e>0&&await tv.sleep(t-e)}let a=e.backoff?await tv.backoff(()=>fetch(n,r),{...e.backoff,onBackoff:({delay:e,lastError:t})=>{tv.log(`request auto-backoff to ${e} due to:`,t),i&&(i.delay=(i.delay??i.min??100)*2)}}):await fetch(n,r);if(i&&(i.lastRequestAt=Date.now()),(e.throwIfNok??!0)&&(!a.ok||a.redirected)){let e=Error(a.ok?`Redirected`:a.status);throw e.response=a,e}let o=e.responseFormat;if(!o)return a;if(o===`json`){a=await a.json(),t.response=a;let n=e.failOn;if(n&&tv.interpolate(n.condition,t)){let e=Error();throw e.code=tv.interpolate(n.error?.code||``,t),e.message=tv.interpolate(n.error?.message||``,t),e}return e.responseMapping&&(a=tv.interpolate(e.responseMapping,t)),a}if(o===`text`)return await a.text();throw Error(`Invalid config.response format: ${o}`)}})),rv,iv=o((()=>{({$utils:rv}=app),rv.file={isCsv(e){return e.type===`text/csv`},isImage(e){return e.type.startsWith(`image/`)},isVideo(e){return e.type.startsWith(`video/`)},getExt(e){let t=e.type.split(`/`)[1];return t===`jpeg`?`jpg`:t}}})),av,ov,sv,cv=o((()=>{({$utils:av}=app),av.getHashtagRegex=({hashOptional:e=!1}={})=>(ov||(ov=/()([#\uFF03])((?:[A-Za-z------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------0-9--------------------_]|(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2694\u2696\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD79\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED0\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3]|\uD83E[\uDD10-\uDD18\uDD80-\uDD84\uDDC0]|(?:0\u20E3|1\u20E3|2\u20E3|3\u20E3|4\u20E3|5\u20E3|6\u20E3|7\u20E3|8\u20E3|9\u20E3|#\u20E3|\\*\u20E3|\uD83C(?:\uDDE6\uD83C(?:\uDDEB|\uDDFD|\uDDF1|\uDDF8|\uDDE9|\uDDF4|\uDDEE|\uDDF6|\uDDEC|\uDDF7|\uDDF2|\uDDFC|\uDDE8|\uDDFA|\uDDF9|\uDDFF|\uDDEA)|\uDDE7\uD83C(?:\uDDF8|\uDDED|\uDDE9|\uDDE7|\uDDFE|\uDDEA|\uDDFF|\uDDEF|\uDDF2|\uDDF9|\uDDF4|\uDDE6|\uDDFC|\uDDFB|\uDDF7|\uDDF3|\uDDEC|\uDDEB|\uDDEE|\uDDF6|\uDDF1)|\uDDE8\uD83C(?:\uDDF2|\uDDE6|\uDDFB|\uDDEB|\uDDF1|\uDDF3|\uDDFD|\uDDF5|\uDDE8|\uDDF4|\uDDEC|\uDDE9|\uDDF0|\uDDF7|\uDDEE|\uDDFA|\uDDFC|\uDDFE|\uDDFF|\uDDED)|\uDDE9\uD83C(?:\uDDFF|\uDDF0|\uDDEC|\uDDEF|\uDDF2|\uDDF4|\uDDEA)|\uDDEA\uD83C(?:\uDDE6|\uDDE8|\uDDEC|\uDDF7|\uDDEA|\uDDF9|\uDDFA|\uDDF8|\uDDED)|\uDDEB\uD83C(?:\uDDF0|\uDDF4|\uDDEF|\uDDEE|\uDDF7|\uDDF2)|\uDDEC\uD83C(?:\uDDF6|\uDDEB|\uDDE6|\uDDF2|\uDDEA|\uDDED|\uDDEE|\uDDF7|\uDDF1|\uDDE9|\uDDF5|\uDDFA|\uDDF9|\uDDEC|\uDDF3|\uDDFC|\uDDFE|\uDDF8|\uDDE7)|\uDDED\uD83C(?:\uDDF7|\uDDF9|\uDDF2|\uDDF3|\uDDF0|\uDDFA)|\uDDEE\uD83C(?:\uDDF4|\uDDE8|\uDDF8|\uDDF3|\uDDE9|\uDDF7|\uDDF6|\uDDEA|\uDDF2|\uDDF1|\uDDF9)|\uDDEF\uD83C(?:\uDDF2|\uDDF5|\uDDEA|\uDDF4)|\uDDF0\uD83C(?:\uDDED|\uDDFE|\uDDF2|\uDDFF|\uDDEA|\uDDEE|\uDDFC|\uDDEC|\uDDF5|\uDDF7|\uDDF3)|\uDDF1\uD83C(?:\uDDE6|\uDDFB|\uDDE7|\uDDF8|\uDDF7|\uDDFE|\uDDEE|\uDDF9|\uDDFA|\uDDF0|\uDDE8)|\uDDF2\uD83C(?:\uDDF4|\uDDF0|\uDDEC|\uDDFC|\uDDFE|\uDDFB|\uDDF1|\uDDF9|\uDDED|\uDDF6|\uDDF7|\uDDFA|\uDDFD|\uDDE9|\uDDE8|\uDDF3|\uDDEA|\uDDF8|\uDDE6|\uDDFF|\uDDF2|\uDDF5|\uDDEB)|\uDDF3\uD83C(?:\uDDE6|\uDDF7|\uDDF5|\uDDF1|\uDDE8|\uDDFF|\uDDEE|\uDDEA|\uDDEC|\uDDFA|\uDDEB|\uDDF4)|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C(?:\uDDEB|\uDDF0|\uDDFC|\uDDF8|\uDDE6|\uDDEC|\uDDFE|\uDDEA|\uDDED|\uDDF3|\uDDF1|\uDDF9|\uDDF7|\uDDF2)|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C(?:\uDDEA|\uDDF4|\uDDFA|\uDDFC|\uDDF8)|\uDDF8\uD83C(?:\uDDFB|\uDDF2|\uDDF9|\uDDE6|\uDDF3|\uDDE8|\uDDF1|\uDDEC|\uDDFD|\uDDF0|\uDDEE|\uDDE7|\uDDF4|\uDDF8|\uDDED|\uDDE9|\uDDF7|\uDDEF|\uDDFF|\uDDEA|\uDDFE)|\uDDF9\uD83C(?:\uDDE9|\uDDEB|\uDDFC|\uDDEF|\uDDFF|\uDDED|\uDDF1|\uDDEC|\uDDF0|\uDDF4|\uDDF9|\uDDE6|\uDDF3|\uDDF7|\uDDF2|\uDDE8|\uDDFB)|\uDDFA\uD83C(?:\uDDEC|\uDDE6|\uDDF8|\uDDFE|\uDDF2|\uDDFF)|\uDDFB\uD83C(?:\uDDEC|\uDDE8|\uDDEE|\uDDFA|\uDDE6|\uDDEA|\uDDF3)|\uDDFC\uD83C(?:\uDDF8|\uDDEB)|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C(?:\uDDF9|\uDDEA)|\uDDFF\uD83C(?:\uDDE6|\uDDF2|\uDDFC))))[\uFE00-\uFE0F\u200D]*)+)/gi,sv=new RegExp(ov.toString().replace(`/`,``).replace(`/gi`,``).replace(`[#\\uFF03]`,`[#\\uFF03]?`),`gi`)),e?sv:ov)})),lv,uv=o((()=>{({$utils:lv}=app),lv.getter=(e,t,n)=>{Reflect.defineProperty(e,t,{get:n})}})),dv,fv,pv,mv=o((()=>{({$utils:dv}=app),fv=/\{\{([^{}]*)\}\}/gu,dv.interpolate=(e,t)=>e&&(dv.is.string(e)?pv(e,t):dv.cloneDeep(e,e=>dv.is.string(e)?pv(e,t):e)),pv=(e,t)=>{let n=e.match(/^\{\{([^{}]*)\}\}$/u);return n?dv.get(t,n[1]):e.replace(fv,(e,n)=>dv.get(t,n))}})),hv,gv=o((()=>{({$utils:hv}=app),hv.media={async getDimensions(e){if(hv.file.isImage(e)){let{width:t,height:n}=await hv.loadImage(e);return{width:t,height:n}}if(hv.file.isVideo(e)){let{width:t,height:n}=await hv.loadVideoMetadata(e);return{width:t,height:n}}throw Error(`Unsupported media type`)},isImage(e){return hv.file.isImage(e)},isVideo(e){return hv.file.isVideo(e)}}})),_v,vv=o((()=>{({$utils:_v}=app),_v.pickRandom=(...e)=>e[Math.floor(Math.random()*e.length)]})),yv,bv=o((()=>{({$utils:yv}=app),yv.random=function({from:e=0,to:t=1,gaussian:n=!1,round:r=!1}={}){if(n){let n=0;for(let e=0;e<6;e+=1)n+=Math.random();let i=e+(t-e)*n/6;return r?Math.round(i):i}else return r?e+Math.floor(Math.random()*(t-e+1)):e+Math.random()*(t-e)}})),xv,Sv=o((()=>{({$utils:xv}=app),xv.removeFromArray=(e,t)=>{let n;n=typeof t==`function`?e.findIndex(t):e.indexOf(t),n!==-1&&e.splice(n,1)}})),Cv,wv=o((()=>{({$utils:Cv}=app),Cv.safe=async(e,t=void 0)=>{try{return[Cv.is.function(e)?await e():await e,null]}catch(e){return Cv.is.defined(t)?[t,null]:[null,Cv.is.error(e)?e:Error(String(e))]}},Cv.safeSync=(e,t=void 0)=>{try{return[e(),null]}catch(e){return Cv.is.defined(t)?[t,null]:[null,Cv.is.error(e)?e:Error(String(e))]}}}));function Tv(){let e=0;for(let t=0;t<6;t+=1)e+=Math.random();return e/6}function Ev(e,t){return Math.round(e+Tv()*(t-e))}var Dv,Ov=o((()=>{({$utils:Dv}=app),Dv.sleep=async e=>{if(e){if(typeof e==`number`&&Number.isFinite(e)){let t=e;return await new Promise(e=>setTimeout(e,t))}if(e&&typeof e==`object`&&e.constructor===Object){let{wakeIf:t,wakeCheckInterval:n=100}=e,{min:r,max:i}=e.longBreak&&Math.random()<1-.5**(1/e.longBreak.every)?{min:0,max:0,...e.longBreak}:{min:0,max:0,...e},a=r+Ev(0,i-r);if(a===0)return;if(!t&&typeof t!=`function`)return await new Promise(e=>setTimeout(e,a));let o=Date.now();await new Promise(e=>{let r=()=>{if(t())return e();let i=Date.now()-o;if(i>=a)return e();setTimeout(r,Math.min(n,a-i))};r()})}else throw Error(`unexpected sleep function argument: number or object expected, got`,e)}}})),kv,Av=o((()=>{({$utils:kv}=app),kv.unique=(e,t,n)=>n.indexOf(e)===t})),jv,Mv,Nv=o((()=>{({$utils:jv}=app),jv.walkObject=async(e,t,n={})=>{if(n={skipRoot:!1,onUndefined:`ignore`,...n},!n.skipRoot){let r=await t(e,null,``);if(r===void 0){if(n.onUndefined===`apply`||n.onUndefined===`delete`)return}else e=r}return await Mv(e,t,null,``,n),e},Mv=async(e,t,n,r,i)=>{if(jv.is.array(e))for(let n=0;n<e.length;n++){let a=r?`${r}.${n}`:`${n}`,o=await t(e[n],e,a);o===void 0?i.onUndefined===`delete`?(e.splice(n,1),n--):i.onUndefined===`apply`?e[n]=void 0:await Mv(e[n],t,e,a,i):(e[n]=o,await Mv(e[n],t,e,a,i))}else if(jv.is.object(e))for(let n in e){let a=r?`${r}.${n}`:`${n}`,o=await t(e[n],e,a);o===void 0?i.onUndefined===`delete`?delete e[n]:i.onUndefined===`apply`?e[n]=void 0:await Mv(e[n],t,e,a,i):(e[n]=o,await Mv(e[n],t,e,a,i))}}})),Pv,Fv,Iv=o((()=>{({$network:Pv,$env:Fv}=app),Pv.api={send(e,{params:t,query:n,body:r,method:i,headers:a,token:o,noThrow:s}={}){if(!e)throw Error(`url parameter is mandatory`);i||=r?`POST`:`GET`,r=JSON.stringify(r),e=this._inject(e,t),n=this._encode(n),n&&(e=`${e}?${n}`),Fv.options.apiUrl&&!e.startsWith(`http`)&&(e=`${Fv.options.apiUrl}${e}`),i===`POST`&&(a={...a,"content-type":`application/json`}),o&&(a={...a,Authorization:`Bearer ${o}`});let c={body:r,method:i,headers:a};return Promise.resolve().then(()=>fetch(e,c)).then(t=>{if(!t.ok)throw Error(`Request to ${e} failed with status: ${t.status}`);return t}).then(this._toJson).catch(e=>{if(!s)throw e})},_inject(e,t){if(!t)return e;for(let n in t){let r=t[n];e=e.replace(`:${n}`,encodeURIComponent(r))}return e},_encode(e){return e?Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join(`&`):``},_toJson(e){return e.json()}}})),Lv,Rv,zv,Bv=o((()=>{({$store:Lv}=app),Rv={},zv=e=>{Object.keys(e).forEach(e=>Rv[e]=`*`)},Object.defineProperties(Rv,{init:{get:()=>zv},transaction:{get:()=>Lv.transaction}}),app.$s=new Proxy(Rv,{get(e,t){return t===`init`||t===`transaction`?Rv[t]:Lv.state[t]},set(e,t,n){return Lv.state[t]=n,Rv[t]=`*`,!0},deleteProperty(e,t){return delete Lv.state[t],delete Rv[t],!0},defineProperty(e,t,n){return Object.defineProperty(Lv.state,t,n),Rv[t]=`*`,!0}})})),Vv,Hv,Uv=o((()=>{({$store:Vv,$env:Hv}=app),Vv.controller={async init(){await Vv.stateController.init(),Hv.is.bg&&await Vv.versionController.init()}}})),Wv,Gv,Kv,qv,Jv,Yv,Xv,Zv=o((()=>{({$store:Wv,$utils:Gv,$mobx:Kv,$idb:qv,$bus:Jv,$env:Yv,$s:Xv}=app),Wv.stateController={async init(){this._debug=!1,this._idbKey=`state`,this._parent_=Symbol(`parent`),this._access_=Symbol(`access`),this._txActions=[],this._txRunning=!1,this._applyingActions=!1,this._persistSaving=!1,this._persistPending=!1,this._persistTimeout=null,this._state=await this._initState(),this._tabState=null,Kv.configure({enforceActions:`never`}),Gv.getter(this._state,`tab`,()=>this._getTabState()),Jv.on(`store.actions`,this._applyActions,this),Yv.is.bg&&Jv.on(`store.getBgState`,()=>Kv.toJS(this._state)),Wv.state=this._state,Wv.transaction=this._transaction.bind(this),Wv.reaction=(e,t,n=!0)=>Kv.reaction(()=>e(Xv),t,{fireImmediately:n}),Xv.init(this._state),this._persistWithDebounce()},_getTabState(){if(this._tabState)return this._tabState;let e=Wv.tabState();return this._tabState=this._localProxify(e,this._state,`tab`),this._tabState},async _initState(){let e;if(Yv.is.pp)e=await Jv.send(`store.getBgState`);else if(Yv.is.bg){let t=await qv.get(this._idbKey);e=t?this._deuglify(t):{...Wv.userState(),...Wv.sharedState()}}return this._proxify(e)},_transaction(e){if(this._txRunning){e(this._state);return}this._txActions=[],this._txRunning=!0,Kv.runInAction(()=>e(this._state)),this._txRunning=!1,this._txActions.length!==0&&(this._broadcastActions(this._txActions),this._txActions=[],this._persistWithDebounce())},_localProxify(e,t=null,n=null){if(Kv.isObservable(e))return e;if(Gv.is.object(e)){let r=Kv.observable.object({},{},{deep:!1});for(let i in this._setupLocalProxy(r,t,n),e)r[i]=this._localProxify(e[i],r,i);return r}if(Gv.is.array(e)){let r=Kv.observable.array([],{deep:!1});this._setupLocalProxy(r,t,n);for(let t=0;t<e.length;t++)r[t]=this._localProxify(e[t],r,t);return r}return e},_setupLocalProxy(e,t=null,n=null){Object.defineProperty(e,`$`,{get:()=>Kv.toJS(e)}),Object.defineProperty(e,this._parent_,{get:()=>t,set:e=>t=e}),Object.defineProperty(e,this._access_,{get:()=>n,set:e=>n=e}),this._applyAdapters(e,Wv.adapter||{}),Kv.intercept(e,e=>{let t=e;return`newValue`in t?t.newValue=this._localProxify(t.newValue,t.object,t.name):`added`in t&&(t.added=t.added.map((e,n)=>this._localProxify(e,t.object,t.index+n))),t})},_proxify(e,t=null,n=null){if(!Gv.is.objectOrArray(e))return e;let r=Kv.observable(e);return this._intercept(r,t,n),r},_intercept(e,t=null,n=null){if(e&&Kv.isObservable(e)){if(e[this._parent_]){e[this._parent_]=t,e[this._access_]=n,this._applyAdapters(e,Wv.adapter||{});return}if(Object.defineProperty(e,`$`,{get:()=>Kv.toJS(e)}),Object.defineProperty(e,this._parent_,{get:()=>t,set:e=>t=e}),Object.defineProperty(e,this._access_,{get:()=>n,set:e=>n=e}),this._applyAdapters(e,Wv.adapter||{}),Kv.intercept(e,e=>this._onChange(e)),Gv.is.objectOrArray(e))for(let t in e)this._intercept(e[t],e,t)}},_onChange(e){if(this._applyingActions||Gv.is.symbol(e.name)||e.type===`add`&&e.newValue===void 0)return e;let t;if(e.type===`add`||e.type===`update`?t=this._processChangeSet(e):e.type===`remove`?t=this._processChangeRemove(e):e.type===`splice`&&(t=this._processChangeSplice(e)),t)return this._txRunning?this._txActions.push(t):(this._broadcastActions([t]),this._persistWithDebounce()),e},_processChangeSet(e){let t=e.name??e.index;if(e.object[t]!==e.newValue)return e.newValue=this._proxify(e.newValue,e.object,t),{type:`set`,path:this._locate(e.object),key:t,value:this._clone(e.newValue)}},_processChangeRemove(e){return{type:`remove`,key:e.name,path:this._locate(e.object)}},_processChangeSplice(e){return e.added=e.added.map((t,n)=>this._proxify(t,e.object,e.index+n)),{type:`splice`,path:this._locate(e.object),index:e.index,added:this._clone(e.added),removedCount:e.removedCount}},_applyActions(e){Kv.runInAction(()=>{this._applyingActions=!0,e.forEach(e=>this._applyAction(e)),this._applyingActions=!1}),this._logActions(e),this._persistWithDebounce()},_applyAction(e){let t=this._get(this._state,e.path);if(!t){Wv.warn(`action target not found`,e);return}if(e.type===`set`)t[e.key]=this._proxify(e.value,t,e.key);else if(e.type===`remove`)delete t[e.key];else if(e.type===`splice`){let n=e.added.map((n,r)=>this._proxify(n,t,e.index+r));t.splice(e.index,e.removedCount,...n)}},_applyAdapters(e,t){let n=this._locate(e);for(let r in t)this._pathMatchesMask(n,r)&&this._applyAdapter(e,t[r])},_pathMatchesMask(e,t,n=!0){if(t===`**`)return!0;let r=t===``?[]:t.split(`.`);if(n&&e.length!==r.length||r.length>e.length)return!1;for(let t=0;t<e.length&&r[t];t++)if(r[t]!==`*`&&r[t]!==e[t])return!1;return!0},_applyAdapter(e,t){let n=Object.getOwnPropertyDescriptors(t);for(let t in n){if(e.hasOwnProperty(t))continue;let r,{get:i,set:a,value:o}=n[t];Object.defineProperty(e,t,{get(){return i?i.call(e):r||(Gv.is.function(o)&&(r=o.bind(e)),r||void 0)},set(t){return a&&a.call(e,t),!0}})}},_broadcastActions(e){e.length!==0&&Jv.send(`store.actions`,e)},_locate(e){let t=[],n=e;for(;;){let e=n[this._parent_];if(!e)break;let r;if(Gv.is.array(e)){let t=e.indexOf(n);r=t>=0?t:n[this._access_]}else r=n[this._access_];t.unshift(r),n=e}return t},_get(e,t=[]){let n=e;for(let e of t){if(!n.hasOwnProperty(e))return;n=n[e]}return n},_persistWithDebounce(){if(!Yv.is.bg)return;if(this._persistSaving){this._persistPending=!0;return}let e=Yv.is.development?500:2e3;clearTimeout(this._persistTimeout),this._persistTimeout=setTimeout(async()=>{this._persistSaving=!0;try{let e=Kv.isObservable(this._state)?Kv.toJS(this._state):this._state,t=this._uglify(e);await qv.set(this._idbKey,t)}catch(e){Wv.error(`persist failed`,e)}this._persistSaving=!1,this._persistPending&&(this._persistPending=!1,this._persistWithDebounce())},e)},_clone(e){return Gv.is.array(e)?e.map(e=>this._clone(e)):(Kv.isObservable(e)&&(e=Kv.toJS(e)),structuredClone(e))},_uglify(e){return e},_deuglify(e){return typeof e==`string`?e.startsWith(`{`)&&e.endsWith(`}`)?JSON.parse(e):JSON.parse(decodeURIComponent(atob(e))):e},_logActions(e){this._debug&&(e=e.map(e=>(e={...e},e.path=e.path.join(`.`),e)),Wv.log(`apply`,e.length===1?e[0]:e))}}})),Qv,$v,ey=o((()=>{({$store:Qv,$s:$v}=app),Qv.adapter.auth={get all(){return[this,...Object.values($v.userStates).map(e=>e.auth)].filter(e=>!!e.userId&&!$v.multiaccount.hiddenUserIds.includes(e.userId)).sort((e,t)=>e.username.localeCompare(t.username))},getByUserId(e){return this.all.find(t=>t.userId===e)??null}}})),ty,ny,ry=o((()=>{({$store:ty,$s:ny}=app),ty.adapter.billing={getSelectedUserState(){return ny.getUserState(this.selectedUserId)},selectedUserHasPro(e=null){return ny.hasPro(e,{userId:this.selectedUserId})},selectedUserHasProPaid(e=null,{allowCancelled:t=!0}={}){return ny.hasProPaid(e,{userId:this.selectedUserId,allowCancelled:t})}}}));function iy(e){try{let t=JSON.parse(atob(e.split(`.`)[1]));if(!t.exp)return!0;let n=t.exp*1e3;return Date.now()<n-3e5}catch{return!1}}var ay,oy,sy=o((()=>{({$store:ay}=app),oy=new Map,ay.adapter[`billing.account`]={get token(){let e=this.tokenValue;return e?oy.has(e)?e:iy(e)?(oy.set(e,!0),e):(this.tokenValue=null,null):null},set token(e){this.tokenValue&&oy.delete(this.tokenValue),this.tokenValue=e}}})),cy,ly,uy,dy,fy,py,my=o((()=>{({$store:cy,$env:ly,$s:uy,$fusion:dy}=app),fy=()=>{let e=dy.config.boost?.minBusinessFollowerCount;return e?(uy.auth.profile?.followerCount||0)>=e:!0},py=e=>{if(e===!0||e==null)return!0;if(e===!1)return!1;let t=(uy.auth.isBusiness||uy.auth.isProfessional||uy.hasPro())&&fy();return e===`business`&&t||e===`!business`&&!t},cy.adapter.boost={get enableBoost(){if(ly.is.development)return!0;let e=dy.config.boost?.minBusinessFollowerCount;return e&&(uy.auth.profile?.followerCount||0)<e?!1:py(dy.config.boost?.enableBoost)},get enableShowSuggestions(){return ly.is.development?!0:py(dy.config.boost?.enableShowSuggestions)}}})),hy,gy,_y,vy,yy,by=o((()=>{({$store:hy,$env:gy,$musicAssist:_y,$utils:vy,$editor:yy}=app),hy.adapter[`editor.music`]={get categories(){if(!gy.is.pp)throw Error(`pp only`);return _y.getData().categories},get categoriesByUsage(){if(!gy.is.pp)throw Error(`pp only`);return[...this.categories].sort((e,t)=>{let n=this.categoryUsageIds.indexOf(e.id),r=this.categoryUsageIds.indexOf(t.id);return n===-1&&r===-1?0:n===-1?1:r===-1?-1:n-r})},get selectedCategory(){if(!gy.is.pp)throw Error(`pp only`);return this.categories.find(e=>e.id===this.selectedCategoryId)},get tracks(){if(!gy.is.pp)throw Error(`pp only`);return _y.getData().tracks},getPopularTracks(e=Date.now()){let t=4*vy.time.DAY,n=Math.floor(e/t),r=e=>{let t=Math.sin(e++)*1e4;return t-Math.floor(t)},i=[...yy.tracks];for(let e=i.length-1;e>0;e--){let t=Math.floor(r(n+e)*(e+1));[i[e],i[t]]=[i[t],i[e]]}return i}}})),xy,Sy,Cy,wy=o((()=>{({$store:xy,$s:Sy,$env:Cy}=app),xy.adapter[``]={get isLoggedIn(){return!!this.billing.account.token},hasPro(e=null,{userId:t=null}={}){return!0},hasProPaid(e=null,{userId:t=null,allowCancelled:n=!0}={}){if(!this.isLoggedIn)return!1;let r=Date.now(),i=this.getUserState(t),a=this.billing.optimistic||{on:0,plan:null,userId:i.auth.userId};if((!e||a.plan===e)&&a.userId===i.auth.userId&&a.on<=r&&r-a.on<=9e5)return!0;for(let t in Cy.options.billingPlans)if(!(e&&e!==t)&&Cy.options.billingPlans[t].isActive(i,{allowCancelled:n}))return!0;return!1},hasProPromocode(){let e=this.billing.promocode;if(!e)return!1;let t=Date.now(),[n,r,i]=e.split(`.`),a=new Date(`${r}-${n}-${i}`);return a.setHours(23),a.setMinutes(59),a.setSeconds(59),a.getTime()>=t},get purchasingPlanId(){return this.billing.purchasingPlan?.id},get userId(){return this.auth.userId},get username(){return this.auth.username},get sessionId(){return(this.auth.cookies||[]).find(e=>e.name===`sessionid`)?.value||null},get csrfToken(){return this.auth.cookies.find(e=>e.name===`csrftoken`)?.value},acknowledge(e){this.acknowledged[e]=Date.now()},isAcknowledged(e){return this.acknowledged[e]!==-1},get allUsernames(){let e=[],t=t=>e.push(t.auth.username);for(let e in t(this),this.userStates)t(this.userStates[e]);return e},getUserState(e=null){return!e||this.auth.userId===e?this:this.userStates[e]},getAllUserStates(){return[this,...Object.values(this.userStates)]}},xy.proxy={get csrfToken(){return Sy.auth.cookies.find(e=>e.name===`csrftoken`)?.value}}})),Ty,Ey=o((()=>{({$store:Ty}=app),Ty.templatesState=()=>({shown:!1,content:`{Hi|Hey} {@name}! 


  {Thank you|Thanks} {@name}! 


  /missed
  {Hi|Hey} {@name}! Sorry I missed your message. I will get back to you asap.


  /follow
  {Hi|Hey} {@name}! Thanks for following! Feel free to DM me anytime.


  /auto
  {Hi|Hey} {@name}! {Thank you for reaching out.|Thank you for contacting us.} We are currently offline, but {will be in touch shortly.|will be in touch soon.}


  /feedback
  {Hi|Hey} {@name}! Just wanted to follow up and check how you find our Instagram content? Feel free to send me suggestions or improvement ideas.
  `.split(`
`).map(e=>e.trim()).join(`
`),total:6})})),Dy,Oy,ky=o((()=>{({$store:Dy,$whatsNew:Oy}=app),Dy.whatsNewState=()=>Oy.items})),Ay,jy=o((()=>{({$store:Ay}=app),Ay.sharedState=()=>({installedAt:Date.now(),theme:`day`,userStates:{},experiments:{enabled:!1},igApi:{userPostsVersion:1+Math.floor(Math.random()*2)},abTesting:{hash:Math.random(),wideScreenState:null},adblock:{enabled:!0,adsStoryRemoved:0,adsFeedRemoved:0},videoControls:{enabled:!0},multiaccount:{userIds:[],selectedUserId:null,addingNewAccount:!1,hiddenUserIds:[]},welcome:{shown:!0},sidebar:{selectedTabId:null,isOpen:!1,showMobileViewButton:!1},boost:{tasks:[],owned:[],hiddenInfoCard:!1,selectedProductId:null,purchasingProductId:null,lastPurchaseTimestamp:null,packages:[],packagesLoading:!1,visitedUsernames:[],skipActionsTill:null},igView:{fullscreen:!1,fullscreenWidth:460,withBorder:!0,creationCardShown:!1},templates:Ay.templatesState(),settings:{laterAutoRetry:-1},tagAssist:{shown:!1,query:``,tagMetricsUpsellDismissed:!1,searching:!1,latinOnly:!1,errorCode:null,selectedTabId:`search`,selectedGroupId:`low`,igSelectedTags:[],fcsSelectedTags:[],sidebarSelectedTags:[],sidebarSelectedTagsAsText:``,lastDayUsedOn:null,ladderEngagementSort:null,summaryEngagementSort:null,ladderPostCountSort:null,summaryPostCountSort:null,lastTagScanOn:null,accountStats:{},ladder:null,ladderLoadingTags:[],collections:[],newCollection:{name:``,text:``,showForm:!1},collectionsTagData:{},collectionsLoadingTags:[]},acknowledged:{install:-1,upsell:-1,storyLimitations:-1,tosSummary:-1,scheduleTip:-1,rateUs:-1,editorTrayReorder:-1},rateUs:{shown:!1,rate:null},editor:{lastUsedType:`post`,music:{selectedCategoryId:0,categoryUsageIds:[]}},whatsNew:Ay.whatsNewState().map(e=>({id:e.id,acknowledged:!0})),whatsNewSnacks:{acknowledged:[],hideUntil:null},billing:{selectedUserId:null,navigation:{isBodyOpen:!1},account:{email:null,tokenValue:null},btf:null,watermarkFreeStories:1,recordedUsernames:[],promocode:null,optimistic:null,subscriptions:{},products:{},orders:[],selectedPlan:null,purchasingPlan:null,countryIso:null,pricing:null,snapshot:{},verificationCodeEmail:null,upsell:{show:!1,userId:null,message:null}}})})),My,Ny=o((()=>{({$store:My}=app),My.userState=()=>({version:326,auth:{userId:null,username:null,fullName:null,email:null,avatarUrl:null,isBusiness:null,isProfessional:null,loggedIn:!1,cookies:[],profile:null},lastSentPromoStats:null,musicAssist:{shown:!1,videoUrl:null,videoVolume:0,musicVolume:.5,videoCurrentTime:0,categoryIdsOrder:[],selectedCategoryId:0,selectedTrackId:null,selectedTrackStart:0,customTrack:null,showUpsellOverlay:!1,isStory:!1},ghost:{enabled:!1},scripts:{tasks:[],showBodyPanel:!1,selectedTaskId:null,superlikeClicked:!1,pagelikeClicked:!1,autoSpeed:{value:null,updatedAt:null,lastBlockedSpeed:null},autopilotRemainingLikes:null},activity:{events:[]},later:{showGrid:!1,showBodyPanel:!1,showAssistPanel:!1,selectedUserId:null,selectedPostId:null,selectedPillId:null,selectedIgDate:null,errors:[],lastDate:null,processing:!1,timeSlots:[{time:480*60*1e3},{time:780*60*1e3},{time:960*60*1e3},{time:1200*60*1e3}],calendar:{periodType:`month`,periodStart:Date.now(),showSlots:!0},dnd:{dragPostId:null,dragOverPostId:null,dragOverDay:null,dragOverTime:null},ig:{loading:!1,error:null,updatedAt:-1,posts:[]},posts:[]},inspiration:{posts:[]},stats:{mobileViewClicked:0,inssistMenuClicked:{}},welcomeBonus:{available:null,claimedAt:null,dismissed:!1}})})),Py,Fy,Iy,Ly,Ry,zy=o((()=>{({$scripts:Py,$fusion:Fy,$dateFns:Iy,$s:Ly,$utils:Ry}=app),Py.accountAge=e=>{if(!e)return 0;let{check:t,lastUserId:n,perDay:r}=Fy.config.scripts.aged;if(!Py.accountAge.lastUserId){Py.accountAge.lastUserId=n;let e=e=>{Number(e.id)<=Py.accountAge.lastUserId||(Py.accountAge.lastUserId=Number(e.id))};Ly.scripts.tasks.forEach(t=>{t.data?.followers?.forEach(t=>e(t)),t.data?.followings?.forEach(t=>e(t)),t.data?.results?.forEach(t=>e(t))}),Py.accountAge.lastUserId!==n&&(Py.accountAge.checkDate=Iy.startOfDay(new Date))}return Py.accountAge.checkDate||(Py.accountAge.checkDate=Iy.startOfDay(t)),Py.accountAge.today||(Py.accountAge.today=Iy.startOfDay(new Date)),(n+(Py.accountAge.checkDate-Py.accountAge.today)/Ry.time.DAY*r-Number(e))/r}})),By,Vy,Hy=o((()=>{({$scripts:By,$fusion:Vy}=app),By.isFresh=function(e){return By.accountAge(e?.id)<Vy.config.scripts.aged.agedIfOlder}})),Uy,Wy,Gy,Ky,qy,Jy=o((()=>{({$scripts:Uy,$s:Wy,$fusion:Gy}=app),Ky={uniqueSet:null,lastCheckedFor:-1},qy=function(e){return e.avatarUrl?.split(`?`)[0]?.split(`/v/`)[1]},Uy.collectFacelessAvatars=function(){let e=Wy.scripts.tasks.reduce((e,t)=>e+t.data?.followers?.length||0+t.data?.followings?.length||0,0);if(Ky.uniqueSet&&Ky.lastCheckedFor===e)return;let t=new Set,n=new Map,r=e=>{if(t.has(e.id))return;t.add(e.id);let r=qy(e);n.set(r,(n.get(r)||0)+1)};Wy.scripts.tasks.forEach(e=>{e.data?.followers?.forEach(e=>r(e)),e.data?.followings?.forEach(e=>r(e))}),Ky.lastCheckedFor=e,Ky.uniqueSet=new Set(Array.from(n.entries()).filter(([e,t])=>t>1).map(([e])=>e));let i=Gy.config.avatar.faceless;i&&i.forEach(e=>Ky.uniqueSet.add(e))},Uy.isFaceless=function(e){return e?e.avatarUrl?(Ky.uniqueSet||Uy.collectFacelessAvatars(),Ky.uniqueSet.has(qy(e))):!0:!1}})),Yy,Xy=o((()=>{({$scripts:Yy}=app),Yy.isBot=function(e){return!e||!e.username?!1:!e.fullName?.trim()||(e.fullName.match(/\d/g)||[]).length>=3||(e.username.match(/\d/g)||[]).length>=3&&!e.username.match(/(^|\D)(19[5-9]\d|20[0-1]\d|2020)(\D|$)/)}})),Zy,Qy,$y,eb,tb=o((()=>{({$store:Zy,$s:Qy,$scripts:$y,$fusion:eb}=app),Zy.adapter.scripts={get purchased(){return Qy.hasPro(`inssist-pro-monthly`)},get isAutopilotLimitReached(){if(Qy.hasPro())return!1;let e=this.autopilotRemainingLikes;return e===null?!1:e<=0},get maxPeerItems(){return this.purchased?-1:eb.config.scripts.maxItemsOnFree},get task(){return this.findTaskById(this.selectedTaskId)},get autopilot(){return $y.Task.of(this.tasks.find(e=>e.type===`autopilot`))},get growth(){return $y.Task.of(this.tasks.find(e=>e.type===`growth`))},get peers(){return $y.Task.of(this.tasks.find(e=>e.type===`peers`))},get antibot(){return $y.Task.of(this.tasks.find(e=>e.type===`antibot`))},findTaskById(e,t=!0){let n=Qy.scripts.tasks.find(t=>t.id===e);if(n)return $y.Task.of(n);if(t)for(let t in Qy.userStates){let n=Qy.userStates[t].scripts.tasks.find(t=>t.id===e);if(n)return $y.Task.of(n)}},findTasksByType(e,t=!0){if(!t)return Qy.scripts.tasks.filter(t=>t.type===e).map(e=>$y.Task.of(e));let n=Qy.scripts.tasks.filter(t=>t.type===e),r=Object.values(Qy.userStates);if(r.length){let t=r.flatMap(e=>e.scripts?.tasks||[]).filter(t=>t.type===e);n=[...n,...t]}return n.map(e=>$y.Task.of(e))},findAllTasks(e=!0){if(!e)return Qy.scripts.tasks.map(e=>$y.Task.of(e));let t=Qy.scripts.tasks,n=Object.values(Qy.userStates);return n.length&&(t=[...t,...n.flatMap(e=>e.scripts?.tasks||[])]),t.map(e=>$y.Task.of(e))},findAccountsInTasks(e){return e?Qy.scripts.tasks.map(t=>[(t.data?.followers||[]).find(t=>t.id===e),(t.data?.followings||[]).find(t=>t.id===e)]).flat().filter(Boolean):[]}}})),nb,rb,ib,ab=o((()=>{({$scripts:nb,$s:rb,$mobx:ib}=app),nb.Task=class{static typeClasses=new Map;static instances=new Map;static invalidateOnUserSwitch(){ib.reaction(()=>rb.auth?.userId,()=>nb.Task.instances.clear(),{fireImmediately:!1})}static of(e){if(!e)return null;if(e instanceof nb.Task)return e;let t=nb.Task.instances.get(e.id);if(t)return t;let n=nb.Task.typeClasses.get(e.type);if(!n)throw Error(`No task class defined for type ${e.type}`);let r=new n(e);return nb.Task.instances.set(e.id,r),r}static defaultState(e=rb.auth){return{id:`local:${String(Math.random()).slice(2)}`,type:`base`,createdOn:Date.now(),updatedOn:null,syncedOn:null,nextRunOn:null,status:`canceled`,error:null,config:{target:{id:e.userId,username:e.username,fullName:e.fullName,avatarUrl:e.avatarUrl}},edit:null,data:{}}}constructor(e){if(!e)throw Error(`$scripts.Task state is required`);this._state=e}toString(){let{id:e,type:t,status:n,targetUsername:r}=this;return`${e}::${t}::${n}::${r}`}get state(){return this._state}get isDeleted(){return!rb.scripts.tasks.some(e=>e.id===this.id)}get ownedByCurrentUser(){return rb.auth.userId===this.owner?.userId}get owner(){if(rb.scripts.tasks.some(e=>e.id===this.id))return rb.auth;for(let e in rb.userStates){let t=rb.userStates[e];if(t.scripts?.tasks?.some(e=>e.id===this.id))return t.auth}return null}delete(){this.isDeleted||rb.transaction(e=>{let t=e.scripts.tasks.findIndex(e=>e.id===this.id);t!==-1&&e.scripts.tasks.splice(t,1)})}get title(){return`Growth Task`}get toggleTooltip(){return`Start / stop the task`}get onHeaderClick(){return null}get id(){return this._state.id}get createdOn(){return this._state.createdOn}get updatedOn(){return this._state.updatedOn}markUpdated(){this._state.updatedOn=Date.now()}get syncedOn(){return this._state.syncedOn}get status(){return this._state.status}set status(e){this._state.status=e}get error(){return this._state.error}set error(e){this._state.error=e}get type(){return this._state.type}get config(){return this._state.config}get target(){return this.config.target}get targetId(){return this.target.id}get targetUsername(){return this.target.username}get targetFullName(){return this.target.fullName}get targetAvatarUrl(){return this.target.avatarUrl}get data(){return this._state.data}get nextRunOn(){return this._state.nextRunOn}set nextRunOn(e){this._state.nextRunOn=e}get needsToRun(){return this.status===`active`?!this._state.nextRunOn||this._state.nextRunOn<=Date.now():!1}get editable(){return!1}get edit(){return this._state.edit}set edit(e){this._state.edit=e}get disableActions(){return!1}get hideCardFrame(){return!1}get hideFromSidePanel(){return!1}get progressDetails(){return null}renderCardContent(){return null}renderBodyContent(){return null}get nextRunDelay(){return null}get usage(){return{}}async run(){throw Error(`Task run method is not implemented`)}throw(e,t){e=`${e}: { code: ${t?.code}, message: ${t?.message} }`;let n=Error(e);throw n.code=t?.code,n}}})),ob,sb,cb,lb,ub,db=o((()=>{({$scripts:ob,$s:sb,$utils:cb,$fusion:lb,$starter:ub}=app),ob.TaskAutopilotHandler=class{constructor(e,{enabled:t}={}){this.task=e,e.config.autopilot||(e.config.autopilot={enabled:t||!1})}get enabled(){return this.task.config.autopilot.enabled}set enabled(e){this.task.config.autopilot.enabled=e}get canRun(){return!0}get showAutopilotButton(){return!0}get saturation(){return sb.activity.likesMadeToday({taskId:this.task.id})}get likeDelay(){return Math.round(cb.random({from:1e3,to:2e4,...lb.config.scripts.likeDelayRandom}))}isLikeable(e){return ob.isBot(e)||ob.isFaceless(e)?!1:!e.likeActions?.length||e.likeActions.length<2&&!e.likeActions.some(e=>e.status===`failure`)}getLikeablePeers(e){let t=new Set(sb.allUsernames);return e.filter(e=>!t.has(e.username)).filter(e=>this.isLikeable(e))}async runLikeAutopilot({likesToMake:e,peers:t}){if(!await ob.limitController.prepareLikingSession())return{likesMade:0};let n=sb.auth.userId,r=()=>!this.enabled||n!==sb.auth.userId||!ub?.controller.online,i=this.task.id,a=0,o=0;nextPeer:for(let n of t){let{id:t,username:s,likeActions:c}=n,l=2-(c?.length||0);if(l!==0)for(let n=0;n<l;n++){ob.log(`auto-liking`,s);let n=await ob.controller.likeAccount({id:t,username:s,taskId:i,by:`system`});if(ob.log(`..result`,JSON.stringify(n)),r())break nextPeer;if(n.status===`failure`){if(n.error.actionBlocked){let e=Error(`Session is action blocked. Please relogin to Instagram, give it a day of rest and reduce liking speed.`);throw e.actionBlocked=!0,e}let e=lb.config.scripts.terminateLikingOnFailures;if(++o>=e)throw Error(`Failed to like ${e} times in a row`);continue nextPeer}if(o=0,a++,a>=e)break nextPeer;if(!sb.scripts.autopilot?.isWithinTimeframe){ob.log(`..outside activity timeframe, aborting`);break nextPeer}if(await cb.sleep({min:this.likeDelay,max:this.likeDelay,wakeIf:r}),r())break nextPeer}}await ob.limitController.submitLikesMade(a)}run({likesToMake:e}={}){throw Error(`$scripts.TaskAutopilotHandler.run method is not implemented`)}}})),fb,pb,W,G,mb,hb,gb=o((()=>{({$scripts:fb,$fusion:pb,$s:W,$utils:G,$dateFns:mb,$analytics:hb}=app),fb.TaskAutopilot=class extends fb.Task{static create(e=W.auth){let t={...fb.Task.defaultState(e),status:`active`,type:`autopilot`},n=new fb.TaskAutopilot(t);return n.config.quota=`auto`,n.config.showQuotaMenu=!1,n.config.showAddTaskMenu=!1,n.config.timeframe={fromMs:8*G.time.HOUR,tillMs:23*G.time.HOUR},n.data.todayQuotaCache={startOfDay:null,value:null},n.data.hourlySpeedCache={startOfDay:null,fromMs:null,tillMs:null,speeds:null,totalSpeed:null},n.data.initiatorTaskId=null,n}get hideFromSidePanel(){return this.config.target.id!==W.auth.userId}get hideCardFrame(){return!0}renderCardContent(){return React.createElement(fb.TaskCardAutopilot,{task:this})}get isAutoSpeed(){return this.config.quota===`auto`}get autoSpeedConfig(){let e=pb.config.scripts.autoSpeed||[],t=W.abTesting.hash||0,n=0;for(let r of e)if(n+=r.percent,t<n)return r;return e[e.length-1]||{min:100,max:300,delta:20}}get effectiveMax(){let e=this.autoSpeedConfig,t=W.scripts.autoSpeed?.lastBlockedSpeed;if(t){let n=pb.config.scripts.autoSpeedBlockedMultiplier||.8;return Math.max(e.min,Math.floor(t*n))}return e.max}get autoSpeedValue(){let e=this.autoSpeedConfig,t=this.effectiveMax,n=mb.startOfDay(new Date).getTime(),r=W.scripts.autoSpeed||{};if(r.value===null){let r=W.activity.likesMadeWithin(G.time.DAY),i=G.clamp(e.min,r,t);return W.transaction(e=>{e.scripts.autoSpeed.value=i,e.scripts.autoSpeed.updatedAt=n}),i}if(r.updatedAt===n||Math.floor((n-r.updatedAt)/G.time.DAY)<=0)return r.value;let i=r.value,a=W.activity.likesMadeYesterday()>=i,o=r.value,s=a?Math.min(o+e.delta,t):o;if(W.transaction(e=>{e.scripts.autoSpeed.value=s,e.scripts.autoSpeed.updatedAt=n}),s>o){let e=Math.round(s/10)*10;hb.send(`scripts:autospeed-increased-${e}`)}return s}resetAutoSpeed(){let e=this.autoSpeedConfig,t=mb.startOfDay(new Date).getTime(),n=W.scripts.autoSpeed?.value||e.min,r=Math.max(e.min,Math.floor(n*.5)),i=Math.round(n/10)*10;hb.send(`scripts:autospeed-reset-${i}`),W.transaction(e=>{e.scripts.autoSpeed.value=r,e.scripts.autoSpeed.updatedAt=t,e.scripts.autoSpeed.lastBlockedSpeed=n})}get quota(){return this.isAutoSpeed?this.autoSpeedValue:this.config.quota}get showQuotaMenu(){return this.config.showQuotaMenu}set showQuotaMenu(e){this.config.showQuotaMenu=e}get showAddTaskMenu(){return this.config.showAddTaskMenu}set showAddTaskMenu(e){this.config.showAddTaskMenu=e}get todayQuota(){let e=mb.startOfDay(new Date).getTime(),t=this.data.todayQuotaCache||{};if(t.startOfDay===e&&t.value)return t.value;let n=Math.round(this.quota*G.random({from:1,to:1.1,...pb.config.scripts.todayQuotaRandom}));return this.data.todayQuotaCache={startOfDay:e,value:n},n}get hourlySpeedMap(){let e=mb.startOfDay(new Date).getTime(),{fromMs:t,tillMs:n}=this.config.timeframe,r=this.data.hourlySpeedCache;if(r?.startOfDay===e&&r?.fromMs===t&&r?.tillMs===n)return r;let{zeroThreshold:i,minActiveRatio:a}=pb.config.scripts.hourlySpeed,o=Math.floor(t/G.time.HOUR),s=Math.floor(n/G.time.HOUR),c=[];if(o<s)for(let e=o;e<s;e++)c.push(e);else{for(let e=o;e<24;e++)c.push(e);for(let e=0;e<s;e++)c.push(e)}let l={};for(let e of c){let t=G.random({from:0,to:1});l[e]=t<i?0:t}let u=Math.ceil(c.length*a),d=c.filter(e=>l[e]===0),f=c.length-d.length;if(f<u){let e=u-f,t=[...d].sort(()=>Math.random()-.5);for(let n=0;n<e&&n<t.length;n++)l[t[n]]=G.random({from:i,to:1})}let p=Object.values(l).reduce((e,t)=>e+t,0);return this.data.hourlySpeedCache={startOfDay:e,fromMs:t,tillMs:n,speeds:l,totalSpeed:p},this.data.hourlySpeedCache}get currentHourSpeed(){let{speeds:e,totalSpeed:t}=this.hourlySpeedMap,n=e[new Date().getHours()],r=Object.keys(e).length;return!n||t===0||r===0?0:n/(t/r)}get batchSize(){return Math.round(G.random({from:1,to:20,...pb.config.scripts.batchSizeRandom}))}get likesUntilLimit(){let{perHour:e}=pb.config.scripts.limits,t=W.activity.likesMadeWithin(G.time.HOUR);return Math.max(0,e-t)}get isWithinTimeframe(){let e=Date.now()-mb.startOfDay(new Date).getTime(),{fromMs:t,tillMs:n}=this.config.timeframe;return t<n?e>=t&&e<n:e>=t||e<n}get usage(){let e=G.time.HOUR,t=G.time.DAY;return{dailySpeed:this.config.quota,timeframeFrom:this.config.timeframe?.fromMs,timeframeTill:this.config.timeframe?.tillMs,likesLast1h:W.activity.likesMadeWithin(1*e),likesLast3h:W.activity.likesMadeWithin(3*e),likesLast6h:W.activity.likesMadeWithin(6*e),likesLast12h:W.activity.likesMadeWithin(12*e),likesLast24h:W.activity.likesMadeWithin(24*e),likesLast2d:W.activity.likesMadeWithin(2*t),likesLast3d:W.activity.likesMadeWithin(3*t),likesLast7d:W.activity.likesMadeWithin(7*t),likesLast30d:W.activity.likesMadeWithin(30*t)}}get timeRemainingInTimeframe(){let e=Date.now()-mb.startOfDay(new Date).getTime(),{fromMs:t,tillMs:n}=this.config.timeframe;return t<n?n-Math.max(e,t):e>=t?G.time.DAY-e+n:n-e}get batchDelay(){let e=this.timeRemainingInTimeframe,t=this.todayQuota;if(!t)return G.time.HOUR;let n=W.activity.likesMadeToday()||0;if(n>=t)return G.time.HOUR;let r=t-n,i;{let{from:e,to:t}=pb.config.scripts.likeDelayRandom;e||=1e3,t||=2e4,i=(e+t)/2}let a;{let{from:e,to:t}=pb.config.scripts.batchSizeRandom;e||=1,t||=20,a=(e+t)/2}let o=Math.round((e-r*i)/(r/a)),s=pb.config.scripts.batchDelayMultiplier||.8,c=Math.round(o*s);return Math.round(c*G.random({from:.2,to:1.8,...pb.config.scripts.batchDelayRandom}))}likesToMake(e=null){let t=G.clamp(e?1:0,Math.min(this.batchSize,this.likesUntilLimit,this.todayQuota-W.activity.likesMadeToday()),this.isWithinTimeframe?this.todayQuota:1);if(t===0)return 0;let n=this.currentHourSpeed;return n===0&&!e?0:Math.max(1,Math.round(t*n))}taskToDelegateTo(e=null){return(e?[W.scripts.findTaskById(e)]:W.scripts.findAllTasks(!1)).filter(e=>e?.autopilot?.enabled).filter(e=>e.autopilot?.canRun).sort((e,t)=>e.saturation-t.saturation)[0]}get tasksWithAutopilotEnabled(){return W.scripts.findAllTasks(!1).filter(e=>e.autopilot?.enabled)}get tasksWithAutopilot(){return W.scripts.findAllTasks(!1).filter(e=>!!e.autopilot)}async run(){let e=Date.now();try{let e=this.data.initiatorTaskId;this.data.initiatorTaskId=null;let t=this.taskToDelegateTo(e);if(!t)return;let n=this.likesToMake(t);if(!n)return;fb.log(`autopilot delegates`,n,`likes to`,t.type,`(${t.id})`),await t.autopilot.run({likesToMake:n})}catch(e){throw this.isAutoSpeed&&e.actionBlocked&&this.resetAutoSpeed(),e}finally{await this._sleepFrom(e)}}async _sleepFrom(e,t=G.time.SECOND){Date.now()-e<t&&await G.sleep(t-Date.now()+e)}get nextRunDelay(){if(this.status===`error`)return G.time.HOUR;if(!this.isWithinTimeframe){let e=mb.startOfDay(new Date).getTime(),t=Date.now()-e,{fromMs:n,tillMs:r}=this.config.timeframe,i;i=n<r?t<n?n-t:G.time.DAY-t+n:n-t;let a=i+G.random({from:G.time.MINUTE,to:10*G.time.MINUTE}),o=Math.round(a/G.time.MINUTE);return fb.log(`autopilot outside timeframe, sleep for`,o,`minutes`),a}let e=Math.round(G.random({from:1*G.time.MINUTE,to:12*G.time.MINUTE,...pb.config.scripts.batchDelayMin})),t=Math.round(G.random({from:1*G.time.HOUR,to:12*G.time.HOUR,...pb.config.scripts.batchDelayMax})),n=G.clamp(e,this.batchDelay,t),r=Math.round(n/G.time.MINUTE);return fb.log(`autopilot will sleep for`,r,`minutes`),n}},fb.Task.typeClasses.set(`autopilot`,fb.TaskAutopilot)})),K,_b,vb,yb,bb,xb,Sb,Cb,wb,Tb,Eb,q,Db=o((()=>{({$scripts:K,$s:_b,$igApi:vb,$fusion:yb,$utils:bb,$env:xb,$starter:Sb,$mobx:Cb,$avatar:wb,$analytics:Tb}=app),K.TaskGrowth=class extends K.Task{static SOURCE_TYPE={AUTO:`auto`,CUSTOM:`custom`};static ERROR_MESSAGES={NO_CUSTOM_SOURCES:`Please configure source accounts to scan in the format: @username1 @username2`,ALL_SOURCES_INVALID:`Please provide valid source accounts in the format: @username1 @username2. Check that the usernames are correct.`,SOURCE_NOT_FOUND:e=>`Custom source not found: ${e}`,NO_EXACT_MATCH:e=>`No exact match for custom source: ${e}`,FAILED_TO_RESOLVE:e=>`Failed to resolve custom source ${e}`};static create(e=_b.auth){let t={...K.Task.defaultState(e),type:`growth`,status:yb.config.scripts.defaultTaskStatus?.growth||`canceled`},n=new K.TaskGrowth(t);return n.config.sources={custom:!1,followersOf:`@instagram @design @visitaustria`},n.config.minLikesPerLead=2,n.config.maxLikesPerLead=2,n.config.leadsToScan=yb.config.scripts.rateLimits.defaultLeadsToScan,n.config.bannedWords=``,n.config.bannedUsernames=``,n.config.version=Math.random(),n.data.sources=[],n.data.leads=[],n.data.filterType=`leads`,n.data.searchQuery=``,n.data.sections={},n}constructor(e){super(e),this.autopilot=new Eb(this)}get editable(){return!0}enterEditMode(){this._state.edit=bb.cloneDeep(Cb.toJS(this._state.config))}saveEditMode(){if(bb.deepEqual(this._state.config,this._state.edit)){_b.transaction(()=>{this._state.edit=null});return}_b.transaction(()=>{let{AUTO:e,CUSTOM:t}=K.TaskGrowth.SOURCE_TYPE,n=this._state.edit.sources.custom?t:e,r=this._state.config.sources.followersOf!==this._state.edit.sources.followersOf,i=new Set((this._state.edit.sources.followersOf||``).split(` `).filter(e=>e.length>1).map(e=>e.substring(1)));this._state.data.leads=this._state.data.leads.filter(e=>e.likeActions?.length>0?!0:!(e.source?.type!==n||r&&n===t&&!i.has(e.source?.username?.toLowerCase()))),this._state.config=this._state.edit,this._state.edit=null,Tb.send(`scripts:growth-edit-saved`,{sourceCount:i.size,useCustomSources:this.config.sources.custom,minLikes:this.config.minLikesPerLead,maxLikes:this.config.maxLikesPerLead,scanDepth:this.config.leadsToScan,hasBannedWords:(this.config.bannedWords||``).trim().length>0,hasBannedUsernames:(this.config.bannedUsernames||``).trim().length>0}),this.config.version=Math.random()})}cancelEditMode(){this._state.edit=null}get title(){return`Growth Autopilot`}get toggleTooltip(){return`Keep ON to grow your account organically by finding and engaging with qualified leads.`}get onHeaderClick(){return`toggle-results`}renderCardContent(){return this.edit?React.createElement(K.TaskEditGrowth,{task:this}):React.createElement(K.TaskCardGrowth,{task:this})}renderBodyContent(){return React.createElement(K.TaskBodyGrowth,{task:this})}get sources(){return this.data.sources||[]}get leads(){return this.data.leads||[]}get useCustomSources(){return this.config.sources.custom}getSourcesByType(e){return this.sources.filter(t=>t.type===e)}static normalizeUsernames(e){return e.trim().split(/\s+/).filter(e=>e.length>1).join(` `)}get progressDetails(){let e=this.leads.length>0||[`active`,`running`].includes(this.status)?`results`:`start`,t=this.status===`error`?`alert-circle`:`clock`,n=null;if(this.status===`active`||this.status===`running`){let e=_b.activity.accountsEngagedToday({taskId:this.id}),t=_b.scripts.autopilot,r=t?.status===`active`&&Math.ceil(((t.nextRunOn||0)-Date.now())/bb.time.MINUTE),i=null;r&&(i=r>=60?`runs in ${Math.round(r/60)} hours`:`runs in ${r} mins`),n=[e&&`engaged ${e} leads`,i].filter(Boolean).join(`, `)||`Runs automatically in background`,n=n.charAt(0).toUpperCase()+n.slice(1)}else this.status===`error`?n=`Last scan failed, please restart`:this.status===`canceled`&&(n=`Turn ON to run in background`);let r=this.status===`error`?String(this.error?.message||this.error?.code||this.error):null;return{type:e,icon:t,message:n,tooltip:r,progress:100}}get usage(){return{customSourceCount:this.config.sources.custom?(this.config.sources.followersOf||``).split(` `).filter(e=>e.length>1).length:0,minLikesPerLead:this.config.minLikesPerLead,maxLikesPerLead:this.config.maxLikesPerLead,scanDepth:this.config.leadsToScan,leadCount:this.leads.length,sourceCount:this.sources.length}}async run(){setTimeout(()=>{K.controller.runAutopilot(this.id)})}get nextRunDelay(){return yb.config.scripts.growthRunInterval}},Eb=class extends K.TaskAutopilotHandler{async scanSourcesIfNeeded(e){await this.scanAutoSources(e),await this.scanCustomSources()}async findLeads(){q(`findLeads() ->`);let e=_b.auth.userId,{version:t,userId:n}=this.task.config,r=()=>!this.enabled||!Sb.controller.online||e!==_b.auth.userId||this.task.config.version!==t,i=this.task.leads.length===0,{scanDepths:a,targetFreshLeads:o,defaultLeadsToScan:s,maxLeads:c}=yb.config.scripts.rateLimits,l=i?a[0]:o,u=this.task.config.leadsToScan||s,d=a.map(e=>e===`custom-depth`?u:e).map(e=>e===`max-depth`?c:e);if(q(`..lead target:`,{target:l,totalLeads:this.task.leads.length,totalSources:this.task.sources.length}),await this.cleanupOldLeads(),r())return q(`..aborted after cleanup`);if(await this.scanSourcesIfNeeded(n),r())return q(`..aborted after scanning sources`);let f=0,p=this.getSourcesToScan();for(let e of d){q(`..scanning at depth:`,{scanDepth:e,sourcesCount:p.length});for(let t of p){if(f>=l)return q(`..target reached`,{freshLeadsFound:f,target:l});let n=await this.scanLeadsOfSource(t.id,e,r);if(r())return q(`..aborted during scanning loop`);let i=this.processLeadsAsBatch(n,t);if(r())return q(`..aborted during processing`);f+=i,t.scannedOn=Date.now(),q(`..scanned source:`,{username:t.username,scanDepth:e,leadsScanned:n.length,newLeads:i,freshLeadsFound:f})}if(f>=l)break;let t=d[d.indexOf(e)+1];q(`..completed full circle, ramping up depth`,{freshLeadsFound:f,nextDepth:t})}q(`findLeads <-`,{freshLeadsFound:f,target:l,finalLeadsCount:this.task.leads.length,finalLikeableLeads:this.likeableLeads.length})}async engageLeads(e){if(q(`engageLeads({ likesToMake: ${e} }) ->`),!await K.limitController.prepareLikingSession())return;let t=_b.auth.userId,{version:n}=this.task.config,r=()=>!this.enabled||!Sb.controller.online||t!==_b.auth.userId||this.task.config.version!==n,i=this.task.id,a=0,o=0;nextLead:do{let t=this.likeableLeads;if(t.length===0)break;q(`..state:`,{availableLeads:t.length,likesToMake:e});let{id:n,username:s,likeActions:c}=t[0];q(`..processing lead:`,{username:s,existingLikes:c?.length||0}),q(`..liking post:`,{username:s});let l=await K.controller.likeAccount({id:n,username:s,taskId:i,by:`system`});if(q(`..like result:`,{username:s,status:l.status,error:bb.is.object(l.error)?JSON.stringify(l.error):l.error,likesMade:a+1}),r()){q(`..aborted during like attempts`);break nextLead}if(l.status===`failure`){if(l.error?.code===`network-error`){if(q(`..network error, retrying in 15 seconds`),await bb.sleep(15*bb.time.SECOND),r()){q(`..abort and reschedule due to offline status`),this.task.nextRunOn=Date.now()+15*bb.time.MINUTE;break nextLead}continue nextLead}if(l.error.actionBlocked)throw q(`..action blocked error, terminating`),Tb.send(`scripts:growth-engagement-failed`,{reason:`action-blocked`,failureCount:o}),Error(`Session is action blocked. Please relogin to Instagram, reduce liking speed and give it a day rest.`);let e=yb.config.scripts.terminateLikingOnFailures;if(o++,q(`..like failed:`,{username:s,failuresInARow:o,limit:e}),o>=e)throw q(`..too many failures, terminating`),Tb.send(`scripts:growth-engagement-failed`,{reason:`too-many-failures`,failureCount:o}),Error(`Failed to like ${e} times in a row`);continue nextLead}if(o=0,a++,a>=e){q(`..target reached, breaking`);break nextLead}if(!_b.scripts.autopilot?.isWithinTimeframe){K.log(`..outside activity timeframe, aborting`);break nextLead}let u=this.likeDelay;if(q(`..sleeping between likes: ${u}`),await bb.sleep({min:u,max:u,wakeIf:r}),r()){q(`..aborted after sleep`);break nextLead}}while(a<e);await K.limitController.submitLikesMade(a),Tb.send(`scripts:growth-engagement-completed`,{likesToMake:e,likesMade:a,failuresInARow:o,wasSuccessful:a>=e}),q(`engageLeads <-`,{likesToMake:e,likesMade:a,finalFailuresInARow:o})}getRelevantSources(){let{AUTO:e,CUSTOM:t}=K.TaskGrowth.SOURCE_TYPE;if(!this.task.useCustomSources)return this.task.getSourcesByType(e);let n=this.customSourceUsernames;return this.task.getSourcesByType(t).filter(e=>n.has(e.username?.toLowerCase()))}validateCustomSourceConfig(){return(this.task.config.sources.followersOf||``).trim()===``?(this.status=`error`,this.statusMessage=K.TaskGrowth.ERROR_MESSAGES.NO_CUSTOM_SOURCES,!1):!0}likesForLead(e){let t=bb.clamp(1,Number(this.task.config.minLikesPerLead)||2,12),n=bb.clamp(1,Number(this.task.config.maxLikesPerLead)||2,12);return t===n?t:t+Number(e.id)%(Math.abs(n-t)+1)}isLikeable(e){return!(e.likeActions?.length>=this.likesForLead(e)||e.likeActions?.some(e=>e.status===`failure`)||K.isBot(e)||K.isFaceless(e)||new Set(_b.allUsernames).has(e.username)||e.isFollower)}getLeadsBySourceType(){let{AUTO:e,CUSTOM:t}=K.TaskGrowth.SOURCE_TYPE;if(!this.task.useCustomSources)return this.task.leads.filter(t=>t.source?.type===e);let n=this.customSourceUsernames;return this.task.leads.filter(e=>e.source?.type===t).filter(e=>n.has(e.source?.username?.toLowerCase()))}get customSourceUsernames(){let e=this.task.config.sources.followersOf||``;return new Set(e.split(` `).filter(e=>e.length>1).map(e=>e.substring(1).toLowerCase()))}get likeableLeads(){let e=Date.now();return this.getLeadsBySourceType().filter(e=>this.isLikeable(e)).sort((t,n)=>this.compareLeads(t,n,e))}compareLeads(e,t,n){let r=e.likeActions?.[0]?.time||0,i=t.likeActions?.[0]?.time||0,a=n-r>=bb.time.HOUR,o=n-i>=bb.time.HOUR;return a&&!o?-1:!a&&o?1:t.scannedOn-e.scannedOn}get enabled(){return this.task.status===`active`||this.task.status===`running`}get showAutopilotButton(){return!1}async run({likesToMake:e}={}){if(q(`run({ likesToMake: ${e} }) ->`),this.task.useCustomSources&&!this.validateCustomSourceConfig()||!e||e<=0)return;let t=_b.auth.userId,{version:n}=this.task.config,r=()=>!this.enabled||!Sb.controller.online||t!==_b.auth.userId||this.task.config.version!==n,i=this.likeableLeads.length;if(q(`..leads assessment`,{availableLeads:i,likesToMake:e,needMoreLeads:i<e}),i<e){if(q(`..not enough leads, finding more`),await this.findLeads(),r())return q(`..aborted after findLeads`);q(`..engaging after finding leads`),await this.engageLeads(e)}else q(`..enough leads available, engaging directly`),await this.engageLeads(e);q(`run() <-`)}async cleanupOldLeads(){let e=this.task.leads,t=1e5,n=Date.now()-90*bb.time.DAY;if(q(`cleanupOldLeads() ->`),q(`..starting`,{totalLeads:e.length,cutoffIndex:t,cutoffDaysAgo:90}),e.length<=t)return q(`..no cleanup needed`);let r=[...e].sort((e,t)=>t.scannedOn-e.scannedOn),i=r.slice(t),a=i.filter(e=>e.scannedOn<n);if(q(`..analysis`,{candidatesForRemoval:i.length,toRemoveCount:a.length,oldestScannedOn:i.length>0?i[i.length-1].scannedOn:null}),a.length>0){let e=new Set(a.map(e=>e.id)),t=this.task.leads.length;_b.transaction(()=>{this.task.data.leads=r.filter(t=>!e.has(t.id))});let n=this.task.leads.length;q(`cleanupOldLeads <-`,{removed:a.length,beforeCount:t,afterCount:n}),K.log(`removed ${a.length} old leads`)}else q(`..no leads to remove`)}async scanCustomSources(){if(!this.task.useCustomSources)return;q(`scanCustomSources() ->`);let e=this.task.config.sources.followersOf;if(!e||e.trim()===``)throw Error(K.TaskGrowth.ERROR_MESSAGES.NO_CUSTOM_SOURCES);let t=K.TaskGrowth.normalizeUsernames(e);this.task.config.sources.followersOf!==t&&(this.task.config.sources.followersOf=t);let n=t.split(` `),r=new Set(n.map(e=>e.toLowerCase())),i=new Set(this.task.sources.filter(e=>e.type===K.TaskGrowth.SOURCE_TYPE.CUSTOM).filter(e=>r.has(`@${e.username.toLowerCase()}`)).map(e=>`@${e.username.toLowerCase()}`)),a=n.filter(e=>!i.has(e.toLowerCase())).slice(0,yb.config.scripts.rateLimits.sourcesPerScan);q(`..scanning custom sources`,{total:n.length,existing:i.size,toScan:a.length});let o=[],s=[];for(let e of a){let t=e.substring(1);try{let n=await vb.api.searchProfiles(t);if(!n.result||n.result.length===0){K.log(K.TaskGrowth.ERROR_MESSAGES.SOURCE_NOT_FOUND(e)),s.push(e);continue}let r=n.result.find(e=>e.username.toLowerCase()===t.toLowerCase());if(!r){K.log(K.TaskGrowth.ERROR_MESSAGES.NO_EXACT_MATCH(e)),s.push(e);continue}this.task.data.sources.push({...r,scannedOn:null,type:K.TaskGrowth.SOURCE_TYPE.CUSTOM}),wb.controller.fetchAndCache(r.username,r.avatarUrl),o.push(e),q(`..added custom source: ${e} (${r.id})`)}catch(t){K.error(K.TaskGrowth.ERROR_MESSAGES.FAILED_TO_RESOLVE(e),t),s.push(e)}}if(s.length>0){let e=n.filter(e=>!s.includes(e));if(e.length===0)throw this.task.status=`error`,this.task.statusMessage=K.TaskGrowth.ERROR_MESSAGES.ALL_SOURCES_INVALID,Error(`All provided usernames are invalid or not found`);this.task.config.sources.followersOf=e.join(` `)}q(`scanCustomSources <-`,{valid:o.length,invalid:s.length,totalSources:this.task.sources.filter(e=>e.type===K.TaskGrowth.SOURCE_TYPE.CUSTOM).length})}async scanAutoSources(e){if(this.task.useCustomSources)return;let t=this.task.sources.filter(e=>e.type===K.TaskGrowth.SOURCE_TYPE.AUTO).length,n;n=t===0?50:t<250?7500:250,q(`scanAutoSources() ->`),q(`..starting`,{userId:e,currentSourcesCount:t,scanLimit:n});let r=await vb.api.fetchUserPeers(e,{type:`followings`,total:n});if(r.error)throw q(`..API error`,r.error),Error(`Failed to fetch peers: ${r.error.message}`);let i=r.result||[];q(`..API result`,{fetchedCount:i.length,scanLimit:n});let a=this.task.sources.length;_b.transaction(()=>{let e=new Set(this.task.sources.map(e=>e.id)),t=i.filter(t=>!e.has(t.id)).map(e=>({...e,type:K.TaskGrowth.SOURCE_TYPE.AUTO}));this.task.sources.push(...t);for(let e of t)wb.controller.fetchAndCache(e.username,e.avatarUrl);q(`..merged`,{existingCount:e.size,newCount:t.length,totalAfter:this.task.sources.length}),K.log(`added ${t.length} new sources`)}),q(`scanAutoSources <-`,{beforeCount:a,afterCount:this.task.sources.length})}getSourcesToScan(){let e=this.task.sources,t=this.getRelevantSources(),n=t.filter(e=>!e.scannedOn),r=t.filter(e=>e.scannedOn);r.sort((e,t)=>e.scannedOn-t.scannedOn);let i=this.task.useCustomSources?[]:[yb.config.scripts.instagramSource],a=[...n,...r,...i];return q(`getSourcesToScan() ->`),q(`..result`,{mode:this.task.useCustomSources?`custom`:`auto`,totalSources:e.length,relevantSources:t.length,unscannedCount:n.length,scannedCount:r.length,resultCount:a.length,includesInstagramFallback:!this.task.useCustomSources}),a}async scanLeadsOfSource(e,t,n){let r=await vb.api.fetchUserPeers(e,{type:`followers`,total:t,onBatch:()=>!n||!n()});return r.error?(q(`..API error`,{sourceId:e,error:r.error.message}),K.log(`failed fetch peers of ${e}: ${r.error.message}`),[]):r.result||[]}processLeadsAsBatch(e,t){q(`processLeadsAsBatch() ->`),q(`..scanning`,{username:t.username,leadsCount:e.length,sourceId:t.id});let n=Date.now(),r=new Set(_b.allUsernames),i=0,a=0,o=0,s=0,c=0,l=e.filter(e=>K.isBot(e)?(a++,!1):K.isFaceless(e)?(o++,!1):r.has(e.username)?(s++,!1):e.isFollower?(c++,!1):!0);q(`..filtering results`,{originalCount:e.length,qualityCount:l.length,fBots:a,fFaceless:o,fOwned:s,fFollowers:c});let u=this.task.leads.length;_b.transaction(()=>{let e=new Set(this.task.leads.map(e=>e.id));q(`..merging`,{existingLeadsCount:e.size,candidatesCount:l.length});for(let r of l)e.has(r.id)||(this.task.data.leads.push({...r,scannedOn:n,source:{type:t.type,id:t.id,username:t.username},likeActions:[]}),wb.controller.fetchAndCache(r.username,r.avatarUrl),i++,e.add(r.id));this.task.data.leads=this.task.data.leads.sort((e,t)=>t.scannedOn-e.scannedOn)});let d=this.task.leads.length;return q(`processLeadsAsBatch <-`,{username:t.username,qualityLeadsAdded:i,beforeLeadsCount:u,afterLeadsCount:d}),K.log(`Added ${i} quality leads from @${t.username}`),i}},q=(e,t)=>{if(!xb.is.development)return;let n=Object.entries(t||{}).filter(([e,t])=>t!==void 0).map(([e,t])=>`${e}: ${t}`).join(`, `);K.log(e,n)},K.Task.typeClasses.set(`growth`,K.TaskGrowth)})),Ob,kb,Ab,jb,Mb,Nb,Pb,Fb,Ib,Lb,Rb=o((()=>{({$scripts:Ob,$s:kb,$fusion:Ab,$igApi:jb,$store:Mb,$utils:Nb,$avatar:Pb,$starter:Fb,$analytics:Ib}=app),Ob.TaskPeers=class extends Ob.Task{static create(e=kb.auth){let t={...Ob.Task.defaultState(e),type:`peers`,status:Ab.config.scripts.defaultTaskStatus?.peers||`canceled`},n=new Ob.TaskPeers(t);return n.data.followers=[],n.data.graphFollowers=[],n.data.graphFollowings=[],n.data.graphPosts=[],n.data.scanFollowers=null,n.data.scannedOn=null,n.data.filterType=`unfollowers`,n.data.searchQuery=``,n.data.sections={},n.data.filterBots=null,n.data.filterFaceless=null,n.data.filterFresh=null,n}constructor(e){super(e),this.autopilot=new Lb(this)}get followers(){return this.data.followers}get scanFollowers(){return this.data.scanFollowers}get graphFollowers(){return this.data.graphFollowers}get graphFollowings(){return this.data.graphFollowings}get graphPosts(){return this.data.graphPosts}get disableActions(){return this.status===`running`&&!this.data.followers?.length&&!!this.data.scanFollowers?.length}get title(){return`Monitor Unfollowers`}get toggleTooltip(){return`Keep switched ON to track followers & unfollowers. Monitoring runs in background.`}get onHeaderClick(){return`toggle-results`}renderCardContent(){return React.createElement(Ob.TaskCardPeers,{task:this})}renderBodyContent(){return React.createElement(Ob.TaskBodyPeers,{task:this})}get progressDetails(){let e=this.graphFollowers.length>0||[`active`,`running`].includes(this.status)?`results`:`start`,t=this.status===`error`?`alert-circle`:`clock`,n=this.status===`error`?this.error?.code===`redirected`?`Last scan failed, please relogin`:`Last scan failed, please restart`:this.status===`active`?`Runs automatically in background`:this.status===`running`?`Scanning followers`:this.status===`canceled`?`Turn ON to run in background`:null,r=this.status===`error`?String(this.error?.message||this.error?.code||this.error):this.status===`active`&&this.nextScanOnDate?`Next scan ${this.nextScanOnDate}`:null,i=100;if(this.status===`running`){let e=Ab.config.igApi.maxPeersScan,t=this.graphFollowers.at(-1)?.value||1,n=Math.min(e,t),r=(this.scanFollowers||[]).length;i=Nb.clamp(0,100*r/n,100)}return{type:e,icon:t,message:n,tooltip:r,progress:i}}get nextScanOnDate(){if(!this.nextRunOn)return null;let e=new Date(this.nextRunOn),t=e.toLocaleTimeString(void 0,{hour:`2-digit`,minute:`2-digit`}),n=new Date;if(e.toDateString()===n.toDateString())return`at ${t}`;let r=new Date(n);return r.setDate(r.getDate()+1),e.toDateString()===r.toDateString()?`tomorrow at ${t}`:`on ${e.toLocaleDateString()} at ${t}`}get usage(){let e=this.followers||[];return{autopilotEnabled:this.autopilot?.enabled||!1,followerCount:e.length,unfollowerCount:e.filter(e=>e.unfollowedOn).length,newFollowerCount:e.filter(e=>e.followedOn&&e.isFollower).length}}async run(){let e=kb.auth.userId,t=()=>this.isDeleted||this.status!==`running`||e!==kb.auth.userId||!Fb.controller.online,n=this.config.target.id,r=Ab.config.igApi.maxPeersScan;if(!n||!r)return;let i=await jb.api.fetchUserProfileById(n);if(t())return;let{followerCount:a,followingCount:o,postCount:s}=i.result||{};Nb.is.nil(a)&&this.throw(`Failed to fetch a profile follower count`,i?.error),Nb.is.nil(o)&&this.throw(`Failed to fetch a profile following count`,i?.error),Nb.is.nil(s)&&this.throw(`Failed to fetch a profile post count`,i?.error);let c=Date.now(),l=this.graphFollowers.at(-1)?.value||0,u=this.graphFollowers.length>=1?a-l:null,d=0,f=(this.data.followers||[]).filter(e=>e.isFollower),p={};f.forEach((e,t)=>{p[e.id]=t});let m=new Set,ee=u===null||f.length<Math.min(r,l)-100,te=await jb.api.fetchUserPeers(n,{type:`followers`,total:r,onBatch:({batch:e,items:n})=>{if(t())return!1;if(e.forEach(e=>{Pb.controller.fetchAndCache(e.username,e.avatarUrl)}),n.forEach(e=>{e.scannedOn=c,e.isFollower=!0}),this.data.scanFollowers=n,u===null)return!0;let r=!1;return e.forEach(e=>{m.add(e.id)}),e.forEach(e=>{if(p[e.id]===void 0)u--,r=!0;else for(;d<p[e.id];)m.has(f[d].id)||(u++,r=!0),d++}),ee||u!==0||r||n.length<75}});if(t())return;if(te.error)throw te.error;te=te.result;let ne=()=>{this.graphFollowers.push({date:c,value:a}),this.graphFollowings.push({date:c,value:o}),this.graphPosts.push({date:c,value:s}),this._pruneOldGraphValues()};this.data.followers?.length?(Mb.transaction(e=>{ne();let t=te,n=new Set(t.map(e=>e.id)),r=this.data.followers,i={};r.forEach(e=>{i[e.id]=e});let a=0,o=null;t.forEach(e=>{let t=i[e.id];if(t)t.unfollowedOn||(o||=new Set,o.add(t.id)),e.scannedOn=t.scannedOn,t.likeActions&&(e.likeActions=t.likeActions),t.followActions&&(e.followActions=t.followActions),t.followedOn&&(e.followedOn=t.followedOn),t.unfollowedOn&&(e.followedOn=c,a++);else{e.followedOn=c,a++;let t=kb.scripts.findAccountsInTasks(e.id);if(t.length>0){let{likeActions:n,followActions:r}=t[0];n&&(e.likeActions=n),r&&(e.followActions=r)}}});let s=Ab.config.igApi.maxPeersScan-a;r.forEach((e,r)=>{let i=n.has(e.id);if(i||(t.push(e),n.add(e.id)),o?.has(e.id)){o.delete(e.id);return}o?.size!==0&&(r>s||!i&&!e.unfollowedOn&&(e.isFollower=!1,e.unfollowedOn=c,delete e.followedOn))}),this.data.followers=[...t.filter(e=>e.isFollower),...t.filter(e=>!e.isFollower)],this.data.scanFollowers=null,this.data.scannedOn=Date.now()}),Ib.send(`scripts:peers-scan-completed`,{fullScan:ee,firstScan:!1})):(Mb.transaction(e=>{ne(),this.data.followers=te,this.data.scanFollowers=null,this.data.scannedOn=Date.now()}),Ib.send(`scripts:peers-scan-completed`,{fullScan:ee,firstScan:!0}))}get nextRunDelay(){return Ab.config.scripts.peersRunInterval}_pruneOldGraphValues(){let e=Date.now()-Nb.time.YEAR;this.data.graphFollowers=this.graphFollowers.filter(t=>t.date>=e),this.data.graphFollowings=this.graphFollowings.filter(t=>t.date>=e),this.data.graphPosts=this.graphPosts.filter(t=>t.date>=e)}},Lb=class extends Ob.TaskAutopilotHandler{get likeablePeers(){return this.getLikeablePeers(this.task.followers)}get canRun(){return this.likeablePeers.length>0}async run({likesToMake:e}={}){let t=this.likeablePeers.sort((e,t)=>!e.isFollower&&t.isFollower?-1:e.isFollower&&!t.isFollower?1:e.followedOn&&!t.followedOn?-1:!e.followedOn&&t.followedOn?1:t.scannedOn-e.scannedOn);await this.runLikeAutopilot({likesToMake:e,peers:t})}get saturation(){return super.saturation*5}},Ob.Task.typeClasses.set(`peers`,Ob.TaskPeers)})),zb,Bb,Vb,Hb,Ub,Wb,Gb,Kb,qb,Jb=o((()=>{({$scripts:zb,$s:Bb,$igApi:Vb,$avatar:Hb,$utils:Ub,$starter:Wb,$bus:Gb,$analytics:Kb}=app),zb.TaskExport=class extends zb.Task{static create(e=Bb.auth,t=`followers`){let n={...zb.Task.defaultState(e),type:`export`},r=new zb.TaskExport(n);return r.config.target={id:e.userId||e.id,username:e.username,fullName:e.fullName,avatarUrl:e.avatarUrl},r.config.resultType=t,r.config.maxAccounts=1e5,r.edit={target:r.config.target,resultType:r.config.resultType,maxAccounts:r.config.maxAccounts},r.data.results=[],r.data.scannedOn=null,r.data.sections={},r.data.searchQuery=``,r.data.filterBots=null,r.data.filterFaceless=null,r.data.filterFresh=null,r}constructor(e){super(e),this.autopilot=new qb(this)}get target(){return this.config.target}set target(e){this.config.target=e}get resultType(){return this.config.resultType}set resultType(e){this.config.resultType=e}get maxAccounts(){return this.config.maxAccounts}set maxAccounts(e){this.config.maxAccounts=e}get results(){return this.data.results}set results(e){this.data.results=e}get title(){return(this.isInEditMode?this._state.edit.resultType:this.resultType)===`followers`?`Export Followers`:`Export Followings`}get toggleTooltip(){return`Keep ON to export profile data.`}get progressDetails(){let e=this.data.results?.length>0||[`active`,`running`].includes(this.status)?`results`:`start`,t=this.status===`error`?`alert-circle`:`clock`,n=this.status===`error`?this.error?.code===`redirected`?`Last scan failed, please relogin`:`Last scan failed, please restart`:this.status===`running`?`Scanning ${this.resultType}`:this.status===`canceled`?`Turn ON to rescan account`:null,r=this.status===`error`?String(this.error?.message||this.error?.code||this.error):null,i=100;if(this.status===`running`){let e=this.maxAccounts,t=(this.data.results||[]).length;i=Ub.clamp(0,100*t/e,100)}return{type:e,icon:t,message:n,tooltip:r,progress:i}}get editable(){return this.status===`canceled`&&!this.data.results?.length}get isInEditMode(){return!!this._state.edit}get deletable(){return!0}get showHeaderEditButtons(){return!1}enterEditMode(){this.editable&&(this._state.edit={target:{...this.config.target},resultType:this.config.resultType,maxAccounts:this.config.maxAccounts})}saveEditMode(){this._state.edit&&(this.target=this._state.edit.target,this.resultType=this._state.edit.resultType,this.maxAccounts=this._state.edit.maxAccounts,this._state.edit=null,Gb.send(`scripts.toggleTask`,this.id))}cancelEditMode(){this._state.edit&&(this.data.results?.length?this._state.edit=null:this.delete())}renderCardContent(){return React.createElement(zb.TaskCardExport,{task:this})}renderBodyContent(){return React.createElement(zb.TaskBodyExport,{task:this})}get usage(){return{resultType:this.resultType,maxAccounts:this.maxAccounts,accountCount:this.results?.length||0,targetUsername:this.target?.username,targetIsSelf:this.target?.id===Bb.auth?.userId}}async run(){let e=Bb.auth.userId,t=()=>this.isDeleted||this.status!==`running`||e!==Bb.auth.userId||!Wb.controller.online,n=this.config.target.id;if(!n||!this.maxAccounts)return;let r=await Vb.api.fetchUserProfileById(n);if(t())return;if(r.error)throw r.error;let i=this.resultType===`followers`?r.result.followerCount:r.result.followingCount;this.maxAccounts=Math.min(i,this.maxAccounts);let a=this.maxAccounts,o=this.resultType===`followers`?`followers`:`followings`,s=Date.now(),c=await Vb.api.fetchUserPeers(n,{type:o,total:a,onBatch:({batch:e,items:n})=>t()?!1:(e.forEach(e=>{Hb.controller.fetchAndCache(e.username,e.avatarUrl)}),n.forEach(e=>{e.scannedOn=s}),this.data.results=n,!0)});if(!t()){if(c.error)throw c.error;this.data.results=c.result||[],this.data.scannedOn=Date.now(),Kb.send(`scripts:export-scan-completed`,{resultType:this.resultType,accountCount:this.results.length,targetUsername:this.target.username})}}delete(){Kb.send(`scripts:export-task-deleted`,{resultType:this.resultType,accountCount:this.results.length,hadResults:this.results.length>0}),super.delete()}},qb=class extends zb.TaskAutopilotHandler{get likeablePeers(){return this.getLikeablePeers(this.task.results)}get canRun(){return this.likeablePeers.length>0}async run({likesToMake:e}={}){let t=this.likeablePeers.sort((e,t)=>t.scannedOn-e.scannedOn);await this.runLikeAutopilot({likesToMake:e,peers:t})}},zb.Task.typeClasses.set(`export`,zb.TaskExport)})),J,Yb,Xb,Zb,Qb,$b,ex,tx,nx=o((()=>{({$scripts:J,$s:Yb,$igApi:Xb,$avatar:Zb,$starter:Qb,$utils:$b,$analytics:ex,$fusion:tx}=app),J.TaskAntibot=class extends J.Task{static create(e=Yb.auth){let t={...J.Task.defaultState(e),type:`antibot`,status:tx.config.scripts.defaultTaskStatus?.antibot||`canceled`},n=new J.TaskAntibot(t);return n.config.target={id:e.userId||e.id,username:e.username,fullName:e.fullName,avatarUrl:e.avatarUrl},n.config.maxFollowers=tx.config.scripts.antibot.maxFollowers,n.edit=null,n.data.followers=[],n.data.scannedOn=null,n.data.filterType=`unreviewed`,n.data.searchQuery=``,n.data.sections={"high-risk":{collapsed:!1,currentPage:1},"medium-risk":{collapsed:!1,currentPage:1},"low-risk":{collapsed:!1,currentPage:1},"for-removal":{collapsed:!1,currentPage:1},"not-bot":{collapsed:!1,currentPage:1},removed:{collapsed:!1,currentPage:1}},n.data.hiddenInfoCards=[],n.data.backgroundJob={lastRemovalOn:null,isRemoving:!1,removalsToday:0,removalsResetDate:null,removalTimestamps:[]},n}get title(){return`Remove Bot Followers`}get target(){return this.config.target}set target(e){this.config.target=e}get maxFollowers(){return this.config.maxFollowers}set maxFollowers(e){this.config.maxFollowers=e}get backgroundJob(){return this.data.backgroundJob}set backgroundJob(e){this.data.backgroundJob=e}get followers(){return this.data.followers}set followers(e){this.data.followers=e}get filterType(){return this.data.filterType}set filterType(e){this.data.filterType=e}get stats(){let e=this.followers||[];return{...e.reduce((e,t)=>(t.userMark||(t.riskLevel===`high`?e.highRisk++:t.riskLevel===`medium`?e.mediumRisk++:t.riskLevel===`low`&&e.lowRisk++),t.userMark===`for-removal`?e.markedForRemoval++:t.userMark===`not-bot`?e.markedNotBots++:t.userMark===`removed`&&e.removed++,e),{highRisk:0,mediumRisk:0,lowRisk:0,markedForRemoval:0,markedNotBots:0,removed:0}),total:e.length}}get ownedByCurrentUser(){return this.config.target.id===Yb.auth.userId}get editable(){return!1}get deletable(){return!0}get progressDetails(){let e=this.followers?.length>0||[`active`,`running`].includes(this.status)?`results`:`start`,t=this.status===`error`?`alert-circle`:`clock`,n=this.status===`error`?this.error?.code===`removal-failed`?`Auto-removal failed`:this.error?.code===`redirected`?`Last scan failed, please relogin`:`Last scan failed, please restart`:this.status===`running`?`Looking for bots in followers`:this.status===`canceled`?`Turn ON to find bots`:this.status===`active`?`Keep ON to scan for bots`:null,r=this.status===`error`?String(this.error?.message||this.error?.code||this.error):null,i=100;if(this.status===`running`){let e=this.maxFollowers,t=this.followers.length;i=$b.clamp(0,100*t/e,100)}return{type:e,icon:t,message:n,tooltip:r,progress:i}}scoreFollower(e){let t=J.isBot(e),n=J.isFaceless(e),r=J.isFresh(e),i=[t,n,r].filter(Boolean).length,a;a=t&&(n||r)?`high`:i>=1?`medium`:`low`,e.riskLevel=a,e.isBot=t,e.isFaceless=n,e.isFresh=r,e.scannedOn=Date.now(),e.userMark=e.userMark||null,e.markedOn=e.markedOn||null,e.removedOn=e.removedOn||null}_getFollowersFromTask(e){return e.type===`peers`?e.data.followers.filter(e=>e.isFollower):e.data.results}_getFollowerCountFromTask(e){return this._getFollowersFromTask(e).length}_isFreshEnough(e,t){let n=tx.config.scripts.antibot.freshnessMargin;return e>=t*(1-n)&&e<=t*(1+n)}_preserveUserMarks(e,t){e.userMark===`removed`?(e.userMark=null,e.markedOn=null,e.removedOn=null):e.userMark&&(t.userMark=e.userMark,t.markedOn=e.markedOn,t.removedOn=e.removedOn)}_mergeFollowersIntoArray(e){Yb.transaction(()=>{e.forEach(e=>{let t=this.followers.findIndex(t=>t.id===e.id);if(t===-1){this.followers.push(e);return}let n=this.followers[t];this._preserveUserMarks(n,e),Object.assign(n,e)})})}_processScanBatch({batch:e,items:t},n){return n()?!1:(e.forEach(e=>{Zb.controller.fetchAndCache(e.username,e.avatarUrl)}),e.forEach(e=>this.scoreFollower(e)),this._mergeFollowersIntoArray(e),!0)}_processScanBatchWithOverlap(e,t,n){if(!this._processScanBatch(e,t))return!1;if(!n||++n.batchCount<n.minBatchesBeforeAbort)return!0;let{batch:r}=e,i=r.filter(e=>n.followerIds.has(e.id)).length/r.length;if(i<n.overlapThreshold)return!0;let a=(i*100).toFixed(0);return J.log(`antibot detected ${a}% followers overlap in batch ${n.batchCount} -> stop scan`),!1}markFollowers(e,t){e=$b.ensureArray(e),Yb.transaction(()=>{let n=Date.now();e.forEach(e=>{e.userMark=t,e.markedOn=n}),this.filterType===`unreviewed`&&this.followers.filter(e=>!e.userMark).length===0&&(this.filterType=`for-removal`)})}findReusableTask(e){let t=this.config.target.id,n=Yb.scripts.tasks.filter(e=>e.config.target?.id===t?e.type===`peers`?e.data.followers?.length>0:e.type===`export`&&e.config.resultType===`followers`?e.data.results?.length>0:!1:!1);if(n.length===0)return null;let r=n.filter(t=>{let n=this._getFollowerCountFromTask(t);return this._isFreshEnough(n,e)});return r.length===0?null:r.sort((e,t)=>{let n=e.data.scannedOn||0;return(t.data.scannedOn||0)-n})[0]}get usage(){let e=this.stats;return{followerCount:e.total,highRiskCount:e.highRisk,mediumRiskCount:e.mediumRisk,lowRiskCount:e.lowRisk,markedForRemoval:e.markedForRemoval,removedCount:e.removed,removalsToday:this.backgroundJob?.removalsToday||0,lastRemovalOn:this.backgroundJob?.lastRemovalOn}}async run(){let e=()=>this.isDeleted||this.status!==`running`||!this.ownedByCurrentUser||!Qb.controller.online;Date.now()-(this.data.scannedOn||0)>=tx.config.scripts.antibot.scanCooldown&&(await this.scanFollowers(e),e())||await this.removeMarkedFollowers(e)}async scanFollowers(e){let t=this.config.target.id,n=await Xb.api.fetchUserProfileById(t);if(e())return;if(n.error)throw n.error;let r=n.result.followerCount;if(this.maxFollowers=Math.min(r,this.maxFollowers),this.followers.length===0){let e=this.findReusableTask(r);if(e){J.log(`antibot is reusing follower data from ${e.type} task`);let t=this._getFollowersFromTask(e);t=t.map(e=>({...e})),t.forEach(e=>this.scoreFollower(e)),this.followers=t,this.data.scannedOn=Date.now(),Yb.transaction(()=>{Yb.scripts.showBodyPanel=!0,Yb.scripts.selectedTaskId=this.id}),ex.send(`scripts:antibot-scan-reused`,{sourceType:e.type,followerCount:this.followers.length});return}}let i=this.followers.length!==0&&{followerIds:new Set(this.followers.map(e=>e.id)),overlapThreshold:.5,minBatchesBeforeAbort:2,batchCount:0},a=await Xb.api.fetchUserPeers(t,{type:`followers`,total:this.maxFollowers,onBatch:t=>this._processScanBatchWithOverlap(t,e,i)});if(e())return;if(a.error)throw a.error;this.data.scannedOn=Date.now();let o=this.stats;ex.send(`scripts:antibot-scan-completed`,{followerCount:this.followers.length,high:o.highRisk,medium:o.mediumRisk,low:o.lowRisk})}get nextRunDelay(){let e=tx.config.scripts.antibot;return $b.random({from:e.runDelayMin,to:e.runDelayMax,round:!0})}getNextMarkedFollower(){return this.followers&&this.followers.find(e=>e.userMark===`for-removal`)||null}canTriggerRemoval(){let e=this.backgroundJob.lastRemovalOn||0;return Date.now()-e>=tx.config.scripts.antibot.removalCooldown}async triggerRemoval(){if(!this.canTriggerRemoval())return J.log(`antibot removal on cooldown, skipping`),!1;if((this.followers?.filter(e=>e.userMark===`for-removal`)||[]).length===0)return J.log(`antibot no followers marked for removal, skipping`),!1;J.log(`antibot triggering immediate removal`);let e=()=>this.isDeleted||this.status!==`active`||!this.ownedByCurrentUser||!Qb.controller.online;try{await this.removeMarkedFollowers(e)}catch(e){J.error(`antibot failed to trigger removal`,e)}return!0}calculateRemovalCount(e=Yb.auth?.followersCount||0){let t=tx.config.scripts.antibot.removalRanges,n=t.find(t=>e<t.maxFollowers)||t[t.length-1];return{min:n.min,max:n.max}}async removeMarkedFollowers(e){if(!Yb.scripts?.purchased)return;if(this.backgroundJob.isRemoving){let e=this.backgroundJob.lastRemovalOn||0;if(Date.now()-e<tx.config.scripts.antibot.removalStaleTimeout){J.log(`antibot removal already in progress, skipping`);return}J.log(`antibot removal flag was stale, resetting`),this.backgroundJob.isRemoving=!1}this.backgroundJob.isRemoving=!0,this.error?.code===`removal-failed`&&(this.error=null,this.status=`active`);let t=new Date,n=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,`0`)}-${String(t.getDate()).padStart(2,`0`)}`;this.backgroundJob.removalsResetDate!==n&&(this.backgroundJob.removalsToday=0,this.backgroundJob.removalsResetDate=n);let r=tx.config.scripts.antibot,i=r.dailyCap-this.backgroundJob.removalsToday;if(i<=0){J.log(`antibot daily cap reached, skipping removal`),this.backgroundJob.isRemoving=!1;return}let a=Date.now()-$b.time.HOUR;this.backgroundJob.removalTimestamps=(this.backgroundJob.removalTimestamps||[]).filter(e=>e>a);let o=this.backgroundJob.removalTimestamps.length,s=r.hourlyCap-o;if(s<=0){J.log(`antibot hourly cap reached, skipping removal`),this.backgroundJob.isRemoving=!1;return}let{min:c,max:l}=this.calculateRemovalCount(),u=$b.random({from:c,to:l,round:!0}),d=Math.min(u,i,s),f=0;for(;f<d;){let t=this.getNextMarkedFollower();if(!t||e())break;try{let e=await Xb.api.removeFollower(t.id);if(e.error)throw Error(e.error.message||e.error.code);if(e.result?.status!==`ok`)throw Error(`Remove follower failed: status not ok`);if(e.result?.isFollower!==!1)throw Error(`Remove follower failed: user is still a follower`);Yb.transaction(()=>{t.userMark=`removed`,t.removedOn=Date.now()}),f++,this.backgroundJob.removalsToday++,this.backgroundJob.removalTimestamps.push(Date.now());let n=tx.config.scripts.antibot;await $b.sleep({min:n.removalSleepMin,max:n.removalSleepMax}),J.log(`antibot removed follower @${t.username}`)}catch(e){J.error(`antibot failed to remove @${t.username}`,e),this.status=`error`,this.error={code:`removal-failed`,message:e.message||String(e)};break}}if(f>0&&(this.backgroundJob.lastRemovalOn=Date.now()),this.backgroundJob.isRemoving=!1,this.status===`error`&&this.error?.code===`removal-failed`)ex.send(`scripts:antibot-removal-failed`,{code:this.error.code,message:this.error.message});else if(f>0){let e=this.stats.markedForRemoval;ex.send(`scripts:antibot-removal-completed`,{removedCount:f,totalMarked:e})}f>0&&J.log(`antibot removed ${f} followers`)}delete(){ex.send(`scripts:antibot-task-deleted`,{stats:this.stats}),super.delete()}renderCardContent(){return React.createElement(J.TaskCardAntibot,{task:this})}renderBodyContent(){return React.createElement(J.TaskBodyAntibot,{task:this})}},J.Task.typeClasses.set(`antibot`,J.TaskAntibot)}));async function rx(e,t={},n=mx.timeout){return new Promise((r,i)=>{(async()=>{let a=setTimeout(()=>{a&&(a=null,i({message:`Timed out`}))},n);try{let n=await ix(e,{credentials:`include`,...t});if(!a)return;if(clearTimeout(a),a=null,n.ok){r(n);return}if(n.status!==400){i({message:String(n.status)});return}try{let e=await n.text();i({message:String(n.status),body:e})}catch{i({message:String(n.status),body:null})}}catch(e){if(!a)return;clearTimeout(a),a=null,i(e)}})()})}async function ix(e,t){if(dx(`fetching ${e}`),t||={},t.method=t.method||`GET`,t.method&&t.method!==`GET`)return fetch(e,t);if(gx<=0){let t=Date.now();hx=hx.filter(e=>t-e.on<mx.cacheTtl);let n=hx.find(t=>t.url===e);if(n)return dx(`fetch cache hit`),n.res.clone()}else dx(`ignoring fetch cache`);gx>0&&gx--;let n=await fetch(e,t);return hx.push({url:e,on:Date.now(),res:n.clone()}),n}async function ax(...e){return await(await rx(...e)).text()}async function ox(...e){return await(await rx(...e)).json()}function sx(){return hx}function cx(){dx(`cleaning fetcher cache`),hx=[]}function lx(e=1){gx+=e}function ux(){return gx>0}function dx(...e){mx.logRequests&&fx.logDev(...e)}var fx,px,mx,hx,gx,_x=o((()=>{({$fetcher:fx,$utils:px}=app),fx.assign({fetchWithTemplate:px.fetchWithTemplate,fetch:rx,fetchText:ax,fetchJson:ox,getCache:sx,cleanCache:cx,ignoreCache:lx,isIgnoreCache:ux}),mx={timeout:20*1e3,cacheTtl:1440*60*1e3,logRequests:!1},hx=[],gx=0})),vx,yx,bx,xx,Sx,Cx=o((()=>{({$store:vx,$utils:yx,$dateFns:bx,$mobx:xx}=app),Sx={eventsLength:null,events:null},vx.adapter.activity={get eventsJS(){let e=this.events.length||0;return(Sx.eventsLength!==e||!Sx.events)&&(Sx.events=xx.toJS(this.events),Sx.eventsLength=e),Sx.events},findEventsBy(e,t=void 0){let n=[],r=this.eventsJS;for(let i of r)if(e(i)&&(n.push(i),t&&n.length>=t))break;return n},accountsEngagedToday({taskId:e}={}){let t=bx.startOfDay(new Date).getTime(),n=this.eventsJS,r=new Set;for(let i of n){if(i.time<t)break;i.type!==`like`&&i.type!==`follow`||e&&i.taskId!==e||i.post?.owner&&r.add(i.post.owner)}return r.size},likesMadeToday({taskId:e}={}){let t=0,n=bx.startOfDay(new Date).getTime(),r=this.eventsJS;for(let i of r){if(i.time<n)break;i.type===`like`&&(e&&i.taskId!==e||t++)}return t},likesMadeYesterday(){let e=0,t=bx.startOfDay(new Date).getTime(),n=t-yx.time.DAY,r=this.eventsJS;for(let i of r){let r=i.time;if(r<n)break;r>=t||i.type===`like`&&e++}return e},likesMadeWithin(e=yx.time.HOUR){let t=0,n=Date.now()-e,r=this.eventsJS;for(let e of r){if(e.time<n)break;e.type===`like`&&t++}return t},isPostLiked({id:e,code:t}){let n=this.eventsJS.find(n=>e&&n.post?.id===e||t&&n.post?.code===t);return n?n.type===`like`?!0:n.type===`unlike`?!1:null:null},recentLikedPosts(e,{taskId:t}={}){let n=this.eventsJS;if(!n.length)return[];let r=[],i=new Set;for(let a of n)if(!(a.type!==`like`||!a.post?.id||!a.post?.img||i.has(a.post.id))&&!(t&&a.taskId!==t)&&(r.push(a.post),i.add(a.post.id),r.length>=e))break;return r},findMaxEventsInRollingWindow(e,t){let n=this.eventsJS;if(!n.length)return{maxCount:0,startDate:null,endDate:null};let r=t?n.filter(t):n;if(!r.length)return{maxCount:0,startDate:null,endDate:null};let i=0,a=null,o=null,s=[...r].reverse();for(let t=0;t<s.length;t++){let n=s[t].time,r=n-e,c=0,l=n;for(let e=t;e>=0&&s[e].time>=r;e--)c++,l=s[e].time;c>i&&(i=c,a=l,o=n)}return{maxCount:i,startDate:a?new Date(a):null,endDate:o?new Date(o):null}},computeLikeActivityHeatmap({taskId:e}={}){let t=this.eventsJS;if(!t.length)return null;let n=Date.now(),r=bx.startOfDay(bx.subDays(new Date(n),7)).getTime(),i=bx.startOfDay(new Date(n)).getTime(),a=[];for(let n of t){if(n.time<r)break;n.type===`like`&&(e&&n.taskId!==e||a.push(n))}if(!a.length)return null;let o=Array(7).fill(null).map(()=>Array(24).fill(0)),s=0;for(let e of a){let t=new Date(e.time),n=Math.floor((i-bx.startOfDay(t).getTime())/yx.time.DAY);if(n<0||n>=7)continue;let r=t.getHours();o[n][r]++,s=Math.max(s,n)}return o.slice(0,s+1)},dropEvents(e){let t=Object.entries(e);this.events=this.events.filter(e=>!t.every(([t,n])=>yx.get(e,t)===n))},storeEvent(e){if(!e.type)throw Error(`Event type is required`);e=yx.cloneDeep(xx.toJS(e)),e.by=e.by||`user`,e.time=Date.now(),this.stripUnusedPostFields(e),this.events.unshift(e)},stripUnusedPostFields(e){e.post&&(delete e.post.imgMedium,delete e.post.imgx,delete e.post.type,delete e.post.caption,delete e.post.isLiked,delete e.post.isVideo,delete e.post.stats)}}}));function wx(e,t){return Nx(e,`/auth/is-taken`,{body:{email:t}})}function Tx(e,t,n){return Nx(e,`/auth/login`,{body:{email:t,password:n}})}function Ex(e,t,n,r,i,a){return Nx(e,`/auth/register`,{body:{email:t,password:n,firstName:r,lastName:i,usernames:a}})}function Dx(e,t,n){return Nx(e,`/auth/verify-email`,{body:{email:t,otp:n}})}function Ox(e,t,n,r){return Nx(e,`/auth/change-password`,{body:{email:t,otp:n,newPassword:r}})}function kx(e,t,n){return Nx(e,`/auth/resend-otp`,{body:{email:t,password:n}})}function Ax(e,t){return Nx(e,`/auth/recover-password`,{body:{email:t}})}function jx(e,t){return Nx(e,`/auth/delete-account`,{method:`POST`,token:t})}function Mx(e,t){return Nx(e,`/fspring/account-management-url`,{method:`GET`,token:t})}function Nx(e,t,n){return e||={updateSnapshot:()=>{},applySnapshot:()=>{},getSnapshot:()=>({})},e.updateSnapshot(e=>{e.loading=!0}),Fx.api.send(t,n).then(t=>{if(!t||t.status!==`ok`)throw t;return e.updateSnapshot(e=>{e.loading=!1}),t}).catch(n=>{let r=e.getSnapshot();throw r.loading=!1,n.name===`TypeError`&&n.message===`Failed to fetch`?(r.statusText=`Billing server is not responding. Please check that you are online or try again later.`,Ix.controller.sendError(`API is not responding at ${t}`,`error`,{error:n},{actor:`auth`})):n.status===`bad-query`?(r.statusText=`Please enter a valid email address (e.g., name@gmail.com).`,r.accountForm.errors.email=!0):n.status===`account-not-found`?(r.statusText=`Account for this email not found. Please check the email address you entered or create a new account instead.`,r.statusButtons=[{label:`CREATE NEW ACCOUNT`}]):n.status===`wrong-password`?(r.statusText=`Incorrect email / password combination. Please check the password or recover it.`,r.statusButtons=[{label:`I FORGOT MY PASSWORD`}]):n.status===`password-not-set`?(r.statusText=n.message||`Please use 'Forgot Password' to reset your password.`,r.statusButtons=[{label:`I FORGOT MY PASSWORD`}]):n.status===`account-is-not-active`?r.statusText=`This account has been disabled. Please create a new account instead.`:n.status===`email-already-verified`?(r.confirmationCodeText=null,r.statusText=`This email address has been verified. Please log in instead.`):n.status===`otp-does-not-match`?r.statusText=`Verification code does not match our records. Please check your inbox for the code we sent.`:n.status===`email-already-in-use`?(r.statusText=`This email is already in use, please try to login instead or use a different email address.`,r.statusButtons=[{label:`LOGIN INSTEAD`}]):n.status===`email-is-not-verified`||(r.statusText=`Oops... Something went wrong. Please try to login again later.`,Ix.controller.sendError(`Unexpected API error at ${t}`,`error`,{error:n},{actor:`auth`})),e.applySnapshot(r),n})}var Px,Fx,Ix,Lx=o((()=>{({$billing:Px,$network:Fx,$sentry:Ix}=app),Px.connector={isTaken:wx,login:Tx,register:Ex,verifyEmail:Dx,changePassword:Ox,resendOtp:kx,recoverPassword:Ax,deleteAccount:jx,accountManagementUrl:Mx}})),Rx,zx=o((()=>{({$store:Rx}=app),Rx.adapter.adblock={get totalBlocked(){let e=this.adsStoryRemoved+this.adsFeedRemoved;return e>999999?e=(e/1e6).toFixed(1)+`m`:e>9999&&(e=(e/1e3).toFixed(1)+`k`),e}}})),Bx,Vx=o((()=>{({$igApi:Bx}=app),Bx.config={appId:`936619743392459`}})),Hx,Ux=o((()=>{({$igApi:Hx}=app),Hx.ec={noNetwork:`no-network`,timedOut:`timed-out`,redirectToLogin:`redirect-to-login`,redirected:`redirected`,suspended:`suspended-400`,missingPost:`missing-post-400x`,missingUser:`missing-user`,forbidden:`forbidden-403`,notFound:`not-found-404`,tooManyRequests:`too-many-requests-429`,serverIsDown:`server-is-down-500`,badGateway:`bad-gateway-502`,serviceUnavailable:`service-unavailable-503`,serviceDown:`service-down-560`,other:`other`}})),Wx,Gx,Kx,qx,Jx=o((()=>{({$igApi:Wx,$sentry:Gx}=app),Kx=Wx.ec,qx={"Failed to fetch":Kx.noNetwork,"Timed out":Kx.timedOut,"Redirect to login":Kx.redirectToLogin,Redirected:Kx.redirected,"Missing user":Kx.missingUser,400:Kx.suspended,"400x":Kx.missingPost,403:Kx.forbidden,404:Kx.notFound,429:Kx.tooManyRequests,500:Kx.serverIsDown,502:Kx.badGateway,503:Kx.serviceUnavailable,560:Kx.serviceDown},Wx.Response=class e{constructor(e,t,n,r){this.result=e,this.error=t?{code:t,message:n,body:r}:null}isSuccess(){return!this.error}reportError(e,t){return this.error.code===Kx.other&&Gx.controller.sendError(`ig-api.${e}: unknown error`,`error`,{details:t},{actor:`ig-api`}),this}static ofResult(t){return new e(t)}static ofNetworkError(t){return t&&t.message&&t.message===`400`&&(t&&t.body===`missing media`||t&&t.body===`Sorry, this photo has been deleted`)&&(t.message=`400x`),new e(null,t.code||t&&t.message&&qx[t.message]||Kx.other,t&&t.message||null,t&&t.body||null)}}})),Yx,Xx=o((()=>{({$igApi:Yx}=app),Yx.PostOptions={hideLikes:Boolean,disableComments:Boolean},Yx.PostMention={userId:String,x:Number,y:Number,"isCollaborator?":Boolean},Yx.PostLocation={id:String,lat:Number,lng:Number},Yx.PostCarouselItem={blob:Blob,"mentions?":[Yx.PostMention],"cover?":[null,Blob]},Yx.StorySticker={x:Number,y:Number,width:Number,height:Number,rotation:Number},Yx.StoryLink={url:String,...Yx.StorySticker},Yx.StoryLocation={id:String,...Yx.StorySticker},Yx.StoryMention={id:String,...Yx.StorySticker},Yx.StoryAttachedPost={postId:String,ownerId:String,...Yx.StorySticker}}));async function Zx(){try{return await Qx()}catch(e){CS.error(`Failed to fetch viewer info (v2)`,e)}try{return await $x()}catch(e){CS.error(`Failed to fetch viewer info (v1)`,e)}throw Error(`Failed to fetch viewer info`)}async function Qx(){let e=xS().fetchViewerInfoV2,t=(await Y.fetchWithTemplate(e)).split(`
`).find(t=>t.includes(e.dataLineIncludes));if(!t)return null;let n=t.split(e.dataLineAfter)[1].replaceAll(`\\"`,`"`).replaceAll(`\\/`,`/`).replaceAll(`\\u`,`u`),r=(e,t=`string`)=>{try{if(t===`bool`){let t=n.split(`"${e}":`)[1];if(!t)return null;let r=t.match(/^(true|false)/);return r?r[1]===`true`?!0:r[1]===`false`?!1:null:null}else{let t=n.split(`"${e}":"`)[1];return t?t?.split(`"`)[0]:null}}catch(t){return CS.error(`Failed to extract "${e}"`,t),null}},i=(e,t=`string`)=>{e=Y.ensureArray(e);for(let n of e){if(!n)continue;let e=r(n,t);if(e!==null)return e}return null},a=i(e.extractViewerId);if(!a)throw Error(`Failed to fetch viewer id`);let o=i(e.extractAvatarUrl);return o&&=o.replaceAll(`\\u0026`,`&`),{userId:a,username:i(e.extractUsername),fullName:i(e.extractFullName),isBusiness:i(e.extractIsBusiness,`bool`),isProfessional:i(e.extractIsProfessional,`bool`),avatarUrl:o,email:null}}async function $x(){let e=xS().fetchViewerInfoV1,{username:t,email:n}=await Y.fetchWithTemplate(e);if(!t)return null;let r=await pS(t);return r?{userId:r.id,username:r.username,fullName:r.fullName,email:n||null,avatarUrl:r.avatarUrl,isBusiness:r.isBusiness,isProfessional:r.isProfessional}:null}async function eS(){let e=xS().fetchViewerInfoV1,{email:t}=await Y.fetchWithTemplate(e);return t||null}async function tS(e){let t=e.id;if(!t){if(!e.code)throw Error(`Either post.id or post.code must be provided`);let n=xS().postContent;t=(await Y.fetchWithTemplate(n,{code:e.code})).split(n.mediaId.start)[1].split(n.mediaId.end)[0]}let n=xS().likePost;return await Y.fetchWithTemplate(n,{mediaId:t})}async function nS(e){let t=e.id;if(!t){if(!e.code)throw Error(`Either post.id or post.code must be provided`);let n=xS().postContent;t=(await Y.fetchWithTemplate(n,{code:e.code})).split(n.mediaId.start)[1].split(n.mediaId.end)[0]}let n=xS().unlikePost;return await Y.fetchWithTemplate(n,{mediaId:t})}async function rS(e){let t=xS().followUser;return await Y.fetchWithTemplate(t,{userId:e})}async function iS(e){let t=xS().unfollowUser;return await Y.fetchWithTemplate(t,{userId:e})}async function aS(e){let t=xS().removeFollower;return await Y.fetchWithTemplate(t,{userId:e})}async function oS(){let e=xS().explorePostsContent;return(await Y.fetchWithTemplate(e)).split(e.postIds.start).slice(1).map(t=>t.split(e.postIds.end)[0]).map(e=>({code:e}))}async function sS(){let e=xS().loginActivity,t=await Y.fetchWithTemplate(e);return t.status===`ok`?t:null}async function cS(e=ES.userId,{type:t=`followers`,total:n=25,onBatch:r=null}={}){let i=t===`followers`?xS().userFollowers:xS().userFollowings,a=[],o=i.rootCursor;for(;a.length<n;)try{let n=await Y.fetchWithTemplate(i,{userId:e,type:t,cursor:o}),s=(n.items||[]).map(e=>yS(e,i.fields));if(a.push(...s),CS.log(`collected ${a.length} peers`),r&&!r({batch:s,items:a})||!n.hasMore)break;o=n.cursor}catch(e){CS.error(`failed to fetch peers`,e);break}return a.slice(0,n)}async function lS(e=ES.userId,{type:t=`followers`,total:n=25,maxId:r=null,withStatuses:i=!0}={}){let a=xS().friendships,o=xS().friendshipsStatus,s=[],c=e=>{e.status!==`ok`||!e.users||Object.keys(e.users).forEach(t=>{let n=s.find(e=>e.id===t);n&&Object.assign(n,e.users[t])})};for(;s.length<n;){let l=Math.min(n,a.maxCount),u=await Y.fetchWithTemplate(a,{userId:e,type:t,count:l,maxId:r});if(u.status!==`ok`)break;if(s.push(...u.items),CS.log(`collected ${s.length} friendships`),i&&u.items?.length){let e=u.items.map(e=>e.id).join(`,`);try{await Y.fetchWithTemplate(o,{userIds:e}).then(e=>c(e))}catch(e){CS.error(`failed to fetch friendship statuses`,e)}}if(!u.hasMore)break;r=u.maxId}return s=s.slice(0,n),s.map(e=>{let t={id:String(e.pk||e.id),username:e[a.fields.username],fullName:e[a.fields.fullName],avatarUrl:e[a.fields.avatarUrl]};return Y.is.nil(e[a.fields.isPrivate])||(t.isPrivate=e[a.fields.isPrivate]),Y.is.nil(e[a.fields.isVerified])||(t.isVerified=e[a.fields.isVerified]),Y.is.nil(e[a.fields.isFollowing])||(t.isFollowing=e[a.fields.isFollowing]),e[a.fields.badges]?.length&&(t.badges=e[a.fields.badges]),t})}async function uS(e=ES.userId){let t=xS().userProfile,n=await Y.fetchWithTemplate(t,{userId:e});if(n.status!==`ok`)throw Error(`Fetching user profile failed with status ${n.status}`);return n}async function dS(e=ES.username,t=12){let n=async n=>{let r=n===1?xS().userPosts:xS().userPostsV2,i=[],a=null;for(;i.length<t;){let n=Math.min(t-i.length,r.maxCount),o=await Y.fetchWithTemplate(r,{username:e,maxId:a,count:n});if(o.status!==`ok`||(i.push(...o.items),!o.hasMore))break;a=o.maxId}return i=i.slice(0,t),i.map(e=>yS(e,r.fields))},r=ES.igApi.userPostsVersion===2?[2,1]:[1,2];for(let e of r)try{let t=await n(e);return ES.igApi.userPostsVersion=e,t}catch(t){if(CS.error(`Failed to fetch user posts (v${e})`,t),wS.send(`analytics.send`,`ig-api:user-posts-${e}:failure`),e===r[1])throw t}}async function fS(e){let t=xS().searchProfiles,n=await Y.fetchWithTemplate(t,{query:e});if(n.status!==`ok`)throw Error(`Search profiles failed with status ${n.status}`);return n.users.map(e=>yS(e,t.fields))}async function pS(e){let t=xS().rawUserData,n=await Y.fetchWithTemplate(t,{username:e});return!n||n.status!==`ok`?null:(n.id&&=String(n.id),n)}async function mS(e,{incognito:t=!1}={}){let n={name:e,isBanned:null,isFlagged:null,avgLikes:null,avgComments:null,avgPosts:null,totalPosts:null,relevantTags:[]},r,i=!1;try{let n=xS().tagPageGraphQL,i=t?`omit`:`include`;r=await Y.fetchWithTemplate(n,{tagName:e,credentials:i})}catch(e){if(e.message===`404`)i=!0;else throw e}if(gS(r),_S(r),i)return n.isBanned=!0,n.isFlagged=!1,n;let a=JSON.parse(r).data,o=a.top.sections.map(e=>e.layout_content.medias).flat().filter(Boolean).map(e=>e.media),s=a.recent.sections.map(e=>e.layout_content.medias).flat().filter(Boolean).map(e=>e.media),c=0,l=0;{let e=o.map(e=>{let t=e.taken_at*1e3,n=e.like_count,r=e.comment_count;return{likes:hS(n,t),comments:hS(r,t)}}).sort((e,t)=>Y.calcEngagement(e.likes,t.comments)-Y.calcEngagement(t.likes,t.comments)).slice(Math.floor(o.length/2-Math.min(5,o.length/3/2)),Math.floor(o.length/2+Math.min(5,o.length/3/2)));if(e.length>0){for(let t of e)c+=t.likes,l+=t.comments;c=Math.round(c/e.length),l=Math.round(l/e.length)}}let u=0;{let e=new Set,t=s.map(e=>({ts:e.taken_at*1e3,ownerId:e.user.pk})).sort((e,t)=>t.ts-e.ts).slice(0,15).filter(t=>{let n=t.ownerId;return e.has(n)?!1:(e.add(n),!0)}).map(e=>e.ts);if(t.length>2){let e=t[0]-t[t.length-1],n=Math.max(100,e/t.length);u=Math.round(Y.time.DAY/n)}}let d=[];{let t={},n=[{posts:o,relevance:2},{posts:s,relevance:1}];for(let e of n){let n=Y.getHashtagRegex(),r=e.posts.map(e=>e.caption?.text||``).map(e=>e.match(n)||[]).flat().map(e=>e.replace(`#`,``));for(let n of r)t[n]=(t[n]||0)+e.relevance}for(let n in t){if(n===e)continue;let r=t[n];d.push({tag:n,relevance:r})}d=d.sort((e,t)=>t.relevance-e.relevance).map(e=>e.tag)}return n.isBanned=!1,n.isFlagged=!!a.recent.warning_message,n.totalPosts=a.media_count,n.avgLikes=c,n.avgComments=l,n.avgPosts=u,n.relevantTags=d,n}function hS(e,t){let n=Date.now(),r=.061;return e*(Math.log(r*Y.time.DAY)/Math.log(r*(n-t)))}function gS(e){if(e&&e.includes(TS.config.igApi.challenge)){let e=Error();throw e.message=`400`,e.body=`Challenge`,e}return e}function _S(e){if(e&&e.includes(TS.config.igApi.loginLink)){let e=Error();throw e.message=`Redirect to login`,e.body=`Redirect to login`,e}return e}function vS(e,t){let n=e?.carousel_media?.[0]?.image_versions2?.candidates||e?.image_versions2?.candidates||[];return n.length?t===`max`?n[0]?.url||null:t===`min`?n.at(-1)?.url||null:t===`medium`&&(n.find(e=>e.width===320)?.url||n[0]?.url)||null:null}function yS(e,t){let n={};for(let r of Object.keys(t)){let i=t[r];n[r]=bS(e,i)}return n}function bS(e,t){if(typeof t==`string`)return Y.get(e,t);if(!(`path`in t)){let n={};for(let r of Object.keys(t))n[r]=bS(e,t[r]);return n}let{path:n,type:r,def:i,mult:a}=t;if(r===`imgx`||r===`img`||r===`imgMedium`){let t=n?Y.get(e,n):e;return DS[r](t)??i??null}let o=n?Y.get(e,n):void 0;return r&&DS[r]&&(o=DS[r](o)),a!=null&&o!=null&&(o*=a),o??=i??o,o}function xS(){return TS.config.igApi}function SS(e,t){let n=async function(...n){try{let t=await e(...n);return CS.Response.ofResult(t)}catch(e){return CS.Response.ofNetworkError(e).reportError(t,e)}};return wS.on(`ig-api.${t}`,n),n}var CS,wS,Y,TS,ES,DS,OS=o((()=>{({$igApi:CS,$bus:wS,$utils:Y,$fusion:TS,$s:ES}=app),CS.api={init(){this.fetchViewerInfo=SS(Zx,`fetch-viewer-info`),this.fetchViewerInfoV1=SS($x,`fetch-viewer-info-v1`),this.fetchViewerInfoV2=SS(Qx,`fetch-viewer-info-v2`),this.fetchViewerEmail=SS(eS,`fetch-viewer-email`),this.likePost=SS(tS,`like-post`),this.unlikePost=SS(nS,`unlike-post`),this.followUser=SS(rS,`follow-user`),this.unfollowUser=SS(iS,`unfollow-user`),this.removeFollower=SS(aS,`remove-follower`),this.fetchExplorePosts=SS(oS,`fetch-explore-posts`),this.fetchLoginActivity=SS(sS,`fetch-login-activity`),this.fetchFriendships=SS(lS,`fetch-friendships`),this.fetchUserPosts=SS(dS,`fetch-user-posts`),this.fetchUserPeers=SS(cS,`fetch-user-peers`),this.searchProfiles=SS(fS,`search-profiles`),this.fetchTag=SS(mS,`fetch-tag`),this.fetchUserProfileById=SS(uS,`fetch-user-profile-by-id`),this.fetchUserProfileByUsername=SS(pS,`fetch-user-profile-by-username`),this.normalizePostStat24h=hS},async hasLikesSince(e){let t=xS().likeActivityContent,n=await Y.fetchWithTemplate(t),r={};Object.keys(t.extract||{}).forEach(e=>{let i=t.extract[e];r[e]=n.split(i.start)[1].split(i.end)[0]});let i=xS().likeActivityJson;return e=Math.floor(Number(e)/1e3),(await Y.fetchWithTemplate(i,{extracted:r,since:e})).includes(`media_type`)}},DS={string:e=>e==null?e:String(e),exists:e=>e!==void 0,mediaType:e=>({1:`photo`,2:`video`,8:`carousel`})[e]||null,imgx:e=>vS(e,`max`),img:e=>vS(e,`min`),imgMedium:e=>vS(e,`medium`)}})),kS,AS,jS,MS,NS,PS,FS=o((()=>{({$igApi:kS,$utils:AS,$netRules:jS,$env:MS,$mp:NS,$type:PS}=app),kS.Publisher=class{constructor(e=null){if(!MS.is.bg&&e)throw new kS.Error(`custom cookies available only in bg`);this._debug=!0,this._id=this._generateId(),this._cookies=e,this._netRuleIds=[]}async setupNetRules(){if(!MS.is.bg)throw new kS.Error(`bg only`);if(!this._cookies)return;let e=Object.entries(this._cookies).map(([e,t])=>`${e}=${t}`).join(`; `);this._netRuleIds=await jS.add({url:`https://*.instagram.com/*_pid_=${this._id}*`,req:{cookie:e}})}async cleanupNetRules(){if(!MS.is.bg)throw new kS.Error(`bg only`);await jS.remove(this._netRuleIds)}async publishPhoto(e,{caption:t,options:n,mentions:r,location:i}){let a=this._generateUploadName();this._log(` upload photo...`),await this._uploadPhoto(a,e),this._log(` publish photo...`),await this._configure(`/api/v1/media/configure/`,{upload_id:this._getUploadId(a),...this._getPostCommonParams({caption:t,options:n,location:i,mentions:r})}),this._log(` success`)}async publishReel(e,t,{caption:n,options:r,mentions:i,location:a,trackId:o=null,shareToFeed:s=!1}){PS.assert(o,[null,String]);let c=this._generateUploadName();this._log(` upload reel...`),await this._uploadVideo(c,e,{type:`reel`}),this._log(` upload reel cover...`),await this._uploadPhoto(c,t,{isVideoCover:!0}),this._log(` publish reel...`),await this._configure(`/api/v1/media/configure_to_clips/`,{is_unified_video:1,disable_oa_reuse:!1,video_subtitles_enabled:0,clips_share_preview_to_feed:s?1:0,upload_id:this._getUploadId(c),...this._getPostCommonParams({caption:n,options:r,location:a,mentions:i}),...o&&{music_params:JSON.stringify({audio_asset_id:o,audio_cluster_id:o})}}),this._log(` success`)}async publishCarousel(e,{caption:t,options:n,location:r}={}){PS.assert(e,[kS.PostCarouselItem]);let i=[];for(let t=0;t<e.length;t++){let n=e[t],r=`carousel [${t+1}/${e.length}]:`,a=this._generateUploadName(),o=this._getUploadId(a);if(AS.file.isImage(n.blob))this._log(` ${r} upload photo...`),await this._uploadPhoto(a,n.blob);else{this._log(` ${r} upload video...`),await this._uploadVideo(a,n.blob,{type:`carousel`}),this._log(` ${r} upload video cover...`);let e=n.cover??await AS.extractFrame(n.blob,0);await this._uploadPhoto(a,e,{isVideoCover:!0})}i.push({upload_id:o,...this._getPostMentionParams(n.mentions)})}this._log(` publish carousel...`),await this._configureJson(`/api/v1/media/configure_sidecar/`,{client_sidecar_id:this._generateUploadId(),children_metadata:i,...this._getPostCollaborationParams(e.map(e=>e.mentions).flat()),...this._getPostCommonParams({caption:t,options:n,location:r})}),this._log(` success`)}async publishStoryPhoto(e,{mentions:t=null,location:n=null,link:r=null,besties:i=!1,post:a=null,onStep:o=()=>{}}={}){o(`upload`),this._log(` upload story photo...`);let s=this._generateUploadName(`story`);await this._uploadPhoto(s,e),o(`publish`),this._log(` publish story photo...`),await this._configureToStory({uploadName:s,besties:i,mentions:t,location:n,link:r,post:a}),this._log(` success`)}async publishStoryVideo(e,{mentions:t=null,location:n=null,link:r=null,besties:i=!1,post:a=null,onStep:o=()=>{}}={}){let s=await NS.controller.splitVideo(e);for(let e=0;e<s.length;e++){let c=`(${e+1}/${s.length})`,l=s[e];o(`upload`,e,s.length),this._log(` upload story video ${c}...`);let u=this._generateUploadName(`story`);await this._uploadVideo(u,l,{type:`story`}),this._log(` upload story video cover ${c}...`);let d=await AS.extractFrame(l,0);await this._uploadPhoto(u,d,{isVideoCover:!0}),o(`publish`,e,s.length),this._log(` publish story video ${c}...`),await this._configureToStory({uploadName:u,besties:i,mentions:t,location:n,link:r,post:a})}this._log(` success`)}async _uploadPhoto(e,t,{isVideoCover:n=!1,cookies:r}={}){let{width:i,height:a}=await AS.loadImage(t);await this._fetch({attempts:2,url:`https://i.instagram.com/rupload_igphoto/${e}`,opts:{method:`POST`,body:t,headers:{accept:`*/*`,offset:`0`,"x-entity-name":e,"x-entity-length":t.size,"x-ig-app-id":kS.config.appId,"x-instagram-rupload-params":JSON.stringify({upload_id:this._getUploadId(e),media_type:n?2:1,upload_media_width:i,upload_media_height:a})}}})}async _uploadVideo(e,t,{type:n}){PS.assert(n,[`post`,`reel`,`carousel`,`story`]),await this._fetch({url:`https://i.instagram.com/rupload_igvideo/${e}`,opts:{method:`POST`,body:t,headers:{accept:`*/*`,offset:`0`,"x-entity-name":e,"x-entity-length":t.size,"x-ig-app-id":kS.config.appId,"x-instagram-rupload-params":JSON.stringify({"client-passthrough":`1`,is_sidecar:`0`,media_type:2,upload_id:this._getUploadId(e),...n===`post`&&{for_album:!1,is_igtv_video:!0,is_unified_video:`1`},...n===`reel`&&{for_album:!1,is_clips_video:`1`},...n===`carousel`&&{for_album:!1,is_sidecar:`1`,is_unified_video:`0`,video_format:``},...n===`story`&&{for_album:!0,is_unified_video:`0`}})}}})}_generateUploadId(){return String(Date.now())}_generateUploadName(e=`fb_uploader`){return`${e}_${this._generateUploadId()}`}_getUploadId(e){return e.split(`_`).pop()}_log(...e){this._debug&&console.log(`%c[$igApi]`,`color: #bb57d1`,...e)}async _fetchCsrfToken(){if(this._cookies){let e=this._cookies.csrftoken;if(!e)throw Error(`Missing csrftoken in cookies`);return e}return(await this._fetch({url:`https://www.instagram.com/`})).replaceAll(`\\`,``).split(`csrf_token`).at(1).split(`"`)[2]}async _configure(e,t,n=!1){let r,i;n?(r=JSON.stringify(t),i=`application/json; charset=utf-8`):(r=new URLSearchParams(t).toString(),i=`application/x-www-form-urlencoded`),await this._fetch({attempts:5,url:`https://www.instagram.com${e}`,opts:{method:`POST`,credentials:`include`,body:r,headers:{accept:`*/*`,"content-type":i,"x-csrftoken":await this._fetchCsrfToken(),"x-ig-app-id":kS.config.appId}}})}async _configureJson(e,t){await this._configure(e,t,!0)}async _fetch({url:e,opts:t={},attempts:n=1,checkResponse:r}){r||=e=>e.status===200,this._cookies?(e=new URL(e),e.searchParams.set(`_pid_`,this._id),e=e.toString()):t.credentials=`include`;let i=async(i=`Failed to fetch`)=>{if(i.includes(`Transcode not finished`)||--n,n<=0)throw Error(i);return await AS.sleep(3*AS.time.SECOND),await this._fetch({url:e,opts:t,attempts:n,checkResponse:r})},a;try{a=await fetch(e,t)}catch(n){return console.error(`Failed to fetch`,{url:e,opts:t,e:n}),i(n.message)}let o;try{o=await a.text()}catch(n){return console.error(`Failed to call res.text()`,{url:e,opts:t,e:n}),i(`Failed to call res.text(): ${n.message}`)}return r(a)?o:(console.error(`Invalid response`,{url:e,opts:t,text:o}),i(`Response: ${o}`))}_generateId(){return`${Date.now()}-${Math.random().toString(36).slice(2)}`}async _configureToStory({uploadName:e,besties:t,mentions:n,location:r,link:i,post:a}){PS.assert(t,Boolean),PS.assert(i,[null,kS.StoryLink]),PS.assert(r,[null,kS.StoryLocation]),PS.assert(n,[null,[kS.StoryMention]]),PS.assert(a,[null,kS.StoryAttachedPost]),await this._configure(`/api/v1/web/create/configure_to_story/`,{upload_id:this._getUploadId(e),...t&&{audience:`besties`},...n&&{reel_mentions:JSON.stringify(n.map(e=>({x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation,user_id:e.id??e.user_id})))},...r&&{story_locations:JSON.stringify([{x:r.x,y:r.y,width:r.width,height:r.height,rotation:r.rotation,location_id:r.id}])},...i&&{story_link_stickers:JSON.stringify([{x:i.x,y:i.y,width:i.width,height:i.height,rotation:i.rotation,link_type:`web`,url:i.url}])},...a&&{reshared_media_id:a.postId,story_sticker_ids:`media_story_${a.postId}`,attached_media:JSON.stringify([{x:a.x,y:a.y,width:a.width,height:a.height,rotation:a.rotation,media_id:a.postId,media_owner_id:a.ownerId,is_sticker:!0}])}})}_getPostCommonParams({caption:e=``,options:t=null,mentions:n=null,location:r=null}){return PS.assert(e,String),PS.assert(t,[null,kS.PostOptions]),PS.assert(n,[null,[kS.PostMention]]),PS.assert(r,[null,kS.PostLocation]),{caption:e,source_type:`library`,disable_comments:t.disableComments?1:0,like_and_view_counts_disabled:t.hideLikes?1:0,...this._getPostMentionParams(n),...this._getPostCollaborationParams(n),...r&&{geotag_enabled:!0,location:JSON.stringify({facebook_places_id:r.id,lat:r.lat,lng:r.lng})}}}_getPostMentionParams(e){return PS.assert(e,[null,[kS.PostMention]]),!e||e.length===0?{}:{usertags:JSON.stringify({in:e.map(e=>({user_id:e.userId,position:[e.x,e.y]}))})}}_getPostCollaborationParams(e){if(PS.assert(e,[null,[kS.PostMention]]),!e||e.length===0)return{};let t=e.filter(e=>e.isCollaborator).map(e=>e.userId).filter(AS.unique);return t.length===0?{}:{invite_coauthor_user_ids_string:JSON.stringify(t)}}}})),IS,LS,RS,zS,BS,VS,HS,US,WS=o((()=>{({$later:IS,$store:LS,$utils:RS,$dateFns:zS,$mobx:BS,$billing:VS,$fusion:HS,$s:US}=app),IS.proxy={getAllStates(e=US){return[e,...Object.values(e.userStates)]},getAllConnectedStates(e=US){return this.getAllStates(e).filter(e=>!!e.auth.userId&&!US.multiaccount.hiddenUserIds.includes(e.auth.userId)).sort((e,t)=>e.auth.username.localeCompare(t.auth.username))},getSelectedUserState(e=US){return this.getUserState(e,e.later.selectedUserId)},getUserState(e,t){return this.getAllStates(e).find(e=>e.auth.userId===t)||null},getPostOwnerState(e,t){return this.getAllStates(e).find(e=>e.later.posts.some(e=>e.id===t))||null},getSelectedUserPosts(){let e=this.getSelectedUserState();if(!e)return[];let t=structuredClone(BS.toJS(e.later.posts));this._sortPosts(t);let n=US.later.dnd;return this._applyDndToPosts(n,t),t},getAllPosts(e=US){return this.getAllStates(e).map(e=>e.later.posts).flat()},getConnectedUsersPosts(){return this.getAllConnectedStates().map(e=>e.later.posts).flat()},getSelectedPost(){return this.getAllPosts().find(e=>e.id===US.later.selectedPostId)},getSelectedMedia(e=this.getSelectedPost()){return e.mediaList.find(t=>t.id===e.selectedMediaId)},getPost(e){let t=this.getAllConnectedStates();for(let n of t){let t=n.later.posts.find(t=>t.id===e);if(t)return t}return null},getPostPublishTypeForAnalytics(e){if(e.type===`post`)return e.mediaList.length>1?`carousel`:e.mediaList[0].isVideo?`video`:`photo`;if(e.type===`story`)return e.mediaList.length>1?`story-series`:e.mediaList[0].isVideo?`story-video`:`story-photo`;if(e.type===`reel`)return e.mediaList.length>1?`reel-series`:`reel`},updatePost(e,t=()=>{}){LS.transaction(n=>{n=this.getPostOwnerState(n,e);let r=n.later.posts.find(t=>t.id===e);r&&t(r)})},deletePost(e){LS.transaction(t=>{t=this.getPostOwnerState(t,e);let n=t.later.posts.findIndex(t=>t.id===e);t.later.posts.splice(n,1)})},isPostEditable(e){return!(e.status===`posted`||e.status===`posting`)},getMediaError(e,t){return e.type===`post`&&e.mediaList.length>1&&t.isVideo&&t.duration>HS.config.later.maxCarouselVideoDurationSec?{message:`Instagram does not support videos longer than 1 minute for carousels.`}:e.type===`story`&&t.isVideo&&t.duration>HS.config.later.maxStoryDurationSec?{message:`Instagram does not support videos longer than 5 minutes for stories.`}:null},updateSelectedUserState(e=()=>{}){LS.transaction(t=>{t=this.getSelectedUserState(t),e(t)})},updateUserState(e,t=()=>{}){LS.transaction(n=>{n=IS.proxy.getUserState(n,e),t(n)})},applyDnd(){LS.transaction(e=>{if(VS.controller.paywall(`scheduling`))US.later.dnd.dragPostId=null,US.later.dnd.dragOverPostId=null,US.later.dnd.dragOverDay=null,US.later.dnd.dragOverTime=null;else{let t=e.later.dnd,n=this.getSelectedUserState(e);this._applyDndToPosts(t,n.later.posts),e.later.selectedPostId&&(e.later.selectedPostId=t.dragPostId===e.later.selectedPostId?t.dragOverPostId:t.dragOverPostId===e.later.selectedPostId?t.dragPostId:e.later.selectedPostId),t.dragPostId=null,t.dragOverPostId=null,t.dragOverDay=null,t.dragOverTime=null}})},_sortPosts(e){e.sort((t,n)=>{if(t.status!==`draft`&&n.status===`draft`)return 1;if(t.status===`draft`&&n.status!==`draft`)return-1;if(t.date&&n.date)return n.date-t.date;if(t.date)return 1;if(n.date)return-1;let r=e.indexOf(t);return e.indexOf(n)-r})},_applyDndToPosts(e,t){if(e.dragPostId){if(e.dragOverDay&&e.dragOverTime){let n=t.find(t=>t.id===e.dragPostId);n.date=e.dragOverDay+e.dragOverTime,n.status=`scheduled`}else if(e.dragOverDay){let n=e.dragOverDay,r=t.find(t=>t.id===e.dragPostId),i=Date.now()+RS.time.HOUR,a=zS.endOfDay(n).getTime();if(i>a)return;let o;if(r.date)o=r.date-zS.startOfDay(r.date);else{let e=t.findLast(e=>zS.isSameDay(e.date,n));o=e?e.date-n+RS.time.HOUR:12*RS.time.HOUR}let s=n+o;s<i&&(s=i),s>a&&(s=a),r.date=s,r.status=`scheduled`}else if(e.dragOverPostId){let n=t.find(t=>t.id===e.dragPostId),r=t.find(t=>t.id===e.dragOverPostId);if(!n||!r)return;let i={...r,id:n.id,date:n.date,status:n.status},a={...n,id:r.id,date:r.date,status:r.status};Object.assign(n,i),Object.assign(r,a)}}}}})),GS,KS=o((()=>{({$fusion:GS}=app),GS.defaultConfig={version:212,welcomeBonus:{rolloutPercent:0,amount:100},common:{reviewsUrl:`https://chrome.google.com/webstore/detail/bcocdbombenodlegijagbhdjbifpiijp/reviews`,termsUrl:`https://inssist.com/terms`,policyUrl:`https://inssist.com/privacy`,faqUrl:`https://inssist.com/faq`,faqBillingUrl:`https://inssist.com/faq#billing`,mobileViewButtonPlacement:`menu`,mobileViewDeprecationPercent:1,photoStoryWatermarkPercent:0},billing:{badgeProMonthly:`+ GROWTH ASSIST`,badgeProLifetime:`auto-discount`},boost:{enableBoost:`business`,enableShowSuggestions:!0,minBusinessFollowerCount:250},avatar:{cacheEvictionDays:4320*60*60*1e3,maxCacheSize:25*1024*1024,loadingTimeout:5e3,faceless:[`t51.2885-19/464760996_1254146839119862_3605321457742435801_n.png`,`t51.2885-19/44884218_345707102882519_2446069589734326272_n.jpg`]},tagAssist:{ladderConfig:{tiers:{low:.7,medium:1.5,high:5}}},scripts:{peersRunInterval:1440*60*1e3,growthRunInterval:1440*60*1e3,showProBadge:!1,defaultTaskStatus:{growth:`canceled`,peers:`canceled`,antibot:`canceled`},autopilotLikesLimit:12e3,actionBlockedCodes:[`too-many-requests-429`,`suspended-400`],autoSpeed:[{percent:.1,min:100,max:500,delta:20},{percent:1,min:100,max:300,delta:20}],autoSpeedBlockedMultiplier:.8,instagramSource:{id:25025320,username:`instagram`,type:`auto`},rateLimits:{sourcesPerScan:10,targetFreshLeads:250,minLeads:50,maxLeads:1e4,scanDepths:[50,`custom-depth`,`max-depth`],defaultLeadsToScan:1e3},antibot:{maxFollowers:1e5,scanCooldown:1440*60*1e3,runDelayMin:7200*1e3,runDelayMax:14400*1e3,freshnessMargin:.1,removalStaleTimeout:600*1e3,removalCooldown:900*1e3,removalBatchMin:5,removalBatchMax:15,removalSleepMin:1e3,removalSleepMax:5e3,dailyCap:150,hourlyCap:60,removalRanges:[{maxFollowers:1e3,min:5,max:8},{maxFollowers:1e4,min:10,max:12},{maxFollowers:1e5,min:15,max:20},{maxFollowers:5e5,min:15,max:22}]},aged:{from:12863064e5,check:1753092583371,lastUserId:76336856079,perDay:25e6,agedIfOlder:60},limits:{perHour:60},beta:!0,maxItemsOnFree:9,todayQuotaRandom:{from:1,to:1.1},hourlySpeed:{zeroThreshold:.25,minActiveRatio:.5},likeDelayRandom:{from:1e3,to:2e4,gaussian:!0},batchSizeRandom:{from:1,to:20,gaussian:!0},batchDelayMultiplier:.8,batchDelayRandom:{from:.2,to:1.8,gaussian:!0},batchDelayMin:{from:1e3*60,to:1e3*60*12},batchDelayMax:{from:1e3*60*60,to:1e3*60*60*12},terminateLikingOnFailures:20,cacheUserPostsFor:7200*1e3,quota:{items:[{title:`100 likes / day`,subtitle:`warmup`,iconStyle:{color:`#AF2E73`},value:100,free:!0},{title:`300 likes / day`,subtitle:`normal`,iconStyle:{color:`#C93667`},value:300,pro:!0},{title:`500 likes / day`,subtitle:`fast`,iconStyle:{color:`#EC5340`},value:500,pro:!0},{title:`Custom`,subtitle:`pick your speed`,iconStyle:{color:`#F04A56`},custom:!0,pro:!0}],itemsV2:[{title:`Auto`,subtitle:`recommended`,iconStyle:{color:`#8B5CF6`},value:`auto`,auto:!0},{title:`100 likes / day`,subtitle:`slow`,iconStyle:{color:`#AF2E73`},value:100},{title:`300 likes / day`,subtitle:`normal`,iconStyle:{color:`#C93667`},value:300},{title:`500 likes / day`,subtitle:`fast`,iconStyle:{color:`#EC5340`},value:500},{title:`Custom`,subtitle:`pick your speed`,iconStyle:{color:`#F04A56`},custom:!0}],defaultCustomSpeed:200,minCustomSpeed:1,maxCustomSpeed:1e3},timeframePresets:[{label:`Day 08:00  23:00`,fromHour:8,tillHour:23,default:!0},{label:`Night 23:00  06:00`,fromHour:23,tillHour:6},{label:`Morning 06:00  12:00`,fromHour:6,tillHour:12},{label:`Afternoon 12:00  18:00`,fromHour:12,tillHour:18},{label:`Evening 18:00  23:00`,fromHour:18,tillHour:23},{label:`Business 09:00  17:00`,fromHour:9,tillHour:17},{label:`Full day`,fromHour:0,tillHour:24}]},later:{mimeTypes:[`image/jpeg`,`image/png`,`image/webp`,`video/quicktime`,`video/mp4`,`video/webm`,`text/csv`],maxFileSize:900*1048576,maxFileSizeStr:`900 MB`,maxCarouselFiles:20,minVideoDurationSec:1,maxVideoDurationSec:900.9,maxCarouselVideoDurationSec:60.9,maxStoryDurationSec:300.9,storyRatio:9/16,minVideoRatio:.4,maxVideoRatio:1.91,minImageRatio:.5625,maxImageRatio:1.91,maxCaptionLength:2200,minTimeBetweenPublishing:10*1e3,minTimeFromNow:300*1e3,photoScaleSize:5e3,videoScaleSize:2e3,maxVideoWidth:4e3,maxVideoHeight:4e3,maxPhotoFileSize:10*1048576,maxVideoFileSize:500*1048576,mpForceTransformFileSize:500*1048576,maxImageWidth:4e3,maxImageHeight:4e3},storyWatermark:{group:[0,100],sticker:{type:`link`,url:`https://inssist.com`,text:`INSSIST.COM`,x:.86,y:.86,z:0,width:.18816530816530816*1.25,height:.02182754182754183*1.25,scale:.32*1.25,rotation:0,variant:`white`}},music:{popularTracks:[]},igApi:{STORY_REELS_ITEM_SEEN:`STORY_REELS_ITEM_SEEN`,maxMentions:20,maxCollaborators:5,maxPeersScan:2500,maxFollowersExport:1e5,tagPageUrl:`https://www.instagram.com/explore/tags/{{name}}/`,challenge:`<link rel="alternate" href="https://www.instagram.com/challenge/`,loginLink:`<link rel="canonical" href="https://www.instagram.com/accounts/login/`,intercept:[{condition:{request:{url:`/graphql/query`,method:`POST`,bodyType:`form`,body:{doc_id:[`23951234354462179`]}},response:{status:`ok`}},action:{type:`$bus.send`,name:`like`,data:{postId:`{{request.body.variables.media_id}}`}}},{condition:{request:{url:`/api/v1/web/likes/{{postId}}/like/`,method:`POST`},response:{status:`ok`}},action:{type:`$bus.send`,name:`like`,data:{postId:`{{url.postId}}`}}},{condition:{request:{url:`/graphql/query`,method:`POST`,bodyType:`form`,body:{doc_id:[`9740159112729312`,`24311734695095556`,`9660047674090784`,`24654195424170959`]}},response:{status:`ok`}},action:{type:`$bus.send`,name:`follow`,data:{userId:`{{request.body.variables.target_user_id}}`}}},{condition:{request:{url:`/graphql/query`,method:`POST`,bodyType:`form`,body:{doc_id:[`9846833695423773`,`9982511781803340`,`29455769757404931`,`23986526720931460`]}},response:{status:`ok`}},action:{type:`$bus.send`,name:`unfollow`,data:{userId:`{{request.body.variables.target_user_id}}`}}},{condition:{request:{url:`/api/v1/friendships/create/`,method:`POST`,bodyType:`form`},response:{status:`ok`}},action:{type:`$bus.send`,name:`follow`,data:{userId:`{{request.body.user_id}}`}}},{condition:{request:{url:`/api/v1/friendships/destroy/`,method:`POST`,bodyType:`form`},response:{status:`ok`}},action:{type:`$bus.send`,name:`unfollow`,data:{userId:`{{request.body.user_id}}`}}}],fetchViewerInfoV2:{url:`https://www.instagram.com`,responseFormat:`text`,dataLineIncludes:`is_professional_account`,dataLineAfter:`XIGSharedData`,extractAvatarUrl:`profile_pic_url`,extractViewerId:[`appScopedIdentity`,`id`,`viewedId`],extractUsername:`username`,extractFullName:`full_name`,extractIsBusiness:`is_business_account`,extractIsProfessional:`is_professional_account`,extractIsProfessionalAccount:`is_professional_account`},fetchViewerInfoV1:{url:`https://www.instagram.com/api/v1/accounts/edit/web_form_data/`,init:{credentials:`include`,headers:{"x-csrftoken":`{{app.$store.proxy.csrfToken}}`,"x-ig-app-id":`{{app.$igApi.config.appId}}`}},responseFormat:`json`,responseMapping:{status:`{{response.status}}`,username:`{{response.form_data.username}}`,email:`{{response.form_data.email}}`}},friendshipsStatus:{url:`https://www.instagram.com/api/v1/friendships/show_many/`,init:{method:`POST`,credentials:`include`,headers:{"content-type":`application/x-www-form-urlencoded`,"x-csrftoken":`{{app.$store.proxy.csrfToken}}`,"x-ig-app-id":`{{app.$igApi.config.appId}}`},body:{user_ids:`{{userIds}}`,jazoest:`21905`}},bodyType:`form`,responseFormat:`json`,responseMapping:{status:`{{response.status}}`,users:`{{response.friendship_statuses}}`}},userFollowers:{url:`https://www.instagram.com/graphql/query/`,query:{query_hash:`37479f2b8209594dde7facb0d904896a`,variables:{id:`{{userId}}`,after:`{{cursor}}`,first:`50`}},init:{method:`GET`,credentials:`include`,headers:{referer:`https://www.instagram.com/`,"x-csrftoken":`{{app.$store.proxy.csrfToken}}`,"x-ig-app-id":`{{app.$igApi.config.appId}}`,"x-instagram-ajax":`1`,"x-requested-with":`XMLHttpRequest`}},responseFormat:`json`,responseMapping:{status:`{{response.status}}`,items:`{{response.data.user.edge_followed_by.edges}}`,cursor:`{{response.data.user.edge_followed_by.page_info.end_cursor}}`,hasMore:`{{response.data.user.edge_followed_by.page_info.has_next_page}}`,count:`{{response.data.user.edge_followed_by.count}}`},fields:{id:`node.id`,username:`node.username`,fullName:`node.full_name`,avatarUrl:`node.profile_pic_url`,isVerified:`node.is_verified`,isRequested:`node.requested_by_viewer`,isFollowed:`node.followed_by_viewer`},rootCursor:``,throttle:{min:8e3,max:12e3},backoff:!0},userFollowings:{url:`https://www.instagram.com/graphql/query/`,query:{query_hash:`58712303d941c6855d4e888c5f0cd22f`,variables:{id:`{{userId}}`,after:`{{cursor}}`,first:`50`}},init:{method:`GET`,credentials:`include`,headers:{referer:`https://www.instagram.com/`,"x-csrftoken":`{{app.$store.proxy.csrfToken}}`,"x-ig-app-id":`{{app.$igApi.config.appId}}`,"x-instagram-ajax":`1`,"x-requested-with":`XMLHttpRequest`}},responseFormat:`json`,responseMapping:{status:`{{response.status}}`,items:`{{response.data.user.edge_follow.edges}}`,cursor:`{{response.data.user.edge_follow.page_info.end_cursor}}`,hasMore:`{{response.data.user.edge_follow.page_info.has_next_page}}`,count:`{{response.data.user.edge_follow.count}}`},fields:{id:`node.id`,username:`node.username`,fullName:`node.full_name`,avatarUrl:`node.profile_pic_url`,isVerified:`node.is_verified`,isRequested:`node.requested_by_viewer`,isFollowed:`node.followed_by_viewer`},rootCursor:``,throttle:{min:8e3,max:12e3},backoff:!0},userProfile:{url:`https://www.instagram.com/graphql/query`,init:{method:`POST`,credentials:`include`,headers:{"content-type":`application/x-www-form-urlencoded`,"x-csrftoken":`{{app.$store.proxy.csrfToken}}`,"x-ig-app-id":`{{app.$igApi.config.appId}}`},body:{doc_id:`9916454141777118`,variables:{render_surface:`PROFILE`,id:`{{userId}}`}}},bodyType:`form`,responseFormat:`json`,responseMapping:{status:`{{response.status}}`,scannedOn:Date.now(),id:`{{response.data.user.id}}`,username:`{{response.data.user.username}}`,fullName:`{{response.data.user.full_name}}`,avatarUrl:`{{response.data.user.profile_pic_url}}`,isFollowing:`{{response.data.user.friendship_status.following}}`,isFollower:`{{response.data.user.friendship_status.followed_by}}`,isBlocking:`{{response.data.user.friendship_status.blocking}}`,isMuting:`{{response.data.user.friendship_status.muting}}`,isIncomingRequest:`{{response.data.user.friendship_status.incoming_request}}`,isPrivate:`{{response.data.user.is_private}}`,badges:`{{response.data.user.account_badges}}`,bio:`{{response.data.user.biography}}`,bioEntities:`{{response.data.user.biography_with_entities.entities}}`,bioLinks:`{{response.data.user.bio_links}}`,category:`{{response.data.user.category}}`,externalUrl:`{{response.data.user.external_url}}`,followerCount:`{{response.data.user.follower_count}}`,followingCount:`{{response.data.user.following_count}}`,postCount:`{{response.data.user.media_count}}`,isBusiness:`{{response.data.user.is_business}}`,followedBy:`{{response.data.user.profile_context_links_with_user_ids}}`}},likePost:{url:`https://www.instagram.com/graphql/query`,init:{method:`POST`,credentials:`include`,headers:{"content-type":`application/x-www-form-urlencoded`,"x-csrftoken":`{{app.$store.proxy.csrfToken}}`,"x-ig-app-id":`{{app.$igApi.config.appId}}`},body:{doc_id:`23951234354462179`,fb_api_caller_class:`RelayModern`,fb_api_req_friendly_name:`usePolarisLikeMediaLikeMutation`,variables:{container_module:`single_post`,media_id:`{{mediaId}}`},server_timestamps:!0}},bodyType:`form`,responseFormat:`json`,responseMapping:{status:`{{response.status}}`},failOn:{condition:`{{response.errors.0.message}}`,error:{code:`too-many-requests-429`,message:`{{response.errors.0.message}}`}}},unlikePost:{url:`https://www.instagram.com/graphql/query`,init:{method:`POST`,credentials:`include`,headers:{"content-type":`application/x-www-form-urlencoded`,"x-csrftoken":`{{app.$store.proxy.csrfToken}}`,"x-ig-app-id":`{{app.$igApi.config.appId}}`},body:{doc_id:`9624975597538585`,fb_api_caller_class:`RelayModern`,fb_api_req_friendly_name:`usePolarisLikeMediaUnlikeMutation`,variables:{media_id:`{{mediaId}}`},server_timestamps:!0}},bodyType:`form`,responseFormat:`json`,responseMapping:{status:`{{response.status}}`},failOn:{condition:`{{response.errors.0.message}}`,error:{code:`too-many-requests-429`,message:`{{response.errors.0.message}}`}}},followUser:{url:`https://www.instagram.com/graphql/query`,init:{method:`POST`,credentials:`include`,headers:{"content-type":`application/x-www-form-urlencoded`,"x-csrftoken":`{{app.$store.proxy.csrfToken}}`,"x-ig-app-id":`{{app.$igApi.config.appId}}`},body:{doc_id:`9740159112729312`,variables:{container_module:`profile`,target_user_id:`{{userId}}`,fb_api_caller_class:`RelayModern`,fb_api_req_friendly_name:`usePolarisFollowMutation`,nav_chain:`PolarisNavChain PolarisNavChain PolarisProfilePostsTabRoot:profilePage:1:via_cold_start`}}},bodyType:`form`,responseFormat:`json`,responseMapping:{status:`{{response.status}}`},failOn:{condition:`{{response.errors.0.message}}`,error:{code:`too-many-requests-429`,message:`{{response.errors.0.message}}`}}},unfollowUser:{url:`https://www.instagram.com/graphql/query`,init:{method:`POST`,credentials:`include`,headers:{"content-type":`application/x-www-form-urlencoded`,"x-csrftoken":`{{app.$store.proxy.csrfToken}}`,"x-ig-app-id":`{{app.$igApi.config.appId}}`},body:{doc_id:`9846833695423773`,variables:{container_module:`profile`,target_user_id:`{{userId}}`,fb_api_caller_class:`RelayModern`,fb_api_req_friendly_name:`usePolarisUnfollowMutation`,nav_chain:`PolarisNavChain PolarisNavChain PolarisProfilePostsTabRoot:profilePage:1:via_cold_start`}}},bodyType:`form`,responseFormat:`json`,responseMapping:{status:`{{response.status}}`},failOn:{condition:`{{response.errors.0.message}}`,error:{code:`too-many-requests-429`,message:`{{response.errors.0.message}}`}}},removeFollower:{url:`https://www.instagram.com/api/v1/friendships/remove_follower/{{userId}}/`,init:{method:`POST`,credentials:`include`,headers:{"content-type":`application/x-www-form-urlencoded`,"x-csrftoken":`{{app.$store.proxy.csrfToken}}`,"x-ig-app-id":`{{app.$igApi.config.appId}}`}},responseFormat:`json`,responseMapping:{status:`{{response.status}}`,isFollowing:`{{response.friendship_status.following}}`,isFollower:`{{response.friendship_status.followed_by}}`,isBlocking:`{{response.friendship_status.blocking}}`,isMuting:`{{response.friendship_status.muting}}`,isIncomingRequest:`{{response.friendship_status.incoming_request}}`,isOutgoingRequest:`{{response.friendship_status.outgoing_request}}`,isPrivate:`{{response.friendship_status.is_private}}`,isRestricted:`{{response.friendship_status.is_restricted}}`,isBestie:`{{response.friendship_status.is_bestie}}`,isFeedFavorite:`{{response.friendship_status.is_feed_favorite}}`,isEligibleToSubscribe:`{{response.friendship_status.is_eligible_to_subscribe}}`,isSubscribed:`{{response.friendship_status.subscribed}}`}},likeActivityContent:{url:`https://www.instagram.com/your_activity/interactions/likes/`,init:{credentials:`include`},responseFormat:`text`,extract:{bkv:{start:`["WebBloksVersioningID",[],{"versioningID":"`,end:`"`},dtsg:{start:`["DTSGInitialData",[],{"token":"`,end:`"`}}},likeActivityJson:{url:`https://www.instagram.com/async/wbloks/fetch/`,query:{appid:`com.instagram.privacy.activity_center.liked_refresh`,type:`action`,__bkv:`{{extracted.bkv}}`},init:{mode:`cors`,method:`POST`,credentials:`include`,headers:{"content-type":`application/x-www-form-urlencoded`},body:{__a:`1`,fb_dtsg:`{{extracted.dtsg}}`,params:{main_order_state_value:!0,main_date_start_state_value:`{{since}}`,main_date_end_state_value:-1,content_element_id:1,content_spinner_id:2,content_container_id:3}}},bodyType:`form`,responseFormat:`text`},friendships:{url:`https://www.instagram.com/api/v1/friendships/{{userId}}/{{type}}/`,query:{count:`{{count}}`,max_id:`{{maxId}}`,search_surface:`follow_list_page`},init:{method:`GET`,credentials:`include`,headers:{"x-csrftoken":`{{app.$store.proxy.csrfToken}}`,"x-ig-app-id":`{{app.$igApi.config.appId}}`}},responseFormat:`json`,responseMapping:{status:`{{response.status}}`,items:`{{response.users}}`,maxId:`{{response.next_max_id}}`,hasMore:`{{response.next_max_id}}`},fields:{username:`username`,fullName:`full_name`,avatarUrl:`profile_pic_url`,isPrivate:`is_private`,isVerified:`is_verified`,isFollowing:`following`,badges:`account_badges`},maxCount:25,throttle:{min:8e3,max:12e3},backoff:!0},userPosts:{url:`https://i.instagram.com/api/v1/feed/user/{{username}}/username/`,query:{count:`{{count}}`,max_id:`{{maxId}}`},init:{method:`GET`,credentials:`include`,headers:{"x-csrftoken":`{{app.$store.proxy.csrfToken}}`,"x-ig-app-id":`{{app.$igApi.config.appId}}`}},responseFormat:`json`,responseMapping:{status:`{{response.status}}`,items:`{{response.items}}`,maxId:`{{response.next_max_id}}`,hasMore:`{{response.more_available}}`},fields:{id:{path:`pk`,type:`string`},code:{path:`code`,type:`string`},stats:{likes:{path:`like_count`,def:0},comments:{path:`comment_count`,def:0}},on:{path:`taken_at`,mult:1e3},caption:{path:`caption.text`,def:``},owner:{path:`user.pk`,type:`string`,def:``},ownerName:{path:`user.username`,type:`string`,def:``},type:{path:`media_type`,type:`mediaType`,def:`photo`},isLiked:{path:`has_liked`},isVideo:{path:`view_count`,type:`exists`},imgx:{path:``,type:`imgx`},img:{path:``,type:`img`},imgMedium:{path:``,type:`imgMedium`}},maxCount:12},userPostsV2:{url:`https://www.instagram.com/graphql/query`,init:{method:`POST`,credentials:`include`,headers:{"content-type":`application/x-www-form-urlencoded`,"x-csrftoken":`{{app.$store.proxy.csrfToken}}`,"x-ig-app-id":`{{app.$igApi.config.appId}}`},body:{doc_id:`24835958312750138`,fb_api_caller_class:`RelayModern`,fb_api_req_friendly_name:`PolarisProfilePostsQuery`,variables:{username:`{{username}}`,after:`{{maxId}}`,data:{count:`{{count}}`,include_reel_media_seen_timestamp:!0,include_relationship_info:!0,latest_besties_reel_media:!0,latest_reel_media:!0},__relay_internal__pv__PolarisIsLoggedInrelayprovider:!0},server_timestamps:!0}},bodyType:`form`,responseFormat:`json`,responseMapping:{status:`{{response.status}}`,items:`{{response.data.xdt_api__v1__feed__user_timeline_graphql_connection.edges}}`,maxId:`{{response.data.xdt_api__v1__feed__user_timeline_graphql_connection.page_info.end_cursor}}`,hasMore:`{{response.data.xdt_api__v1__feed__user_timeline_graphql_connection.page_info.has_next_page}}`},fields:{id:{path:`node.pk`,type:`string`},code:{path:`node.code`,type:`string`},stats:{likes:{path:`node.like_count`,def:0},comments:{path:`node.comment_count`,def:0}},on:{path:`node.taken_at`,mult:1e3},caption:{path:`node.caption.text`,def:``},owner:{path:`node.user.pk`,type:`string`,def:``},ownerName:{path:`node.user.username`,type:`string`,def:``},type:{path:`node.media_type`,type:`mediaType`,def:`photo`},isLiked:{path:`node.has_liked`},isVideo:{path:`node.view_count`,type:`exists`},imgx:{path:`node`,type:`imgx`},img:{path:`node`,type:`img`},imgMedium:{path:`node`,type:`imgMedium`}},maxCount:12},searchProfiles:{url:`https://www.instagram.com/web/search/topsearch/`,query:{context:`user`,query:`{{query}}`},responseFormat:`json`,responseMapping:{status:`{{response.status}}`,users:`{{response.users}}`},fields:{id:`user.pk`,username:`user.username`,fullName:`user.full_name`,avatarUrl:`user.profile_pic_url`,isPrivate:`user.is_private`,isVerified:`user.is_verified`,isFollowed:`user.friendship_status.following`,isRequested:`user.friendship_status.outgoing_request`}},explorePostsContent:{url:`https://www.instagram.com/explore`,init:{method:`GET`,credentials:`include`,headers:{accept:`text/html`}},responseFormat:`text`,postIds:{start:`\\"code\\":\\"`,end:`\\"`}},postContent:{url:`https://www.instagram.com/p/{{code}}`,init:{credentials:`include`},responseFormat:`text`,mediaId:{start:`instagram://media?id=`,end:`"`}},rawUserData:{url:`https://i.instagram.com/api/v1/users/web_profile_info/`,query:{username:`{{username}}`},init:{credentials:`include`,headers:{"x-csrftoken":`{{app.$store.proxy.csrfToken}}`,"x-ig-app-id":`{{app.$igApi.config.appId}}`}},responseFormat:`json`,responseMapping:{status:`{{response.status}}`,scannedOn:Date.now(),id:`{{response.data.user.id}}`,username:`{{response.data.user.username}}`,fullName:`{{response.data.user.full_name}}`,avatarUrl:`{{response.data.user.profile_pic_url_hd}}`,isProfessional:`{{response.data.user.is_professional_account}}`,isBusiness:`{{response.data.user.is_business_account}}`,isPrivate:`{{response.data.user.is_private}}`,isVerified:`{{response.data.user.is_verified}}`,isFollowing:`{{response.data.user.followed_by_viewer}}`,isFollower:`{{response.data.user.follows_viewer}}`,isBlocking:`{{response.data.user.blocked_by_viewer}}`,isIncomingRequest:`{{response.data.user.has_requested_viewer}}`,bio:`{{response.data.user.biography}}`,bioLinks:`{{response.data.user.bio_links}}`,bioEntities:`{{response.data.user.biography_with_entities.entities}}`,externalUrl:`{{response.data.user.external_url}}`,followerCount:`{{response.data.user.edge_followed_by.count}}`,followingCount:`{{response.data.user.edge_follow.count}}`,postCount:`{{response.data.user.edge_owner_to_timeline_media.count}}`,category:`{{response.data.user.category_name}}`,followedBy:`{{response.data.user.edge_mutual_followed_by.edges}}`}},loginActivity:{url:`https://i.instagram.com/api/v1/session/login_activity/?__a=1`,init:{credentials:`include`,headers:{"x-csrftoken":`{{app.$store.proxy.csrfToken}}`,"x-ig-app-id":`{{app.$igApi.config.appId}}`}},responseFormat:`json`,responseMapping:{status:`{{response.status}}`,sessions:`{{response.sessions}}`,suspiciousLogins:`{{response.suspicious_logins}}`}},tagPageGraphQL:{url:`https://i.instagram.com/api/v1/tags/web_info/?tag_name={{tagName}}`,init:{credentials:`{{credentials}}`,headers:{"x-csrftoken":`{{app.$store.proxy.csrfToken}}`,"x-ig-app-id":`{{app.$igApi.config.appId}}`}},responseFormat:`text`}},dmSelectors:{bottomToolbarHeightVar:`--revamp-nav-bottom-toolbar-height`,menuPanel:[`.IGDSBox[style*="height: 100%"] > div:first-child`,`div:has(> .createKeyCommandWrapper > .PolarisNavigation)`,`div:has(> [tabindex="-1"] > .PolarisNavigation)`],pageContent:[`.IGDSBox[style*="height: 100%"] > div:last-child`,`.PolarisPageLayoutHandler`,`div:has(> section > main)`],header:[`.IGDLeftRailContainer > div:first-child`],headerUserSelect:[`.IGDLeftRailContainer > div:first-child > div:first-child`],headerWriteButton:[`.IGDLeftRailContainer > div:first-child > div:last-child`],headerNoFoldersContainer:[`.IGDLeftRailContainer > .IGDThreadListTitleLayout`],headerNoFoldersTab:[`.IGDLeftRailContainer > .IGDThreadListTitleLayout > *`],folderTab:[`.IGDProFolderMenu > .PressableText`],requestsTab:[`.IGDProFolderMenu > .PressableText:nth-child(3)`],requestsTabContent:[`.IGDProFolderMenu > .PressableText:nth-child(3) > span`],requestsTabText:[`.IGDProFolderMenu > .PressableText:nth-child(3) > span > span`],requestsDescription:[`.IGDMessageRequestLeftRailLayout:nth-child(2)`],chatItem:[`.ReQLScrollAnchored > .Pressable`,`.IGDInboxThreadListContainer .ReQLScrollAnchored > .IGDVisibilityAware > .Pressable`,`.IGDInboxThreadListContainer .ReQLScrollAnchored > .WebPressable`,`.IGDInboxThreadListContainer .ReQLScrollAnchored .IGDVisibilityAware > .WebPressable`],chatItemContent:[`.ReQLScrollAnchored > .Pressable > div`,`.IGDInboxThreadListContainer .ReQLScrollAnchored > .IGDVisibilityAware > .Pressable > div`,`.IGDInboxThreadListContainer .ReQLScrollAnchored > .WebPressable > div`,`.IGDInboxThreadListContainer .ReQLScrollAnchored .IGDVisibilityAware > .WebPressable > div`],chatItemSkeleton:[`.IGDInboxLeftColumnPlaceholder > .IGDListCellPlaceholder`,`.ReQLScrollAnchored > .IGDListCellPlaceholder`],chatItemTitle:[`.ReQLScrollAnchored > .Pressable div[style*="width: 244px"]`,`.ReQLScrollAnchored > .WebPressable div[style*="width: 244px"]`],chatHeader:[`.IGDThreadDetail:has(.IGDSectionHeaderLayout) > div`],chatHeaderAvatar:[`.IGDThreadDetail:has(.IGDSectionHeaderLayout) .IGDSAvatar`],chatHeaderAvatarContainer:[`.IGDThreadDetail:has(.IGDSectionHeaderLayout) .IGDSingleAvatar`],chatHeaderTitle:[`.IGDThreadDetail:has(.IGDSectionHeaderLayout) a > .IGDSBox`,`.IGDThreadDetail:has(.IGDSectionHeaderLayout) a:has(.BaseLineClamp) > div`,`.IGDInboxLayout h2`,`.IGDChatTabsRootContent span[title]`],writeInput:[`.CometLexicalContentEditable`],writeInputContainer:[`div:has(> .MWPCometComposerInner)`,`.IGDInboxLayout .html-div:has(> div > div[contenteditable=true])`],writePanel:[`.IGDOpenMessageListContainer + div > div > div`],writePanelVoiceButton:[`.PressableText:has(> .IGDSIconButton > svg > path[d^="M19.5 10.671v"])`],mediaViewerVideo:[`.IGDMediaViewer video`]},igSelectors:{general:{reactRoot:[`#react-root`,`[id^="mount"]`],root:[`#react-root > section`,`#react-root > div > div > section`,`section.PolarisBaseShell`,`section.PolarisRefreshedBaseShell`],rootNewNavDesign:[`section.PolarisRefreshedBaseShell`],content:[`#react-root > section > *:nth-child(2)`,`main.PolarisShellContent`,`main.PolarisRefreshedShellContent`,`main.PolarisShell`],contentSection:[`main.PolarisShellContent > section`,`main.PolarisRefreshedShellContent > section`,`main.PolarisShell > section`],header:[`._9ezyW`,`header.PolarisGenericMobileHeader`],headerContent:[`.b5itu`,`header.PolarisGenericMobileHeader ._ab16`],headerTitle:[`.K3Sf1`,`h1.PolarisGenericMobileHeader`],footer:[`.PolarisShellFooter`],main:[`.uzKWK`,`.PolarisBaseShell main.PolarisShellContent._a996`,`.PolarisRefreshedBaseShell main`],pageLayoutNewNavDesign:[`.PolarisPageLayoutHandler`,`div:has(> section > main)`],nextPageLoaderProfile:[`._4emnV`,`.PolarisVirtualPostsGrid._aanh`],nextPageLoaderExplore:[`html[data-page="exploreLandingPage"] .Id0Rh`,`html[data-page="exploreLandingPage"] .PolarisGenericVirtualFeed._aalg`],nextPageLoaderFeed:[`html[data-page="feedPage"] .Id0Rh`,`html[data-page="feedPage"] .PolarisGenericVirtualFeed._aalg`],tabBar:[`.KGiwt`,`.PolarisNavigation > ._abpb`,`.PolarisNavigation[style*="transform"]`,`.xaeubzz`],tabBarWrap:[`.ZoygQ`,`.IGDSBox > .PolarisNavigation`,`.createKeyCommandWrapper > .PolarisNavigation`,`div:not(.PolarisNavigation) > .PolarisNavigation`],tabBarContainer:[`.IGDSBox > .PolarisNavigation > div`,`.createKeyCommandWrapper .PolarisNavigation[style]:has(> .PolarisNavigation)`,`div:has(> .createKeyCommandWrapper > .PolarisNavigation)`,`div:has(> div:not(.PolarisNavigation) > .PolarisNavigation)`],tabBarTopContainer:[`.IGDSBox:has(> .createKeyCommandWrapper)`],tabBarButton:[`.PolarisNavigation[style*="transform"] > div > div:not([class])`,`.PolarisNavigationIcons > div`],tabBarCreatePostIconOldNavDesign:[`.PolarisMobileNavLoggedIn > svg`],tabBarAvatarContainer:[`.PolarisMobileNavLoggedInButton span.PolarisUserAvatar`],storyTrayViewerAvatarContainer:[`.PolarisStoryTray .PolarisStoryTray._aauk:first-child span.PolarisUserAvatar`],tabBarLink:[`.PolarisMobileNavLoggedIn a`,`.PolarisNavigation[style*="transform"] a`,`.createKeyCommandWrapper .PolarisNavigationItem a`],tabBarDm:[`.PolarisNavigation div:not(:first-child):not(:last-child):not([class]):has(polygon[points^="11.698 20.334"])`,`.PolarisNavigation div:not(:first-child):not(:last-child):not([class]):has(polygon[points^="11.698 20.334"])`,`.PolarisNavigation div:not(:first-child):not(:last-child):not([class]):has(path[d^="M12.003 2.001a9"])`],tabBarDmCounter:[`.PolarisNavigation a div.html-div:has(>span)`],tabBarReels:[`.PolarisNavigation div:not(:first-child):not(:last-child):not([class]):has(path[d^="M2 12.001v3.449c0"])`,`.PolarisNavigation div:not(:first-child):not(:last-child):not([class]):has(path[d^="m12.823 1 2.974"])`],tabBarBadge:[`.PolarisNavigation .PolarisNavigationBadge`,`.PolarisDirectNavItemBadge`],storyFooter:[`.mLi3m`,`footer.PolarisMobileStoriesFooter`,`footer.PolarisMobileOwnerStoriesOverlay`],storyQuickReactionsBackground:`.x4U7z`,storyPreviewContainer:[`.zGtbP`,`.PolarisShellContent ._aac4`,`.PolarisRefreshedShellContent ._aac4`],settingsRectangle:`.BvMHM`,recommendationsContainer:[`.bq3Mi`,`.tHaIX`,`.PolarisSuggestedUserFeedUnit`],modal:[`.RnEpo`,`.PolarisIGCoreModalBackdrop[role="presentation"]`],modalWindow:[`.RnEpo [role="dialog"]`,`.PolarisIGCoreModalBackdrop[role="presentation"] [role="dialog"]`],modalWindowHashtagContent:[`.RnEpo [role="dialog"] ._8zyFd`],bottomNotification:`.Z2m7o`,createStoryHeaderButton:[`.mTGkH`,`.PLytv`,`button.PolarisFeedPageMobileHeader`],storiesBar:[`.qf6s4`,`.PolarisIGVirtualList.PolarisStoryTray`,`.PolarisFeedStoryTrayWrapper`],storiesBarLoadingPanel:[`.PolarisFeedLoadingSpinner._ab6o`,`.PolarisFeedPage ._ab6o`],blueLinkButton:`.UP43G`,actionSheet:[`.xkuux`,`.PolarisIGCoreModalBackdrop > ._ac7o`],useAppGradientBar:[`.xZ2Xk`,`.PolarisMobileNav + section._aa9n`],actionDialog:[`.mt3GC`,`.IGCoreDialog._a9-z`],actionDialogItem:[`.mt3GC .aOOlW`,`.IGCoreDialog._a9--`],actionDialogWithoutHeader:[`.mt3GC:first-child`,`.IGCoreDialog._a9-z:first-child`],postDmButton:[`article button.PolarisIGCoreSVGIconButton:has(polygon[points*="11.698 20.334 22 3.001"])`,`.PolarisMobilePost_next button.PolarisIGCoreSVGIconButton:has(polygon[points*="11.698 20.334 22 3.001"])`],post:[`article[data-post-id]`,`article:has([data-post-id])`,`.PolarisMobilePost_next[data-post-id]`],postThreeDotsButton:[`.MEAGs button`,`.PolarisPostOptionsButtonPicker button`,`.PressableText:has(circle[cx="18"][cy="12"][r="1.5"])`],postVideoContainer:[`._5wCQW`,`.PolarisDeclarativeVideo._ab1c`],publishingBarText:[`.o5gub span`,`.PolarisUploadProgressBar._aaug`,`.UploadBar__text`],uploadPanel:[`.TExId`,`.PolarisUploadProgressBar._aauh`,`.UploadBar`],uploadPanelText:[`.PolarisUploadProgressBar._aaug`],uploadPanelVideoIcon:`.TExId .cRc_w`,expandVideoButton:`._7zNgw`,continueWatchingOverlay:`.oNYBg`,cookieModalContent:`.RnEpo ._74vy-`,cookieModal:`.BaseCometModal:has(.PolarisCookieConsentModal)`,carouselNavButton:`.PolarisSidecar .PolarisHSnapScroll > button`,blueButton:`button._acas:not(._acao)`,toastMessage:[`.PolarisToastWrapper._a999`],postCaption:[`.PolarisPostPreviewCommentsPicker ._ab9o > span:last-child > span:first-child`],postCaptionLink:[`.PolarisPostPreviewCommentsPicker ._ab9o > span:last-child > span:first-child a`],errorPageContent:[`._a3gq ._ab8q`],postPhotoOverlay:[`.PolarisPhoto._aagw`],tryMbsSection:[`.PolarisQPBloksRenderer._a9_9`],splashScreen:[`body > #splash-screen`]},boost:{suggestion:`.PolarisFeedSidebarSuggestedUserListHeaderAndMargin .IGDSListItem`,suggestionHoverable:`.BaseHovercardTriggerWrapper`,suggestionFollowButton:`.PolarisIGCoreButton`,profileFollowButton:`.PolarisProfileHeaderUsernameWithActionButtons .PolarisIGCoreButton`,editProfile:`.PolarisProfilePageContent div:has(> a[href="/accounts/edit/"])`},creationPopup:{root:[`.PolarisMobileCreationNavItem ._aa5x`,`.PolarisMobileCreationNavItem ._ad8j`,`.PolarisMobileCreationNavItem ._aa5-`,`.IGDSPopover:has(.PolarisMobileCreationMenuContent)`,`.PolarisMobileCreationMenuContent`,`.BaseContextualLayerDefaultContainer:has(.PolarisMobileCreationMenuContent)`],triggerButton:[`.PolarisGenericMobileHeader .PolarisMobileCreationNavItem a`],postButton:[`.PolarisMobileCreationNavItem ._aa5x [role="button"]:first-child`,`.PolarisMobileCreationNavItem ._ad8j [role="button"]:first-child`,`.PolarisMobileCreationNavItem ._aa5- [role="button"]:first-child`,`.PolarisMobileCreationMenuContent [role="button"]:first-child`],storyButton:[`.PolarisMobileCreationNavItem ._aa5x [role="button"]:last-child`,`.PolarisMobileCreationNavItem ._ad8j [role="button"]:last-child`,`.PolarisMobileCreationNavItem ._aa5- [role="button"]:last-child`,`.PolarisMobileCreationMenuContent [role="button"]:last-child`],postInput:[`.PolarisMobileCreationNavItem > form:last-child > input`]},dragPanel:{root:[`.RnEpo.xpORG._9Mt7n`,`.PolarisIGCoreModalBackdrop > ._ac7o`],handle:[`.BHY8D`,`.PolarisIGCoreSheet._ac7m`],igIcon:`.glyphsSpriteApp_Icon_36.u-__7`,shareToThreadsLink:[`a.WebPressable:has(path[d*="M141.537 88.9883C140.71 88.5919 139.87"])`]},authScreen:{loginContainer:`.rxwpz`,loginContainerParagraph:`.rxwpz p`,loginFormParagraph:`.HmktE p`,avatar:`.rxwpz img`,username:[`html[data-page="unifiedHome"] .l9hKg`,`html[data-page="loginPage"] .l9hKg`],footer:[`html[data-page="unifiedHome"] footer`,`html[data-page="loginPage"] footer`],fromFacebookBar:[`html[data-page="unifiedHome"] .O1flK`,`html[data-page="loginPage"] .O1flK`],openAppButton:[`.PolarisAuthFormCard:not(:has(.PolarisSlimLoginForm)) div:has(> .PolarisIGCoreButton:first-child:last-child)`]},storyViewer:{root:[`.PolarisMobileOwnerStories.PolarisStoriesReel`,`.PolarisMobileStoriesPage > .PolarisMobileStories`,`section.PolarisBaseShell > .PolarisMobileStories`,`.CometPushView > .PolarisStoriesV3Page`],container:[`.PolarisBaseShell:has(> .PolarisMobileStories)`,`.CometPushView:has(.PolarisStoriesV3Page)`],videoPlayer:[`.PolarisStoryVideoPlayerWrapper > div[style*="top: 0"]`],avatar:[`.PolarisMobileOwnerStories img.PolarisUserAvatar`,`.PolarisMobileOwnerStoriesOverlay img.PolarisUserAvatar`,`.PolarisStoriesV3Owner img.PolarisUserAvatar`],time:[`time.PwV9z`,`time.PolarisStoriesHeaderOwner`,`time.PolarisStoriesV3Timestamp`],videoPoster:`img.PolarisStoryVideo`,mediaContainer:`.PolarisStoryMediaLayout._aa64`,image:[`.PolarisStoryImage img.PolarisStoryImage`,`.PolarisStoriesV3MediaPlayer > img`],video:[`video.PolarisStoryVideo`,`.PolarisMobileStoryViewer video`,`.PolarisStoriesV3MediaPlayer video`],textarea:[`textarea.PolarisStoriesV3ReplyInput`],viewAsAvatar:[`.PolarisStoryMediaLayout img.PolarisUserAvatar`],pollContainer:`.tj63N`,pollButtons:`.tj63N`,pollAnswerDigitOrEmoji:`.KUQv0`},storyCreation:{root:[`._650Zr`,`.PolarisStoryCreationPage`,`body[data-page="StoryCreationPage"] section`],canvas:[`.PolarisStoryCreationPage canvas`,`body[data-page="StoryCreationPage"] canvas`],headerButton:[`.PolarisStoryCreationPage header button`,`body[data-page="StoryCreationPage"] header button`],textInput:[`[contenteditable]`,`.PolarisStoryCreationTextInput[contenteditable]`],topRightButtonsContainer:[`.o4NXM`,`.PolarisStoryCreationPage header > div.PolarisStoryImageCreationContainer`,`body[data-page="StoryCreationPage"] header > div.PolarisStoryImageCreationContainer`],topRightButton:[`.o4NXM button`,`.PolarisStoryCreationPage header > div button`,`body[data-page="StoryCreationPage"] header > div button`],downloadButton:[`[class*="storiesSpriteDownload"]`,`.PolarisStoryCreationPage header > div button:nth-child(1)`,`body[data-page="StoryCreationPage"] header > div button:nth-child(1)`],mentionBarContainer:[`.uPlSl`,`.PolarisTypeahead.PolarisStoryCreationTextInput`],mentionBar:[`.imGmP`,`.PolarisTypeahead.PolarisStoryCreationTextInput > div`],mentionReel:[`.imGmP > div`,`.PolarisTypeahead.PolarisStoryCreationTextInput > div > div`],mentionReelRow:[`.imGmP > div > div`,`.PolarisTypeahead.PolarisStoryCreationTextInput > div > div > div`],mentionReelItem:[`#touch_mention.qOsKV`,`#touch_mention.PolarisStoryTypeaheadResultsList._acn7`],mentionReelItemName:[`#touch_mention.qOsKV .KMpYj`,`#touch_mention.PolarisStoryTypeaheadResultsList ._acn9`],mentionReelItemAvatar:[`#touch_mention.PolarisStoryTypeaheadResultsList img.PolarisStoryTypeaheadResultsList`],videoHeader:[`._9o3e0`,`header.PolarisStoryVideoCreationContainer`],photoControls:[`.PolarisStoryImageCreationContainer._aa3f`,`header.PolarisStoryImageCreationContainer > div:last-child`],videoWrap:[`header.PolarisStoryVideoCreationContainer + .PolarisStoryVideoCreationContainer`],video:[`.JHXak`,`video.PolarisStoryVideoCreationContainer`],videoPoster:[`.pSeby`,`video.PolarisStoryVideoCreationContainer + img`],footer:[`.GRPvx ~ footer`,`footer.PolarisStoryCreationShareFooter`],videoPlayButton:[`.JHXak ~ .videoSpritePlayButton`,`div.PolarisStoryVideoCreationContainer > span`],videoCreationExitButton:[`header.PolarisStoryVideoCreationContainer > button.PolarisIGCoreIconButton`],submitButton:[`.PolarisStoryCreationShareFooter > button`],submitButtonText:[`.PolarisStoryCreationShareFooter > button .PolarisStoryCreationShareFooter`],uploadHeader:[`.PolarisStoryCreationPage .PolarisSharingProgressModal header`,`body[data-page="StoryCreationPage"] .PolarisSharingProgressModal header`],uploadBar:[`.PolarisStoryCreationPage .PolarisSharingProgressModal header > div`,`body[data-page="StoryCreationPage"] .PolarisSharingProgressModal header > div`],uploadText:[`.PolarisStoryCreationPage .PolarisSharingProgressModal header h1`,`body[data-page="StoryCreationPage"] .PolarisSharingProgressModal header h1`],textColorPicker:[`.PolarisStoryCreationColorPicker.PolarisStoryCreationTextInput`],drawColorPicker:[`.PolarisStoryCreationDrawColorPicker.PolarisStoryCreationDrawing`],colorPickerSelectedCircle:[`button.PolarisStoryCreationColorPicker > ._aa87`,`button.PolarisStoryCreationDrawColorPicker > ._aa82`],addStickerButton:[`.PolarisStoryImageCreationContainer > button:nth-child(2)`]},explorePage:{nav:[`html[data-page="exploreLandingPage"] nav.PolarisShellMobileHeader`],header:`header.PolarisExploreMobileHeader`,searchInputPlaceholder:[`.PolarisDynamicExplorePageContentWrapper input.PolarisIGCoreSearchInput::placeholder`],searchContainer:[`.PolarisDynamicExplorePageContentWrapper > .PolarisIGCoreBox`],search:[`.PolarisDynamicExplorePageContentWrapper > .PolarisIGCoreBox > .PolarisIGCoreBox:first-child`],main:[`main > .PolarisDynamicExplorePageContentWrapper`],content:[`.mJ2Qv`,`.PolarisDynamicExplorePageSharedContent`,`.PolarisDynamicExplorePageContentWrapper`],contentInner:[`.K6yM_`,`.PolarisDynamicExplorePageSharedContent > *`,`.PolarisDynamicExplorePageContentWrapper > *`],post:[`.pKKVh`,`.PolarisDynamicExploreSectionalItem`],searchResults:[`.gJlPN`,`.PolarisDynamicExplorePageSharedContent > .PolarisSearchResultsList`,`.PolarisDynamicExplorePageContentWrapper > .PolarisSearchResultsList`]},profilePage:{content:[`.v9tJq`,`main.PolarisShellContent > .PolarisProfilePage`,`main.PolarisRefreshedShellContent > .PolarisProfilePage`,`main.PolarisRefreshedShellContent > .PolarisProfilePageContent`,`main > .PolarisProfilePageContent`],header:[`.zw3Ow`,`.PolarisProfilePage header`,`.PolarisProfilePageContent header`],username:[`.KV-D4`,`section.PolarisProfilePageHeader h2.PolarisIGCoreText`],avatarWithStoryWrap:[`.RR-M-.h5uC0`,`.PolarisProfilePageHeader div.PolarisUserAvatarWithStories`],avatarStoryRing:[`html[data-page="profilePage"] .RR-M-.h5uC0 canvas`,`.PolarisProfilePageHeader canvas.PolarisStoryRing`],followButton:[`.nZSzR .y3zKF.sqdOP`,`.XBGH5 ._4EzTm .soMvl:last-child`,`[data-page="profilePage"] .PolarisFollowButton button`],toggleSuggestionsButton:[`.PolarisFollowButton > .PolarisDropdownButton:last-child`],writeButton:[`.JI_ht.vwCYk`,`html[data-page="profilePage"] .i0EQd`,`.PolarisProfilePageHeader ._ab9s`,`div:has(+ div[style*="width: 34px"]):not(:has(button))`,`.PolarisProfilePageHeader .IGDSBox > .WebPressable`],subscribeButtonWrap:[`.vBF20`],blueButtonsWrap:[`.nZSzR .vwCYk`],buttonsRow:[`.Y2E37 > div:first-child`],settingsMenuWrap:[`._7XkEo`,`.PolarisNavigationalHeader + ._ac8b`],settingsMenu:[`._7XkEo > div`,`.PolarisNavigationalHeader + ._ac8b > div`],postRow:[`.v9tJq .weEfm`,`.PolarisProfileMediaBrowser .PolarisIGVirtualGrid`,`.PolarisProfileTabChannel .PolarisIGVirtualGrid`,`.PolarisProfilePageContent .PolarisIGVirtualGrid`],postContainer:[`.v9tJq ._bz0w`,`.PolarisProfileMediaBrowser .PolarisPostsGridItem`,`.PolarisProfilePageContent .PolarisPostsGridItem_next`,`.PolarisProfileTabChannel .PolarisVirtualPostsGrid`,`.PolarisProfilePageContent .PolarisClipsGrid_next`,`.PolarisProfilePageContent .PolarisIGVirtualGrid > div`],post:[`.v9tJq ._bz0w a[href^="/p/"]`,`.PolarisProfileMediaBrowser .PolarisPostsGridItem > a[href^="/p/"]`,`.PolarisPostsGridItem_next a[href^="/p/"]`,`.PolarisProfilePageContent .PolarisIGVirtualGrid > div a`],reelRow:[`.v9tJq .gmGWn`,`.v9tJq .Nnq7C`,`.PolarisProfilePage .PolarisIGVirtualList .PolarisIGVirtualGrid._abq4`,`.PolarisProfilePageContent .PolarisIGVirtualList .PolarisIGVirtualGrid._abq4`],reelContainer:[`.v9tJq .k1v61`,`.v9tJq .b9_1r`,`.PolarisProfilePage .PolarisClipsGrid`,`div:has(> .PolarisClipsGridItem)`,`.PolarisIGVirtualGrid > .PolarisClipsGrid`],reelPreviewStats:[`.v9tJq .b9_1r .qn-0x`,`.PolarisPostsGridItemOverlay._ac2d`],reelIcon:[`svg:has(path[d*="m12.823 1 2.974"])`],pinnedIcon:[`svg:has(path[d*="m22.707 7.583-6.29-6.29a1"])`],moreButton:[`.VMs3J`,`section.PolarisProfilePageHeader > .PolarisProfilePageHeader > div.PolarisProfilePageHeader`],tab:[`._9VEo1`,`.PolarisProfilePage .PolarisTabbedContent > .PressableText`,`.PolarisProfilePageContent .PolarisTabbedContent > .PressableText`],activeTab:[`.PolarisProfilePage .PolarisTabbedContent > .PressableText[aria-selected="true"]`,`.PolarisProfilePageContent .PolarisTabbedContent > .PressableText[aria-selected="true"]`],openMbsButton:[`div:has(> a[href*="https://business.facebook.com/business/loginpage/"])`,`div:has(> a[href*="instagram.com/?u=https%3A%2F%2Fbusiness.facebook.com"])`],profileButton:[`section.PolarisProfilePageHeader .WebPressable`],postVideoIcon:[`.CzVzU svg`],postVideoOverlay:[`.qn-0x`],followersFollowingsLink:`.Y8-fY a`},profilePageFeedTab:{postFooter:[`article.PolarisPost ._ae3w`],addCommentSection:[`article.PolarisPost ._ae3w section.PolarisPostCommentInput`],addCommentTypeahead:[`article.PolarisPost ._ae3w .PolarisTypeahead`]},postPage:{postHeader:[`.PolarisPostPage ._aasi`,`.PolarisPostPage article > div > div:first-child`],postFooter:[`.PolarisPostPage ._aast`,`.PolarisPostPage article > div > div:last-child > div`]},commentsPage:{body:`html[data-page="mobileAllCommentsPage"] .CometMainContentWrapper`,footer:`html[data-page="mobileAllCommentsPage"] nav.PolarisNavWrapper`,scrollContainer:[`.XQXOT`,`.PolarisThreadedComments > ul`],showMoreButton:[`li > div > .wpO6b`,`.PolarisThreadedComments > ul > li:last-child`],lastListItem:`.PolarisThreadedComments > ul > *:last-child`,comment:[`.C4VMK`,`.PolarisPostComment._a9zr`]},feedPage:{body:[`.Wamc7`,`section > ._aam1`],postsContainer:[`.IGDSBox > .PolarisFeedPage`],nextPostsContainer:[`.PolarisFeedWrapper_next .IGDSBox:has(> .PolarisIGVirtualList)`],createPostTopButton:[`.PolarisGenericMobileHeader a:has(path[d^="M2 12v3.45c0"])`],feed:[`section.PolarisFeedPage`,`.PolarisFeedContainerLayout > div > .PolarisFeedWrapper_next`,`.PolarisFeedContainerLayout > div > .PolarisFeedWrapper`,`.PolarisFeedContainerLayout > div > div`],post:[`article._8Rm4L`,`article.PolarisPost`,`article.PolarisPostFunctional`,`article.PolarisFeedCard_next`],postContainer:[`.PolarisFeedCard_next:has(> .PolarisDoubleTappable)`],postContainerChild:[`.PolarisFeedCard_next:has(> .PolarisDoubleTappable) > div`],postContainerChild2:[`.PolarisFeedCard_next:has(> .PolarisDoubleTappable) > div > div`],postBody:[`article.PolarisPost ._aatk`,`article.PolarisPost ._ab12`,`article.PolarisFeedCard_next > div > div:nth-child(2)`],postContentLimit:`[style*="min(470px, 100vw)"]`,postFooter:[`.eo2As`,`._aatk + .PolarisIGCoreBox > ._aast > ._aasx`,`._ab12 + .PolarisIGCoreBox > div > div`,`._aatk + .PolarisIGCoreBox > div > div`],postThreeDotsButton:[`.MEAGs`,`.PolarisPostOptionsButtonPicker > button`],postActionIconDefault:[`.rrUvL`,`.PolarisPostFeedbackControls button._abl- > div:last-child`],postActionIconHovered:[`.B58H7`,`.PolarisPostFeedbackControls button._abl- .PolarisIGCoreSVGIconButton`],postPhoto:[`.KL4Bh img`,`article.PolarisPost .PolarisPhoto img`,`article.PolarisPostFunctional .PolarisPhoto img`,`article.PolarisFeedCard_next .PolarisPhoto img`],postVideo:[`article._8Rm4L video`,`article.PolarisPost .PolarisVideo video`,`article.PolarisPostFunctional .PolarisVideo video`,`article.PolarisFeedCard_next video`],postVideoContainer:[`.GRtmf`,`.PolarisPost .PolarisMedia.PolarisVideo`,`.PolarisPostFunctional .PolarisMedia.PolarisVideo`,`[data-media-actions-post-type="igtv"] > .PolarisIGCoreBox`,`[data-visualcompletion] > .PolarisPostVideoPlayerWrapper`],carouselDots:[`.ijCUd`,`.PolarisStepIndicator.PolarisSidecar`],carouselDot:[`.Yi5aA`,`.PolarisStepIndicator ._acnb`]},postCreation:{body:[`[data-page="CreationDetailsPage"] .PolarisCreationShell`,`[data-page="CreationDetailsPage"] .PolarisBaseShell`,`section > div.PolarisCreationDetailsPage:not(.PolarisCreationCaptionInput)`],nextButton:[`[data-page="CreationStylePage"] .UP43G`,`[data-page="CreationStylePage"] .PolarisNavigationalHeader ._ab5p`],closeButton:[`.PolarisCreationShell .PolarisGenericMobileHeader._ab19 button.PolarisNavigationalHeader`],captionContainer:[`.IpSxo`,`.PolarisCreationDetailsPage._abru`],captionTextarea:[`.IpSxo textarea`,`textarea.PolarisCreationCaptionInput`,`.PolarisCreationCaptionInput textarea`],userAvatar:[`.IpSxo .GsWMc`,`.IpSxo ._2dbep`,`.PolarisUserAvatar.PolarisCreationDetailsPage`],imageContainer:[`.N7f6u`,`.PolarisCreationCroppingUnit._abqh`],videoContainer:[`.YMoW3`,`.PolarisCreationStyleVideoUnit._abe_`],video:[`.YMoW3 video`,`.PolarisCreationStyleVideoUnit._abe_ video`],videoPoster:[`.YMoW3 img`,`.PolarisCreationStyleVideoUnit._abe_ img`],videoPlayButton:[`.PolarisCreationStyleVideoUnit._abe_ span._abf6[role="button"]`],filtersReel:[`.PDNx9`,`.PolarisIGVirtualList.PolarisCreationFilteringUnit`],submitPostButton:[`.hfWwk .UP43G`,`[data-page="CreationDetailsPage"] ._ab5p`,`[data-page="CreationDetailsPage"] h1 + div button.PolarisNavigationalHeader`],rowButton:[`._2OfRz`,`.PolarisCreationDetailsPage._abrf`],previewContainer:[`html[data-page="CreationDetailsPage"] .g5kp1`,`.PolarisCreationDetailsPage ._aau7`],previewPostTypeIcon:[`.cRc_w`,`.PolarisCreationDetailsPage .PolarisMediaPreviewThumbnail svg`],previewPostImage:[`.IpSxo .FuaTR`,`img.PolarisMediaPreviewThumbnail`],expandImageButton:[`.pHnkA`,`.PolarisCroppableImage._abfb`],mentionsOverlay:[`.cDEf6`,`.PolarisCreationCaptionInput._aby4`],tagPeopleButton:[`.DG8Ws`,`button.PolarisCreationTagVideo._a9z-`]},loginBar:{root:`.Xwp_P .KGiwt`,content:`.Xwp_P .KGiwt .ryLs_`,openAppButton:[`.Xwp_P .KGiwt button`,`.PolarisMobileTopNavLoggedOut button._acap`]},activityPage:{headerBottomLine:[`html[data-page="ActivityFeedPage"] .PolarisGenericMobileHeader::before`],topListContainer:[`html[data-page="ActivityFeedPage"] .PolarisShellContent > .PolarisIGVirtualList > div`]},"general_use-application-bar":[`.Z_Gl2`,`.MFkQJ`,`._acc8`],"post-item":[`._97aPb`,`.PolarisPost div:first-child:last-child:not([class]) > .PolarisPhoto`,`.PolarisPost div:first-child:last-child:not([class]) > .PolarisPhotoWithIndicator > .PolarisPhoto`,`.PolarisPost .PolarisMedia.PolarisVideo`,`.PolarisPost .PolarisSidecar li.PolarisVirtualHSnapScrollComponents`,`.PolarisPostFunctional .PolarisPostFunctional.PolarisPhoto`,`.PolarisPostFunctional .PolarisPostFunctional.PolarisPhotoWithIndicator`,`.PolarisFeedCard_next .PolarisPhoto._aagu`,`.PolarisPostFunctional .PolarisMedia.PolarisVideo`,`[data-visualcompletion] > .PolarisPostVideoPlayerWrapper`,`.PolarisPostFunctional .PolarisSidecar li.PolarisVirtualHSnapScrollComponents`,`.PolarisFeedCard_next .PolarisSidecar li.PolarisVirtualHSnapScrollComponents`,`.PolarisPostVideoPlayerWrapper[style]`,`.PolarisMediaItem_next`,`.PolarisVideoLegacy`,`article .PolarisMediaItem`],"post-video":[`.GRtmf video`,`.PolarisPost ._aatk video`,`.PolarisPostFunctional ._ab12 video`,`video.VideoPlayerImplementationReactVideoElement`],"post-video-poster":[`.GRtmf video + img`,`.PolarisPost ._aatk video + img`,`.PolarisPostFunctional ._ab12 video + img`],postVideoOverlayContainer:[`.VideoPlayerComponentContainer:has(> .VideoPlayerInteractionOverlay)`],postVideoOverlay:[`.VideoPlayerInteractionOverlay`],postVideoOverlaySoundButton:[`.VideoPlayerComponentContainer:has(> .VideoPlayerInteractionOverlay) button[aria-label]`],"post-tagged-people-button":[`.G_hoz`,`._a3gq ._a9-6`,`.PolarisVideo ._a9-6`,`.PolarisUserTagIndicator`],"story-container":[`.qbCDp`,`.PolarisMobileOwnerStories._aa2i`,`section > .PolarisMobileStories`,`.CometPushView .PolarisStoriesV3Page`],"story-loading-preview":`.qbCDp canvas`,"story-video-play-button":[`.qbCDp .videoSpritePlayButton`,`.PolarisMobileStoryEventZone._9zwu`],"stories-viewer":[`.UIujo`,`.PolarisMobileStoriesPage`],"highlights-container":[`.YlNGR`,`.PolarisProfileStoryHighlightsTray .PolarisHSnapScroll._aap0`],"comments-list-on-comments-page":`.XQXOT`,"profile-page-stat-container":`.LH36I`,"profile-page-stat-item":`._81NM2`,"profile-page-grid-stretch-element":`._2z6nI article:first-child:empty`,"profile-send-message-button":`.fAR91`,"header-top-level-button":[`.HOQT4`,`.PolarisGenericMobileHeader._ab18._ab1b`],"your-story-button-text":[`.XdXBI`,`.PolarisOwnStoryTrayItem._aac2`],"comment-form":[`.RxpZH`,`.PolarisPostCommentInput._aaof`],"comment-form-avatar":[`.RxpZH ._2dbep`,`.PolarisPostCommentInput > img.PolarisUserAvatar`],"comment-form-form":[`.RxpZH form`,`form.PolarisPostCommentInput`],"comment-form-textarea":[`.RxpZH textarea`,`textarea.PolarisPostCommentInput`],"comment-form-submit-button":[`.RxpZH button[type="submit"]`,`form.PolarisPostCommentInput button`],postCreationPage:[`html[data-page="CreationStylePage"]`],storyCreationPage:[`html[data-page="StoryCreationPage"]`],"new-post_tag-people-image-container":`.qJfNm`},desktopIgSelectors:{common:{useAppDialogCloseButton:[`.BaseCometModal:has([style*="--x-minHeight: 480px"]) .IGDSIconButton`]},reel:{root:[`.PolarisClipsTabDesktopClip`,`.PolarisClipsDesktopVideoPlayer`],childVideo:`video[aria-label]`,childUsername:`a[aria-label] span:not(:has(img))`},story:{root:`.PolarisStoriesV3ReelPlayerContainer`,childVideo:`video[aria-label]`,childImage:`.PolarisStoriesV3MediaPlayer > img`,childUsername:`.PolarisStoriesV3OwnerTitle`},post:{root:`[data-post-id]`,childSidecarStep:`.PolarisStepIndicator.PolarisSidecar > *`},sidePanel:{logo:[`.PolarisNavigation:has(> .PolarisNavigation:nth-child(3)) > div:nth-child(1)`,`.PolarisNavigationSimple:has(> .PolarisNavigationSimple:nth-child(3)) > div:nth-child(1)`],menu:[`.PolarisNavigation:has(> .PolarisNavigation:nth-child(3)) .PolarisNavigationIcons`,`.PolarisNavigationSimple:has(> .PolarisNavigationSimple:nth-child(3)) .PolarisNavigationIcons`],menuItemHoverTarget:[`.PolarisNavigationItem a > div`],menuFeedItem:[`.PolarisFeedNavItem > span`],menuCreateItem:[`.PolarisCreationNavItem > span`],createButton:[`.PolarisCreationNavItem .PolarisNavigationItem > a`],creationPopup:[`.PolarisCreationNavItem .PolarisIGCorePopover:has(> a)`]},expandableSidePanel:{container:[`.PolarisNavigationSimple[style*="width"]`],containerWithSubPanel:[`.PolarisNavigationSimple[style*="width"]:has(.PolarisSideNavSubpanel)`],menuItemText:[`.PolarisNavigationItem[style*="transform"]`]},media:{postContainer:[`[data-post-id]`],postVideo:[`[data-post-id] video`],storyContainer:[`div[style]:not([class]):has(> .PolarisStoriesV3MediaPlayer)`],videoStoryContainer:[`.PolarisStoriesV3ReelPlayerContainer > .PolarisStoriesV3Player:has(video)`],reelContainer:[`.PolarisClipsDesktopVideoPlayer`],reelVideo:[`.PolarisClipsDesktopVideoPlayer video[aria-label]`]}},css:`
    html {
      background: rgb(var(--ig-primary-background));
    }

    html:has(.PolarisFeedSidebarSuggestedUserListHeaderAndMargin) div[class]:has(>.PolarisTabbedFeedHeader) {
      max-width: 630px;
    }

    .PolarisStoriesV3StickerPopoverContent {
      color: white;
    }
  `}})),qS,JS,YS,XS,ZS,QS,$S=o((()=>{({$files:qS,$idb:JS,$shortid:YS,$env:XS,$utils:ZS,$s:QS}=app),qS.controller={async init(){this._initCleanup()},async save(e,t=null,n=null){n??=YS.generate();let r=t?`${t}.${n}`:n;return await JS.set(`files.${r}`,e),r},async read(e){return await JS.get(`files.${e}`)||null},async has(e){return!!await this.read(e)},async remove(e){await JS.remove(`files.${e}`)},async getFileIds(e=null){let t=await JS.keys(),n=e?`files.${e}.`:`files.`;return t.filter(e=>e.startsWith(n)).map(e=>e.replace(`files.`,``))},_initCleanup(){XS.is.bg&&ZS.createAlarm(`files.cleanup`,{period:ZS.time.HOUR,immediately:!0},()=>this._cleanup())},async _cleanup(e=!1){let t=new Date().toString().split(`(`)[0].trim();qS.log(`Cleanup | ${t}`);let n=JSON.stringify(QS),r=await this.getFileIds();for(let e of r)n.includes(e)||(await this.remove(e),qS.logDev(` ${e}`))}}}));function eC(e,t=!1){let n=aC.getHashtagRegex({hashOptional:!t});return(e.match(n)||[]).map(e=>e.startsWith(`#`)?e.substr(1):e).map(e=>e.toLowerCase()).filter(aC.unique)}function tC(e){return[e.name,e.lastScanOn,e.isBanned?1:0,e.isFlagged?1:0,e.avgLikes,e.avgComments,e.avgPosts,(e.relevantTags||[]).map(t=>t.split(e.name).join(`~`)).join(`,`)].join(`:`)}function nC(e){let t=e.split(`:`);if(t.length===1)return{name:t[0]};let[n,r,i,a,o,s,c,l]=t;return{name:n,lastScanOn:Number(r),isBanned:Number(i)===1,isFlagged:Number(a)===1,avgLikes:Number(o),avgComments:Number(s),avgPosts:Number(c),relevantTags:(l||``).split(`,`).filter(Boolean).filter(aC.unique).map(e=>e.split(`~`).join(n))}}function rC(e){let t=[];{let n={},r=e.flat();for(let e of r)n[e]=(n[e]||0)+1;for(let e in n){let r=n[e],i=t.find(e=>e.frequency===r);i||(i={frequency:r,strs:[]},t.push(i)),i.strs.push(e)}t.sort((e,t)=>t.frequency-e.frequency)}for(let n of t){let t={};for(let r of e){let e=0;for(let i of r)n.strs.includes(i)&&(t[i]=(t[i]||0)+e,e+=1)}n.strs.sort((e,n)=>t[e]-t[n])}return t.map(e=>e.strs).flat()}var iC,aC,oC=o((()=>{({$tagAssist:iC,$utils:aC}=app),iC.utils={extractTags:eC,compressTag:tC,decompressTag:nC,sortByFrequency:rC}})),sC,cC,lC,uC=o((()=>{({$inspiration:sC,$s:cC,$utils:lC}=app),sC.proxy={getPosts(){return cC.inspiration.posts},getAllPosts(){return[cC,...Object.values(cC.userStates)].map(e=>e.inspiration.posts).flat()},getPost(e){return cC.inspiration.posts.find(t=>t.id===e)},async getFilename(e,t){let n=t.type.split(`/`)[1];return e.filename?`${e.filename}.${n}`:`${(await lC.objectUrl.create(t)).split(`/`).pop()}.${n}`}}})),dC,fC,pC,mC=o((()=>{({$idb:dC,$bus:fC,$env:pC}=app),dC.controller={async init(){this._paused={data:!1,backup:!1},pC.is.pp?(dC.assign(this._createBusApi(`data`)),dC.backup=this._createDbApi(`backup`),this._db=await this._open(`inssist`),await this._enablePersistentStorage()):pC.is.bg&&(dC.assign(this._createDbApi(`data`)),dC.backup=this._createDbApi(`backup.state`),this._db=await this._open(`inssist`),await this._enablePersistentStorage(),fC.on(`idb.get`,this._get,this),fC.on(`idb.has`,this._has,this),fC.on(`idb.set`,this._set,this),fC.on(`idb.keys`,this._keys,this),fC.on(`idb.remove`,this._remove,this),fC.on(`idb.bulk`,this._bulk,this),fC.on(`idb.pause`,this._pause,this))},_createDbApi(e){return{get:this._get.bind(this,e),has:this._has.bind(this,e),set:this._set.bind(this,e),keys:this._keys.bind(this,e),remove:this._remove.bind(this,e),bulk:this._bulk.bind(this,e),pause:this._pause.bind(this,e)}},_createBusApi(e){return{get:fC.send.bind(fC,`idb.get`,e),has:fC.send.bind(fC,`idb.has`,e),set:fC.send.bind(fC,`idb.set`,e),keys:fC.send.bind(fC,`idb.keys`,e),remove:fC.send.bind(fC,`idb.remove`,e),bulk:fC.send.bind(fC,`idb.bulk`,e),pause:fC.send.bind(fC,`idb.pause`,e)}},async _get(e,t,n=null){return new Promise((r,i)=>{let a=this._db.transaction([e],`readonly`).objectStore(e).get(t);a.onsuccess=()=>r(a.result?.value??n),a.onerror=()=>i(a.error)})},async _has(e,t){return new Promise((n,r)=>{let i=this._db.transaction([e],`readonly`).objectStore(e).getKey(t);i.onsuccess=()=>n(i.result!==void 0),i.onerror=()=>r(i.error)})},async _set(e,t,n,r=!1){this._paused[e]&&!r||await new Promise((r,i)=>{let a=this._db.transaction([e],`readwrite`),o=a.objectStore(e).put({id:t,value:n});o.onsuccess=()=>{this._notifyChanges(e,[{type:`set`,key:t}]),r()},o.onerror=()=>i(o.error),a.onabort=()=>i(a.error),a.onabort=()=>i(a.error)})},async _keys(e){return new Promise((t,n)=>{let r=this._db.transaction([e],`readonly`).objectStore(e).getAllKeys();r.onsuccess=()=>t(r.result),r.onerror=()=>n(r.error)})},async _remove(e,t,n=!1){if(!(this._paused[e]&&!n))return new Promise((n,r)=>{let i=this._db.transaction([e],`readwrite`).objectStore(e).delete(t);i.onsuccess=()=>{this._notifyChanges(e,[{type:`remove`,key:t}]),n()},i.onerror=()=>r(i.error)})},async _bulk(e,t,n=!1){if(!(this._paused[e]&&!n))return await new Promise((n,r)=>{let i=this._db.transaction([e],`readwrite`),a=i.objectStore(e);for(let e of t)e.type===`set`?a.put({id:e.key,value:e.value}):e.type===`remove`&&a.delete(e.key);i.oncomplete=()=>{this._notifyChanges(e,t),n()},i.onerror=()=>r(i.error),i.onabort=()=>r(i.error)})},_pause(e,t=!0){this._paused[e]=t},async _open(e){return new Promise((t,n)=>{let r=indexedDB.open(e,2);r.onsuccess=()=>t(r.result),r.onerror=()=>n(r.error),r.onupgradeneeded=()=>{let e=r.result;pC.is.bg&&(e.objectStoreNames.contains(`data`)||e.createObjectStore(`data`,{keyPath:`id`}),e.objectStoreNames.contains(`backup.state`)||e.createObjectStore(`backup.state`,{keyPath:`id`})),pC.is.pp&&(e.objectStoreNames.contains(`backup`)||e.createObjectStore(`backup`,{keyPath:`id`}))}})},_notifyChanges(e,t){if(e===`data`){async:fC.call(`idb.change`,t);async:fC.send(`idb.change`,t)}},async _enablePersistentStorage(){navigator.storage.persist&&await navigator.storage.persist()}}})),hC,gC,_C,vC,yC,bC,xC,SC,CC,wC,TC=o((()=>{({$sentry:hC,$store:gC,$bus:_C,$env:vC,$utils:yC,$mobx:bC,$sentryBrowser:xC,$s:SC}=app),CC=100,wC=[`ResizeObserver loop limit exceeded`,`Unable to preventDefault inside passive event listener`,`@dolphin: Onboarding tab should not be opened at startup.`,`Tabs cannot be edited right now (user may be dragging a tab).`,`Extension context invalidated.`,`Invalid or unexpected token`,`AbortError: The play() request was interrupted by a call to pause(). https://goo.gl/LdLk22`,`InvalidStateError: Failed to execute 'transaction' on 'IDBDatabase'`,`Timed out`,`Failed to fetch`],hC.controller={throttle:!1,async init({throttleBy:e=10}={}){if(this.dsn=`https://bea0900834f541bca8157710f7fd31fe@sentry.io/1547551`,vC.is.development)this.throttle=!1;else if(e<=1)this.throttle=!1;else{let t=await yC.ls.get(`sentry-user-hash`);t||(t=Math.floor(Math.random()*0x9184e72a000),await yC.ls.set(`sentry-user-hash`,t)),this.throttle=t%e!==0}this._setup()},_setup(){vC.is.development||xC.init({dsn:this.dsn,release:vC.version,debug:vC.is.development,ignoreErrors:wC,environment:vC.is.development?`development`:vC.is.production?`production`:`unknown`,beforeSend:(e,t)=>{if(vC.is.production&&e.level===`debug`||this.throttle)return null;{let t=bC.toJS(SC);delete t.auth.cookies;let n=JSON.stringify(t);t=n.length>CC*1024?n.substr(0,CC*1024)+`...`:t,e.extra={...e.extra||{},state:t}}let n=t.originalException,r=n&&n.message||String(n);return r&&wC.some(e=>r.includes(e))?null:e}})},sendError(e,t=`error`,n=null,r=null){console.log(`%csentry`,`color: #c818dc`,e,n),vC.is.bg&&_C.send(`popup.log`,`%csentry error [background]`,`color: #c818dc`,e,n),typeof e==`string`&&(e=Error(e)),xC.configureScope(i=>{i.setFingerprint([e.message]),i.setLevel(t);let a=gC.model;if(a.store&&a.state&&a.state.auth&&i.setUser({username:a.state.auth.username}),n)for(let e in n){let t=n[e];typeof t==`string`&&t.length>15500&&(t=t.substr(0,15500)),i.setExtra(e,t)}if(r)for(let e in r){let t=r[e];i.setTag(e,t)}}),xC.captureException(e)}}}));function EC(e,...t){let n=new CustomEvent(`${AC}.${e}`,{detail:t});globalThis.dispatchEvent(n)}function DC(e,t,{once:n=!1}={}){globalThis.addEventListener(`${AC}.${e}`,e=>{t(...e.detail||[])},{once:n})}function OC(e,t){DC(e,t,{once:!0})}var kC,AC,jC=o((()=>{({$eventBus:kC}=app),kC.controller={init(){Object.assign(kC,{send:EC,on:DC,once:OC})}},AC=`__event-bus`})),MC,NC,PC=o((()=>{({$ffmpeg:MC,$bus:NC}=app),MC.controller={init(){},async create(){let e=await NC.send(`ffmpeg.create`);return{addFile:NC.send.bind(null,`ffmpeg.addFile`,e),readFile:NC.send.bind(null,`ffmpeg.readFile`,e),removeFile:NC.send.bind(null,`ffmpeg.removeFile`,e),fileExists:NC.send.bind(null,`ffmpeg.fileExists`,e),run:NC.send.bind(null,`ffmpeg.run`,e),getBitrate:NC.send.bind(null,`ffmpeg.getBitrate`,e),dispose:NC.send.bind(null,`ffmpeg.dispose`,e)}}}})),FC,IC,LC,RC,zC,BC,VC,HC,UC,WC,GC,KC=o((()=>{({$mp:FC,$bus:IC,$iframeBus:LC,$ffmpeg:RC,$shortid:zC,$fusion:BC,$utils:VC,$env:HC,$type:UC}=app),WC=new WeakSet,GC=null,FC.controller={init(){IC.on(`mp.transformMedia`,this.transformMedia,this),IC.on(`mp.addMusicToMedia`,this.addMusicToMedia,this),IC.on(`mp.splitVideo`,this.splitVideo,this),IC.on(`mp.adjustBitrate`,this.adjustBitrate,this),IC.on(`mp.stripMetadata`,this.stripMetadata,this),IC.on(`mp.mergeFromUrls`,this.mergeFromUrls,this),IC.on(`mp.getMetadata`,this.getMetadata,this),HC.is.pp&&(LC.on(`mp.adjustBitrate`,this.adjustBitrate.bind(this)),LC.on(`mp.stripMetadata`,this.stripMetadata.bind(this)),LC.on(`mp.splitVideo`,this.splitVideo.bind(this)))},async transformMedia(e,{width:t,height:n,cover:r=!1,muted:i=!1,music:a=null,stickers:o=[],photoDuration:s=null,onProgress:c}={}){UC.assert(e,Blob),UC.assert(t,Number),UC.assert(n,Number);let l=await VC.media.getDimensions(e),u=BC.config.later,d=VC.media.isVideo(e)?`video`:`photo`;if(!(r||i||a||s||o.length>0||t!==l.width||n!==l.height||d===`video`&&e.size>u.maxVideoFileSize||d===`photo`&&e.size>u.maxPhotoFileSize))return FC.log(`Skip transform`),e;let f=d===`video`||s?u.videoScaleSize:u.photoScaleSize,p=this._scaleDimensions(t,n,f);t=p.width,n=p.height,FC.log(`Transform ${d}: ${l.width}x${l.height} -> ${t}x${n}`);try{let l;if(d===`video`)l=await this._transformVideo(e,{width:t,height:n,cover:r,muted:i,music:a,stickers:o,onProgress:c});else if(s){let i=await this._transformPhoto(e,{width:t,height:n,cover:r,stickers:o});l=a?await this._addMusicToPhoto(i,a.blob,{start:a.start||0,musicVolume:a.musicVolume||1,duration:s}):await this._convertPhotoToVideo(i,s)}else l=await this._transformPhoto(e,{width:t,height:n,cover:r,stickers:o});let u=await VC.media.getDimensions(l);return FC.log(`Transform result: ${u.width}x${u.height}, size=${l.size}`),l}catch(e){throw FC.error(`transformMedia failed: ${e.message}`),e}},async splitVideo(e,t=50){return await this._spawnFfmpeg(async n=>{UC.assert(e,Blob),UC.assert(t,Number);let r=`input_${zC.generate()}.mp4`,i=`chunk%03d_${zC.generate()}.mp4`;await n.addFile(r,e);let a=zC.generate();await n.run([`-i ${r}`,`-c copy`,`-f segment`,`-segment_time ${t.toString()}`,`-reset_timestamps 1`,i],a);let o=[],s=0;for(;;){let t=i.replace(`%03d`,s.toString().padStart(3,`0`));if(await n.fileExists(t)){let r=await n.readFile(t,e.type);o.push(r),s++}else break}return o})},async addMusicToMedia(e,t,{start:n=0,videoVolume:r=1,musicVolume:i=1,duration:a,width:o,height:s}={}){UC.assert(e,Blob),UC.assert(t,[Blob,String]);try{if(VC.media.isVideo(e))return await this._addMusicToVideo(e,t,{start:n,videoVolume:r,musicVolume:i,duration:a});if(!a)throw Error(`duration is required for photo to video conversion`);return await this._addMusicToPhoto(e,t,{start:n,musicVolume:i,duration:a,width:o,height:s})}catch(e){throw FC.error(`addMusicToMedia failed: ${e.message}`),e}},async mergeFromUrls(e,t){return await this._spawnFfmpeg(async n=>{UC.assert(e,String),UC.assert(t,String);let r=await fetch(e).then(e=>e.blob()),i=await fetch(t).then(e=>e.blob());return await n.addFile(`video.mp4`,r),await n.addFile(`audio.mp3`,i),await n.run([`-i video.mp4 -i audio.mp3`,`-c:v copy`,`-c:a aac`,`-shortest`,`output.mp4`]),await n.readFile(`output.mp4`,`video/mp4`)})},async adjustBitrate(e,{maxBitrate:t=1e5}={}){return await this._spawnFfmpeg(async n=>{UC.assert(e,Blob),UC.assert(t,Number);let r=`input_${zC.generate()}.mp4`,i=`output_${zC.generate()}.mp4`;return await n.addFile(r,e),await n.getBitrate(r)<=t?e:(await n.run([`-i ${r}`,`-c:v libx264`,`-preset ultrafast`,`-c:a copy`,i]),await n.readFile(i,`video/mp4`))})},async stripMetadata(e){return await this._spawnFfmpeg(async t=>{UC.assert(e,Blob);let n=`input_${zC.generate()}.mp4`,r=`output_${zC.generate()}.mp4`;return await t.addFile(n,e),await t.run([`-i ${n}`,`-map_metadata -1`,`-c:v copy`,`-c:a copy`,r]),await t.readFile(r,`video/mp4`)})},async getMetadata(e){return await this._spawnFfmpeg(async t=>{if(UC.assert(e,Blob),!VC.media.isVideo(e))throw Error(`Not a video file`);let n=await VC.loadVideoMetadata(e),r=null;try{let n=`input_${zC.generate()}.mp4`;await t.addFile(n,e),r=await t.getBitrate(n)}catch(e){FC.log(`Could not get bitrate: ${e.message}`)}return{width:n.width,height:n.height,duration:n.duration,hasAudio:n.hasAudio,bitrate:r,format:`video/mp4`}})},async _transformVideo(e,{width:t,height:n,cover:r,muted:i,music:a,stickers:o,onProgress:s}){return await this._spawnFfmpeg(async c=>{let l=[],u=[],d={videoIndex:0,audioIndex:0,get video(){return`[v${this.videoIndex}]`},get videoNext(){return this.videoIndex+=1,this.video},get audio(){return`[a${this.audioIndex}]`},get audioNext(){return this.audioIndex+=1,this.audio}},f=await this._createStickersOverlay(o,t,n),p=await VC.loadVideoMetadata(e),m=`output.mp4`,ee=`video.${e.type.split(`/`)[1]}`,te=`[${l.length}:v]`,ne=`[${l.length}:a]`;if(await c.addFile(ee,e),l.push(`-i ${ee}`),u.push(`${te}null${d.video}`),i||(p.hasAudio?u.push(`${ne}anull${d.audio}`):u.push(`anullsrc=channel_layout=stereo:sample_rate=44100${d.audio}`)),r||f||t!==p.width||n!==p.height){let e=this._ffmpegObjectFitFilter(t,n,r);u.push(`${d.video}${e}${d.videoNext}`)}if(!i&&a){let e=`music.mp3`,t=`[${l.length}:a]`;await c.addFile(e,a.blob),l.push(`-ss ${a.start} -i ${e}`),u.push(`${d.audio}volume=${a.videoVolume}[_music0]`),u.push(`${t}volume=${a.musicVolume}[_music1]`),u.push(`[_music0][_music1]amerge${d.audioNext}`)}if(f){let e=`overlay.${f.type.split(`/`)[1]}`,t=`[${l.length}:v]`;await c.addFile(e,f),l.push(`-i ${e}`),u.push(`${d.video}${t}overlay=0:0${d.videoNext}`)}let re=zC.generate();s&&IC.on(`ffmpeg.progress[${re}]`,e=>s(e));let ie=[...l,`-t ${p.duration}`,`-filter_complex ${u.join(`;`)}`,`-map ${d.video}`,!i&&`-map ${d.audio}`,!i&&`-c:a aac`,i&&`-an`,`-c:v libx264`,`-preset ultrafast`,m].filter(Boolean);return FC.log(`running:`,ie),await c.run(ie,re),s&&IC.off(`ffmpeg.progress[${re}]`),await c.readFile(m,`video/mp4`)})},async _transformPhoto(e,{width:t,height:n,cover:r,stickers:i}){let a=await this._createStickersOverlay(i,t,n),o=await createImageBitmap(e),s=a?await createImageBitmap(a):null,c=new OffscreenCanvas(t,n),l=c.getContext(`2d`);l.fillStyle=`black`,l.fillRect(0,0,t,n);let u,d,f,p;if(r){let e=Math.max(t/o.width,n/o.height);f=o.width*e,p=o.height*e,u=(t-f)/2,d=(n-p)/2}else{let e=Math.min(t/o.width,n/o.height);f=o.width*e,p=o.height*e,u=(t-f)/2,d=(n-p)/2}return l.drawImage(o,u,d,f,p),a&&l.drawImage(s,0,0,t,n),await this._canvasToBlob(c,e)},async _canvasToBlob(e,t){if(WC.has(t))return FC.log(`Retry detected, using JPEG format`),await this._convertToJpegAndFitSizeLimit(e,e,1,0);WC.add(t),clearTimeout(GC),GC=setTimeout(()=>{WC=new WeakSet},6e4);let n=await e.convertToBlob({type:`image/png`});return n.size<BC.config.later.maxPhotoFileSize?n:(FC.log(`PNG size ${n.size} exceeds limit, using JPEG`),await this._convertToJpegAndFitSizeLimit(e,e,1,0))},async _convertToJpegAndFitSizeLimit(e,t,n,r){if(r>10)throw FC.error(`Failed to compress photo below ${BC.config.later.maxPhotoFileSize} bytes after 10 attempts`),Error(`Failed to compress photo below size limit after 10 attempts`);let i=await t.convertToBlob({type:`image/jpeg`});if(i.size<BC.config.later.maxPhotoFileSize)return i;FC.log(`JPEG size ${i.size} exceeds limit at scale ${n.toFixed(3)} (attempt ${r+1}), scaling down further`);let a=n*Math.sqrt(BC.config.later.maxPhotoFileSize/i.size),o=Math.round(e.width*a),s=Math.round(e.height*a),c=new OffscreenCanvas(o,s),l=c.getContext(`2d`);return l.imageSmoothingQuality=`high`,l.drawImage(e,0,0,o,s),this._convertToJpegAndFitSizeLimit(e,c,a,r+1)},async _createStickersOverlay(e,t,n){if(e.length===0)return null;let{$editor:r}=app;return await r.stickerController.createOverlay(e,t,n)},_ffmpegObjectFitFilter(e,t,n=!1){let r=Math.round(e),i=Math.round(t);return n?[`scale=iw*max(${r}/iw\\,${i}/ih):ih*max(${r}/iw\\,${i}/ih)`,`crop=${r}:${i}:(in_w-${r})/2:(in_h-${i})/2`].join(`,`):[`scale=iw*min(${r}/iw\\,${i}/ih):ih*min(${r}/iw\\,${i}/ih)`,`pad=${r}:${i}:(ow-iw)/2:(oh-ih)/2:black`].join(`,`)},async _addMusicToVideo(e,t,{start:n=0,videoVolume:r=1,musicVolume:i=1,duration:a}){return await this._spawnFfmpeg(async o=>{let s=await VC.loadVideoMetadata(e),c=`video_${zC.generate()}.mp4`,l=`music_${zC.generate()}.mp3`,u=`output_${zC.generate()}.mp4`;await o.addFile(c,e),await o.addFile(l,t);let d=[];d.push(`-i ${c}`),d.push(`${n?`-ss ${n}`:``} -i ${l}`),a&&d.push(`-t ${a}`),s.hasAudio?(d.push(`-filter_complex [0:a]volume=${r}[a0];[1:a]volume=${i}[a1];[a0][a1]amerge`),d.push(`-map 0:v`),d.push(`-map 0:a`),d.push(`-map 1:a`)):(d.push(`-filter_complex [1:a]volume=${i}`),d.push(`-map 0:v`),d.push(`-map 1:a`)),d.push(`-c:v copy`),d.push(`-c:a aac`),d.push(u);let f=zC.generate();return await o.run([d.join(` `)],f),await o.readFile(u,`video/mp4`)})},async _addMusicToPhoto(e,t,{start:n=0,musicVolume:r=1,duration:i}){return await this._spawnFfmpeg(async a=>{let o=e.type.split(`/`)[1],s=`photo_${zC.generate()}.${o}`,c=`music_${zC.generate()}.mp3`,l=`output_${zC.generate()}.mp4`;await a.addFile(s,e),await a.addFile(c,t);let u=[];u.push(`-loop 1 -i ${s}`),n&&n>0&&u.push(`-ss ${n}`),u.push(`-i ${c}`),u.push(`-t ${i}`),u.push(`-filter_complex [1:a]volume=${r}[aout]`),u.push(`-map 0:v`),u.push(`-map [aout]`),u.push(`-c:a aac`),u.push(`-c:v libx264`),u.push(`-preset ultrafast`),u.push(l);let d=zC.generate();if(await a.run([u.join(` `)],d),!await a.fileExists(l))throw Error(`FFmpeg failed to create output file: ${l}. Command: ${u.join(` `)}`);return await a.readFile(l,`video/mp4`)})},async _convertPhotoToVideo(e,t){return await this._spawnFfmpeg(async n=>{let r=e.type.split(`/`)[1],i=`photo_${zC.generate()}.${r}`,a=`output_${zC.generate()}.mp4`;await n.addFile(i,e);let o=[];if(o.push(`-loop 1 -i ${i}`),o.push(`-t ${t}`),o.push(`-map 0:v`),o.push(`-c:a aac`),o.push(`-c:v libx264`),o.push(`-preset ultrafast`),o.push(a),await n.run(o.join(` `)),!await n.fileExists(a))throw Error(`FFmpeg failed to create output file: ${a}. Command: ${o.join(` `)}`);return await n.readFile(a,`video/mp4`)})},_scaleDimensions(e,t,n){let r=e>n?n/e:1,i=t>n?n/t:1,a=Math.min(r,i);return e=Math.round(e*a),t=Math.round(t*a),e%2!=0&&--e,t%2!=0&&--t,{width:e,height:t}},async _spawnFfmpeg(e){let t;try{return t=await RC.controller.create(),await e(t)}catch(e){throw FC.error(e),e}finally{t&&await t.dispose()}}}})),qC,JC=o((()=>{({$editor:qC}=app),qC.validateCaption=e=>{let t={maxLength:2200,maxMentions:30,maxHashtags:30},n=(e.match(/@[\p{L}\d_]+/gu)||[]).length,r=(e.match(/#[\p{L}\d_]+/gu)||[]).length;return e.length>t.maxLength?`Caption length exceeded: ${e.length} / ${t.maxLength}`:n>t.maxMentions?`Mention limit exceeded: ${n} / ${t.maxMentions}`:r>t.maxHashtags?`Hashtag limit exceeded: ${r} / ${t.maxHashtags}`:null}})),YC,X,XC,ZC,QC,$C,ew,tw,nw=o((()=>{({$editor:YC,$type:X,$punycode:XC,$utils:ZC,$fusion:QC,$igApi:$C,$files:ew,$s:tw}=app),YC.dataController={init(){},hasMusic(e){return X.assert(e,YC.MusicState),!!e.selectedTrackId},hasLink(e){return!!this.getLinkSticker(e)},hasLocation(e){return X.assert(e,YC.LocationState),!!e.selected},hasMentions(e){return X.assert(e,YC.MentionState),e.users.length>0},shouldAddWatermark(e){return tw.hasPro()?!1:e?!0:tw.abTesting.hash<QC.config.common.photoStoryWatermarkPercent},async getMusicDataForEncoder(e){if(X.assert(e,YC.MusicState),!e.selectedTrackId)return null;let t=null;e.selectedTrackId===`custom`?t=e.customTrack.fileId:ZC.is.string(e.selectedTrackId)&&(t=e.igTrackFileId);let n;n=t?await ew.controller.read(t):await fetch(e.selectedTrackUrl).then(e=>e.blob());let r={blob:n,start:e.selectedTrackStart,videoVolume:e.videoVolume,musicVolume:e.musicVolume};return X.assert(r,YC.encoder.Music),r},getPhotoDurationForEncoder(e,t,n=!1){return X.assert(e,Blob),X.assert(t,YC.MusicState),ZC.media.isVideo(e)?null:t.selectedTrackId?t.duration:n?5:null},getStoryLinkForIgApi(e,t){X.assert(e,YC.LinkState),X.assert(t,Boolean);let n=this.getLinkSticker(e)||this.getWatermarkSticker(e,t);if(!n)return null;let r={url:n.url,x:n.x,y:n.y,width:n.width,height:n.height,rotation:n.rotation};return X.assert(r,$C.StoryLink),r},getStoryLocationForIgApi(e){if(X.assert(e,YC.LocationState),!e.selected)return null;let t={id:e.selected.id,x:e.sticker.x,y:e.sticker.y,width:e.sticker.width,height:e.sticker.height,rotation:e.sticker.rotation};return X.assert(t,$C.StoryLocation),t},getStoryMentionsForIgApi(e){X.assert(e,YC.MentionState);let t=e.users.map(t=>({id:t.id,x:t.sticker.x,y:t.sticker.y,width:t.sticker.width,height:t.sticker.height,rotation:t.sticker.rotation,...e.hideStickers&&{x:0,y:0,width:0,height:0,rotation:0}}));return X.assert(t,[$C.StoryMention]),t},getLinkSticker(e){if(X.assert(e,YC.LinkState),!this.isValidUrl(e.url))return null;let t=e.url.trim();t=URL.parse(t)||URL.parse(`https://${t}`),t=t.href;let n={type:`link`,url:t,text:this.getLinkStickerText(e),x:e.x,y:e.y,z:e.z,width:e.width,height:e.height,scale:e.scale,rotation:e.rotation,variant:e.variant};return X.assert(n,YC.StickerType),n},getTextSticker(e){X.assert(e,YC.TextState);let t=this.getTextStickerText(e);if(!t)return null;let n={type:`text`,text:t,x:e.x,y:e.y,z:e.z,width:e.width,height:e.height,scale:e.scale,rotation:e.rotation,variant:e.variant};return X.assert(n,YC.StickerType),n},getMentionStickers(e){if(X.assert(e,YC.MentionState),e.hideStickers)return[];let t=e.users.map(e=>({type:`mention`,text:e.username,...e.sticker}));return X.assert(t,[YC.StickerType]),t},getLocationSticker(e){if(X.assert(e,YC.LocationState),!e.selected)return null;let t={type:`location`,text:e.selected.name,...e.sticker};return X.assert(t,YC.StickerType),t},getWatermarkSticker(e,t){if(X.assert(e,YC.LinkState),X.assert(t,Boolean),!this.shouldAddWatermark(t)||this.getLinkSticker(e))return null;let n={...QC.config.storyWatermark.sticker};return X.assert(n,YC.StickerType),n},isValidUrl(e){return e=e.trim(),e=URL.parse(e)||URL.parse(`https://${e}`),!(!e||![`http:`,`https:`].includes(e.protocol)||!(e.host.includes(`.`)&&e.host.split(`.`).at(-1)))},getLinkStickerText(e){if(X.assert(e,YC.LinkState),!e.url)return``;let t=e.text.trim();if(!t){let n=e.url.trim();n=URL.parse(n)||URL.parse(`https://${n}`);let r=decodeURI(XC.toUnicode(n?.host??``));r.startsWith(`www.`)&&(r=r.slice(4)),t=r.toUpperCase()}return ZC.truncate(t,60)},getTextStickerText(e){return X.assert(e,YC.TextState),e.content.trim()}}})),rw,iw,aw,ow=o((()=>{({$editor:rw,$type:iw,$mp:aw}=app),rw.encoder={Music:{blob:Blob,start:Number,videoVolume:Number,musicVolume:Number},async transform(e,t){iw.assert(t,{width:Number,height:Number,cover:Boolean,muted:Boolean,music:[this.Music,null],stickers:[rw.StickerType],photoDuration:[Number,null],"onProgress?":Function}),t.onProgress??=()=>{};try{return await aw.controller.transformMedia(e,t)}catch(e){throw console.error(e),e}}}})),sw,cw=o((()=>{({$whatsNew:sw}=app),sw.items=[{id:`v36.0.0`,header:`Repost posts & stories`,subheader:`v36.0.0`,hexImage:`hex-igswiss`,tag:`Feature`,content:[],snack:{id:`upgrade-36.0`,priority:0,title:`Your INSSIST upgraded to V36.0 `,bgIcon:`info.upgrade`,conditions:{minVersion:`36.0.0`,maxVersion:`36.0.99`,minInstalledDays:3},content:[`Here is what's new in V36.0:`,`  Repost content from other accounts to your feed or story`,`  Reel progress bar for easier video navigation`,`  Bug fixes and stability improvements`],actions:[`ok`],hideNextForDays:1}},{id:`v35.0.0`,header:`Smarter Growth Autopilot`,subheader:`v35.0.0`,hexImage:`hex-igswiss`,tag:`Feature`,content:[`Smarter Growth Autopilot now adapts and varies engagement automatically throughout the day. Better lead scanning discovers quality leads from multiple sources. UI polish and performance improvements for video file processing.`],snack:{id:`upgrade-35.0`,priority:0,title:`Thank You for 2025! `,bgIcon:`info.upgrade`,conditions:{minVersion:`35.0.0`,maxVersion:`35.0.99`,minInstalledDays:3},content:[`Here is what's new in V35.0:`,`  Growth Autopilot now features auto-speed adjustment, hourly variation and smarter lead scanning`,`  UI polish, bug fixes, performance improvements`,`  Faster processing for large video files, increase file size limit to 900 MB`],actions:[`open-growth-assist`,`ok`],hideNextForDays:1}},{id:`v34.0.0`,header:`Change Cover for Video Posts & Reels`,subheader:`v34.0.0`,hexImage:`hex-igswiss`,tag:`Feature`,content:[`Select any video frame, or upload your own image as a cover for video posts and reels.`],snack:{id:`upgrade-34.0`,priority:0,title:`Your INSSIST upgraded to V34.0 `,bgIcon:`info.upgrade`,conditions:{minVersion:`34.0.0`,maxVersion:`34.0.99`,minInstalledDays:3},content:[`Here is what's new:`,`  Choose any frame from a video to use as a cover, or upload your own image`,`  Fixed publishing errors for some video types`],actions:[`open-post-assistant`,`ok`],hideNextForDays:1}},{id:`v33.3.0`,header:`Tag Locations & People in Posts`,subheader:`v33.3.0`,hexImage:`hex-igswiss`,tag:`Feature`,content:[`Tag locations and people in your posts and reels, just like on stories. Add privacy controls to hide like counts and turn off commenting. Enhanced post publishing with more control over reel visibility in your profile grid.`],snack:{id:`upgrade-33.3`,priority:0,title:`Your INSSIST upgraded to V33.3 `,bgIcon:`info.upgrade`,conditions:{minVersion:`33.3.0`,maxVersion:`33.3.99`,minInstalledDays:3},content:[`Here is what's new:`,`  Tag locations in posts`,`  Mention @accounts in posts and reels`,`  Add collaborators to your posts and reels`,`  Control reel visibility in profile grid`,`  Control privacy options to hide like counts and disable comments on posts`,`  Support for music in Reels: track name now gets shown in the published Reel`,`  Posting is now streamlined by remembering the last post type used`,`  Fixed reels export bug`],actions:[`open-post-assistant`,`ok`],hideNextForDays:1}},{id:`v33.1.0`,header:`Growth Assist Username Filter`,subheader:`v33.1.0`,hexImage:`hex-igswiss`,tag:`Feature`,content:[`Skip specific accounts by username in Growth Assist campaigns. The new banned usernames filter lets you exclude competitors, spam accounts, or any profiles by @username, giving you more precise control over your organic growth strategy.`],snack:{id:`upgrade-33.1`,priority:0,title:`Your INSSIST upgraded to V33.1 `,bgIcon:`info.upgrade`,conditions:{minVersion:`33.1.0`,maxVersion:`33.1.99`,minInstalledDays:3},content:[`Here is what's new:`,`  Skip specific accounts by @username in Growth Assist`,`  Improved stability and bug fixes in DM.`],actions:[`open-growth-assist`,`ok`],hideNextForDays:1}},{id:`v33.0.0`,header:`Add music to posts & reels`,subheader:`v33.0.0`,hexImage:`hex-igswiss`,tag:`Feature`,content:[`Meet new Post Assistant, available in desktop view today. Post Assistant now supports adding music to posts and reels, scheduling stories with music and stickers.`],snack:{id:`upgrade-33.0`,priority:0,title:`Your INSSIST upgraded to V33.0 `,bgIcon:`info.upgrade`,conditions:{minVersion:`33.0.0`,maxVersion:`33.0.99`,minInstalledDays:3},content:[`Here is what's new:`,`  Add music to yours posts & reels`,`  Schedule stories with music and stickers`],actions:[`open-post-assistant`,`ok`],hideNextForDays:1}},{id:`v32.0.0`,header:`Remove Bot Followers`,subheader:`v32.0.0`,hexImage:`hex-igswiss`,tag:`Feature`,content:[`One-click solution to scan, identify, and remove bot followers from your Instagram account. Growth Assist now categorizes followers by risk level and gradually removes marked bots in the background to keep your account safe.`],snack:{id:`upgrade-32.0`,priority:0,title:`Your INSSIST upgraded to V32.0 `,bgIcon:`info.upgrade`,conditions:{minVersion:`32.0.0`,maxVersion:`32.0.99`,minInstalledDays:3},content:[`Here is what's new:`,`  Antibot system in Growth Assist`,`  Antibot can gradually remove bot followers from your account, to boost account engagement rates and keep it safe`],actions:[`open-growth-assist`,`ok`],hideNextForDays:1}},{id:`v31.0.0`,header:`Smarter Growth Autopilot`,subheader:`v31.0.0`,hexImage:`hex-igswiss`,tag:`Feature`,content:[`Export followers of any account with Growth Assist. Filter out unwanted content with the new banned words filter in Growth Autopilot. View activity data by specific tasks for better insights. Performance improvements and stability fixes.`],snack:{id:`upgrade-31.0`,priority:0,title:`Your INSSIST upgraded to V31.0 `,bgIcon:`info.upgrade`,conditions:{minVersion:`31.0.0`,maxVersion:`31.0.99`,minInstalledDays:3},content:[`Here is what's new:`,`  Export followers of any account with Growth Assist`,`  Banned words filter for Growth Autopilot`,`  Performance improvements and stability fixes`],actions:[`ok`],hideNextForDays:1}},{id:`v30.9.0`,header:`Performance & Media Processing`,subheader:`v30.9.0`,hexImage:`hex-igswiss`,tag:`Feature`,content:[`Text stickers support for stories. Enhanced media processing for better photo story uploads. Performance improvements.`],snack:{id:`upgrade-30.9`,priority:0,title:`Your INSSIST upgraded to V30.9 `,bgIcon:`info.upgrade`,conditions:{minVersion:`30.9.0`,maxVersion:`30.9.99`,minInstalledDays:3},content:[`Here is what's new:`,`  Text stickers support`,`  Enhanced media processing for better story uploads`,`  Performance improvements and stability fixes`],actions:[`ok`],hideNextForDays:1}},{id:`v30.8.0`,header:`Stories Enhancements`,subheader:`v30.8.0`,hexImage:`hex-story`,tag:`Stories`,content:[`Tag locations in your stories. Add music to photo stories. Stability improvements and bug fixes.`],snack:{id:`upgrade-30.8`,priority:0,title:`Your INSSIST upgraded to V30.8 `,bgIcon:`info.upgrade`,conditions:{minVersion:`30.8.0`,maxVersion:`30.8.99`,minInstalledDays:3},content:[`Here is what's new:`,`  Tag locations in your stories`,`  Add music to photo stories`,`  Stability improvements and bug fixes`],actions:[`ok`],hideNextForDays:1}},{id:`v30.7.0`,header:`Growth Assist Improvements`,subheader:`v30.7.0`,hexImage:`hex-igswiss`,tag:`Feature`,content:[`Growth Assist can now target leads from the source accounts you specify, such as: similar accounts, competitors or accounts in your niche.`,`Configure likes-per-lead for better engagement.`,`Bug fixes for the Scheduling stability.`],snack:{id:`upgrade-30.7`,priority:0,title:`Your INSSIST upgraded to V30.7 `,bgIcon:`info.upgrade`,conditions:{minVersion:`30.7.0`,maxVersion:`30.7.99`,minInstalledDays:3},content:[`Here is what's new:`,`  Growth Assist can now target leads from the source accounts you specify, such as: similar accounts, competitors or accounts in your niche`,`  Configure likes-per-lead for better engagement`,`  Bug fixes for the Scheduling stability`],actions:[`ok`],hideNextForDays:1}},{id:`v30.6.0`,header:`Close Friends & Music`,subheader:`v30.6.0`,hexImage:`hex-story`,tag:`Stories`,content:[`Publish Stories for Close Friends only, add Instagram music to Stories. Bug fixes and enhancements.`],snack:{id:`upgrade-30.6`,priority:0,title:`Your INSSIST upgraded to V30.6 `,bgIcon:`info.upgrade`,conditions:{minVersion:`30.6.0`,maxVersion:`30.6.99`,minInstalledDays:3},content:[`Here is what's new:`,`  Publish Stories for Close Friends only`,`  Add Instagram music to Stories`,`  Bug fixes and enhancements`],actions:[`ok`],hideNextForDays:1}},{id:`v30.5.0`,header:`Story Features & File Support`,subheader:`v30.5.0`,hexImage:`hex-story`,tag:`Stories`,content:[`Add mentions to Stories. Add links to Stories. Attach PDFs and files to DMs.`],snack:{id:`upgrade-30.5`,priority:0,title:`Your INSSIST upgraded to V30.5 `,bgIcon:`info.upgrade`,conditions:{minVersion:`30.5.0`,maxVersion:`30.5.99`,minInstalledDays:3},content:[`Here is what's new:`,`  Add mentions to Stories`,`  Add links to Stories`,`  Attach PDFs and files to DMs`,`INSSIST now automatically backs up scheduled posts between re-installs for added reliability.`],actions:[`ok`],hideNextForDays:1}},{id:`v30.4.0`,header:`Unfollowers Tracking`,subheader:`v30.4.0`,hexImage:`hex-igswiss`,tag:`Feature`,content:[`INSSIST can now track and engage with unfollowers and new followers automatically, reducing followers churn.`],snack:{id:`upgrade-30.4`,priority:0,title:`Your INSSIST upgraded to V30.4 `,bgIcon:`info.upgrade`,conditions:{minVersion:`30.4.0`,maxVersion:`30.4.99`,minInstalledDays:3},content:[`Here is what's new:`,`  Peek at disappearing photos and videos in DMs`,`  Monitor who has unfollowed your account`,`  Fix: pinning content now pins in the best quality`,`  Block Ads in Stories and Posts`],actions:[`ok`],hideNextForDays:1}},{id:`v30.3.0`,header:`Auto-Backup`,subheader:`v30.3.0`,hexImage:`hex-igswiss`,tag:`Feature`,content:[`INSSIST now automatically backs up scheduled posts between re-installs for added reliability.`]},{id:`v30.1.0`,header:`Peek at Videos & Photos`,subheader:`v30.1.0`,hexImage:`hex-dm`,tag:`Direct Messages`,content:[`Added ability to "peek at disappearing" photos and videos in Direct Messages.`]},{id:`v30.0.0`,header:`Video Controls`,subheader:`v30.0.0`,hexImage:`hex-igswiss`,tag:`Feature`,content:[`Added Video controls for stories and posts. Improved scheduling stability and videos posting, fixed dozens of bugs.`]},{id:`v29.2.0`,header:`Send Files in DM`,subheader:`v29.2.0`,hexImage:`hex-igswiss`,tag:`Feature`,content:[`Added support for sending files, e.g. PDFs, in Direct Messages.`]},{id:`v29.1.0`,header:`AdBlocker`,subheader:`v29.1.0`,hexImage:`hex-igswiss`,tag:`Feature`,content:[`Added a built-in AdBlocker, video controls for stories and posts, improved scheduling stability and videos posting, fixed dozens of bugs.`]},{id:`v29.0.0`,header:`Desktop Mode`,subheader:`v29.0.0`,hexImage:`hex-igswiss`,tag:`Feature`,content:[`INSSIST has been redesigned and rebuilt from ground up for better security, stability and upcoming new features support.`,`The app now seamlessly integrates into the Instagram.com web interface.`]},{id:`v25.1.0`,header:`Carousels Post Later`,subheader:`v25.1.0`,hexImage:`hex-schedule`,tag:`Scheduling`,content:[`Upload or drag & drop multiple files to Post Later to schedule them for posting as a carousel.`]},{id:`v25.0.0`,header:`Advanced Post Later`,subheader:`v25.0.0`,hexImage:`hex-schedule`,tag:`Scheduling`,content:[`Improved Post Later interface and auto-publishing stability. Manage multiple accounts in Post Later interface seamlessly. Bulk upload files for scheduling.`]},{id:`v24.0.0`,header:`Post Later`,subheader:`v24.0.0`,hexImage:`hex-schedule`,tag:`Scheduling`,content:[`INSSIST now supports Delayed Posting for Posts, Photo and Video Stories and Reels. Facebook account is not required to schedule posts with delayed posting.`]},{id:`v23.6.0`,header:`Fixes and Future Plans`,subheader:`v23.6.0`,hexImage:`hex-schedule`,tag:`Scheduling`,content:[`Support for Brave browser has been restored and a lot of work done to prepare for migration over to the new Google Chrome Extension Manifest v3.`,`We are also building a new Delayed Posting feature that will allow you to plan your Posts, Reels and Stories in advance. INSSIST will post them automatically, no Facebook Page connection required.`,`We also plan to gradually migrate and embed INSSIST interface directly into Instagram web page so that the app functions seamlessly.`]},{id:`v23.3.0`,header:`Major Functionality Fixes`,subheader:`v23.3.0`,hexImage:`hex-bug`,tag:`Bug Fixes`,content:[`Restored all app functions broken due to recent changes introduced by Instagram update to internal data and media handling systems.`]},{id:`v23.1.0`,header:`Instagram Update Bug Fixes`,subheader:`v23.1.0`,hexImage:`hex-bug`,tag:`Bug Fixes`,content:[`Fixed a number of bugs introduced by Instagram in the recent mobile and desktop app update: reels failed to be published through instagram.com, posted videos were duplicated under reels tab and showing with a wrong icon, restored search panel functionality of the explore page, and other improvements and fixes.`]},{id:`v23.0.0`,header:`Ghost View Mode for Stories`,subheader:`v23.0.0`,hexImage:`hex-ghost`,tag:`Stories`,content:[`Switch to a Ghost View Mode and watch stories anonymously. Story owner wont know if you watched their story.`]},{id:`v22.0.0`,header:`Story Assist`,subheader:`v22.0.0`,hexImage:`hex-story`,tag:`Stories`,content:[`Added user tagging feature in stories, fixed avatars rendering Instagram bug, fixed reels API connectivity and other issues.`]},{id:`v21.1.0`,header:`Improvements and Bug Fixes`,subheader:`v21.1.0`,hexImage:`hex-update`,tag:`Update`,content:[`Fixed custom video covers and music file uploads to fail in certain scenarios. Styling and usability improvements in the app. Fixed tooltips rendering in the IG frame. Fixed app rendering artifacts on slow Internet connection and more.`]},{id:`v21.0.0`,header:`Posting Functionality Restored`,subheader:`v21.0.0`,hexImage:`hex-bug`,tag:`Bug Fixes`,content:[`Restored posting functionality and fixed problems caused by the IG platform overhaul.`,`Improved app stability, dark theme, custom cover feature, videos autoplay on carousels and fixed multiple bugs.`]},{id:`v20.2.0`,header:`Reels Improvements`,subheader:`v20.2.0`,hexImage:`hex-bug`,tag:`Bug Fixes`,content:[`Added support for locations and people mentions (tagging) on Reels posting.`,`Fixed original audio automatically muted by Chrome v100. Fixed followers and followings not showing up correctly in the wide mode. Fixed DM not showing DM folders.`]},{id:`v20.1.0`,header:`Bug Fixing`,subheader:`v20.1.0`,hexImage:`hex-bug`,tag:`Bug Fixes`,content:[`Fixed scheduling connection setup, fixed isolation policy error, improved reels posting, post management error handling and usability.`]},{id:`v20.0.0`,header:`Music`,subheader:`v20.0.0`,hexImage:`hex-music`,tag:`Music`,content:[`Add music or upload your tracks to Reels, Stories and Videos. Royalty-free music is provided by tunetank.com.`]},{id:`v19.0.0`,header:`Quick Replies in DM`,subheader:`v19.0.0`,hexImage:`hex-dm`,tag:`Direct Messages`,content:[`Send Quick Replies in chats by typing / symbol followed by reply shortcut. Configure an unlimited number of replies for business or personal use.`,`Inssist Quick Replies support template messages and @name, @username variables.`]},{id:`v18.0.9`,header:`Bug Fixing`,subheader:`v18.0.9`,hexImage:`hex-bug`,tag:`Bug Fixes`,content:[`Fixed Instagram bug that caused a blank screen to load for some users. Fixed Zen mode, story mentions and other issues.`]},{id:`v17.3.0`,header:`60s Reels`,subheader:`v17.3.0`,hexImage:`hex-reels`,tag:`Reels`,content:[`Inssist can now post Reels of up to 60s long, up from 30s before.`,`CSV import now supports multiline \\n captions and break lines with \\n symbols.`,`This release improves posting stability.`]},{id:`v17.0.0`,header:`Bulk & CSV Scheduling`,subheader:`v17.0.0`,hexImage:`hex-schedule`,tag:`Scheduling`,content:[`Added BULK section to the Scheduling module that supports applying bulk commands: scheduling, drafting, deleting posts.`,`You can now reschedule posts across time-slots or intervals with a few clicks and edit captions of all scheduled posts from a single screen.`,`Inssist now knows how to parse CSV files so that you can drag and drop those and schedule posts even faster.`,`Scheduling interface has been significantly speed up comparing to the previous versions.`]},{id:`v15.1.0`,header:`Usability & Bug Fixes`,subheader:`v15.1.0`,hexImage:`hex-bug`,tag:`Bug Fixes`,content:[`Post Assistant now supports custom aspect ratios for images in addition to default square, portrait and landscape ones.`,`Fix for the Instagram video failed to post and other bugs.`]},{id:`v15.0.3`,header:`Bug Fixing`,subheader:`v15.0.3`,hexImage:`hex-bug`,tag:`Bug Fixes`,content:[`Fixed missing delete button in Post Assistant. Fixed dark theme Reels $ui. Fixed Post did not upload video publishing issue.`]},{id:`reels`,header:`Reels`,subheader:`v15.0.0`,hexImage:`hex-reels`,tag:`Reels`,content:[`Inssist can now post Reels! It ensures the best quality and does not compress your videos.`,`Instagram Reels is a short-video format, similar to TikTok. Instagram platform limits Reels to 50 countries, including the United States.`,`Posting Reels is a PRO feature, and you can repost Reels from other accounts and apply custom covers with Inssist.`]},{id:`v13.1.0`,header:`Hashtag Collections`,subheader:`v13.1.0`,hexImage:`hex-tag`,tag:`Hashtags`,content:[`Now you can create and manage your Hashtag collections with Inssist.`]},{id:`v11.5.0`,header:`Lifetime Deal`,subheader:`v11.5.0`,hexImage:`hex-lifetime`,tag:`Pricing`,content:[`Claim your Inssist PRO Lifetime Deal!`,`Now you can get Inssist PRO license for life with a one time purchase, before only a monthly subscription option was available.`]},{id:`v11.2.0`,header:`Swipe Up`,subheader:`v11.2.0`,hexImage:`hex-swipe-up`,tag:`Stories`,content:[`Swipe Up feature (adding links to stories) is now available for accounts of more than 10k followers.`]},{id:`v11.1.0`,header:`Editing Captions`,subheader:`v11.1.0`,hexImage:`hex-caption`,tag:`Editing`,content:[`This version brings support for editing posts. You can now edit posts and update post captions after they are published without a need to connect to Facebook API.`]},{id:`v11.0.0`,header:`Video Thumbnails / Covers`,subheader:`v11.0.0`,hexImage:`hex-video`,tag:`Video`,content:[`Version 11 brings support for covers to video posting.`,`Whenever you upload a video to post you can choose a thumbnail from a list of auto-generated covers, a specific video frame or even upload a custom image to be used.`,`You can also preview your Instagram grid with the selected cover before posting.`]},{id:`v10.1.0`,header:`Zen Mode`,subheader:`v10.1.0`,hexImage:`hex-zen`,tag:`UI`,content:[`Make your Instagram browsing experience cleaner with the new Zen mode.`,`Switch Instagram home feed into Zen hides post captions and comments on the posts. Give it a try!`,`This release also fixes a number of bugs, making posting Stories more stable in particular.`]},{id:`v10.0.1`,header:`Share Post to Story`,subheader:`v10.0.1`,hexImage:`hex-story`,tag:`Stories`,content:[`Version 10 brings support for sharing any post to your story in a few clicks.`,`Locate a share icon below any post, video or photo, click it and select Share to Story. A photo will then be shared to your story.`,`This feature is free. Enjoy!`]},{id:`v10.0.0`,header:`Bug Fixing`,subheader:`v10.0.0`,hexImage:`hex-bug`,tag:`Bug Fixes`,content:[`Fixed comments scrolling caused the app to refresh the page.`,`Post Assistant now supports uploading and previewing posts in a grid without a Facebook API connection.`,`Changed the dark theme background not to be so dark. Redesigned side bar and Facebook API connection setup dialogs.`,`And a host of other improvements and stability enhancements under the hood.`]},{id:`v9.0.0`,header:`Bulk Scheduling`,subheader:`v9.0.0`,hexImage:`hex-ship`,tag:`Scheduling`,content:[`Inssist Scheduling now supports uploading multiple photos at once to speed up posting.`,`You can also drag & drop photos and videos from the system to Inssist to schedule or publish them.`,`Scheduling engine has been significantly improved to support bulk upload and future improvements coming down the line.`]},{id:`v8.9.1`,header:`Bug Fixing & Usability`,subheader:`v8.9.1`,hexImage:`hex-bug`,tag:`Bug Fixes`,content:[`Stories uploaded with Inssist are now uploaded in the best quality possible.`,`Fixed internal bugs and improved DM module stability.`]},{id:`v8.8.5`,header:`Bug Fixing & Usability`,subheader:`v8.8.5`,hexImage:`hex-bug`,tag:`Bug Fixes`,content:[`Inssist now prevents Instagram from blurring photos when switching between screen modes.`,`Inssist now shows @usernames upon hovering over accounts in multiaccount box.`,`Increased DM text input size, fixed elements positioning on Instagram authorization screen, fixed wordings across the application and other improvements.`,`Added support for sending debug reports if Inssist fails to connect Scheduling.`]},{id:`v8.6.0`,header:`Scheduling patch`,subheader:`v8.6.0`,hexImage:`hex-bug`,tag:`Bug Fixes`,content:[`Fixed a bug preventing scheduling connection setup to reliably connect Instagram account to Scheduling API.`,`Fixed a cross-posting bug preventing Facebook Page selection from rendering.`,`Fixed sending post from the home feed to Direct Messages. Other internal fixes.`]},{id:`v8.5.1`,header:`Story and Scheduling fixes`,subheader:`v8.5.1`,hexImage:`hex-bug`,tag:`Bug Fixes`,content:[`Improved aspect ratio detection on stories: video stories should upload to Instagram more reliably.`,`Uploaded stories now have the first frame selected as a cover rather than a random one.`,`Fixed Infinite Loading loop bug on scheduling.`]},{id:`v8.5.0`,header:`Story Improvements`,subheader:`v8.5.0`,hexImage:`hex-bug`,tag:`Bug Fixes`,content:[`Photo Stories are no longer cut in preview when they do not fit the aspect ratios. Inssist now detects and warns about unsupported Video Story lengths: shorter than 1 second and longer than 15 seconds. Other internal improvements.`]},{id:`v8.4.0`,header:`Story Mentions`,subheader:`v8.4.0`,hexImage:`hex-mentions`,tag:`Stories`,content:[`Support for @mentions (account tagging) has arrived for photo stories. This is a free feature available on all plans.`]},{id:`v8.3.0`,header:`Bug Fixing`,subheader:`v8.3.0`,hexImage:`hex-bug`,tag:`Bug Fixes`,content:[`Added mouse scroll to stories panel. Added photo upload spinner during posting.`,`Fixed modal windows positioning bug in Instagram. Fixed tab buttons spacing on Instagram profile page.`]},{id:`v8.2.1`,header:`Bug Fixing`,subheader:`v8.2.1`,hexImage:`hex-bug`,tag:`Bug Fixes`,content:[`Fixed excess image rotation on new and scheduled posts.`,`Fixed a black screen scheduling state bug caused by selecting a Custom Time interval.`]},{id:`v8.2.0`,header:`Facebook Cross-Posting`,subheader:`v8.2.0`,hexImage:`hex-schedule`,tag:`Scheduling`,content:[`If your Instagram @account is connected to a custom Facebook Page, Inssist will let you clone posts to that Facebook Page during scheduling.`]},{id:`v8.1.0`,header:`Scheduling Performance`,subheader:`v8.1.0`,hexImage:`hex-schedule`,tag:`Scheduling`,content:[`Over the past few weeks we have redesigned and rebuilt Scheduling engine from ground-up, making it far more stable and performing much better than before. Give it a try!`,`A few User Interface fixes are delivered with this update.`]},{id:`v8.0.0`,header:`Multiaccount Support`,subheader:`v8.0.0`,hexImage:`hex-multiaccount`,tag:`Accounts`,content:[`Got more than one Instagram account? Connect them all to Inssist and seamlessly switch between them without a need to relogin. Handy!`]},{id:`v6.2.0`,header:`Wide Screen`,subheader:`v6.2.0`,hexImage:`hex-monitor`,tag:`UI`,content:[`Wide screen mode has been redesigned with images taking more space and page layouts improved.`]},{id:`v6.1.0`,header:`Bug Fixing`,subheader:`v6.1.0`,hexImage:`hex-bug`,tag:`Bug Fixes`,content:[`Stories can now be scrolled with LEFT / RIGHT keys and exited with ESC key. Fixed polls styling on stories in dark theme.`,`Fixed videos playing sound for a split second upon navigation within plugin. Fixed an Instagram bug with videos refusing to playing on click.`,`Fixed Scheduling incorrectly ordering posts upon updating post caption. Improved Scheduling interface buttons styling.`,`Plugin URL now contains Instagram page URL for quick navigation.`,`Direct Messages no longer marked as read while DM module is hidden. Fixed DM module buttons overlap. Clicking Back button no longer causes navigation in Direct Messaging module. Videos sent in Direct Messages can now be viewed in a separate tab.`]},{id:`v6.0.1`,header:`Carousels`,subheader:`v6.0.1`,hexImage:`hex-carousel`,tag:`Posts`,content:[`Inssist now supports carousel posts through the Post Assistant. Check it out!`,`Multiaccount support is coming next!`]},{id:`v6.0.0`,header:`Scheduling`,subheader:`v6.0.0`,hexImage:`hex-schedule`,tag:`Scheduling`,content:[`Scheduling now supports drag&drop operations both on Grid and Calendar. Scheduling is out of Beta and has been substantially improved, debugged and redesigned.`]},{id:`v5.0.1`,header:`Bug Fixing`,subheader:`v5.0.1`,hexImage:`hex-bug`,tag:`Bug Fixes`,content:[`Fixed Instagram bug when adding multiline text on stories caused Instagram UI to break. Captions containing emojis are no longer cut off.`]},{id:`v4.0.5`,header:`Bug Fixing`,subheader:`v4.0.5`,hexImage:`hex-bug`,tag:`Bug Fixes`,content:[`A ton of bug fixes and improvements:`,`You can now send DMs to any account without following them first. Images in DM module are no longer cropped and take all available space.`,`Added a button to open image in a new tab in DM module. Requests tab in DM no longer overflows the new DM button and DM actions tooltips is no longer cut off. Fixed fonts in DM module.
`,`Added Open in Inssist button on Instagram website. Added DM US button to reach out to us quickly. Icons in side bar no longer overlap on small screens.`,`Fixed show more button on post captions and other small fixes across $ui.`]},{id:`v4.0.0`,header:`Direct Messages`,subheader:`v4.0.0`,hexImage:`hex-dm`,tag:`Direct Messages`,content:[`Psst Check out the brand new Direct Messages panel on the left. You can now send DMs while having the Instagram view on the right simultaneously.`,`The next feature were working on is Scheduling drag & drop support.`]},{id:`v3.1.0`,header:`Bug fixing`,subheader:`v3.1.0`,hexImage:`hex-bug`,tag:`Bug Fixes`,content:[`Bug fixes and improvements: fixed emojis  in the dark theme, better scheduling setup logic and setup errors interception, permissions verification screen, scheduling migrated onto optimistic transactions mechanism, image pre-caching and scheduling loading speed-up, fixed IGTV screen and UI cleanup.`]},{id:`v3.0.0`,header:`Dark Mode`,subheader:`v3.0.0`,hexImage:`hex-moon`,tag:`UI`,content:[`Join the Dark Side! Switch Inssist to Dark mode which is less strenuous on your beautiful  with a click of a button. Instagram web interface has been thoroughly restyled to Dark mode as well.`]},{id:`v2.3.0`,header:`Calendar and Time Slots`,subheader:`v2.3.0`,hexImage:`hex-schedule`,tag:`Scheduling`,content:[`Configure Time Slots to schedule posts efficiently. Browse posts in a weekly and monthly post calendars. Fixed scheduling setup, auto-logout and freezing bugs.`]},{id:`v2.2.0`,header:`Scheduling Usability`,subheader:`v2.2.0`,hexImage:`hex-schedule`,tag:`Scheduling`,content:[`Added scheduling time & date selection calendar. Improved Posts Grid performance. Fixed scheduling connection setup problems.`]},{id:`v2.1.0`,header:`Scheduling Beta`,subheader:`v2.1.0`,hexImage:`hex-schedule`,tag:`Scheduling`,content:[`Scheduling has arrived.`,`Upload photos, videos, IGTVs and carousel posts. Preview them in a grid, save as draft, publish or schedule for auto-publish.`,`Scheduled media are published automatically, no need to install extra software, Inssist handles auto-publish for you even if you are offline.`,`Scheduling is currently available through our Beta program. You can enable Beta features for free by sharing a word about Inssist.`]},{id:`v1.6.0`,header:`IGTV Support`,subheader:`v1.6.0`,hexImage:`hex-igtv`,tag:`IGTV`,content:[`Plugin now supports uploading IGTV videos.`,`To publish IGTV, simply upload a video as you would normally do. If the video is longer than 1 minute, Inssist will present an IGTV video upload interface to you.`]},{id:`v1.3.0`,header:`Relevant Hashtags`,subheader:`v1.3.0`,hexImage:`hex-tag`,tag:`Hashtags`,content:[`Inssist now suggests relevant hashtags. Try it out!`]},{id:`v1.2.2`,header:`Bug fixing`,subheader:`v1.2.2`,hexImage:`hex-bug`,tag:`Bug Fixes`,content:[`Fixed Instagram.com refused to connect issue. If you still experience Instagram.com refused to connect error, please try to relogin to Instagram.com from a separate browser tab and reinstall Inssist from get.inssist.com.`,`Fixed video playback jittering.`]},{id:`v1.2.0`,header:`Autoplay for Videos`,subheader:`v1.2.0`,hexImage:`hex-update`,tag:`Update`,content:[`Videos on the feed will now autoplay (muted) when scrolled into the view. Clicking videos un-mutes them.`,`Improved posting screen usability, stability and bundle size.`]},{id:`v1.1.0`,header:`Usability Improvements`,subheader:`v1.1.0`,hexImage:`hex-update`,tag:`Update`,content:[`Text inside the Instagram view can now be selected and copied to clipboard.`,`Posting photos and videos now supports locations tagging.`,`Fixed issue with instagram.com not connecting after navigation to direct messages.`,`Fixed issue with opening facebook.com links from DM messages caused a browser page error.`,`Pressing Enter in DM screen now sends the message right away.`,`Other miscellaneous usability improvements.`]},{id:`v0.9.12`,header:`Bug fixing & Performance`,subheader:`v0.9.12`,hexImage:`hex-bug`,tag:`Bug Fixes`,content:[`Extension rebranded to Inssist.`,`Loading and rendering speed improved. Fixed an issue when replying to comments rendered an unnecessary actions popup.`]},{id:`v0.9.5`,header:`Improved Image Quality`,subheader:`v0.9.5`,hexImage:`hex-quality`,tag:`Media`,content:[`Landscape and Portrait photos now retain high image quality when uploaded with the plugin.`]},{id:`v0.9.2`,header:`Video Support`,subheader:`v0.9.2`,hexImage:`hex-video`,tag:`Video`,content:[`Plugin now supports Video uploads.`]},{id:`v0.8.9`,header:`Stickers and Markers Support`,subheader:`v0.8.9`,hexImage:`hex-marker`,tag:`Stories`,content:[`Stories can now be uploaded with stickers and markers.`]},{id:`v0.8.3`,header:`Improved UI`,subheader:`v0.8.3`,hexImage:`hex-bug`,tag:`Bug Fixes`,content:[`User profile, stories reel and other parts of user interface and user experience were improved. Fixed stories viewer not showing stories on a first click.`]},{id:`v0.8.0`,header:`Basic version`,subheader:`v0.8.0`,hexImage:`hex-igswiss`,tag:`Feature`,content:[`Plugin now supports photos and stories upload and direct messages.`]}]})),lw=s(((e,t)=>{var n=1;function r(){return n=(n*9301+49297)%233280,n/233280}function i(e){n=e}t.exports={nextValue:r,seed:i}})),uw=s(((e,t)=>{var n=lw(),r=`0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-`,i,a,o;function s(){o=!1}function c(e){if(!e){i!==r&&(i=r,s());return}if(e!==i){if(e.length!==r.length)throw Error(`Custom alphabet for shortid must be `+r.length+` unique characters. You submitted `+e.length+` characters: `+e);var t=e.split(``).filter(function(e,t,n){return t!==n.lastIndexOf(e)});if(t.length)throw Error(`Custom alphabet for shortid must be `+r.length+` unique characters. These characters were not unique: `+t.join(`, `));i=e,s()}}function l(e){return c(e),i}function u(e){n.seed(e),a!==e&&(s(),a=e)}function d(){i||c(r);for(var e=i.split(``),t=[],a=n.nextValue(),o;e.length>0;)a=n.nextValue(),o=Math.floor(a*e.length),t.push(e.splice(o,1)[0]);return t.join(``)}function f(){return o||(o=d(),o)}function p(e){return f()[e]}function m(){return i||r}t.exports={get:m,characters:l,seed:u,lookup:p,shuffled:f}})),dw=s(((e,t)=>{var n=typeof window==`object`&&(window.crypto||window.msCrypto);t.exports=!n||!n.getRandomValues?function(e){for(var t=[],n=0;n<e;n++)t.push(Math.floor(Math.random()*256));return t}:function(e){return n.getRandomValues(new Uint8Array(e))}})),fw,pw=o((()=>{fw=`useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict`})),mw={};c(mw,{customAlphabet:()=>_w,customRandom:()=>gw,nanoid:()=>vw,random:()=>hw,urlAlphabet:()=>fw});var hw,gw,_w,vw,yw=o((()=>{pw(),hw=e=>crypto.getRandomValues(new Uint8Array(e)),gw=(e,t,n)=>{let r=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*r*t/e.length);return(a=t)=>{let o=``;for(;;){let t=n(i),s=i|0;for(;s--;)if(o+=e[t[s]&r]||``,o.length===a)return o}}},_w=(e,t=21)=>gw(e,t,hw),vw=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+=`-`:e+=`_`,e),``)})),bw=s(((e,t)=>{var n=uw(),r=dw(),i=(yw(),d(mw)).customRandom;function a(e){for(var t=0,a,o=``;!a;)o+=i(n.get(),1,r)(),a=e<16**(t+1),t++;return o}t.exports=a})),xw=s(((e,t)=>{var n=bw();uw();var r=1567752802062,i=7,a,o;function s(e){var t=``,s=Math.floor((Date.now()-r)*.001);return s===o?a++:(a=0,o=s),t+=n(i),t+=n(e),a>0&&(t+=n(a)),t+=n(s),t}t.exports=s})),Sw=s(((e,t)=>{var n=uw();function r(e){return!e||typeof e!=`string`||e.length<6?!1:!RegExp(`[^`+n.get().replace(/[|\\{}()[\]^$+*?.-]/g,`\\$&`)+`]`).test(e)}t.exports=r})),Cw=s(((e,t)=>{t.exports=0})),ww=s(((e,t)=>{var n=uw(),r=xw(),i=Sw(),a=Cw()||0;function o(e){return n.seed(e),t.exports}function s(e){return a=e,t.exports}function c(e){return e!==void 0&&n.characters(e),n.shuffled()}function l(){return r(a)}t.exports=l,t.exports.generate=l,t.exports.seed=o,t.exports.worker=s,t.exports.characters=c,t.exports.isValid=i})),Tw=s(((e,t)=>{t.exports=ww()})),Ew,Dw=o((()=>{({$utils:Ew}=app),Ew.binder={create(e={}){let t={};for(let n in e)this._bind(t,n,e[n]);return t},isBinding(e){return Ew.is.array(e)&&e.length===2&&Ew.is.object(e[0])&&Ew.is.string(e[1])},read(e){return Ew.get(e[0],e[1])},write(e,t){Ew.set(e[0],e[1],t)},_bind(e,t,n){if(this.isBinding(n))Reflect.defineProperty(e,t,{enumerable:!0,configurable:!0,get:()=>this.read(n),set:e=>this.write(n,e)});else if(Ew.is.object(n))for(let r in e[t]={},n)this._bind(e[t],r,n[r]);else e[t]=n}}})),Ow,kw=o((()=>{({$utils:Ow}=app),Ow.canvasToBlob=async(e,{type:t=`image/jpeg`,quality:n=.8}={})=>e.convertToBlob?await e.convertToBlob({type:t,quality:n}):await new Promise((r,i)=>{e.toBlob(e=>{e?r(e):i(`canvas.toBlob failed`)},t,n)})})),Aw,jw=o((()=>{({$utils:Aw}=app),Aw.clamp=(e,t,n)=>Math.max(e,Math.min(t,n))})),Mw,Nw=o((()=>{({$utils:Mw}=app),Mw.ensureArray=e=>Array.isArray(e)?e:[e]})),Pw,Fw,Iw=o((()=>{({$utils:Pw,$bus:Fw}=app),Pw.extractFrame=async(e,t=0)=>{if(typeof document>`u`)return await Fw.send(`utils.extractFrame`,e,t);let n=await Pw.objectUrl.create(e),r=document.createElement(`video`);r.src=n,r.muted=!0,await new Promise(e=>r.addEventListener(`loadedmetadata`,e)),r.currentTime=t*r.duration,await new Promise(e=>r.addEventListener(`timeupdate`,e));let i=document.createElement(`canvas`),a=i.getContext(`2d`);return i.width=r.videoWidth,i.height=r.videoHeight,a.drawImage(r,0,0),await new Promise(e=>i.toBlob(e,`image/jpeg`))}})),Lw,Rw=o((()=>{({$utils:Lw}=app),Lw.get=(e,t,n=!0)=>{let r=Lw.is.string(t)?t.split(`.`):t,i=e;for(let e of r){if(i==null)return;if(Lw.is.array(i)){let t=Number(e);if(!Number.isNaN(t)){if(t<-i.length||t>=i.length)return;i=i.at(t);continue}}if(n&&Lw.is.function(i[e])){i=i[e]();continue}i=i[e]}return i}})),zw,Bw=o((()=>{({$utils:zw}=app),zw.loadImage=async e=>{let t=await createImageBitmap(e),{width:n,height:r}=t;return{image:t,width:n,height:r,ratio:n/r}}})),Vw,Hw,Uw=o((()=>{({$utils:Vw,$bus:Hw}=app),Vw.loadVideoMetadata=async e=>{if(typeof document>`u`)return await Hw.send(`utils.loadVideoMetadata`,e);let t=typeof e==`string`?e:await Vw.objectUrl.create(e,!0),n=document.createElement(`video`);n.src=t,n.muted=!0,n.volume=0,n.preload=`metadata`,n.play();let r={};return await new Promise((e,t)=>{n.addEventListener(`loadedmetadata`,async()=>{await Vw.waitFor(()=>n.webkitAudioDecodedByteCount,100),r.width=n.videoWidth,r.height=n.videoHeight,r.ratio=n.videoWidth/n.videoHeight,r.duration=n.duration,r.hasAudio=n.webkitAudioDecodedByteCount>0,e()}),n.addEventListener(`error`,()=>{t(n.error)})}),n.remove(),r}})),Ww,Gw,Kw=o((()=>{({$utils:Ww,$bus:Gw}=app),Ww.ls={get(e,t){if(!this._supported())return Gw.send(`utils.ls.get`,e,t);let n=localStorage.getItem(e);if(n==null)return t;if(n===`true`)return!0;if(n===`false`)return!1;if(n.startsWith(`[`)||n.startsWith(`{`))return JSON.parse(n);let r=Number(n);return Number.isNaN(r)?n:r},set(e,t){if(!this._supported())return Gw.send(`utils.ls.set`,e,t);try{typeof t==`string`?localStorage.setItem(e,t):localStorage.setItem(e,JSON.stringify(t))}catch(n){Ww.error(`ls.set failed`,{key:e,value:t,details:n})}},has(e){return this._supported()?e in localStorage:Gw.send(`utils.ls.has`,e)},remove(e){if(!this._supported())return Gw.send(`utils.ls.remove`,e);localStorage.removeItem(e)},_supported(){return!!globalThis.localStorage}}})),qw,Jw=o((()=>{({$utils:qw}=app),qw.queue=(e=null)=>{let t;return n=>async(...r)=>{let i=t,a=Promise.withResolvers();t=a,i&&await i.promise;try{let t=await n.call(e,...r);return a.resolve(),t}catch(e){throw a.resolve(),e}}}})),Yw,Xw=o((()=>{({$utils:Yw}=app),Yw.scaler={async scaleToFitSize(e,t,n,{type:r=`image/jpeg`,quality:i=.8}={}){let{image:a,width:o,height:s}=await Yw.loadImage(e);if(o<t&&s<n)return e;let c=Math.min(1,t/o),l=Math.min(1,n/s),u=Math.min(c,l),d=new OffscreenCanvas(o*u,s*u);return d.getContext(`2d`).drawImage(a,0,0,o,s,0,0,d.width,d.height),await Yw.canvasToBlob(d,{type:r,quality:i})},async scaleToFitRatio(e,t,{type:n=`image/jpeg`,quality:r=.8}={}){let{image:i,width:a,height:o,ratio:s}=await Yw.loadImage(e),c=new OffscreenCanvas(0,0);s>t?(c.width=a,c.height=a/t):(c.height=o,c.width=o*t);let l=c.getContext(`2d`),u=(c.width-a)/2,d=(c.height-o)/2;return l.drawImage(i,u,d,a,o),await Yw.canvasToBlob(c,{type:n,quality:r})}}})),Zw,Qw=o((()=>{({$utils:Zw}=app),Zw.truncate=(e,t)=>e.length<=t?e:`${e.slice(0,t-3)}...`})),$w,eT=o((()=>{({$utils:$w}=app),$w.tryCatch=e=>{if($w.is.promise(e))return e.then(e=>[e,null]).catch(e=>[null,e]);try{let t=e();return $w.is.promise(t)?$w.tryCatch(t):[t,null]}catch(e){return[null,e]}}})),tT,nT,rT,iT=o((()=>{({$type:tT,$utils:nT,$env:rT}=app),tT.controller={init(){tT.assert=this._assert.bind(this),tT.validate=this._validate.bind(this),tT.display=this._display.bind(this),tT.check=this._check.bind(this),this._OneOf=class extends Array{},this._ArrayOf=class extends Array{}},_assert(e,t){return rT.is.production||this._check(e,t)?!0:(tT.error({value:e,expected:this._display(t)}),!1)},_validate(e,t,n){if(this._check(e,t))return;let r=Error(n||`Invalid type`);throw Error.captureStackTrace(r,this._validate),r},_display(e){if(nT.is.function(e))return String(e).includes(`[native code]`)?e.name.toLowerCase():e;if(nT.is.object(e)){let t={};for(let n in e)t[n]=this._display(e[n]);return t}return nT.is.array(e)?e.length===1?new this._ArrayOf(this._display(e[0])):new this._OneOf(...e.map(e=>this._display(e))):e},_check(e,t){if(nT.binder.isBinding(e)&&(e=nT.binder.read(e)),t===`*`||t===e)return!0;if(t===Boolean)return nT.is.boolean(e);if(t===Number)return nT.is.number(e);if(t===String)return nT.is.string(e);if(t===Object)return nT.is.object(e);if(t===Array)return nT.is.array(e);if(t===Symbol)return nT.is.symbol(e);if(t===Function)return nT.is.function(e);if(t===Blob)return nT.is.blob(e);if(t===null)return nT.is.null(e);if(t===void 0)return nT.is.undefined(e);if(nT.is.function(t))return t(e);if(nT.is.array(t)&&t.length===1){if(!nT.is.array(e))return!1;for(let n=0;n<e.length;n++)if(!this._check(e[n],t[0]))return!1;return!0}if(nT.is.array(t)){for(let n of t)if(this._check(e,n))return!0;return!1}if(nT.is.object(t)){if(!nT.is.object(e))return!1;let n=new Set;for(let r in t){if(r===`*`)continue;let i=r.endsWith(`?`),a=i?r.slice(0,-1):r;if(n.has(a))return tT.error(`duplicate key "${a}"`,t),!1;if(n.add(a),!(i&&nT.is.undefined(e[a]))&&!this._check(e[a],t[r]))return!1}for(let n in e){let r=n in t||`${n}?`in t;if(!(`*`in t&&this._check(e[n],t[`*`]))&&!r)return!1}return!0}return!1}}})),aT,oT=o((()=>{({$editor:aT}=app),aT.StickerState={x:Number,y:Number,z:Number,width:Number,height:Number,scale:Number,rotation:Number,variant:String},aT.MusicState={duration:Number,source:[`ig`,`tunetank`,`custom`],query:String,found:[Object],error:[String,null],videoVolume:Number,musicVolume:Number,selectedTrackId:[String,Number,`custom`,null],selectedTrackUrl:[String,null],selectedTrackName:[String,null],selectedTrackStart:Number,customTrack:[Object,null],igTrackFileId:[String,null]},aT.LinkState={url:String,text:String,...aT.StickerState,"*":`*`},aT.TextState={content:String,...aT.StickerState},aT.MentionState={users:[{sticker:aT.StickerState,username:String,"*":`*`}],hideStickers:Boolean,"*":`*`},aT.LocationState={sticker:aT.StickerState,selected:[{name:String,"*":`*`},null],"*":`*`},aT.StickerType={type:[`link`,`mention`,`location`,`text`],text:String,...aT.StickerState,"*":`*`}})),sT,cT,lT,uT,dT,fT,pT=o((()=>{({$editor:sT,$type:cT,$utils:lT,$shortid:uT,$bus:dT,$env:fT}=app),sT.stickerController={init(){fT.is.os&&dT.on(`editor.createStickerOverlay`,this.createOverlay,this)},accent:{link:`#0097fd`,mention:`#ff6f00`,location:`#ad46ff`,text:`#10b981`},variants:[{name:`default`,label:`Default`},{name:`white`,label:`White`},{name:`rainbow`,label:`Rainbow`},{name:`solid`,label:`Solid`},{name:`brand`,label:`Inssist`},{name:`black-text`,label:`Black Text`},{name:`white-text`,label:`White Text`}],style:{base:{gap:`2cqw`,padding:[`2.5cqw`,`3.5cqw`,`2.5cqw`,`2.5cqw`],height:`7.2cqw`,fontFamily:`-apple-system, 'system ui', BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif`},default:{background:`#fff`,iconColor:`var(--accent)`,textColor:`#000`,fontWeight:`500`},brand:{background:`#fff`,iconColor:`#cf2876`,textColor:`#000`,fontWeight:`500`},white:{background:`rgba(255, 255, 255, 0.5)`,iconColor:`#fff`,textColor:`#fff`,fontWeight:`500`},rainbow:{background:`white`,iconColor:`#ff0000`,textColor:[`#ff4500`,`#ffd700`,`#32cd32`,`#1e90ff`,`#ad3bff`],fontWeight:`500`},solid:{background:`#fff`,iconColor:`var(--accent)`,textColor:`var(--accent)`,fontWeight:`500`},"black-text":{background:`transparent`,iconColor:`#000`,textColor:`#000`,fontWeight:`500`},"white-text":{background:`transparent`,iconColor:`#fff`,textColor:`#fff`,fontWeight:`500`}},async createOverlay(e,t,n){if(cT.assert(e,[sT.StickerType]),fT.is.bg)return await dT.send(`editor.createStickerOverlay`,e,t,n);let r=new OffscreenCanvas(t,n),i=r.getContext(`2d`);e=e.toSorted((e,t)=>e.z-t.z);for(let r of e){let e=this.render(r,t,n),a=new Blob([e],{type:`image/svg+xml`}),o=URL.createObjectURL(a),s=new Image;s.src=o,await s.decode(),i.drawImage(s,0,0,t,n),URL.revokeObjectURL(o)}return await r.convertToBlob({type:`image/png`})},render(e,t=`100%`,n=`100%`){cT.assert(e,sT.StickerType);let r=uT.generate(),i=this.accent[e.type],a={...this.style.base,...this.style[e.variant]},o=`translate(${`${(e.x-e.width/2)*100}%`}, ${`${(e.y-e.height/2)*100}%`}) rotate(${e.rotation}turn)`,s=`${`${e.width/2*100}%`} ${`${e.height/2*100}%`}`,c=this._renderDefs({id:r,style:a}),l=this._renderBackground({style:a,width:`${e.width*100}%`,height:`${e.height*100}%`,scale:e.scale,type:e.type,text:e.text}),u=``;e.type!==`text`&&(u=this._renderIcon({type:e.type,style:a,dx:`calc(${a.padding[3]} * ${e.scale})`,dy:`calc(${a.padding[0]} * ${e.scale})`,scale:e.scale}));let d=this._renderText({id:r,style:a,dx:e.type===`text`?`calc(3.0cqw * ${e.scale})`:`calc((${a.padding[3]} + ${a.height} + ${a.gap} + 0.06cqw) * ${e.scale})`,dy:`calc((${a.padding[0]} + 0.5cqw) * ${e.scale})`,scale:e.scale,text:e.text,type:e.type});return`
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="${t}"
        height="${n}"
        style="
          container-type: inline-size;
          filter: drop-shadow(0 2px 6px rgba(0, 0, 0, 0.12));
          --accent: ${i};
        ">
        ${c}
        <g style="transform: ${o}; transform-origin: ${s};">
          ${l}
          ${u}
          ${d}
        </g>
      </svg>
    `},_renderDefs({id:e,style:t}){let n=lT.ensureArray(t.textColor);return`
      <defs>
        <linearGradient id="${e}:text-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
          ${n.map((e,t)=>`<stop offset="${t===0?0:t/(n.length-1)*100}%" stop-color="${e}"/>`).join(``)}
        </linearGradient>
      </defs>
    `},_renderBackground({style:e,width:t,height:n,scale:r,type:i,text:a}){return e.background===`transparent`?null:`
      <rect
        x="0"
        y="0"
        width="${t}"
        height="${n}"
        rx="${3.5*r}%"
        ry="${2*r}%"
        fill="${e.background}"/>
    `},_renderIcon({type:e,style:t,dx:n,dy:r,scale:i}){if(e===`link`)return`
        <g style="transform: translate(${n}, ${r}) scale(${i});">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            width="${t.height}"
            height="${t.height}">
            <path
              d="M12.7076 18.3639L11.2933 19.7781C9.34072 21.7308 6.1749 21.7308 4.22228 19.7781C2.26966 17.8255 2.26966 14.6597 4.22228 12.7071L5.63649 11.2929M18.3644 12.7071L19.7786 11.2929C21.7312 9.34024 21.7312 6.17441 19.7786 4.22179C17.826 2.26917 14.6602 2.26917 12.7076 4.22179L11.2933 5.636M8.50045 15.4999L15.5005 8.49994"
              fill="none"
              stroke="${t.iconColor}"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"/>
          </svg>
        </g>
      `;if(e===`mention`)return`
        <g style="transform: translate(${n}, ${r}) scale(${i});">
          <svg
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            width="${t.height}"
            height="${t.height}">
            <path
              d="M16 7.99999V13C16 13.7956 16.3161 14.5587 16.8787 15.1213C17.4413 15.6839 18.2043 16 19 16C19.7956 16 20.5587 15.6839 21.1213 15.1213C21.6839 14.5587 22 13.7956 22 13V12C21.9999 9.74302 21.2362 7.55247 19.8333 5.78452C18.4303 4.01658 16.4705 2.77521 14.2726 2.26229C12.0747 1.74936 9.76793 1.99503 7.72734 2.95936C5.68676 3.92368 4.03239 5.54995 3.03325 7.57371C2.03411 9.59748 1.74896 11.8997 2.22416 14.1061C2.69936 16.3125 3.90697 18.2932 5.65062 19.7263C7.39428 21.1593 9.57143 21.9603 11.8281 21.9991C14.0847 22.0379 16.2881 21.3122 18.08 19.94M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79085 9.79086 7.99999 12 7.99999C14.2091 7.99999 16 9.79085 16 12Z"
              fill="none"
              stroke="${t.iconColor}"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"/>
          </svg>
        </g>
      `;if(e===`location`)return`
        <g style="transform: translate(${n}, ${r}) scale(${i});">
          <svg
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            width="${t.height}"
            height="${t.height}">
            <path
              d="M12 13a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"
              fill="none"
              stroke="${t.iconColor}"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              />
            <path
              d="M12 22c4-4 8-7.582 8-12a8 8 0 1 0-16 0c0 4.418 4 8 8 12Z"
              fill="none"
              stroke="${t.iconColor}"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"/>
          </svg>
        </g>
      `;if(e===`text`)return`
        <g style="transform: translate(${n}, ${r}) scale(${i});">
          <svg
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            width="${t.height}"
            height="${t.height}">
            <path
              d="M4 7C4 6.44772 4.44772 6 5 6H19C19.5523 6 20 6.44772 20 7C20 7.55228 19.5523 8 19 8H13V17C13 17.5523 12.5523 18 12 18C11.4477 18 11 17.5523 11 17V8H5C4.44772 8 4 7.55228 4 7Z"
              fill="${t.iconColor}"/>
          </svg>
        </g>
      `;throw Error(`Unsupported type "${e}"`)},_renderText({id:e,style:t,dx:n,dy:r,scale:i,text:a,type:o}){let s=a.replace(/\n/g,` `);return s.length>50&&(s=s.substring(0,50)+`...`),`
      <text
        fill="url(#${e}:text-gradient)"
        font-size="${t.height}"
        font-weight="${t.fontWeight}"
        font-family="${t.fontFamily}"
        alignment-baseline="hanging"
        style="transform: translate(${n}, ${r}) scale(${i}); -webkit-font-smoothing: antialiased">
        ${this._sanitize(s)}
      </text>
    `},_sanitize(e){let t={"&":`&amp;`,"<":`&lt;`,">":`&gt;`,"'":`&#39;`,'"':`&quot;`,"/":`&#x2F;`};return e.replace(/[&<>'"/]/g,e=>t[e]??e)}}})),mT,hT=o((()=>{ja(),yd(),Xd(),mT=u(Tw()),j_(),app.$mobx=Ma,app.$punycode=Yd,app.$sentryBrowser=Da,app.$shortid=mT.default})),gT,_T,vT=o((()=>{({$utils:gT}=app),_T=new Map,gT.enqueue=async(e,{queue:t=`default`,delayAfter:n=0,delayBefore:r=0}={})=>{let i=(_T.get(t)||Promise.resolve()).then(async()=>{await gT.sleep(r);try{return await e()}finally{await gT.sleep(n)}});return _T.set(t,i.catch(()=>{})),i}})),yT,bT=o((()=>{({$utils:yT}=app),yT.versionNumber=(e=`0.0.0`)=>{let[t,n,r]=e.split(`.`);return(Number(t)||0)*1e6+(Number(n)||0)*1e3+(Number(r)||0)}})),xT,ST=o((()=>{({$utils:xT}=app),xT.watchForIgCookie=(e,t)=>{chrome.cookies.onChanged.addListener(async({cookie:n,cause:r,removed:i})=>{n.domain.includes(`instagram.com`)&&n.name===e&&r===`explicit`&&(i||(await t(n),chrome.cookies.remove({url:`https://www.instagram.com`,name:e}),chrome.cookies.onChanged.removeListener()))})}})),CT=o((()=>{N_(),Dw(),F_(),kw(),jw(),R_(),V_(),U_(),G_(),Y_(),Z_(),ev(),vT(),Nw(),Iw(),nv(),iv(),Rw(),cv(),uv(),ie(),mv(),oe(),Bw(),Uw(),Kw(),gv(),le(),vv(),Jw(),bv(),Sv(),wv(),de(),Xw(),Ov(),Ce(),Qw(),eT(),Av(),bT(),Te(),Nv(),ST()})),wT=o((()=>{Oe()})),TT=o((()=>{Iv()})),ET=o((()=>{iT()})),DT,OT,kT=o((()=>{({$store:DT,$s:OT}=app),DT.versionController={async init(){await this._updateState(),this._updateWhatsNew()},async _updateState(){let e=OT.version||0,t=DT.userState().version;for(;e<t;){DT.log(`applying v${e+1}`);let t=DT.versions[e+1],n={...await t.update(OT)};for(let r in OT.transaction(()=>{Object.keys(OT).forEach(e=>delete OT[e]),Object.keys(n).forEach(e=>OT[e]=n[e]),OT.version=e+1}),OT.userStates){let n={...await t.update(OT.userStates[r])};OT.transaction(()=>{OT.userStates[r]=n,OT.userStates[r].version=e+1})}e++}},_updateWhatsNew(){let e=Array.isArray(OT.whatsNew)?OT.whatsNew:[],t=!1;OT.whatsNew=DT.whatsNewState().map(n=>{let r;if(t)r=!0;else{let i=e.find(e=>e.id===n.id);r=i&&i.acknowledged||!1,r&&(t=!0)}return{id:n.id,acknowledged:r}})}}})),AT,jT,MT,NT,PT=o((()=>{({$store:AT,$utils:jT,$scripts:MT,$shortid:NT}=app),AT.versions={326:{update(e){let t={...e};return delete t.dm,delete t.bulk,delete t.reels,delete t.coverAssist,delete t.storyAssist,delete t.ghostStoryView,t}},325:{update(e){return e.userStates?{...e,igApi:{userPostsVersion:1}}:e}},324:{update(e){return e.welcomeBonus?{...e,welcomeBonus:{...e.welcomeBonus,dismissed:!1}}:e}},323:{update(e){return{...e,welcomeBonus:{available:null,claimedAt:null}}}},322:{update(e){return e.scripts?.tasks?{...e,scripts:{...e.scripts,tasks:e.scripts.tasks.map(e=>e.type===`autopilot`?{...e,data:{...e.data,hourlySpeedCache:{startOfDay:null,fromMs:null,tillMs:null,speeds:null,totalSpeed:null,activeHours:null}}}:e)}}:e}},321:{update(e){return e.userStates?{...e,boost:{...e.boost,skipActionsTill:null}}:e}},320:{update(e){return{...e,scripts:{...e.scripts,autopilotRemainingLikes:null}}}},319:{update(e){return e.userStates?{...e,acknowledged:{...e.acknowledged,editorTrayReorder:-1}}:e}},318:{update(e){if(!e.scripts)return e;let t={...e.scripts,autoSpeed:{value:null,updatedAt:null,lastBlockedSpeed:null}};return e.scripts.tasks&&(t.tasks=e.scripts.tasks.map(e=>e.type!==`autopilot`||e.config?.quota!==100?e:{...e,config:{...e.config,quota:`auto`}})),{...e,scripts:t}}},317:{update(e){if(!e.userStates||!e.billing?.account)return e;let t=e.billing.account.token,n={...e.billing.account,tokenValue:t};return delete n.token,{...e,billing:{...e.billing,account:n}}}},316:{update(e){return!e.userStates||!e.auth?.profile?e:{...e,auth:{...e.auth,profile:{...e.auth.profile,lastUpdateTs:null}}}}},315:{update(e){return{...e,lastSentPromoStats:null}}},314:{update(e){return e.userStates&&(e.scripts.tasks=e.scripts.tasks.map(e=>e.type===`antibot`?{...e,data:{...e.data,backgroundJob:{...e.data.backgroundJob,removalsToday:0,removalsResetDate:null,removalTimestamps:[]}}}:e)),{...e}}},313:{update(e){return e.userStates?{...e,boost:{...e.boost,visitedUsernames:[]}}:e}},312:{update(e){return e.userStates?{...e,billing:{...e.billing,selectedUserId:null,upsell:{...e.billing.upsell,userId:null}}}:e}},311:{update(e){return!e.userStates||!e.auth?.profile?e:{...e,auth:{...e.auth,profile:{...e.auth.profile,lastUpdateTs:null}}}}},310:{update(e){return e.userStates?{...e,sidebar:{...e.sidebar,showMobileViewButton:!0}}:e}},309:{update(e){return{...e,later:{...e.later,posts:e.later.posts.map(e=>({...e,mediaList:e.mediaList.map(e=>({...e,collaboration:{query:``,users:[],foundUsers:[]}}))}))}}}},308:{update(e){return e.userStates?{...e,editor:{...e.editor,lastUsedType:`post`}}:e}},307:{update(e){return{...e,later:{...e.later,posts:e.later.posts.map(e=>{let t={...e,options:{...e.options,hideLikes:!1,disableComments:!1}};return delete t.location,delete t.mentions,t})}}}},306:{update(e){return e.scripts.tasks=e.scripts.tasks.map(e=>e.type===`growth`?{...e,config:{...e.config,bannedUsernames:e.config.bannedUsernames||``}}:e),{...e}}},305:{update(e){return{...e,auth:{isBusiness:null,isProfessional:null,profile:null,...e.auth}}}},304:{update(e){return{...e,later:{...e.later,posts:e.later.posts.map(e=>({...e,options:{besties:!1},mediaList:e.mediaList.map(e=>({...e,options:{muted:!1,cover:!1}}))}))}}}},303:{update(e){return{...e,later:{...e.later,posts:e.later.posts.map(e=>({...e,mediaList:e.mediaList.map(e=>({...e,music:{...e.music,selectedTrackUrl:null,selectedTrackName:null,igTrackFileId:null}}))}))}}}},302:{update(e){let t={x:.5,y:.4,z:0,width:.3,height:.3,scale:1,rotation:0,variant:`default`};return{...e,later:{...e.later,posts:e.later.posts.map(e=>({...e,mediaList:e.mediaList.map(e=>({...e,link:{url:``,text:``,...t},location:{query:``,sticker:{...t},selected:null,found:[]},mention:{query:``,hideStickers:!1,users:[],foundUsers:[]},text:{content:``,...t}}))}))}}}},301:{update(e){return{...e,later:{...e.later,posts:e.later.posts.map(e=>({...e,mediaList:e.mediaList.map(e=>({...e,music:{duration:10,source:`ig`,query:``,found:[],error:null,videoVolume:0,musicVolume:.5,selectedTrackId:null,selectedTrackStart:0,customTrack:null}}))}))}}}},300:{update(e){return{...e,later:{...e.later,posts:e.later.posts.map(e=>{let t=e.mediaList.map(e=>({id:`media:${NT.generate()}`,...e}));return{...e,selectedMediaId:t[0]?.id??null,mediaList:t}})}}}},299:{update(e){return e.userStates?{...e,boost:{...e.boost,owned:e.boost.owned||[]}}:e}},298:{update(e){if(!e.userStates||e.scripts.tasks.some(e=>e.type===`antibot`)||!e.auth?.userId)return{...e};let t=MT.TaskAntibot.create(e.auth),n=e.scripts.tasks.findIndex(e=>e.type===`autopilot`),r=n>=0?n+1:0,i=[...e.scripts.tasks.slice(0,r),t.state,...e.scripts.tasks.slice(r)];return{...e,scripts:{...e.scripts,tasks:i}}}},297:{update(e){return e.scripts.tasks=e.scripts.tasks.map(e=>e.type===`growth`?{...e,config:{...e.config,bannedWords:e.config.bannedWords||``}}:e),{...e}}},296:{update(e){let t={...e};return delete t.action,t}},295:{update(e){return{...e}}},294:{update(e){return e.userStates?{...e,multiaccount:{...e.multiaccount,hiddenUserIds:[]}}:e}},293:{update(e){return e.scripts.tasks=e.scripts.tasks.map(e=>{if(e.type!==`growth`)return e;let t={...e};return t.data?.sources&&(t.data={...t.data,sources:t.data.sources.map(e=>({...e,type:e.type||`auto`}))}),t.data?.leads&&(t.data={...t.data,leads:t.data.leads.map(e=>({...e,source:{...e.source,type:`auto`}}))}),t}),{...e}}},292:{update(e){return e.scripts.tasks=e.scripts.tasks.map(e=>{if(e.type!==`growth`)return e;let t={...e.config,sources:{custom:!1,followersOf:`@instagram @design @visitaustria`},minLikesPerLead:2,maxLikesPerLead:2,leadsToScan:1e3},n={...e.data,sources:e.data.followings,leads:e.data.followers};return delete n.followings,delete n.followers,e={...e,config:t,data:n},e}),{...e}}},291:{update(e){return e.activity?.events?.length?{...e,activity:{...e.activity,events:e.activity.events.reverse()}}:{...e}}},290:{update(e){return e.userStates?{...e,whatsNewSnacks:{acknowledged:[],hideUntil:null}}:e}},289:{update(e){return e.scripts.tasks=e.scripts.tasks.map(e=>e.id===`local:autopilot`?{...e,id:`local:${String(Math.random()).slice(2)}`}:e),{...e}}},288:{update(e){return e.scripts.tasks=e.scripts.tasks.sort((e,t)=>e.type===`autopilot`?-1:t.type===`autopilot`?1:0),{...e}}},287:{update(e){return e.userStates?(e.scripts.tasks.forEach(e=>{e.nextRunOn=e.data.nextRunOn||null,delete e.data.nextRunOn}),{...e}):e}},286:{update(e){return e.userStates?(e.scripts.tasks.filter(e=>e.type===`peers`||e.type===`export`).forEach(e=>{e.config.autopilot={enabled:!1}}),{...e}):e}},285:{update(e){return e.userStates?(e.activity.events.forEach(e=>{e.target={userId:e.userId,username:e.username},delete e.userId,delete e.username,delete e.success,delete e.from}),{...e}):e}},284:{update(e){return{...e,scripts:{tasks:[],showBodyPanel:!1,selectedTaskId:null,superlikeClicked:!1,pagelikeClicked:!1}}}},283:{update(e){return e.userStates?{...e,billing:{...e.billing,btf:null}}:e}},282:{update(e){return e.userStates?{...e,editor:{music:{selectedCategoryId:0,categoryUsageIds:[]}}}:e}},281:{update(e){return e.userStates?(e.scripts.tasks.filter(e=>e.type===`peers`).forEach(e=>{e.data.filterType=`unfollowers`,e.data.searchQuery=``,e.data.sections={}}),{...e}):e}},280:{update(e){return e.userStates?{...e,scripts:{...e.scripts,showBodyPanel:!1,selectedTaskId:null}}:e}},279:{update(e){return e.userStates?{...e,billing:{...e.billing,watermarkFreeStories:1}}:e}},278:{update(e){return e.userStates?{...e,scripts:{tasks:[]}}:e}},277:{update(e){if(e.userStates)return{...e,theme:Object.values(e.userStates)[0]?.theme??`day`};{let t={...e};return delete t.theme,t}}},276:{update(e){if(e.userStates)return{...e,scripts:{tasks:[]}};{let t={...e};return delete t.scripts,t}}},275:{update(e){if(!e.userStates)return e;let t={...e.acknowledged,install:Date.now()};return{...e,acknowledged:t}}},274:{update(e){return e.userStates?{...e,scripts:{tasks:[]}}:e}},273:{update(e){return{...e,activity:{events:[]}}}},272:{update(e){if(!e.userStates)return e;let t={...e};return delete t.userDetails,t}},271:{update(e){return e.userStates?{...e,boost:{tasks:[]}}:e}},270:{update(e){return e.userStates?{...e,videoControls:{enabled:!0}}:e}},269:{update(e){if(!e.userStates)return e;let t={...e.quickReplies};return delete e.quickReplies,{...e,templates:t}}},268:{update(e){let t={...e.later};return delete t.showUpsell,{...e,later:t}}},267:{update(e){if(!e.userStates)return e;let t={...e.billing};return delete t.upsellMessage,t.upsell={show:!1,message:null},{...e,billing:t}}},266:{update(e){if(!e.userStates)return e;let t={...e.billing};return delete t.trial,{...e,billing:t}}},265:{update(e){return{...e,welcome:{...e.welcome,shown:!0}}}},264:{async update(e){let t={...e.dm},n={...e.ghostStoryView},r=t.ghostModeEnabled||n.enabled;return delete t.ghostModeEnabled,delete n.enabled,{...e,dm:t,ghostStoryView:n,ghost:{enabled:r}}}},263:{async update(e){let t=await jT.ls.get(`theme`);return{...e,theme:t,stats:{mobileViewClicked:0,inssistMenuClicked:{}}}}},262:{update(e){return e.userStates?{...e,adblock:{enabled:!0,adsStoryRemoved:0,adsFeedRemoved:0}}:e}},261:{update(e){return{...e,stats:{...e.stats,mobileViewClicked:0,adsStoryRemoved:0,adsFeedRemoved:0}}}}}})),FT=o((()=>{Bv(),Uv(),Zv(),kT(),PT(),ey(),ry(),sy(),my(),by(),wy(),Ey(),ky(),jy(),Ny()})),IT=o((()=>{Me()})),LT,RT,zT,BT,VT,Z,HT,UT,WT,GT,KT=o((()=>{({$scripts:LT,$starter:RT,$utils:zT,$mobx:BT,$bus:VT,$s:Z,$igApi:HT,$shortid:UT,$fusion:WT,$analytics:GT}=app),LT.controller={async init(){this._isRunningTasks=!1,this.runTasks=this.runTasks.bind(this),LT.limitController.init(),this.clearHangingActions(),this.clearHangingTasks(),VT.on(`scripts.likeAccount`,this.likeAccount.bind(this)),VT.on(`scripts.followAccount`,this.followAccount.bind(this)),VT.on(`scripts.toggleTask`,this.onToggleTask.bind(this)),VT.on(`scripts.scheduleTaskRuns`,this.scheduleTaskRuns.bind(this)),VT.on(`scripts.runAutopilot`,this.runAutopilot.bind(this)),VT.on(`scripts.exportFromIg`,this.exportFromIg.bind(this)),VT.on(`igApi.onIgAction`,this._onIgAction.bind(this)),BT.reaction(()=>Z.auth?.userId,this._autoCreateTasks.bind(this),{fireImmediately:!0}),BT.reaction(()=>Z.auth?.userId,this._rescheduleTasksOnRelogin.bind(this),{fireImmediately:!0}),LT.Task.invalidateOnUserSwitch()},async likeAccount({id:e,username:t,taskId:n,by:r,sleep:i}){if(!e||!t)return;let a=UT.generate(),o=this._findPeersInData(e),s={uuid:a,time:Date.now(),status:`scheduled`};return o.forEach(e=>{e.likeActions=e.likeActions||[],e.likeActions.push(s)}),await zT.enqueue(()=>this._like(a,e,t,n,r,i),{queue:`like-account`})},async _like(e,t,n,r,i=`system`,a=0){let o=Date.now(),s={},c=n=>{Object.assign(s,n);let r=this._findPeersInData(t);return r.map(t=>t.likeActions?.find(t=>t.uuid===e)).filter(Boolean).forEach(e=>Object.assign(e,n)),n.status===`failure`&&r.forEach(e=>{e.likeActions=e.likeActions.filter(e=>e.status!==`scheduled`)}),s},l=`posts:${n}`,u={userId:t,username:n};this._postsCache=this._postsCache||new Map;let d=this._postsCache.get(l),f=null;if(d&&o-d.timestamp<WT.config.scripts.cacheUserPostsFor)f=d.posts;else{let e=await HT.api.fetchUserPosts(n,12);if(e.result)f=e.result,this._postsCache.set(l,{posts:f,timestamp:o});else if(e.error&&(LT.error(`Failed to fetch user posts`,e.error),this._isNetworkError(e.error.code)))return c(this._createNetworkErrorResult())}if(!f||f.length===0)return c({status:`failure`,error:{code:`no-posts`,message:`Account is private, deleted or has no posts`}});checkBannedWords:if(r){let e=Z.scripts.tasks.find(e=>e.id===r)?.config?.bannedWords?.split(` `).filter(e=>e.length>0);if(!e?.length)break checkBannedWords;let t=e.find(e=>f.some(t=>(t.caption||``).toLowerCase().includes(e)));if(t)return c({status:`failure`,error:{code:`banned-word`,message:`Like failed: Account has banned word '${t}' in posts`}})}checkBannedUsernames:if(r){let e=Z.scripts.tasks.find(e=>e.id===r)?.config?.bannedUsernames?.split(` `).filter(e=>e.length>0);if(!e?.length)break checkBannedUsernames;if(e.map(e=>e.startsWith(`@`)?e.substring(1).toLowerCase():e.toLowerCase()).includes(n.toLowerCase()))return c({status:`failure`,error:{code:`banned-username`,message:`Like failed: Account username is in banned list`}})}let p=f.filter(e=>Z.activity.isPostLiked(e)===null);if(p.length===0)return c({status:`failure`,error:{code:`no-unliked`,message:`All recent posts liked`}});let m=f.length===p.length?p[0]:p.reduce((e,t)=>(t.stats?.likes||0)>(e.stats?.likes||0)?t:e);c({postId:m.id});try{let e=await HT.api.likePost(m);if(e.result?.status===`ok`)return Z.activity.storeEvent({type:`like`,target:u,post:m,taskId:r,by:i}),c({status:`success`}),a&&await zT.sleep(a),s;throw e.error}catch(e){return LT.error(`Failed to like post`,e),e.code=e.code||`like-failed`,e.message=e.message||`Like failed`,e.actionBlocked=WT.config.scripts.actionBlockedCodes.includes(e.code),c({status:`failure`,error:e})}},async followAccount({id:e,username:t,taskId:n}){if(!e||!t)return;let r=this._findPeersInData(e);if(r.length===0)return;let i=UT.generate(),a={uuid:i,time:Date.now(),status:`scheduled`};r.forEach(e=>{e.followActions=e.followActions||[],e.followActions.push(a)});let o=e=>{r.map(e=>e.followActions?.find(e=>e.uuid===i)).filter(Boolean).forEach(t=>Object.assign(t,e)),e.status===`success`?r.forEach(e=>{e.isFollowed=s}):e.status===`failure`&&r.forEach(e=>{e.followActions=e.followActions.filter(e=>e.status!==`scheduled`)})},s=!r[0].isFollowed;return zT.enqueue(()=>this._follow(e,t,s,o,n),{queue:`peer-follows`}),`ok`},async _follow(e,t,n,r,i,a=`system`){try{let o=n?await HT.api.followUser(e):await HT.api.unfollowUser(e);if(o.result?.status===`ok`)return Z.activity.storeEvent({type:`follow`,target:{userId:e,username:t},by:a,taskId:i}),r({status:`success`}),!0;{let e=o.error?.message||`Follow failed`;LT.error(`Failed to follow user`,o.error),r({status:`failure`,error:e})}}catch(e){LT.error(`Failed to follow user`,e),r({status:`failure`,error:e.message})}finally{await zT.sleep(2500)}},async onToggleTask(e){let t=Z.scripts.findTaskById(e);if(!t)return;if([`canceled`,`error`].includes(t.status)&&t.type===`growth`&&Z.scripts.isAutopilotLimitReached&&(await LT.limitController.fetchRemainingLikes(),Z.scripts.isAutopilotLimitReached))return GT.send(`scripts:growth-task-blocked-by-limit`),{blocked:!0,reason:`AUTOPILOT_LIMIT_REACHED`};let n=[`active`,`running`].includes(t.status)?`disable`:`enable`;GT.send(`scripts:${t.type}-task-${n}`),this.toggleTask(t)},clearHangingActions(){Z.transaction(e=>{[`followers`,`followings`,`leads`].forEach(t=>{e.scripts.tasks.map(e=>e.data?.[t]||[]).flat().map(e=>e.likeActions).flat().filter(e=>e?.status===`scheduled`).forEach(e=>{e.status=`canceled`})})})},clearHangingTasks(){this._isRunningTasks||this.tasks.filter(e=>e.status===`running`).forEach(e=>{e.status=`active`,e.nextRunOn=Date.now()+10*zT.time.SECOND})},scheduleTaskRuns(){let e=Date.now(),t=this.activeTasks.reduce((t,n)=>Math.min(t,n.nextRunOn-e),1/0);zT.createAlarm(`scripts.run-tasks`,{delay:zT.clamp(zT.time.MINUTE,t,zT.time.HOUR),period:zT.time.HOUR,recreate:!0},this.runTasks),t<=zT.time.MINUTE&&setTimeout(this.runTasks,Math.max(0,t))},runAutopilot(e=null){let t=Z.scripts.autopilot;t&&(this._isRunningTasks||([`canceled`,`error`].includes(t.status)&&(t.error=null,t.status=`active`),t.data.initiatorTaskId=e,this.runTasks([t])))},toggleTask(e){e&&(e.status===`active`||e.status===`running`?(e.status=`canceled`,e.nextRunOn=null):(e.status===`canceled`||e.status===`error`)&&(e.status=`active`,this.runTasks([e])))},_autoCreateTasks(){let{userId:e,username:t}=Z.auth||{};if(!e||!t)return;let n=!1;Z.scripts.findTasksByType(`peers`,!1).length||(n=!0,Z.scripts.tasks.unshift(LT.TaskPeers.create().state)),Z.scripts.findTasksByType(`growth`,!1).length||(n=!0,Z.scripts.tasks.unshift(LT.TaskGrowth.create().state)),Z.scripts.findTasksByType(`autopilot`,!1).length||(n=!0,Z.scripts.tasks.unshift(LT.TaskAutopilot.create().state)),Z.scripts.findTasksByType(`antibot`,!1).length||(n=!0,Z.scripts.tasks.unshift(LT.TaskAntibot.create().state)),n&&(this._sortTasksByType(),this.runTasks())},_sortTasksByType(){let e={autopilot:0,growth:1,peers:2,antibot:3};Z.scripts.tasks.sort((t,n)=>(e[t.type]??4)-(e[n.type]??4))},_rescheduleTasksOnRelogin(){for(let e in Z.userStates)Z.userStates[e].scripts.tasks.filter(e=>e.status===`running`).forEach(e=>e.status=`active`);let{userId:e,username:t}=Z.auth||{};e&&t&&this.scheduleTaskRuns()},async runTasks(e=null){if(!this._isRunningTasks){this._isRunningTasks=!0,this.tasks.filter(e=>e.status===`running`).forEach(e=>e.status=`active`);try{e||=this.tasksToRun;for(let t of e)await this._runTask(t)}finally{this._isRunningTasks=!1,this.scheduleTaskRuns()}}},async _runTask(e){if(e.status===`running`)return;if(!RT.controller.online){e.nextRunOn=Date.now()+5*zT.time.MINUTE;return}let t;try{e.status=`running`,await e.run()}catch(n){LT.error(`Error running task`,e.toString(),n),t={code:n.code,message:n.message},GT.send(`scripts:${e.type}-scan-failed`,{message:n.message||String(n)})}if(e.isDeleted||e.status!==`running`)return;t?(e.status=`error`,e.error=t):(e.status=e.status===`running`?`active`:e.status,e.error=null);let n=e.nextRunDelay;zT.is.nil(n)?(e.nextRunOn=Date.now(),e.status===`active`&&(e.status=`canceled`)):e.nextRunOn=Date.now()+n,LT.usageController.commitUsage(e,t),e.markUpdated()},get tasks(){return Z.scripts.findAllTasks(!1)},get tasksToRun(){return this.tasks.filter(e=>e.needsToRun)},get activeTasks(){return this.tasks.filter(e=>e.status===`active`)},fillMockGraphData(e){let t=()=>{let e=[];for(let t=0;t<100;t++)e.push({date:Date.now()-Math.round(6*zT.time.MONTH*Math.random()),value:Math.round(Math.random()*100)});return e.sort((e,t)=>e.date-t.date)};e.type===`peers`&&(e.data.graphFollowers=t(),e.data.graphFollowings=t(),e.data.graphPosts=t())},eraseData(e){Object.keys(e.data).forEach(t=>{zT.is.array(e.data[t])?e.data[t]=[]:zT.is.object(e.data[t])?e.data[t]={}:e.data[t]=void 0})},_findPeersInData(e){return Z.scripts.tasks.map(t=>[(t.data.followers||[]).find(t=>t.id===e),(t.data.followings||[]).find(t=>t.id===e),(t.data.leads||[]).find(t=>t.id===e),(t.data.results||[]).find(t=>t.id===e)]).flat().filter(Boolean)},_onIgAction({name:e,userId:t}={}){if(![`follow`,`unfollow`].includes(e)||!t)return;t=zT.is.string(t)?t:String(t);let n=this._findPeersInData(t);if(n.length===0)return;let r=e===`follow`;n.forEach(e=>{e.isFollowed=r})},async exportFromIg({username:e,resultType:t}){try{if(!e||!t)return{error:{code:`invalid-params`,message:`Username and resultType are required`}};let n=await HT.api.fetchUserProfileByUsername(e);if(n.error)return{error:n.error};let r=n.result,i={id:r.id,username:r.username,fullName:r.fullName,avatarUrl:r.avatarUrl},a=LT.TaskExport.create(i,t);a.target=i,a.resultType=t;let o=Z.scripts.tasks.findIndex(e=>e.type===`autopilot`),s=o>=0?o+1:0;return Z.scripts.tasks.splice(s,0,a._state),{taskId:a.id}}catch(e){return LT.error(`Failed to create export task from IG`,e),{error:{code:`create-failed`,message:e.message||`Failed to create task`}}}},_isNetworkError(e){return e===HT.ec.noNetwork||e===HT.ec.serverIsDown||e===HT.ec.badGateway||e===HT.ec.serviceUnavailable},_createNetworkErrorResult(){return{status:`failure`,error:{code:`network-error`,message:`Network error, will retry later`}}}}})),qT,JT,YT,XT=o((()=>{({$scripts:qT,$network:JT,$s:YT}=app),qT.usageController={_lastSentUsage:{},commitUsage(e,t=null){if(!e||!e.type)return;let n=this._buildPayload(e,t);if(!n)return;let r=n[`usage-${e.type}`];if(e.type===`autopilot`&&!t&&this._isZeroActivityAutopilot(r)||!t&&!this._hasUsageChanged(e.id,r))return;let i=YT.auth?.username;i&&JT.api.send(`/promo/data`,{query:{username:i},body:n,noThrow:!0})},_buildPayload(e,t){let n=`usage-${e.type}`,r=e.usage||{},i=t?`error`:`success`,a={status:e.status,lastRunAt:Date.now(),lastRunStatus:i};return t&&(a.lastRunError=t.code||t.message||`unknown`,a.recentErrors=this._updateRecentErrors(e,t)),{[n]:{...a,...r}}},_updateRecentErrors(e,t){let n=e.data.recentErrors||[],r=[{date:Date.now(),message:t.message||t.code||String(t)},...n].slice(0,5);return e.data.recentErrors=r,r},_isZeroActivityAutopilot(e){return e?[`likesLast1h`,`likesLast3h`,`likesLast6h`,`likesLast12h`,`likesLast24h`,`likesLast2d`,`likesLast3d`,`likesLast7d`,`likesLast30d`].every(t=>!e[t]):!0},_hasUsageChanged(e,t){if(!t)return!1;let{lastRunAt:n,...r}=t,i=JSON.stringify(r);return this._lastSentUsage[e]===i?!1:(this._lastSentUsage[e]=i,!0)}}})),ZT,QT,$T,eE,tE,nE=o((()=>{({$scripts:ZT,$s:QT,$network:$T,$fusion:eE,$bus:tE}=app),ZT.limitController={init(){tE.on(`scripts.showLimitUpsellSnack`,this.showUpsellSnack,this)},get limitReachedMessage(){return`You have reached the free Growth Assist limit of ${eE.config.scripts.autopilotLikesLimit?.toLocaleString()||`3,000`} likes. Please upgrade to PRO to grow your account on autopilot.`},showUpsellSnack(){QT.billing.upsell.message=this.limitReachedMessage,QT.billing.upsell.userId=QT.auth.userId,QT.billing.upsell.show=!0},async fetchRemainingLikes(){let e=QT.auth?.username;if(!e)return null;try{let t=await $T.api.send(`/autopilot/remaining-likes`,{query:{username:e},noThrow:!0});if(t?.remainingLikes!==void 0)return QT.scripts.autopilotRemainingLikes=t.remainingLikes,t.remainingLikes}catch(e){ZT.error(`Failed to fetch autopilot remaining likes`,e)}return null},async submitLikesMade(e){if(!e||e<=0)return null;let t=QT.auth?.username;if(!t)return null;try{let n=await $T.api.send(`/autopilot/submit-likes`,{query:{username:t},body:{likesMade:e},noThrow:!0});if(n?.remainingLikes!==void 0)return QT.scripts.autopilotRemainingLikes=n.remainingLikes,this.isLimitReached()&&this.cancelAllLikingTasks(),n.remainingLikes}catch(e){ZT.error(`Failed to submit autopilot likes`,e)}return null},isLimitReached(){return QT.scripts.isAutopilotLimitReached},cancelAllLikingTasks(){let e=QT.scripts.tasks;for(let t of e)t.type===`growth`&&(t.status=`canceled`),t.config?.autopilot?.enabled&&(t.config.autopilot.enabled=!1)},async prepareLikingSession(){return await this.fetchRemainingLikes(),this.isLimitReached()?(this.cancelAllLikingTasks(),!1):!0}}})),rE=o((()=>{zy(),Hy(),Jy(),Xy(),tb(),ab(),db(),gb(),Db(),Rb(),Jb(),nx(),KT(),XT(),nE()})),iE=o((()=>{_x()})),aE,oE,sE,cE,lE=o((()=>{({$activity:aE,$s:oE,$bus:sE,$utils:cE}=app),aE.controller={init(){sE.on(`igApi.onIgAction`,this._onIgAction.bind(this)),cE.createAlarm(`activity.clear-old-events`,{period:cE.time.DAY},()=>{this._clearOldEvents()})},_onIgAction({name:e,userId:t,postId:n}={}){if(![`follow`,`unfollow`,`like`,`unlike`].includes(e))return;let r={type:e};t&&(t=cE.is.string(t)?t:String(t),r.target={userId:t}),n&&(t=cE.is.string(t)?t:String(t),r.post={id:n}),oE.activity.storeEvent(r)},_clearOldEvents(){let e=Date.now()-100*cE.time.DAY;oE.transaction(t=>{t.activity.events=t.activity.events.filter(t=>t.time>=e)}),oE.transaction(e=>{e.activity.events.forEach(e=>oE.activity.stripUnusedPostFields(e))})},get events(){return oE.activity.events},userFollowsAccount(e){let{id:t,username:n}=e;if(!t&&!n)return;let r=new Set([`follow`,`unfollow`]),i=oE.activity.eventsJS.find(e=>r.has(e.type)&&(t===e.target?.userId||n===e.target?.username));if(i)return i.type===`follow`}}})),uE=o((()=>{Cx(),lE()})),dE,fE,pE,mE=o((()=>{({$billing:dE,$utils:fE,$bus:pE}=app),dE.controller={async init(){dE.promocodeController.init(),dE.fspringController.init(),pE.on(`billing.updatePro`,this.updatePro,this),await fE.createAlarm(`update-pro`,{period:fE.time.DAY,immediately:!0},this.updatePro.bind(this))},async updatePro(){await Promise.all([dE.promocodeController.updatePromocode(),dE.fspringController.updatePro()])},reply(e,t){if(e)try{e(t)}catch{}}}})),hE,gE,_E,vE,yE,bE,xE=o((()=>{({$billing:hE,$store:gE,$network:_E,$sentry:vE,$bus:yE,$s:bE}=app),hE.fspringController={init(){yE.on(`fspring.subscription-success`,this.onFSpringSubscriptionSuccess,this),yE.on(`fspring.subscription-failure`,this.onFSpringSubscriptionFailure,this),yE.on(`update-fspring-status`,this.updateFSpringStatus,this),gE.reaction(e=>e.auth?e.auth.username:null,()=>{this.recordUsernames()},!0),gE.reaction(e=>e.billing&&e.billing.account?e.billing.account.token:null,()=>{this.recordUsernames()},!1),gE.reaction(e=>e.billing&&e.billing.account?e.billing.account.token:null,()=>{this.updateFSpringStatus()},!1)},async recordUsernames(){let{billing:e,auth:t}=bE,n=t.username;if(!n)return;let r=e.account?e.account.token:null;if(!r||e.recordedUsernames.indexOf(n)!==-1)return;hE.logDev(`updating associated fspring account usernames...`);let i={usernames:[n]};try{await _E.api.send(`/auth/record-usernames`,{body:i,token:r})}catch{}gE.transaction(e=>{e.billing.recordedUsernames=[...e.billing.recordedUsernames,n]})},async updatePro(){await this.updateFSpringStatus()},async updateFSpringStatus(){hE.logDev(`updating fspring status...`);let e=bE.billing,t=e.account?e.account.token:null;if(!t){gE.transaction(e=>{e.billing.optimistic=null,e.billing.subscriptions={},e.billing.products={},e.billing.orders=[]});return}let n=`/fspring/data`;try{let e=await _E.api.send(n,{token:t});if(!e||e.status!==`ok`)throw e;gE.transaction(t=>{t.billing.subscriptions=e.subscriptions||{},t.billing.products=e.products||{},t.billing.orders=e.orders||[]})}catch(e){e.name===`TypeError`&&e.message===`Failed to fetch`||(e.status===`forbidden`||e.status===`unauthorized`||e.status===`account-not-found`||e.status===`account-is-not-active`?gE.transaction(e=>{e.billing.account.email=null,e.billing.account.token=null}):vE.controller.sendError(`Unexpected API error at ${n}`,`error`,{error:e},{actor:`auth`}))}},onFSpringSubscriptionSuccess(){if(hE.logDev(`handling fspring subscription success...`),!bE.billing.purchasingPlan){hE.logDev(`boost purchase detected, skipping billing optimistic update`);return}gE.transaction(e=>{e.billing.optimistic={on:Date.now(),plan:e.billing.purchasingPlan.id,userId:e.billing.selectedUserId||e.auth.userId},e.billing.purchasingPlan=null});let e=JSON.stringify({subscriptions:bE.billing.subscriptions,products:bE.billing.products,orders:bE.billing.orders}),t=Date.now(),n=3*1e3,r=()=>{hE.logDev(`polling server for status update...`),bE.billing.optimistic&&this.updateFSpringStatus(i=>{let a=Date.now();if(a-t>900*1e3){gE.transaction(e=>{e.billing.optimistic=null});return}if(i=JSON.stringify({subscriptions:i.subscriptions,products:i.products,orders:i.orders}),e!==i){gE.transaction(e=>{e.billing.optimistic=null});return}n=a-t>30*1e3?10*1e3:3*1e3,setTimeout(r,n)})};setTimeout(r,n)},onFSpringSubscriptionFailure(){hE.logDev(`handling fspring subscription failure...`),gE.transaction(e=>{e.billing.purchasingPlan=null})}}})),SE,CE,wE,TE,EE=o((()=>{({$billing:SE,$network:CE,$store:wE,$s:TE}=app),SE.promocodeController={init(){this._updatePromocodeOnUserChange()},async updatePromocode(){let e=TE.username;if(!e)return;let t={username:e},n=TE.auth.profile;n&&(n.isBusiness&&(t.business=n.isBusiness),n.isVerified&&(t.verified=n.isVerified),n.followerCount!==void 0&&(t.followers=n.followerCount),n.followingCount!==void 0&&(t.followings=n.followingCount),n.postCount!==void 0&&(t.posts=n.postCount),n.email!==void 0&&(t.email=n.email),n.openedOn!==void 0&&(t.openedOn=n.openedOn)),TE.installedAt!==void 0&&(t.installedOn=TE.installedAt);let r=TE.lastSentPromoStats,i={username:e};if(!r)Object.assign(i,t);else for(let e in t)(e===`username`||t[e]!==r[e])&&(i[e]=t[e]);SE.logDev(`updating promocode...`);let a={xp:btoa(JSON.stringify(i))};try{let e=await CE.api.send(`/promo`,{headers:a});if(!e||e.status!==`ok`)throw e;let n=e&&e.expiresAt;TE.billing.promocode=n,TE.lastSentPromoStats=t}catch(e){SE.logDev(`retrieving promocode failed`,e)}},_updatePromocodeOnUserChange(){wE.reaction(e=>e.auth?.username||null,()=>this.updatePromocode(),!1)}}})),DE=o((()=>{mE(),xE(),EE(),Lx()})),OE=o((()=>{zx()})),kE,AE,jE,ME,NE,PE,FE,IE,LE,RE,zE=o((()=>{({$auth:kE,$store:AE,$cleanup:jE,$bus:ME,$utils:NE,$igApi:PE,$shortid:FE,$env:IE,$s:LE,$billing:RE}=app),kE.controller={async init(){this._igInitialUrl=null,this._sessionWatcherPaused=!1,ME.on(`auth.login`,this._login,this),ME.on(`auth.logout`,this._logout,this),ME.on(`auth.setIgInitialUrl`,e=>this._igInitialUrl=e),ME.on(`auth.actualizeCookies`,this.actualizeCookies,this),this._setAuthIfAbsent().then(()=>{}),this._refreshUserOnSessionIdChange(),this._updateUserOnPopupStart(),IE.is.development||await this.updateUser()},toggleSessionWatcher(e){this._sessionWatcherPaused=!e},async actualizeCookies(){let e=await chrome.cookies.getAll({domain:`.instagram.com`});LE.auth.cookies=e},async updateUser(e=!1,t=!1){kE.log(`updating user id`),!await this.refreshUser(t)&&e&&chrome.tabs.update({url:`https://www.instagram.com/accounts/login/?source=auth_switcher`})},async refreshUser(e=!1){let t=FE.generate();this._refreshUserReqId=t;let n;if(e)n=null;else{let e=await PE.api.fetchViewerInfo();if(e.error||this._refreshUserReqId!==t)return!1;n=e.result||null}let r=n&&LE.userId===n.userId;return r?AE.transaction(e=>{e.auth.username=n.username,e.auth.fullName=n.fullName,e.auth.email=n.email,e.auth.avatarUrl=n.avatarUrl,e.auth.isBusiness=n.isBusiness,e.auth.isProfessional=n.isProfessional,e.multiaccount.selectedUserId=n.userId}):AE.transaction(e=>{if(n){let t=e.multiaccount.userIds;e.multiaccount.addingNewAccount?e.multiaccount.addingNewAccount=!1:e.auth.loggedIn||NE.removeFromArray(t,e.multiaccount.selectedUserId),t.includes(n.userId)||t.push(n.userId),e.multiaccount.hiddenUserIds.includes(n.userId)&&e.multiaccount.hiddenUserIds.remove(n.userId),e.multiaccount.selectedUserId=n.userId}if(e.auth.userId){e.userStates[e.auth.userId]={};let t=AE.userState();for(let n in t)e.userStates[e.auth.userId][n]=e[n]}let t;n&&e.userStates[n.userId]?(t=e.userStates[n.userId],delete e.userStates[n.userId]):t=AE.userState(),t.auth.userId=n?.userId||null,t.auth.username=n?.username||null,t.auth.fullName=n?.fullName||null,t.auth.email=n?.email||null,t.auth.avatarUrl=n?.avatarUrl||null,t.auth.isBusiness=n?.isBusiness||null,t.auth.isProfessional=n?.isProfessional||null,t.auth.loggedIn=!!n,Object.assign(e,t)}),await this.actualizeCookies(),await this.updateUserProfile(n?.username),r||(ME.send(`iframe-bus`,`ig.clear-and-show-spinner`),n?this._igInitialUrl?ME.send(`iframe-bus`,`ig.hard-go`,this._igInitialUrl):(jE.controller.cleanUpState(),ME.send(`igView.refresh`)):ME.send(`iframe-bus`,`ig.hard-go`,`/accounts/login/`),ME.send(`iframe-bus`,`dm.refresh`)),this._igInitialUrl=null,ME.send(`auth.refreshed`),!!n},async updateUserProfile(e){if(!e)return;let t=LE.auth.profile?.lastUpdateTs||0;if(!(t&&t>Date.now()-NE.time.WEEK))try{let[t,n]=await Promise.all([PE.api.fetchUserProfileByUsername(e),LE.auth.profile?.email===void 0?PE.api.fetchViewerEmail():{result:LE.auth.profile.email}]);if(t.error)throw t.error;if(!t.result)return;LE.auth.profile={...t.result,email:n?.result??null,openedOn:LE.auth.profile?.openedOn??null,lastUpdateTs:Date.now()},await RE.promocodeController.updatePromocode()}catch(e){kE.error(`Failed fetching user profile`,e)}},async _clearCookies(e){let t=await chrome.cookies.getAll({domain:`.${e}`});for(let n of t)await chrome.cookies.remove({url:`https://*.${e}`,name:n.name})},_updateUserOnPopupStart(){let e=null;ME.on(`popup.start`,async()=>{let t=await this._getSessionId(),n=LE.sessionId,r=Date.now();if(n===t&&e&&r-e<=6*NE.time.HOUR){this._updateOpenedOn();return}e=r,await this.updateUser(!1,!t),this._updateOpenedOn()})},_updateOpenedOn(){LE.auth.profile&&(LE.auth.profile.openedOn=Date.now())},async _setAuthIfAbsent(){if(`username`in LE.auth)return;let e=await PE.api.fetchViewerInfo();if(e.error)return;let t=e.result||null;AE.transaction(e=>{e.auth.userId=t?.userId||null,e.auth.username=t?.username||null,e.auth.fullName=t?.fullName||null,e.auth.email=t?.email||null,e.auth.avatarUrl=t?.avatarUrl||null,e.auth.isBusiness=t?.isBusiness||null,e.auth.isProfessional=t?.isProfessional||null,e.auth.loggedIn=!!t}),await this.actualizeCookies()},_refreshUserOnSessionIdChange(){let e;chrome.cookies.onChanged.addListener(({cookie:t,removed:n})=>{this._sessionWatcherPaused||t.domain===`.instagram.com`&&t.name===`sessionid`&&(clearTimeout(e),e=setTimeout(()=>this.refreshUser()))})},async _login(e){let t=LE.userStates[e]?.auth;if(!t){kE.error(`auth data not found`,{userId:e});return}this.toggleSessionWatcher(!1);try{await this._clearCookies(`instagram.com`),await this._applyCookies(`instagram.com`,t.cookies)}catch(e){kE.error(e)}this.toggleSessionWatcher(!0),setTimeout(()=>this.refreshUser())},async _logout(){await this._clearCookies(`instagram.com`)},async _applyCookies(e,t){for(let n of t)await chrome.cookies.set({url:`https://*.${e}`,name:n.name,value:n.value,domain:n.domain,path:n.path,secure:n.secure,httpOnly:n.httpOnly,sameSite:n.sameSite,storeId:n.storeId,expirationDate:n.expirationDate})},async _getSessionId(){return(await chrome.cookies.get({url:`https://*.instagram.com`,name:`sessionid`}))?.value||null}}})),BE=o((()=>{zE()})),VE,HE=o((()=>{({$badge:VE}=app),VE.controller={init(){chrome.action.setIcon({path:{48:`/img/icon-badge-48.png`}})}}})),UE=o((()=>{HE()})),WE,GE,KE,qE,JE,YE,Q,XE,ZE,QE=o((()=>{({$boost:WE,$activity:GE,$analytics:KE,$network:qE,$bus:JE,$utils:YE,$s:Q,$igApi:XE,$fusion:ZE}=app),WE.controller={init(){this.uncommittedViews=new Set,JE.on(`boost.getSuggestions`,this._onGetSuggestions.bind(this)),JE.on(`boost.suggestionView`,this._onSuggestionView.bind(this)),JE.on(`boost.suggestionHover`,this._onSuggestionHover.bind(this)),JE.on(`boost.suggestionClick`,this._onSuggestionClick.bind(this)),JE.on(`boost.syncOwnedTasks`,this.syncOwnedTasks.bind(this)),JE.on(`igApi.onIgAction`,this._onIgAction.bind(this)),YE.createAlarm(`boost.fetch-tasks`,{period:YE.time.HOUR,immediately:!0},this._fetchTasks.bind(this)),YE.createAlarm(`boost.fetch-actions`,{period:YE.time.HOUR,immediately:!0},this._fetchActions.bind(this)),setTimeout(()=>this.syncOwnedTasks(),5e3),YE.createAlarm(`boost.sync-owned-tasks`,{period:YE.time.HOUR},this._syncOwnedTasksPeriodic.bind(this)),YE.createAlarm(`boost.drop-tasks`,{period:YE.time.DAY,immediately:!0},this._dropOldTasks.bind(this))},_taskById(e){return Q.boost.tasks.find(t=>t.id===e)},_taskByUserId(e){return e?Q.boost.tasks.find(t=>!t.deactivatedOn&&t.suggestion.id===e)||Q.boost.tasks.find(t=>t.suggestion.id===e):null},_taskByUsername(e){return e?Q.boost.tasks.find(t=>!t.deactivatedOn&&t.suggestion.username===e)||Q.boost.tasks.find(t=>t.suggestion.username===e):null},_taskToSuggestion(e){let t={...e.suggestion},n=GE.controller.userFollowsAccount(t);return n&&(n===!0||t.following)&&(t.friendship_status={following:1}),delete t.following,t},_onGetSuggestions(){if(!Q.boost.enableShowSuggestions)return[];let e=Q.boost.tasks.filter(e=>!e.completedOn&&!e.deactivatedOn);if(!e.length)return[];let t=new Set,n=new Set([...Q.billing.recordedUsernames,...Q.allUsernames]);return e=e.filter(e=>!n.has(e.suggestion.username)).filter(e=>e.completed?.follows>=1?!1:!GE.controller.userFollowsAccount(e.suggestion)).sort(()=>Math.random()-.5).filter(e=>{let n=e.suggestion.username;return t.has(n)?!1:(t.add(n),!0)}),e.slice(0,5).map(this._taskToSuggestion)},_incrementStat(e,t){if(e.completed[t]=(e.completed[t]||0)+1,!e.completedOn){let{target:t,completed:n}=e;(n.follows>=1||n.views>=t.views)&&(e.completedOn=Date.now())}},async _fetchTasks(){if(!Q.boost.enableShowSuggestions)return;let e=(await qE.api.send(`/b/suggestions`,{noThrow:!0}))?.nodes||[];e.length&&Q.transaction(t=>{e.forEach(e=>{let n=t.boost.tasks.find(t=>t.id===e.id);n?Object.assign(n,e):(e.completed={views:0,clicks:0,hovers:0,follows:0},e.completedOn=null,t.boost.tasks.push(e))});let n=new Set(e.map(e=>e.id));t.boost.tasks.forEach(e=>{let t=n.has(e.id);(t&&e.deactivatedOn||!t&&!e.deactivatedOn)&&(e.deactivatedOn=t?null:Date.now())})})},async _dropOldTasks(){let e=14*YE.time.DAY,t=Q.boost.tasks.filter(t=>t.deactivatedOn&&Date.now()-t.deactivatedOn>e||t.completedOn&&Date.now()-t.completedOn>e);if(!t.length)return;let n=new Set(t.map(e=>e.id));Q.transaction(e=>{e.boost.tasks=e.boost.tasks.filter(e=>!n.has(e.id))})},async _fetchActions(){let e=Q.scripts.growth;if(!e||e.status!==`active`&&e.status!==`running`||!Q.scripts.autopilot?.isWithinTimeframe)return;let t=Q.boost.skipActionsTill;if(t&&Date.now()<t)return;let n=(Q.scripts.autopilot.quota||0)-Q.activity.likesMadeToday();if(n<=0)return;let r=!Q.auth.profile?.isPrivate,i=(Q.auth.profile?.postCount||0)>0,a=Q.scripts.growth?.useCustomSources,o=r&&i&&!a,s={username:Q.auth.username,exchange:o,quota:n},c=await qE.api.send(`/b/actions`,{query:s,noThrow:!0});if(!c)return;let{nodes:l,sleep:u}=c;l?.length&&await this._processLikeActions(l),l?.length&&u&&(Q.boost.skipActionsTill=Date.now()+u)},async _processLikeActions(e){for(let t of e){if(t.type!==`like`)continue;let{username:e}=t;if(e)try{let{result:t,error:n}=await XE.api.fetchUserPosts(e,12);if(n){WE.log(`Skipping like action for ${e}: ${n.message||`fetch failed`}`);continue}if(!t?.length){WE.log(`Skipping like action for ${e}: no posts available`);continue}let r=t.filter(e=>Q.activity.isPostLiked(e)===null);if(!r.length){WE.log(`Skipping like action for ${e}: all posts already liked`);continue}let i=this._selectPostToLike(r),{result:a,error:o}=await XE.api.likePost(i);if(a?.status===`ok`)Q.activity.storeEvent({type:`like`,target:{id:i.owner,username:i.ownerName||e},post:i,by:`boost`}),KE.send(`boost:like-action`,{username:e}),WE.log(`Liked post ${i.code} from ${e}`);else throw o||Error(`Like failed`);let s=this._getLikeDelay();await YE.sleep(s)}catch(t){WE.error(`Failed to like post from ${e}:`,t);break}}},_selectPostToLike(e){if(!e.length)return null;if(e.length===1)return e[0];let t=Math.random(),n=0;for(let r=0;r<e.length-1;r++){let i=.8*.2**r;if(n+=i,t<n)return e[r]}return e[e.length-1]},_getLikeDelay(){return Math.round(YE.random({from:1e3,to:2e4,...ZE.config.scripts.likeDelayRandom}))},async _commitStats(e,t){let n=YE.ensureArray(t).map(e=>e.id),r={"x-stats":btoa(JSON.stringify([{[e]:n}]))},{deactivate:i}=await qE.api.send(`/b/stats`,{headers:r});this._deactivateTasks(i)},_deactivateTasks(e){!e||!e.length||(e=new Set(e),Q.transaction(t=>{t.boost.tasks.forEach(t=>{!e.has(t.id)||t.deactivatedOn||(t.deactivatedOn=Date.now())})}))},_onSuggestionView(e){let t=this._taskByUsername(e);t&&(this.uncommittedViews.add(t),clearTimeout(this.commitViewsTimeout),this.commitViewsTimeout=setTimeout(()=>{let e=Array.from(this.uncommittedViews);this.uncommittedViews=new Set,KE.send(`boost:suggestion-view`),Q.transaction(()=>{for(let t of e)this._incrementStat(t,`views`)}),this._commitStats(`views`,e)},100))},_onSuggestionHover(e){let t=this._taskByUsername(e);t&&(KE.send(`boost:suggestion-hover`),Q.transaction(()=>{this._incrementStat(t,`hovers`)}),this._commitStats(`hovers`,t))},_onSuggestionClick(e){let t=this._taskByUsername(e);t&&(KE.send(`boost:suggestion-click`),Q.transaction(()=>{this._incrementStat(t,`clicks`)}),this._commitStats(`clicks`,t))},_onIgAction({name:e,userId:t}={}){if(!Q.boost.tasks?.length||e!==`follow`||!t)return;t=YE.is.string(t)?t:String(t);let n=this._taskByUserId(t);n&&(KE.send(`boost:suggestion-follow`),Q.transaction(()=>{this._incrementStat(n,`follows`)}),this._commitStats(`follows`,n))},_hasRecentTasks(){let e=Date.now()-3*YE.time.DAY;return Q.boost.owned.some(t=>this._parseTimestamp(t.createdOn)>e)},_parseTimestamp(e){return e?typeof e==`number`?e:typeof e==`string`?new Date(e).getTime():null:null},async _syncOwnedTasksPeriodic(){this._hasRecentTasks()&&await this.syncOwnedTasks()},async syncOwnedTasks(){if(!Q.auth?.userId||!Q.auth?.username)return{synced:!1};let e={ownerUserId:Q.auth.userId,ownerUsername:Q.auth.username},t=(await qE.api.send(`/b/tasks`,{query:e,noThrow:!0}))?.tasks||[];return Q.transaction(e=>{t.forEach(t=>{t._id&&(t.id=t._id,delete t._id),t.createdOn&&=this._parseTimestamp(t.createdOn);let n=t.data?.completed;if(n){n.ts||=Date.now();let r=e.boost.owned.find(e=>e.id===t.id);if(!r?.data?.completed)t.data.completed=[n];else{let e=r.data.completed[r.data.completed.length-1];!e||e.views!==n.views||e.hovers!==n.hovers||e.clicks!==n.clicks||e.follows!==n.follows?t.data.completed=[...r.data.completed,n]:t.data.completed=r.data.completed}}let r=e.boost.owned.findIndex(e=>e.id===t.id);r===-1?e.boost.owned.push(t):e.boost.owned[r]=t})}),{synced:!0,count:t.length}}}})),$E=o((()=>{QE()})),eD=o((()=>{Vx(),Ux(),Jx(),Xx(),OS(),FS()})),tD,nD,rD,iD,aD,oD=o((()=>{({$analytics:tD,$network:nD,$env:rD,$s:iD,$bus:aD}=app),tD.controller={init(){return this.throttle=.05,rD.is.bg&&aD.on(`analytics.send`,this.send.bind(this)),this},send(e,t={}){if(rD.is.development&&(t&&Object.keys(t).length>0?tD.log(`sending ${e}`,t):tD.log(`sending ${e}`)),aD.send(`analytics.onBeforeSend`,e),!this.isEnabled(e))return;t.env=rD.env;let n=iD.username||`anonymous`,r=Date.now(),i={"x-event":btoa(JSON.stringify({name:e,uid:n,time:r,payload:t}))};nD.api.send(`/analytics`,{headers:i})},isEnabled(e){if(rD.is.development)return!1;if(e.startsWith(`pageview`)){let e=iD.abTesting.hash||0;return e?e<this.throttle:!1}return!0}},tD.send=tD.controller.send.bind(tD.controller)})),sD=o((()=>{oD()})),cD,lD,uD,dD,fD,pD,mD=o((()=>{({$later:cD,$store:lD,$bus:uD,$fetcher:dD,$files:fD,$utils:pD}=app),cD.controller={async init(){this._cleanupState(),cD.scheduler.init(),cD.musicController.init(),await this._ensureMediaWithAndHeight(),uD.on(`later.ignoreFetchCache`,this._ignoreFetchCache.bind(this))},_cleanupState(){lD.transaction(e=>{e.later.posts.filter(e=>e.status===`posting`).forEach(e=>e.status=`scheduled`)})},_ignoreFetchCache(){dD.ignoreCache()},async _ensureMediaWithAndHeight(){for(let e of cD.proxy.getAllStates())for(let t of e.later.posts)for(let e of t.mediaList)try{let t=await fD.controller.read(e.fileId),{width:n,height:r}=await pD.media.getDimensions(t);e.width=n,e.height=r}catch(t){cD.error(t),e.width=0,e.height=0}}}})),hD,gD,_D,vD,yD=o((()=>{({$later:hD,$mobx:gD,$utils:_D,$files:vD}=app),hD.musicController={init(){this._saveUsedIgTracks=_D.queue(this)(this._saveUsedIgTracks),this._initIgTracksSaver()},_initIgTracksSaver(){let e;gD.reaction(()=>hD.proxy.getAllStates().flatMap(e=>e.later.posts).flatMap(e=>e.mediaList).map(e=>e.music.selectedTrackId).filter(e=>this._isIgTrackId(e)).filter(_D.unique).sort().join(`-`),()=>{clearTimeout(e),e=setTimeout(()=>this._saveUsedIgTracks(),_D.time.MINUTE)},{fireImmediately:!0})},async _saveUsedIgTracks(){for(let e of hD.proxy.getAllStates())for(let t of e.later.posts)for(let e of t.mediaList){let t=e.music.selectedTrackId;if(!this._isIgTrackId(t))continue;let n=e.music.selectedTrackUrl;if(n.startsWith(`blob:`))continue;let r=`music`,i=`ig-${t}`,a=`${r}.${i}`;if(!await vD.controller.has(a)){hD.logDev(`Save IG track with id "${t}"`);let e=await fetch(n).then(e=>e.blob());await vD.controller.save(e,r,i)}e.music.igTrackFileId=a}},_isIgTrackId(e){return _D.is.string(e)&&e!==`custom`}}})),bD,xD,SD,CD,wD,TD,ED,DD,OD,kD,AD,jD,MD,ND=o((()=>{({$later:bD,$store:xD,$files:SD,$utils:CD,$auth:wD,$bus:TD,$analytics:ED,$igApi:DD,$starter:OD,$fusion:kD,$editor:AD,$startup:jD,$s:MD}=app),bD.scheduler={init(){this._publishing=!1,this._lastPublishedAt=0,this._publisher=null;async:this._setup()},async _setup(){await jD.controller.waitReady(),this._schedule(),xD.reaction(()=>bD.proxy.getConnectedUsersPosts().map(e=>`${e.id}-${e.date}-${e.status}`).join(`:`),()=>this._schedule(),!1),xD.reaction(e=>e.later.selectedPostId,()=>this._schedule(),!1)},_schedule(){if(this._publishing)return;let e=bD.proxy.getConnectedUsersPosts().filter(e=>e.status===`scheduled`).sort((e,t)=>e.date-t.date).at(0);if(!e)return;let t={owner:bD.proxy.getPostOwnerState(MD,e.id)?.auth.username||null,caption:e.caption},n,r=Date.now();if(n=MD.settings.laterAutoRetry===0?e.date<r-5*CD.time.MINUTE:MD.settings.laterAutoRetry===-1?!1:e.date<r-MD.settings.laterAutoRetry,n){bD.log(`too old to publish`,t),bD.proxy.updatePost(e.id,e=>{e.status=`failed`,e.error={message:`Chrome was offline at the given time`}});return}if(e.date>r){let n=new Date(e.date).toString().split(` `).slice(1,4).join(` `);bD.log(`scheduled for ${n}`,t),CD.createAlarm(`later.schedule`,{when:Date.now()+Math.max(0,e.date-r),recreate:!0},()=>this._schedule());return}(async()=>{try{bD.log(`publish`,t),this._publishing=!0,OD.controller.online?await this._publishSafe(e):await OD.controller.waitForOnline(),this._publishing=!1}finally{setTimeout(()=>this._schedule())}})()},async _publishSafe(e){let t=bD.proxy.getPostPublishTypeForAnalytics(e);wD.controller.toggleSessionWatcher(!1);try{await this._publish(e),ED.send(`later:publish-success`,{type:t})}catch(n){bD.error(n),this._publisher&&await this._publisher.cleanupNetRules();let r=n.message?.slice(0,100)||`unknown`;ED.send(`later:publish-error`,{type:t}),ED.send(`later:publish-error-message`,{message:r}),bD.proxy.updatePost(e.id,e=>{e.status=`failed`,e.error={message:`Error happened during posting`,details:n.message?n.message.slice(0,300):null}})}wD.controller.toggleSessionWatcher(!0),this._publisher=null,this._lastPublishedAt=Date.now()},async _publish(e){let t=()=>bD.proxy.getPostOwnerState(MD,e.id);bD.proxy.updatePost(e.id,e=>{e.status=`posting`,e.error=null});let n=MD.userId,r=t().auth.userId;n===r&&await wD.controller.actualizeCookies();let i=Date.now()-this._lastPublishedAt,a=kD.config.later.minTimeBetweenPublishing;i<a&&await CD.sleep(a-i);let o=t().auth.cookies.reduce((e,t)=>(e[t.name]=t.value,e),{});if(OD.controller.offline){bD.proxy.updatePost(e.id,e=>e.status=`scheduled`);return}let s=(e.caption||``).slice(0,kD.config.later.maxCaptionLength),c=new DD.Publisher(o);if(this._publisher=c,e.type===`post`||e.type===`reel`){let t=AD.validateCaption(s);if(t){bD.proxy.updatePost(e.id,e=>{e.status=`failed`,e.error={message:`Error happened during posting`,details:t}});return}}for(let t of e.mediaList){let n=bD.proxy.getMediaError(e,t);if(n){bD.proxy.updatePost(e.id,e=>{e.status=`failed`,e.error={message:`Error happened during posting`,details:n.message}});return}}if(await c.setupNetRules(),e.type===`post`){let t=e.mediaList[0],n=this._getPostDataForIgApi(e,t);if(e.mediaList.length>1){let t=await this._prepareCarouselItems(e);await c.publishCarousel(t,{...n,mentions:null})}else if(t.isVideo){let r=await this._readAndEncodeMedia(e,t),i=await SD.controller.read(t.coverId);await c.publishReel(r,i,n)}else if(t.music.selectedTrackId||e.type===`reel`){let r=await this._readAndEncodeMedia(e,t),i=await SD.controller.read(t.fileId);await c.publishReel(r,i,n)}else{let r=await this._readAndEncodeMedia(e,t);await c.publishPhoto(r,n)}}else if(e.type===`reel`)for(let t of e.mediaList){let n=t===e.mediaList[0],r=await this._readAndEncodeMedia(e,t,{forceVideo:!0}),i=await SD.controller.read(t.coverId??t.fileId);await c.publishReel(r,i,{...this._getPostDataForIgApi(e,t),...!n&&{caption:``},shareToFeed:!!e.shareToFeed}),t!==e.mediaList.at(-1)&&await CD.sleep(kD.config.later.minTimeBetweenPublishing)}else if(e.type===`story`)for(let t of e.mediaList){let n=await this._readAndEncodeMedia(e,t),r=AD.dataController.getStoryLinkForIgApi(t.link,t.isVideo),i=AD.dataController.getStoryLocationForIgApi(t.location),a=AD.dataController.getStoryMentionsForIgApi(t.mention),o=t.attachedPost?.share?t.attachedPost:null;CD.media.isImage(n)?await c.publishStoryPhoto(n,{link:r,location:i,mentions:a,besties:e.options.besties,post:o}):await c.publishStoryVideo(n,{link:r,location:i,mentions:a,besties:e.options.besties,post:o}),t!==e.mediaList.at(-1)&&await CD.sleep(kD.config.later.minTimeBetweenPublishing)}bD.proxy.updatePost(e.id,e=>{e.status=`posted`,e.date=Date.now()}),setTimeout(()=>{TD.send(`later.updateIgPosts`,r,!0)}),e.instant||MD.hasProPaid()&&ED.send(`pro-paid-usage:later`),await c.cleanupNetRules()},async _prepareCarouselItems(e){let t=[];for(let n of e.mediaList){let r=await this._readAndEncodeMedia(e,n),i=CD.media.isVideo(r),a=i?await SD.controller.read(n.coverId??n.fileId):null,o=this._getMentionsDataForIgApi(n);t.push({blob:r,cover:a,mentions:o,isVideo:i})}let n;{let e=t[0];if(e.isVideo){let{ratio:t}=await CD.loadVideoMetadata(e.blob);n=t}else{let{ratio:t}=await CD.loadImage(e.blob);n=t}}let r;{let e=kD.config.later.minImageRatio,t=kD.config.later.maxImageRatio;r=Math.max(e,Math.min(n,t))}for(let e of t)e===t[0]&&n===r||e.isVideo||(e.blob=await CD.scaler.scaleToFitRatio(e.blob,r));return t.filter(e=>{let t=kD.config.later.maxCarouselVideoDurationSec;return!(e.isVideo&&e.duration>t)}).map(e=>({blob:e.blob,cover:e.cover,mentions:e.mentions}))},async _readAndEncodeMedia(e,t,{forceVideo:n=!1}={}){let r=await SD.controller.read(t.fileId),{width:i,height:a}=await CD.media.getDimensions(r),o=i/a,s=kD.config.later,c=e.type===`story`,l=CD.file.isImage(r),u=c?s.storyRatio:l?s.minImageRatio:s.minVideoRatio,d=c?s.storyRatio:l?s.maxImageRatio:s.maxVideoRatio;o<u?i=Math.round(a*u):o>d&&(a=Math.round(i/d));let f=await AD.dataController.getMusicDataForEncoder(t.music),p=AD.dataController.getPhotoDurationForEncoder(r,t.music,n),m=[];if(e.type===`story`){let e=AD.dataController.getLinkSticker(t.link),n=AD.dataController.getTextSticker(t.text),r=AD.dataController.getLocationSticker(t.location),i=AD.dataController.getMentionStickers(t.mention),a=AD.dataController.getWatermarkSticker(t.link,t.isVideo);e&&m.push(e),n&&m.push(n),r&&m.push(r),a&&m.push(a),m.push(...i)}return await AD.encoder.transform(r,{width:i,height:a,cover:t.options.cover,muted:t.options.muted,music:f,stickers:m,photoDuration:p,onProgress:e=>{bD.logDev(`Encode progress: ${e}`)}})},_getPostDataForIgApi(e,t){let n=(e.caption||``).slice(0,kD.config.later.maxCaptionLength),r={hideLikes:e.options.hideLikes,disableComments:e.options.disableComments},i=null;t.location.selected&&(i={id:t.location.selected.id,lat:t.location.selected.lat,lng:t.location.selected.lng});let a=this._getMentionsDataForIgApi(t),o=t.music.selectedTrackId,s=CD.is.string(o)&&o!==`custom`;return{caption:n,options:r,location:i,mentions:a,shareToFeed:!0,trackId:s?o:null}},_getMentionsDataForIgApi(e){return[...e.mention.users.map(e=>({userId:e.id,x:e.sticker.x,y:e.sticker.y,isCollaborator:!1})),...e.collaboration.users.map(e=>({userId:e.id,x:e.sticker.x,y:e.sticker.y,isCollaborator:!0}))]}}})),PD=o((()=>{mD(),yD(),ND(),WS()}));function FD(){RD.on(`cleanup.clean-up-state`,()=>{let e=Date.now();return ID(e),e})}function ID(e){$.transaction(()=>{$.hasPro()||($.ghost.enabled=!1),$.cleanupId=e,$.sidebar.selectedTabId=null,$.sidebar.isOpen=!1,$.igView.creationCardShown=!1,$.igView.fullscreenWidth=460,$.billing.purchasingPlan=null,$.billing.selectedUserId=null,$.billing.snapshot.loading=!1,$.billing.snapshot.accountScreen=null,$.billing.upsell.show=!1,$.billing.upsell.userId=null,$.billing.upsell.message=null,$.tagAssist.shown=!1,$.tagAssist.query=``,$.tagAssist.searching=!1,$.tagAssist.errorCode=null,$.tagAssist.selectedTabId=`search`,$.tagAssist.selectedGroupId=`medium`,$.tagAssist.igSelectedTags=[],$.tagAssist.fcsSelectedTags=[],$.tagAssist.sidebarSelectedTags=[],$.tagAssist.sidebarSelectedTagsAsText=``,$.tagAssist.ladderEngagementSort=null,$.tagAssist.summaryEngagementSort=`descending`,$.tagAssist.ladderPostCountSort=null,$.tagAssist.summaryPostCountSort=null,$.tagAssist.ladder=null,$.tagAssist.ladderLoadingTags=[],$.tagAssist.newCollection.name=``,$.tagAssist.newCollection.text=``,$.tagAssist.newCollection.showForm=!1,$.tagAssist.collectionsLoadingTags=[];for(let e of $.tagAssist.collections)e.editing=!1,e.editName=``,e.editText=``;let t=($.tagAssist.accountStats[$.userId]||null)?.mostUsedTags||[];t.length>0&&($.tagAssist.searching=!0,$.tagAssist.query=t.slice(0,2).map(e=>`#${e}`).join(` `)),$.musicAssist.shown=!1,$.later.showBodyPanel=!1,$.later.showAssistPanel=!1,$.later.selectedUserId=$.userId,$.later.selectedPostId=null,$.later.selectedPillId=null,$.later.selectedIgDate=null,$.later.errors=[],$.later.processing=!1,$.later.calendar.periodStart=Date.now(),$.later.ig.loading=!1,$.later.dnd.dragPostId=null,$.later.dnd.dragOverPostId=null,$.later.dnd.dragOverDay=null,$.later.dnd.dragOverTime=null})}var LD,RD,$,zD=o((()=>{({$cleanup:LD,$bus:RD,$s:$}=app),LD.controller={init:FD,cleanUpState:ID}})),BD=o((()=>{zD()})),VD,HD,UD,WD,GD,KD,qD=o((()=>{({$fusion:VD,$bus:HD,$utils:UD,$env:WD,$fetcher:GD,$s:KD}=app),VD.controller={popupTabId:null,newConfig:null,async init(){this.MIN_CHECK_FREQUENCY=15*UD.time.MINUTE,this._lsConfig=await UD.ls.get(`fusion.config`),HD.on(`fusion.check-new-version`,this.checkNewVersion.bind(this)),HD.on(`fusion.popup-tab-id`,e=>this.popupTabId=e),HD.on(`fusion.getLsConfig`,()=>this._lsConfig),this.checkNewVersionNowAndPeriodically(),this.saveNewConfigOnPopupClose(),this.handleUpdateNowClickInPopup()},checkNewVersionNowAndPeriodically(){UD.createAlarm(`fusion.refresh-config`,{period:6*UD.time.HOUR,immediately:!0},this.checkNewVersion.bind(this))},saveNewConfigOnPopupClose(){chrome.tabs.onRemoved.addListener(async e=>{e!==this.popupTabId||!this.newConfig||await this.saveNewConfigAndReload()})},async handleUpdateNowClickInPopup(){HD.on(`fusion.update-now-click`,async()=>{await HD.send(`fusion.reload-popup`,1e3),await this.saveNewConfigAndReload()})},async saveNewConfigAndReload(){this.newConfig&&(this._lsConfig=this.newConfig,await UD.ls.set(`fusion.config`,this.newConfig),KD.installedAt&&Date.now()-KD.installedAt>UD.time.MINUTE&&chrome.runtime.reload())},async checkNewVersion(){{let e=Number(await UD.ls.get(`fusion.last-check-on`));if(e&&Date.now()<e+this.MIN_CHECK_FREQUENCY)return;await UD.ls.set(`fusion.last-check-on`,Date.now())}let e=this.getConfig(),t=`${WD.options.apiUrl}/fusion?version=${e.version}`;GD.ignoreCache();let n=(await GD.fetchText(t,{credentials:`omit`})).replace(/&amp;/g,`&`).replace(/&#34;/g,`\\"`).replace(/&#39/g,`'`).replace(/&lt;/g,`<`).replace(/&gt;/g,`>`),r=JSON.parse(n);if(!r.config)return;let i=JSON.parse(JSON.stringify(e));this.newConfig=this.recursiveAssign(i,r.config),await HD.send(`startup.ppDesktopReady`)||await HD.send(`startup.ppMobileReady`)?await HD.send(`fusion.new-version-available`):await this.saveNewConfigAndReload()},recursiveAssign(e,t){for(let n in t)UD.is.object(e[n])&&UD.is.object(t[n])?this.recursiveAssign(e[n],t[n]):e[n]=t[n];return e},getConfig(){let e=this._lsConfig;return e&&e.version>VD.defaultConfig.version?e:VD.defaultConfig}},Object.defineProperty(VD,`config`,{get:VD.controller.getConfig.bind(VD.controller)})})),JD=o((()=>{qD(),KS()})),YD,XD,ZD,QD,$D=o((()=>{({$starter:YD,$s:XD,$utils:ZD,$auth:QD}=app),YD.controller={init(){this._onOnline=ZD.createEmitter(),this._onOffline=ZD.createEmitter(),this._watchOnlineStatus(),this._updateUserWhenOnlineStatusChanges(),setInterval(()=>this._recoverIfOffline(),5*ZD.time.MINUTE)},get online(){return navigator.onLine},get offline(){return!this.online},async waitForOnline(){this.online||await new Promise(e=>{let t=()=>{e(),this._onOnline.off(t)};this._onOnline(t)})},_watchOnlineStatus(){if(!navigator.connection)return;let e=navigator.onLine;navigator.connection.addEventListener(`change`,()=>{navigator.onLine!==e&&(e=navigator.onLine,e?this._onOnline():this._onOffline())})},_updateUserWhenOnlineStatusChanges(){this._onOnline(()=>{YD.log(`going online`),XD.userId===null&&QD.controller.updateUser()}),this._onOffline(()=>{YD.log(`going offline`),XD.userId!==null&&QD.controller.updateUser()})},_recoverIfOffline(){XD.userId===null&&(YD.log(`trying to recover from offline`),QD.controller.updateUser())}}})),eO=o((()=>{$D()})),tO=o((()=>{$S()}));function nO(){rO(),uO.on(`tagAssist.updateAccountStats`,iO)}function rO(){oO.reaction(e=>e.auth.userId,()=>{iO()})}async function iO(e=0){let t=sO.userId;if(!t)return;let n=Date.now(),r=aO.proxy.getAccountStats(),i=r&&n-r.lastScanOn;if(i&&i<cO.options.tagAssist.accountStatsTtl)return;let a=sO.username,o=await lO.api.fetchUserPosts(a,42);if(o.error){if(e<2){iO(e+1);return}aO.error(`failed to update account stats`,o.error);return}let s=o.result,c=0,l=0;for(let e of s)c+=lO.api.normalizePostStat24h(e.stats.likes,e.on),l+=lO.api.normalizePostStat24h(e.stats.comments,e.on);s.length>0&&(c=Math.round(c/s.length),l=Math.round(l/s.length));let u=aO.utils.sortByFrequency(s.map(e=>e.caption||``).map(e=>aO.utils.extractTags(e,!0)));oO.transaction(e=>{let n=e.tagAssist.accountStats[t]||{};e.tagAssist.accountStats[t]={avgLikes:c,avgComments:l,mostUsedTags:u.slice(0,3),lessUsedTags:u.slice(3,50),lastScanOn:Date.now(),tagDataCollectedOn:n.tagDataCollectedOn||null}})}var aO,oO,sO,cO,lO,uO,dO=o((()=>{({$tagAssist:aO,$store:oO,$s:sO,$env:cO,$igApi:lO,$bus:uO}=app),aO.accountStatsController={init:nO}})),fO,pO,mO,hO,gO,_O,vO=o((()=>{({$tagAssist:fO,$bus:pO,$utils:mO,$env:hO,$fetcher:gO,$s:_O}=app),fO.controller={init(){fO.accountStatsController.init(),pO.on(`tag-assist.send-tag-to-redis`,this.sendTagToRedis.bind(this)),this._pendingTags=new Map,this._flushTimeout=null},sendTagToRedis(e){!e||!e.name||(this._pendingTags.set(e.name,e),this._flushTimeout&&clearTimeout(this._flushTimeout),this._flushTimeout=setTimeout(()=>{this._flushPendingTags()},5*mO.time.SECOND))},_flushPendingTags(){if(this._pendingTags.size===0)return;let e=Array.from(this._pendingTags.values());this._pendingTags.clear(),this._flushTimeout=null,this.sendTagsToRedis(e)},async sendTagsToRedis(e){if(!e||e.length===0)return;let t=_O.userId;if(t)try{let n=e.map(fO.utils.compressTag),r=mO.createUrl(hO.options.tagAssist.apiUrl,{id:t});await gO.fetchJson(r,{method:`POST`,body:JSON.stringify({tags:n}),headers:{"Content-Type":`application/json`},credentials:`omit`})}catch(e){fO.error(`failed to send tags to redis`,e)}}}})),yO,bO,xO=o((()=>{({$tagAssist:yO,$s:bO}=app),yO.proxy={getAccountStats(){let e=bO.userId;return bO.tagAssist.accountStats[e]||{}}}})),SO=o((()=>{oC(),dO(),vO(),xO()})),CO,wO=o((()=>{({$dev:CO}=app),CO.controller={init(){}}})),TO=o((()=>{wO()})),EO,DO=o((()=>{({$inspiration:EO}=app),EO.controller={init(){}}})),OO=o((()=>{DO(),uC()})),kO,AO,jO,MO,NO=o((()=>{({$lifecycle:kO,$analytics:AO,$s:jO,$store:MO}=app),kO.controller={init(){this._setupUninstallUrl(),jO.isAcknowledged(`install`)||(jO.acknowledge(`install`),this.onInstalled())},_setupUninstallUrl(){MO.reaction(e=>e.allUsernames,e=>{let t=`https://inssist.com/uninstall`;if(e.length>0){let n=btoa(JSON.stringify({usernames:e}));chrome.runtime.setUninstallURL(`${t}?u=${n}`)}else chrome.runtime.setUninstallURL(t)})},onInstalled(){chrome.tabs.create({url:`https://www.instagram.com/`}),AO.send(`install`)}}})),PO=o((()=>{NO()}));async function FO(){await IO()}async function IO(){for(let e of RO){let t=(await chrome.cookies.getAll({url:e})).filter(e=>e.sameSite===`unspecified`);await Promise.all(t.map(async t=>{e.startsWith(`http://`)?await chrome.cookies.remove({url:e,name:t.name}):await chrome.cookies.set({url:e,name:t.name,value:t.value,domain:t.domain,path:t.path,secure:!0,httpOnly:t.httpOnly,sameSite:`no_restriction`,expirationDate:t.expirationDate,storeId:t.storeId})}))}}var LO,RO,zO=o((()=>{({$sameSiteFix:LO}=app),LO.controller={init:FO},RO=[`http://*.instagram.com/*`,`https://*.instagram.com/*`]})),BO=o((()=>{zO()})),VO=o((()=>{mC()})),HO,UO,WO=o((()=>{({$webRequest:HO,$netRules:UO}=app),HO.controller={async init(){this._tabRuleIds=[],await this._registerGlobalRules()},async _registerGlobalRules(){await UO.add([{url:`instagram.com/*service-worker*`,block:!0},{url:`*://app.inssist.com/*`,redirect:chrome.runtime.getURL(`/inssist.html`)},{url:[`instagram.com/*`,`facebook.com/*`,`inssist.com/*`,`onfastspring.com/*`],res:{"x-frame-options":null,"content-security-policy":null,"content-security-policy-report-only":null}},{url:`instagram.com/*`,resources:[`sub_frame`],req:{"sec-fetch-dest":`document`}},{url:`instagram.com/*`,resources:[`xmlhttprequest`],req:{origin:`https://www.instagram.com`}},{url:`instagram.com/*`,res:{"permissions-policy":null}},{url:`*://fc.inssist.com/*`,res:{"access-control-allow-origin":`https://www.instagram.com`,"access-control-allow-credentials":`true`}},{url:`*://storage.inssist.com/*`,res:{"access-control-allow-origin":`https://www.instagram.com`,"access-control-allow-credentials":`true`}}])},async _getEntropyHeaders(){let e=await navigator.userAgentData.getHighEntropyValues([`model`,`platformVersion`,`fullVersionList`]);return{"sec-ch-ua-model":`"${e.model}"`,"sec-ch-ua-platform-version":`"${e.platformVersion}"`,"sec-ch-ua-full-version-list":e.fullVersionList.map(e=>`"${e.brand}";v="${e.version}"`).join(`, `)}}}})),GO=o((()=>{WO()})),KO=o((()=>{TC()})),qO,JO,YO=o((()=>{({$offscreen:qO,$bus:JO}=app),qO.controller={async init(){await this._createOffscreenPage(),await JO.poll(`startup.osReady`)},async _createOffscreenPage(){await chrome.offscreen.hasDocument()&&await chrome.offscreen.closeDocument(),await chrome.offscreen.createDocument({url:chrome.runtime.getURL(`/offscreen.html`),reasons:[`BLOBS`,`IFRAME_SCRIPTING`],justification:`convert images to jpg`})}}})),XO=o((()=>{YO()})),ZO,QO,$O=o((()=>{({$netRules:ZO,$utils:QO}=app),ZO.controller={async init(){ZO.add=this.add.bind(this),ZO.remove=this.remove.bind(this),ZO.getRules=this.getRules.bind(this),this._lastRuleId=1,await this._dropAllRules()},async add(e){let t=QO.ensureArray(e).map(e=>this._declToRules(e)).flat();return await chrome.declarativeNetRequest.updateSessionRules({addRules:t}),t.map(e=>e.id)},async remove(e){let t=QO.ensureArray(e);await chrome.declarativeNetRequest.updateSessionRules({removeRuleIds:t})},async getRules(){return await chrome.declarativeNetRequest.getSessionRules()},_declToRules({url:e=null,tabId:t=null,block:n=!1,redirect:r=null,req:i=null,res:a=null,resources:o=null,priority:s=1}){let c;return n?c={type:`block`}:r?(o||=[`main_frame`,`sub_frame`],c={type:`redirect`,redirect:{url:r}}):(i||a)&&(c={type:`modifyHeaders`,requestHeaders:this._toHeaderActions(i),responseHeaders:this._toHeaderActions(a)}),QO.ensureArray(e).map(e=>e.includes(`//`)?[e]:[`*://${e}`,`*://*.${e}`]).flat().map(e=>({id:this._lastRuleId++,priority:s,condition:{resourceTypes:o||this._getAllResourceTypes(),...e&&{urlFilter:e},...t&&{tabIds:[t]}},action:c}))},_toHeaderActions(e=null){return e?Object.entries(e).map(([e,t])=>({header:e,...t===null&&{operation:`remove`},...t!==null&&{operation:`set`,value:typeof t==`number`?String(t):t}})):null},_getAllResourceTypes(){return[`main_frame`,`sub_frame`,`stylesheet`,`script`,`image`,`font`,`object`,`xmlhttprequest`,`ping`,`csp_report`,`media`,`websocket`,`webtransport`,`webbundle`,`other`]},async _dropAllRules(){let e=await chrome.declarativeNetRequest.getSessionRules();e.length!==0&&await chrome.declarativeNetRequest.updateSessionRules({removeRuleIds:e.map(e=>e.id)})}}})),ek=o((()=>{$O()})),tk=o((()=>{jC()})),nk,rk,ik,ak=o((()=>{({$timer:nk,$bus:rk,$utils:ik}=app),nk.aliveController={init(){this._startedAt=Date.now(),this._alarms=0,this._events=0,this._setupAlarm(),this._setupBus()},logStats(){let e=Date.now(),t=Math.floor((e-this._startedAt)/ik.time.MINUTE),n=`${Math.floor(t/60)}h ${t%60}m`,r=`${this._alarms} alarms`,i=`${this._events} events`;nk.log(`alive for: ${n}, ${r}, ${i}`)},_setupAlarm(){ik.createAlarm(`timer.alarm`,{period:ik.time.MINUTE},()=>this._alarms++)},_setupBus(){rk.on(`timer.ping`,()=>this._events++)}}})),ok,sk=o((()=>{({$timer:ok}=app),ok.controller={init(){ok.timingController.init(),ok.aliveController.init()}}})),ck,lk,uk=o((()=>{({$timer:ck,$bus:lk}=app),ck.timingController={init(){this._MAX_ID=2147483647,this._lastId=0,this._timerIds=new Set,this._setup()},_setup(){globalThis.setTimeout=(e,t,...n)=>{let r=this._generateId();return this._timerIds.add(r),lk.send(`timer.setTimeout`,r,t).then(()=>{this._timerIds.has(r)&&e(...n)}),r},globalThis.clearTimeout=e=>{this._timerIds.delete(e),lk.send(`timer.clearTimeout`,e)},globalThis.setInterval=(e,t,...n)=>{let r=this._generateId();return this._timerIds.add(r),lk.send(`timer.setInterval`,r,t),lk.on(`timer.setIntervalCall:${r}`,()=>e(...n)),r},globalThis.clearInterval=e=>{this._timerIds.delete(e),lk.off(`offscreen.setIntervalCall:${e}`),lk.send(`timer.clearInterval`,e)}},_generateId(){return this._lastId+=1,this._lastId===this._MAX_ID&&(this._lastId=1),this._lastId}}})),dk=o((()=>{ak(),sk(),uk()})),fk,pk,mk=o((()=>{({$embed:fk,$bus:pk}=app),fk.controller={init(){pk.on(`embed.openMobileView`,this._openMobileView,this)},_openMobileView(){chrome.tabs.create({url:chrome.runtime.getURL(`/inssist.html`),active:!0})}}})),hk=o((()=>{mk()})),gk,_k,vk,yk=o((()=>{({$peer:gk,$bus:_k,$utils:vk}=app),gk.controller={init(){gk.ping=this._ping.bind(this),vk.getter(gk,`id`,()=>this._id),this._id=`bg`},async _ping(e){return e===this._id?!0:await _k.send(`peer.ping[${e}]`)}}})),bk=o((()=>{yk()})),xk,Sk,Ck,wk,Tk=o((()=>{({$chrome:xk,$utils:Sk,$peer:Ck,$bus:wk}=app),xk.controller={async init(){this._stopListener={},wk.on(`chrome.createTree`,this._createTree,this),wk.on(`chrome.method`,this._method,this),wk.on(`chrome.addListener`,this._addListener,this),wk.on(`chrome.removeListener`,this._removeListener,this)},_createTree(e=chrome){if(Sk.is.function(e))return e.name===`addListener`?`<addListener>`:e.name===`hasListener`?`<hasListener>`:e.name===`hasListeners`?`<hasListeners>`:e.name===`removeListener`?`<removeListener>`:`<method>`;if(Sk.is.object(e)){let t={};for(let n in e)t[n]=this._createTree(e[n]);return t}return e},async _method(e,t,...n){return await Sk.get(chrome,e)[t](...n)},_addListener(e,t,n){let r=Sk.get(chrome,n),i=async(...e)=>await wk.send(`chrome.listener[${t}]`,...e);r.addListener(i);let a=setInterval(async()=>{await Ck.ping(e)||this._stopListener[t]()},Sk.time.HOUR);this._stopListener[t]=()=>{clearInterval(a),r.removeListener(i),delete this._stopListener[t]}},_removeListener(e){this._stopListener[e]?.()}}})),Ek=o((()=>{Tk()})),Dk=o((()=>{PC()})),Ok=o((()=>{KC()})),kk,Ak=o((()=>{({$editor:kk}=app),kk.controller={init(){kk.dataController.init(),kk.stickerController.init()}}})),jk=o((()=>{JC(),oT(),Ak(),nw(),ow(),pT()})),Mk,Nk,Pk,Fk,Ik,Lk,Rk=o((()=>{({$avatar:Mk,$bus:Nk,$idb:Pk,$fusion:Fk,$utils:Ik,$cdn:Lk}=app),Mk.controller={get config(){return Fk.config.avatar},async init(){Nk.on(`avatar.checkCacheSize`,this._debounceCacheSizeCheck.bind(this)),Ik.createAlarm(`avatar-cache-eviction`,{period:Ik.time.DAY},this.evictOldCache.bind(this))},_checkCacheSizeTimeout:null,_debounceCacheSizeCheck(){clearTimeout(this._checkCacheSizeTimeout),this._checkCacheSizeTimeout=setTimeout(()=>{this._checkCacheSizeTimeout=null,this.checkCacheSize()},1e4)},async fetchAndCache(e,t){if(!(!e||!t)&&!await this.isCached(e))try{let n=await Lk.fetchBlob(t);await this.set(e,n)}catch(e){Mk.error(`Avatar fetch error:`,e)}},async isCached(e){try{return await Pk.has(`avatar:${e}`)}catch(e){return Mk.error(`Avatar cache check error:`,e),!1}},async set(e,t){try{await Pk.set(`avatar:${e}`,{blob:t,created:Date.now(),lastAccessed:Date.now(),size:t.size})}catch(e){Mk.error(`Avatar cache set error:`,e)}},async evictOldCache(){try{let e=(await Pk.keys()).filter(e=>e.startsWith(`avatar:`)),t=this.config?.cacheEvictionDays||180*Ik.time.DAY,n=Date.now()-t;for(let t of e){let e=await Pk.get(t);e&&e.lastAccessed<n&&await Pk.remove(t)}}catch(e){Mk.error(`Avatar cache eviction error:`,e)}},async checkCacheSize(){try{let e=(await Pk.keys()).filter(e=>e.startsWith(`avatar:`)),t=this.config?.maxCacheSize||25*1024*1024,n=0,r=[];for(let t of e){let e=await Pk.get(t);e&&(n+=e.size||0,r.push({key:t,lastAccessed:e.lastAccessed||0,size:e.size||0}))}if(n<=t)return;r.sort((e,t)=>e.lastAccessed-t.lastAccessed);let i=0;for(let e of r){if(n-i<=t)break;await Pk.remove(e.key),i+=e.size}}catch(e){Mk.error(`Avatar cache size check error:`,e)}},async getCacheStats(){try{let e=(await Pk.keys()).filter(e=>e.startsWith(`avatar:`)),t=0,n=Date.now(),r=0;for(let i of e){let e=await Pk.get(i);e&&(t+=e.size||0,e.lastAccessed<n&&(n=e.lastAccessed),e.lastAccessed>r&&(r=e.lastAccessed))}return{count:e.length,totalSize:t,oldestAccess:n,newestAccess:r}}catch(e){return Mk.error(`Avatar cache stats error:`,e),{count:0,totalSize:0,oldestAccess:0,newestAccess:0}}}}})),zk=o((()=>{Rk()})),Bk,Vk,Hk,Uk,Wk=o((()=>{({$backup:Bk,$bus:Vk,$idb:Hk,$utils:Uk}=app),Bk.controller={async init(){await this._migrateBackupStateFromLsToIdb(),this._state=await this._readState(),this._started=!1,Vk.on(`backup.start`,this._start,this),Vk.on(`backup.takeKeys`,this._takeKeys,this),Vk.on(`backup.seedKeys`,this._seedKeys,this),Vk.on(`backup.isReviewed`,this._isReviewed,this),Vk.on(`backup.setReviewed`,this._setReviewed,this),this._state.reviewed&&this._start()},async _migrateBackupStateFromLsToIdb(){let e=await Uk.ls.get(`backup.state`);e&&(await Uk.ls.remove(`backup.state`),await Hk.backup.set(`state`,e))},_start(){this._started||(this._started=!0,Vk.on(`idb.change`,async e=>{for(let t of e)this._state.keys.includes(t.key)||this._state.keys.push(t.key);await this._writeState()}))},async _takeKeys(){let e=this._state.keys;return this._state.keys=[],await this._writeState(),e},async _seedKeys(){this._state.keys=await Hk.keys(),await this._writeState()},_isReviewed(){return this._state.reviewed},async _setReviewed(e=!0){this._state.reviewed=e,await this._writeState()},async _readState(){return await Hk.backup.get(`state`,{keys:[],reviewed:!1})},async _writeState(){await Hk.backup.set(`state`,this._state)}}})),Gk=o((()=>{Wk()})),Kk,qk,Jk=o((()=>{({$cdn:Kk,$bus:qk}=app),Kk.controller={init(){Kk.fetchBlob=this._fetchBlob.bind(this)},async _fetchBlob(e,t={}){return await qk.send(`offscreen.ensureFrame`),await qk.send(`cdn.fetchBlob`,e,t)}}})),Yk=o((()=>{Jk()})),Xk=o((()=>{cw()})),Zk,Qk,$k,eA,tA,nA,rA,iA,aA,oA,sA,cA,lA,uA,dA,fA,pA,mA,hA,gA,_A,vA,yA,bA,xA,SA,CA,wA,TA,EA,DA,OA,kA,AA,jA,MA,NA,PA,FA,IA,LA,RA=o((()=>{({$startup:Zk,$analytics:Qk,$auth:$k,$badge:eA,$boost:tA,$billing:nA,$bus:rA,$cleanup:iA,$dev:aA,$env:oA,$idb:sA,$igApi:cA,$inspiration:lA,$later:uA,$sentry:dA,$avatar:fA,$store:pA,$tagAssist:mA,$lifecycle:hA,$webRequest:gA,$sameSiteFix:_A,$activity:vA,$starter:yA,$fusion:bA,$netRules:xA,$offscreen:SA,$eventBus:CA,$timer:wA,$embed:TA,$peer:EA,$chrome:DA,$ffmpeg:OA,$editor:kA,$scripts:AA,$type:jA,$backup:MA,$cdn:NA,$mp:PA,$files:FA,$utils:IA,$s:LA}=app),Zk.controller={async init(){if(this._readyPromise=IA.createPromise(),this._preventBgInactive(),await oA.controller.init(),await jA.controller.init(),await rA.controller.init(),await EA.controller.init(),await DA.controller.init(),await CA.controller.init(),await wA.controller.init(),await SA.controller.init(),await sA.controller.init(),await pA.controller.init(),await xA.controller.init(),await _A.controller.init(),await bA.controller.init(),await FA.controller.init(),this._handleExtButtonClick(),!LA.userStates){rA.on(`startup.bgReady`,()=>!0),rA.on(`startup.applyBackupState`,async e=>{await sA.set(`state`,e);let t=await chrome.tabs.query({url:`*://*.instagram.com/*`});for(let e of t)await chrome.tabs.remove(e.id);await chrome.runtime.reload()});return}await dA.controller.init(),await gA.controller.init(),await cA.api.init(),await iA.controller.init(),await aA.controller.init(),await Qk.controller.init(),await uA.controller.init(),await lA.controller.init(),await $k.controller.init(),await nA.controller.init(),await eA.controller.init(),await tA.controller.init(),await yA.controller.init(),await vA.controller.init(),await TA.controller.init(),await OA.controller.init(),await PA.controller.init(),await kA.controller.init(),await mA.controller.init(),await fA.controller.init(),await hA.controller.init(),await AA.controller.init(),await MA.controller.init(),await NA.controller.init(),rA.on(`startup.bgReady`,()=>!0),oA.controller.logReady(),this._readyPromise.resolve()},async waitReady(){await this._readyPromise},_handleExtButtonClick(){chrome.action.onClicked.addListener(()=>{chrome.tabs.create({url:`https://www.instagram.com/`,active:!0})})},_preventBgInactive(){chrome.runtime.onStartup.addListener(()=>{Zk.log(`browser startup...`)})}},Zk.controller.init()})),zA=o((()=>{hT(),CT(),wT(),TT(),ET(),FT(),IT(),rE(),iE(),uE(),DE(),OE(),BE(),UE(),$E(),eD(),sD(),PD(),BD(),JD(),eO(),tO(),SO(),TO(),OO(),PO(),BO(),VO(),GO(),KO(),XO(),ek(),tk(),dk(),hk(),bk(),Ek(),Dk(),Ok(),jk(),zk(),Gk(),Yk(),Xk(),RA()}));o((()=>{p(),zA()}))()})();